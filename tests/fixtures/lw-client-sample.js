;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="b3ed7afe-ef4d-0462-0878-75a8f3ff3b62")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,166266,e=>{"use strict";var t=e.i(603509),n=e.i(424935),o=e.i(714818);let i=[{source:"/tag/:slug*",destination:"/w/:slug*",permanent:!0},{source:"/p/:slug*",destination:"/w/:slug*",permanent:!0},{source:"/compare/tag/:slug*",destination:"/compare/w/:slug*",permanent:!0},{source:"/revisions/tag/:slug*",destination:"/revisions/w/:slug*",permanent:!0},{source:"/users/:slug/reviews",destination:"/users/:slug/reviews/2019",permanent:!0},{source:"/votesByYear/:year",destination:"/nominatePosts/:year",permanent:!0},{source:"/2018/sketch",destination:"/posts/yeADMcScw8EW9yxpH/a-sketch-of-good-communication",permanent:!0},{source:"/2018/babble",destination:"/posts/i42Dfoh4HtsCAfXxL/babble",permanent:!0},{source:"/2018/babble2",destination:"/posts/wQACBmK5bioNCgDoG/more-babble",permanent:!0},{source:"/2018/prune",destination:"/posts/rYJKvagRYeDM8E9Rf/prune",permanent:!0},{source:"/2018/validity",destination:"/posts/WQFioaudEH8R7fyhm/local-validity-as-a-key-to-sanity-and-civilization",permanent:!0},{source:"/2018/alarm",destination:"/posts/B2CfMNfay2P8f2yyc/the-loudest-alarm-is-probably-false",permanent:!0},{source:"/2018/argument",destination:"/posts/NLBbCQeNLFvBJJkrt/varieties-of-argumentative-experience",permanent:!0},{source:"/2018/toolbox",destination:"/posts/CPP2uLcaywEokFKQG/toolbox-thinking-and-law-thinking",permanent:!0},{source:"/2018/technical",destination:"/posts/tKwJQbo6SfWF2ifKh/toward-a-new-technical-explanation-of-technical-explanation",permanent:!0},{source:"/2018/nameless",destination:"/posts/4ZwGqkMTyAvANYEDw/naming-the-nameless",permanent:!0},{source:"/2018/lotus",destination:"/posts/KwdcMts8P8hacqwrX/noticing-the-taste-of-lotus",permanent:!0},{source:"/2018/tails",destination:"/posts/asmZvCPHcB4SkSCMW/the-tails-coming-apart-as-metaphor-for-life",permanent:!0},{source:"/2018/honesty",destination:"/posts/xdwbX9pFEr7Pomaxv/meta-honesty-firming-up-honesty-around-its-edge-cases",permanent:!0},{source:"/2018/meditation",destination:"/posts/mELQFMi9egPn5EAjK/my-attempt-to-explain-looking-insight-meditation-and",permanent:!0},{source:"/2018/robust",destination:"/posts/2jfiMgKkh7qw9z8Do/being-a-robust-agent",permanent:!0},{source:"/2018/punish",destination:"/posts/X5RyaEDHNq5qutSHK/anti-social-punishment",permanent:!0},{source:"/2018/common",destination:"/posts/9QxnfMYccz9QRgZ5z/the-costly-coordination-mechanism-of-common-knowledge",permanent:!0},{source:"/2018/metacognition",destination:"/posts/K4eDzqS2rbcBDsCLZ/unrolling-social-metacognition-three-levels-of-meta-are-not",permanent:!0},{source:"/2018/web",destination:"/posts/AqbWna2S85pFTsHH4/the-intelligent-social-web",permanent:!0},{source:"/2018/market",destination:"/posts/a4jRN9nbD79PAhWTB/prediction-markets-when-do-they-work",permanent:!0},{source:"/2018/spaghetti",destination:"/posts/NQgWL7tvAPgN2LTLn/spaghetti-towers",permanent:!0},{source:"/2018/knowledge",destination:"/posts/nnNdz7XQrd5bWTgoP/on-the-loss-and-preservation-of-knowledge",permanent:!0},{source:"/2018/voting",destination:"/posts/D6trAzh6DApKPhbv4/a-voting-theory-primer-for-rationalists",permanent:!0},{source:"/2018/pavlov",destination:"/posts/3rxMBRCYEmHCNDLhu/the-pavlov-strategy",permanent:!0},{source:"/2018/commons",destination:"/posts/2G8j8D5auZKKAjSfY/inadequate-equilibria-vs-governance-of-the-commons",permanent:!0},{source:"/2018/science",destination:"/posts/v7c47vjta3mavY3QC/is-science-slowing-down",permanent:!0},{source:"/2018/rescue",destination:"/posts/BhXA6pvAbsFz3gvn4/research-rescuers-during-the-holocaust",permanent:!0},{source:"/2018/troll",destination:"/posts/CvKnhXTu9BPcdKE4W/an-untrollable-mathematician-illustrated",permanent:!0},{source:"/2018/long1",destination:"/posts/mFqG58s4NE3EE68Lq/why-did-everything-take-so-long",permanent:!0},{source:"/2018/long2",destination:"/posts/yxTP9FckrwoMjxPc4/why-everything-might-have-taken-so-long",permanent:!0},{source:"/2018/clickbait",destination:"/posts/YicoiQurNBxSp7a65/is-clickbait-destroying-our-general-intelligence",permanent:!0},{source:"/2018/active",destination:"/posts/XYYyzgyuRH5rFN64K/what-makes-people-intellectually-active",permanent:!0},{source:"/2018/daemon",destination:"/posts/nyCHnY7T5PHPLjxmN/open-question-are-minimal-circuits-daemon-free",permanent:!0},{source:"/2018/astro",destination:"/posts/Qz6w4GYZpgeDp6ATB/beyond-astronomical-waste",permanent:!0},{source:"/2018/birthorder1",destination:"/posts/tj8QP2EFdP8p54z6i/historical-mathematicians-exhibit-a-birth-order-effect-too",permanent:!0},{source:"/2018/birthorder2",destination:"/posts/QTLTic5nZ2DaBtoCv/birth-order-effect-found-in-nobel-laureates-in-physics",permanent:!0},{source:"/2018/gaming",destination:"/posts/AanbbjYr5zckMKde7/specification-gaming-examples-in-ai-1",permanent:!0},{source:"/2018/takeoff",destination:"/posts/AfGmsjGPXN97kNp57/arguments-about-fast-takeoff",permanent:!0},{source:"/2018/rocket",destination:"/posts/Gg9a4y8reWKtLe3Tn/the-rocket-alignment-problem",permanent:!0},{source:"/2018/agency",destination:"/posts/p7x32SEt43ZMC9r7r/embedded-agents",permanent:!0},{source:"/2018/faq",destination:"/posts/Djs38EWYZG8o7JMWY/paul-s-research-agenda-faq",permanent:!0},{source:"/2018/challenges",destination:"/posts/S7csET9CgBtpi7sCh/challenges-to-christiano-s-capability-amplification-proposal",permanent:!0},{source:"/2018/response",destination:"/posts/Djs38EWYZG8o7JMWY/paul-s-research-agenda-faq?commentId=79jM2ecef73zupPR4",permanent:!0},{source:"/2018/scale",destination:"/posts/bBdfbWfWxHN9Chjcq/robustness-to-scale",permanent:!0},{source:"/2018/coherence",destination:"/posts/NxF5G6CJiof6cemTw/coherence-arguments-do-not-imply-goal-directed-behavior",permanent:!0},{source:"/reviewVoting",destination:"/reviewVoting/2024",permanent:!0},{source:"/reviewQuickPage",destination:"/quickReview/2024",permanent:!0},{source:"/quickReview",destination:"/quickReview/2024",permanent:!0},{source:"/tagVoting",destination:"/tagActivity",permanent:!0},{source:"/nominatePosts",destination:"/nominatePosts/2024",permanent:!0},{source:"/tag/create",destination:"/w/create",permanent:!0},{source:"/tags/random",destination:"/wikitags/random",permanent:!0},{source:"/tagActivity",destination:"/wActivity",permanent:!0},{source:"/tagFeed",destination:"/wFeed",permanent:!0},{source:"/tags/dashboard",destination:"/w/dashboard",permanent:!0},{source:"/wiki",destination:"/wikitags/all",permanent:!0},{source:"/tags",destination:"/wikitags/all",permanent:!0},{source:"/tags/all",destination:"/wikitags/all",permanent:!0},{source:"/topics",destination:"/wikitags/all",permanent:!0},{source:"/topics/all",destination:"/wikitags/all",permanent:!0},{source:"/concepts",destination:"/wikitags/all",permanent:!0},{source:"/concepts/all",destination:"/wikitags/all",permanent:!0},{source:"/wikitags",destination:"/wikitags/all",permanent:!0},{source:"/meta",destination:"/tag/site-meta",permanent:!0},{source:"/bestoflesswrongadmin",destination:"/bestoflesswrongadmin/2025",permanent:!0},{source:"/leastwrong",destination:"/bestoflesswrong",permanent:!0},{source:"/curated",destination:"/recommendations",permanent:!0},{source:"/payments",destination:"/payments/admin",permanent:!0},{source:"/nominations2018",destination:"/nominations/2018",permanent:!0},{source:"/nominations2019",destination:"/nominations/2019",permanent:!0},{source:"/reviews2018",destination:"/reviews/2018",permanent:!0},{source:"/reviews2019",destination:"/reviews/2019",permanent:!0},{source:"/editor",destination:"/tag/guide-to-the-lesswrong-editor",permanent:!0},{source:"/shortform",destination:"/quicktakes",permanent:!0},{source:"/nominations",destination:"/reviewVoting/2024",permanent:!0},{source:"/reviews",destination:"/reviews/2024",permanent:!0},{source:"/reviewAdmin",destination:"/reviewAdmin/2024",permanent:!0},{source:"/user/:slug/overview",destination:"/users/:slug",permanent:!0},{source:"/posts/:id/:slug/:commentId",destination:"/posts/:id/:slug?commentId=:commentId",permanent:!0},{source:"/:section(r)/:subreddit(all|discussion|lesswrong)?/lw/:id*",destination:"/lw/:id*",permanent:!1},{source:"/:section(r)?/:subreddit(all|discussion|lesswrong)/lw/:id*",destination:"/lw/:id*",permanent:!1},{source:"/r/:subreddit(all|discussion|lesswrong)/lw/:id*",destination:"/lw/:id*",permanent:!1},{source:"/static/imported/:year/:month/:day/:imageName",destination:"https://raw.githubusercontent.com/tricycle/lesswrong/master/r2/r2/public/static/imported/:year/:month/:day/:imageName",permanent:!0},{source:"/.rss",destination:"/feed.xml",permanent:!0},{source:"/comments/.rss",destination:"/feed.xml?type=comments",permanent:!0},{source:"/rss/comments.xml",destination:"/feed.xml?type=comments",permanent:!0},{source:"/daily",destination:"/allPosts",permanent:!0},{source:"/promoted/.rss",destination:"/feed.xml?view=curatedRss",permanent:!0},{source:"/:section?/:subreddit?/:new?/.rss",destination:"/feed.xml",permanent:!0},{source:"/promoted",destination:"/allPosts?filter=curated&sortedBy=new&timeframe=allTime",permanent:!0},{source:"/featured",destination:"/allPosts?filter=curated&view=new&timeframe=allTime",permanent:!0},{source:"/recentComments",destination:"/allComments",permanent:!0},{source:"/inbox/:conversationId",destination:"/inbox?conversation=:conversationId",permanent:!0},{source:"/newcomments",destination:"/allComments",permanent:!0},{source:"/how-to-contribute",destination:"/posts/FoiiRDC3EhjHx7ayY/introducing-the-ai-alignment-forum-faq",permanent:!0},{source:"/submitted",has:[{type:"query",key:"id"}],destination:"/users/:id",permanent:!0},{source:"/threads",has:[{type:"query",key:"id"}],destination:"/users/:id",permanent:!0},{source:"/user",has:[{type:"query",key:"id"}],destination:"/users/:id",permanent:!0},{source:"/submit",destination:"/newPost",permanent:!0},{source:"/rss",destination:"/feed.xml",permanent:!0},{source:"/saved",destination:"/account",permanent:!0}];var r=e.i(644169);let a=function(e){var t=e||"/",n="",o="",i=t.indexOf("#");-1!==i&&(o=t.substr(i),t=t.substr(0,i));var r=t.indexOf("?");return -1!==r&&(n=t.substr(r),t=t.substr(0,r)),{pathname:t,search:"?"===n?"":n,hash:"#"===o?"":o}};function s(e){var s;let l,{location:d,onError:c=null,routePatterns:u}=e,m=a(function(e){for(let n of i){let{source:o,destination:i}=n,r={path:o,exact:!0,strict:!1,sensitive:!1},a=(0,t.matchPath)(e,r);if(a)return(0,t.applyParamsToPathname)(i,a.params)}return e}(d.pathname)),p=new URLSearchParams(m.search),h=new URLSearchParams(d.search);p.forEach((e,t)=>{h.set(t,e)});let g=h.toString()?"?".concat(h.toString()):"",f=m.hash||d.hash,{pathname:v}=m,x=(s=v,u.find(e=>(0,t.matchPath)(s,{path:e,exact:!0,strict:!1})));void 0===x&&(c?c(d.pathname):o.isClient&&(0,n.captureException)(Error("404 not found: ".concat(d.pathname))));let y=void 0!==x?(0,t.matchPath)(v,{path:x,exact:!0,strict:!1}).params:{},b=(l=({...m,search:g,hash:f}).search)?(l.startsWith("?")&&(l=l.substr(1)),r.default.parse(l)):{};return{routePattern:x,location:{...m,search:g,hash:f},params:y,pathname:v,url:v+g+f,hash:f,query:b}}e.s(["parsePath",0,a,"parseRoute",()=>s],166266)},627864,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(190972);let i=n.default.createContext(null),r=()=>n.default.useContext(i);(0,o.hookToHoc)(r),e.s(["CommentBoxManager",0,e=>{let{children:o}=e,[r,a]=(0,n.useState)(null),s=(0,n.useCallback)(()=>{a(null)},[]),l=(0,n.useCallback)(e=>{let{commentBox:t}=e;a(()=>t)},[]),d=(0,n.useMemo)(()=>({openCommentBox:l,close:s}),[l,s]);return(0,t.jsxs)(i.Provider,{value:d,children:[o,r&&(0,t.jsx)("span",{children:r({onClose:s})})]})},"useCommentBox",0,r])},594891,e=>{"use strict";for(var t=e.i(271645),n="u">typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"u">typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),o=new Uint8Array(16),i=[],r=0;r<256;++r)i[r]=(r+256).toString(16).substr(1);let a=function(e,t){var n=t||0;return""+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]},s=function(e,t,i){var r=t&&i||0;"string"==typeof e&&(t="binary"===e?Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||function(){if(!n)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)})();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var l=0;l<16;++l)t[r+l]=s[l];return t||a(s)};var l=e.i(190972),d=e.i(835870),c=e.i(558467);e.i(813868);var u=e.i(122756),m=e.i(89458);let p=(0,u.gql)("\n  mutation createLWEventwithNewEvents($data: CreateLWEventDataInput!) {\n    createLWEvent(data: $data) {\n      data {\n        ...newEventFragment\n      }\n    }\n  }\n"),h=()=>{let[e,n]=(0,t.useState)({}),[o]=(0,c.useMutationNoCache)(p),i=(0,t.useCallback)((t,i,r)=>{let{userId:a,documentId:l,important:d,intercom:c,...u}=r,p={userId:a,name:t,documentId:l,important:d,properties:{startTime:new Date,...u},intercom:c},h=s();return i&&n({...e,eventId:p}),(0,m.backgroundTask)(o({variables:{data:p}})),h},[e,o]),r=(0,t.useCallback)(function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e[t],a=new Date;return(0,m.backgroundTask)(o({variables:{data:{...r,properties:{endTime:a,duration:a.valueOf()-r.properties.startTime.valueOf(),...r.properties,...i}}}})),n((0,d.default)(e,t)),t},[e,o]),a=(0,t.useCallback)(()=>{Object.keys(e).forEach(e=>{r(e)}),n({})},[e,r]),l=(0,t.useCallback)(()=>{Object.keys(e).forEach(e=>{r(e)})},[e,r]);return(0,t.useEffect)(()=>l(),[l]),{recordEvent:i,closeAllEvents:a}};(0,l.hookToHoc)(h),e.s(["useNewEvents",0,h],594891)},774123,(e,t,n)=>{"use strict";!function(o){var i,r,a,s;function l(e,t,n){var o,i,r,a,s,l,d,c,x,y=0,b=[],C=0,w=!1,k=[],j=[],S=!1,I=!1,T=-1;if(o=(n=n||{}).encoding||"UTF8",(x=n.numRounds||1)!==parseInt(x,10)||1>x)throw Error("numRounds must a integer >= 1");if("SHA-1"===e)s=512,l=V,d=z,a=160,c=function(e){return e.slice()};else if(0===e.lastIndexOf("SHA-",0))if(l=function(t,n){return $(t,n,e)},d=function(t,n,o,i){var r,a;if("SHA-224"===e||"SHA-256"===e)r=(n+65>>>9<<4)+15,a=16;else if("SHA-384"===e||"SHA-512"===e)r=(n+129>>>10<<5)+31,a=32;else throw Error("Unexpected error in SHA-2 implementation");for(;t.length<=r;)t.push(0);for(t[n>>>5]|=128<<24-n%32,n+=o,t[r]=0|n,t[r-1]=n/0x100000000|0,o=t.length,n=0;n<o;n+=a)i=$(t.slice(n,n+a),i,e);if("SHA-224"===e)t=[i[0],i[1],i[2],i[3],i[4],i[5],i[6]];else if("SHA-256"===e)t=i;else if("SHA-384"===e)t=[i[0].a,i[0].b,i[1].a,i[1].b,i[2].a,i[2].b,i[3].a,i[3].b,i[4].a,i[4].b,i[5].a,i[5].b];else if("SHA-512"===e)t=[i[0].a,i[0].b,i[1].a,i[1].b,i[2].a,i[2].b,i[3].a,i[3].b,i[4].a,i[4].b,i[5].a,i[5].b,i[6].a,i[6].b,i[7].a,i[7].b];else throw Error("Unexpected error in SHA-2 implementation");return t},c=function(e){return e.slice()},"SHA-224"===e)s=512,a=224;else if("SHA-256"===e)s=512,a=256;else if("SHA-384"===e)s=1024,a=384;else if("SHA-512"===e)s=1024,a=512;else throw Error("Chosen SHA variant is not supported");else if(0===e.lastIndexOf("SHA3-",0)||0===e.lastIndexOf("SHAKE",0)){var N=6;if(l=q,c=function(e){var t,n=[];for(t=0;5>t;t+=1)n[t]=e[t].slice();return n},T=1,"SHA3-224"===e)s=1152,a=224;else if("SHA3-256"===e)s=1088,a=256;else if("SHA3-384"===e)s=832,a=384;else if("SHA3-512"===e)s=576,a=512;else if("SHAKE128"===e)s=1344,a=-1,N=31,I=!0;else if("SHAKE256"===e)s=1088,a=-1,N=31,I=!0;else throw Error("Chosen SHA variant is not supported");d=function(e,t,n,o,i){var r,a=N,l=[],d=(n=s)>>>5,c=0,u=t>>>5;for(r=0;r<u&&t>=n;r+=d)o=q(e.slice(r,r+d),o),t-=n;for(e=e.slice(r),t%=n;e.length<d;)e.push(0);for(r=t>>>3,e[r>>2]^=a<<r%4*8,e[d-1]^=0x80000000,o=q(e,o);32*l.length<i&&(e=o[c%5][c/5|0],l.push(e.b),!(32*l.length>=i));)l.push(e.a),0==64*(c+=1)%n&&(q(null,o),c=0);return l}}else throw Error("Chosen SHA variant is not supported");r=v(t,o,T),i=O(e),this.setHMACKey=function(t,n,r){var c;if(!0===w)throw Error("HMAC key already set");if(!0===S)throw Error("Cannot set HMAC key after calling update");if(!0===I)throw Error("SHAKE is not supported for HMAC");for(t=(n=v(n,o=(r||{}).encoding||"UTF8",T)(t)).binLen,n=n.value,r=(c=s>>>3)/4-1,c<t/8&&(n=d(n,t,0,O(e),a));n.length<=r;)n.push(0);for(t=0;t<=r;t+=1)k[t]=0x36363636^n[t],j[t]=0x5c5c5c5c^n[t];i=l(k,i),y=s,w=!0},this.update=function(e){var t,n,o,a=0,d=s>>>5;for(o=0,e=(t=r(e,b,C)).binLen,n=t.value,t=e>>>5;o<t;o+=d)a+s<=e&&(i=l(n.slice(o,o+d),i),a+=s);y+=a,b=n.slice(a>>>5),C=e%s,S=!0},this.getHash=function(t,n){var o,r,s,l;if(!0===w)throw Error("Cannot call getHash after setting HMAC key");if(s=f(n),!0===I){if(-1===s.shakeLen)throw Error("shakeLen must be specified in options");a=s.shakeLen}switch(t){case"HEX":o=function(e){return u(e,a,T,s)};break;case"B64":o=function(e){return m(e,a,T,s)};break;case"BYTES":o=function(e){return p(e,a,T)};break;case"ARRAYBUFFER":try{r=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}o=function(e){return h(e,a,T)};break;case"UINT8ARRAY":try{r=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}o=function(e){return g(e,a,T)};break;default:throw Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}for(r=1,l=d(b.slice(),C,y,c(i),a);r<x;r+=1)!0===I&&0!=a%32&&(l[l.length-1]&=0xffffff>>>24-a%32),l=d(l,a,0,O(e),a);return o(l)},this.getHMAC=function(t,n){var o,r,v,x;if(!1===w)throw Error("Cannot call getHMAC without first setting HMAC key");switch(v=f(n),t){case"HEX":o=function(e){return u(e,a,T,v)};break;case"B64":o=function(e){return m(e,a,T,v)};break;case"BYTES":o=function(e){return p(e,a,T)};break;case"ARRAYBUFFER":try{o=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}o=function(e){return h(e,a,T)};break;case"UINT8ARRAY":try{o=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}o=function(e){return g(e,a,T)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return r=d(b.slice(),C,y,c(i),a),x=l(j,O(e)),o(x=d(r,a,s,x,a))}}function d(e,t){this.a=e,this.b=t}function c(e,t,n,o){var i,r,a,s,l;for(i=0,t=t||[0],r=(n=n||0)>>>3,l=3*(-1===o);i<e.length;i+=1)a=(s=i+r)>>>2,t.length<=a&&t.push(0),t[a]|=e[i]<<8*(l+s%4*o);return{value:t,binLen:8*e.length+n}}function u(e,t,n,o){var i,r,a,s="";for(t/=8,a=3*(-1===n),i=0;i<t;i+=1)r=e[i>>>2]>>>8*(a+i%4*n),s+="0123456789abcdef".charAt(r>>>4&15)+"0123456789abcdef".charAt(15&r);return o.outputUpper?s.toUpperCase():s}function m(e,t,n,o){var i,r,a,s,l="",d=t/8;for(i=0,s=3*(-1===n);i<d;i+=3)for(r=i+1<d?e[i+1>>>2]:0,a=i+2<d?e[i+2>>>2]:0,a=(e[i>>>2]>>>8*(s+i%4*n)&255)<<16|(r>>>8*(s+(i+1)%4*n)&255)<<8|a>>>8*(s+(i+2)%4*n)&255,r=0;4>r;r+=1)8*i+6*r<=t?l+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>6*(3-r)&63):l+=o.b64Pad;return l}function p(e,t,n){var o,i,r="";for(t/=8,i=3*(-1===n),o=0;o<t;o+=1)r+=String.fromCharCode(e[o>>>2]>>>8*(i+o%4*n)&255);return r}function h(e,t,n){var o,i,r,a=new ArrayBuffer(t/=8);for(o=0,r=new Uint8Array(a),i=3*(-1===n);o<t;o+=1)r[o]=e[o>>>2]>>>8*(i+o%4*n)&255;return a}function g(e,t,n){var o,i,r=new Uint8Array(t/=8);for(o=0,i=3*(-1===n);o<t;o+=1)r[o]=e[o>>>2]>>>8*(i+o%4*n)&255;return r}function f(e){var t={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(t.outputUpper=(e=e||{}).outputUpper||!1,!0===e.hasOwnProperty("b64Pad")&&(t.b64Pad=e.b64Pad),!0===e.hasOwnProperty("shakeLen")){if(0!=e.shakeLen%8)throw Error("shakeLen must be a multiple of 8");t.shakeLen=e.shakeLen}if("boolean"!=typeof t.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw Error("Invalid b64Pad formatting option");return t}function v(e,t,n){switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":e=function(e,t,o){var i,r,a,s,l,d,c=e.length;if(0!=c%2)throw Error("String of HEX type must be in byte increments");for(i=0,t=t||[0],l=(o=o||0)>>>3,d=3*(-1===n);i<c;i+=2){if(isNaN(r=parseInt(e.substr(i,2),16)))throw Error("String of HEX type contains invalid characters");for(a=(s=(i>>>1)+l)>>>2;t.length<=a;)t.push(0);t[a]|=r<<8*(d+s%4*n)}return{value:t,binLen:4*c+o}};break;case"TEXT":e=function(e,o,i){var r,a,s,l,d,c,u,m,p=0;if(o=o||[0],d=(i=i||0)>>>3,"UTF8"===t)for(m=3*(-1===n),s=0;s<e.length;s+=1)for(r=e.charCodeAt(s),a=[],128>r?a.push(r):2048>r?(a.push(192|r>>>6),a.push(128|63&r)):55296>r||57344<=r?a.push(224|r>>>12,128|r>>>6&63,128|63&r):(s+=1,r=65536+((1023&r)<<10|1023&e.charCodeAt(s)),a.push(240|r>>>18,128|r>>>12&63,128|r>>>6&63,128|63&r)),l=0;l<a.length;l+=1){for(c=(u=p+d)>>>2;o.length<=c;)o.push(0);o[c]|=a[l]<<8*(m+u%4*n),p+=1}else if("UTF16BE"===t||"UTF16LE"===t)for(m=2*(-1===n),a="UTF16LE"===t&&1!==n||"UTF16LE"!==t&&1===n,s=0;s<e.length;s+=1){for(r=e.charCodeAt(s),!0===a&&(r=(l=255&r)<<8|r>>>8),c=(u=p+d)>>>2;o.length<=c;)o.push(0);o[c]|=r<<8*(m+u%4*n),p+=2}return{value:o,binLen:8*p+i}};break;case"B64":e=function(e,t,o){var i,r,a,s,l,d,c,u,m=0;if(-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(r=e.indexOf("="),e=e.replace(/\=/g,""),-1!==r&&r<e.length)throw Error("Invalid '=' found in base-64 string");for(r=0,t=t||[0],d=(o=o||0)>>>3,u=3*(-1===n);r<e.length;r+=4){for(l=e.substr(r,4),a=s=0;a<l.length;a+=1)s|=(i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(l.charAt(a)))<<18-6*a;for(a=0;a<l.length-1;a+=1){for(i=(c=m+d)>>>2;t.length<=i;)t.push(0);t[i]|=(s>>>16-8*a&255)<<8*(u+c%4*n),m+=1}}return{value:t,binLen:8*m+o}};break;case"BYTES":e=function(e,t,o){var i,r,a,s,l,d;for(r=0,t=t||[0],a=(o=o||0)>>>3,d=3*(-1===n);r<e.length;r+=1)i=e.charCodeAt(r),s=(l=r+a)>>>2,t.length<=s&&t.push(0),t[s]|=i<<8*(d+l%4*n);return{value:t,binLen:8*e.length+o}};break;case"ARRAYBUFFER":try{e=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}e=function(e,t,o){return c(new Uint8Array(e),t,o,n)};break;case"UINT8ARRAY":try{e=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}e=function(e,t,o){return c(e,t,o,n)};break;default:throw Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return e}function x(e,t){return e<<t|e>>>32-t}function y(e,t){return 32<t?(t-=32,new d(e.b<<t|e.a>>>32-t,e.a<<t|e.b>>>32-t)):0!==t?new d(e.a<<t|e.b>>>32-t,e.b<<t|e.a>>>32-t):e}function b(e,t){return e>>>t|e<<32-t}function C(e,t){var n=new d(e.a,e.b);return 32>=t?new d(n.a>>>t|n.b<<32-t,n.b>>>t|n.a<<32-t):new d(n.b>>>t-32|n.a<<64-t,n.a>>>t-32|n.b<<64-t)}function w(e,t){return 32>=t?new d(e.a>>>t,e.b>>>t|e.a<<32-t):new d(0,e.a>>>t-32)}function k(e,t,n){return e&t^~e&n}function j(e,t,n){return new d(e.a&t.a^~e.a&n.a,e.b&t.b^~e.b&n.b)}function S(e,t,n){return e&t^e&n^t&n}function I(e,t,n){return new d(e.a&t.a^e.a&n.a^t.a&n.a,e.b&t.b^e.b&n.b^t.b&n.b)}function T(e){return b(e,2)^b(e,13)^b(e,22)}function N(e){var t=C(e,28),n=C(e,34);return e=C(e,39),new d(t.a^n.a^e.a,t.b^n.b^e.b)}function L(e){return b(e,6)^b(e,11)^b(e,25)}function R(e){var t=C(e,14),n=C(e,18);return e=C(e,41),new d(t.a^n.a^e.a,t.b^n.b^e.b)}function _(e){return b(e,7)^b(e,18)^e>>>3}function A(e){var t=C(e,1),n=C(e,8);return e=w(e,7),new d(t.a^n.a^e.a,t.b^n.b^e.b)}function M(e){return b(e,17)^b(e,19)^e>>>10}function P(e){var t=C(e,19),n=C(e,61);return e=w(e,6),new d(t.a^n.a^e.a,t.b^n.b^e.b)}function E(e,t){var n=(65535&e)+(65535&t);return((e>>>16)+(t>>>16)+(n>>>16)&65535)<<16|65535&n}function F(e,t,n,o){var i=(65535&e)+(65535&t)+(65535&n)+(65535&o);return((e>>>16)+(t>>>16)+(n>>>16)+(o>>>16)+(i>>>16)&65535)<<16|65535&i}function B(e,t,n,o,i){var r=(65535&e)+(65535&t)+(65535&n)+(65535&o)+(65535&i);return((e>>>16)+(t>>>16)+(n>>>16)+(o>>>16)+(i>>>16)+(r>>>16)&65535)<<16|65535&r}function D(e,t){var n,o,i;return n=(65535&e.b)+(65535&t.b),i=(65535&(o=(e.b>>>16)+(t.b>>>16)+(n>>>16)))<<16|65535&n,n=(65535&e.a)+(65535&t.a)+(o>>>16),new d((65535&(o=(e.a>>>16)+(t.a>>>16)+(n>>>16)))<<16|65535&n,i)}function U(e,t,n,o){var i,r,a;return i=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&o.b),a=(65535&(r=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(o.b>>>16)+(i>>>16)))<<16|65535&i,i=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&o.a)+(r>>>16),new d((65535&(r=(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(o.a>>>16)+(i>>>16)))<<16|65535&i,a)}function H(e,t,n,o,i){var r,a,s;return r=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&o.b)+(65535&i.b),s=(65535&(a=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(o.b>>>16)+(i.b>>>16)+(r>>>16)))<<16|65535&r,r=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&o.a)+(65535&i.a)+(a>>>16),new d((65535&(a=(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(o.a>>>16)+(i.a>>>16)+(r>>>16)))<<16|65535&r,s)}function W(e,t){return new d(e.a^t.a,e.b^t.b)}function O(e){var t,n=[];if("SHA-1"===e)n=[0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0];else if(0===e.lastIndexOf("SHA-",0))switch(n=[0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4],t=[0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19],e){case"SHA-224":break;case"SHA-256":n=t;break;case"SHA-384":n=[new d(0xcbbb9d5d,n[0]),new d(0x629a292a,n[1]),new d(0x9159015a,n[2]),new d(0x152fecd8,n[3]),new d(0x67332667,n[4]),new d(0x98eb44a87,n[5]),new d(0xdb0c2e0d,n[6]),new d(0x47b5481d,n[7])];break;case"SHA-512":n=[new d(t[0],0xf3bcc908),new d(t[1],0x84caa73b),new d(t[2],0xfe94f82b),new d(t[3],0x5f1d36f1),new d(t[4],0xade682d1),new d(t[5],0x2b3e6c1f),new d(t[6],0xfb41bd6b),new d(t[7],0x137e2179)];break;default:throw Error("Unknown SHA variant")}else if(0===e.lastIndexOf("SHA3-",0)||0===e.lastIndexOf("SHAKE",0))for(e=0;5>e;e+=1)n[e]=[new d(0,0),new d(0,0),new d(0,0),new d(0,0),new d(0,0)];else throw Error("No SHA variants supported");return n}function V(e,t){var n,o,i,r,a,s,l,d=[];for(l=0,n=t[0],o=t[1],i=t[2],r=t[3],a=t[4];80>l;l+=1)d[l]=16>l?e[l]:x(d[l-3]^d[l-8]^d[l-14]^d[l-16],1),s=20>l?B(x(n,5),o&i^~o&r,a,0x5a827999,d[l]):40>l?B(x(n,5),o^i^r,a,0x6ed9eba1,d[l]):60>l?B(x(n,5),S(o,i,r),a,0x8f1bbcdc,d[l]):B(x(n,5),o^i^r,a,0xca62c1d6,d[l]),a=r,r=i,i=x(o,30),o=n,n=s;return t[0]=E(n,t[0]),t[1]=E(o,t[1]),t[2]=E(i,t[2]),t[3]=E(r,t[3]),t[4]=E(a,t[4]),t}function z(e,t,n,o){var i;for(i=(t+65>>>9<<4)+15;e.length<=i;)e.push(0);for(e[t>>>5]|=128<<24-t%32,t+=n,e[i]=0|t,e[i-1]=t/0x100000000|0,t=e.length,i=0;i<t;i+=16)o=V(e.slice(i,i+16),o);return o}function $(e,t,n){var o,a,s,l,c,u,m,p,h,g,f,v,x,y,b,C,w,W,O,V,z,$,q,G=[];if("SHA-224"===n||"SHA-256"===n)g=64,v=1,$=Number,x=E,y=F,b=B,C=_,w=M,W=T,O=L,z=S,V=k,q=i;else if("SHA-384"===n||"SHA-512"===n)g=80,v=2,$=d,x=D,y=U,b=H,C=A,w=P,W=N,O=R,z=I,V=j,q=r;else throw Error("Unexpected error in SHA-2 implementation");for(f=0,n=t[0],o=t[1],a=t[2],s=t[3],l=t[4],c=t[5],u=t[6],m=t[7];f<g;f+=1)16>f?(h=f*v,p=e.length<=h?0:e[h],h=e.length<=h+1?0:e[h+1],G[f]=new $(p,h)):G[f]=y(w(G[f-2]),G[f-7],C(G[f-15]),G[f-16]),p=b(m,O(l),V(l,c,u),q[f],G[f]),h=x(W(n),z(n,o,a)),m=u,u=c,c=l,l=x(s,p),s=a,a=o,o=n,n=x(p,h);return t[0]=x(n,t[0]),t[1]=x(o,t[1]),t[2]=x(a,t[2]),t[3]=x(s,t[3]),t[4]=x(l,t[4]),t[5]=x(c,t[5]),t[6]=x(u,t[6]),t[7]=x(m,t[7]),t}function q(e,t){var n,o,i,r,l=[],c=[];if(null!==e)for(o=0;o<e.length;o+=2)t[(o>>>1)%5][(o>>>1)/5|0]=W(t[(o>>>1)%5][(o>>>1)/5|0],new d(e[o+1],e[o]));for(n=0;24>n;n+=1){for(o=0,r=O("SHA3-");5>o;o+=1){i=t[o][0];var u=t[o][1],m=t[o][2],p=t[o][3],h=t[o][4];l[o]=new d(i.a^u.a^m.a^p.a^h.a,i.b^u.b^m.b^p.b^h.b)}for(o=0;5>o;o+=1)c[o]=W(l[(o+4)%5],y(l[(o+1)%5],1));for(o=0;5>o;o+=1)for(i=0;5>i;i+=1)t[o][i]=W(t[o][i],c[o]);for(o=0;5>o;o+=1)for(i=0;5>i;i+=1)r[i][(2*o+3*i)%5]=y(t[o][i],a[o][i]);for(o=0;5>o;o+=1)for(i=0;5>i;i+=1)t[o][i]=W(r[o][i],new d(~r[(o+1)%5][i].a&r[(o+2)%5][i].a,~r[(o+1)%5][i].b&r[(o+2)%5][i].b));t[0][0]=W(t[0][0],s[n])}return t}r=[new d((i=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2])[0],0xd728ae22),new d(i[1],0x23ef65cd),new d(i[2],0xec4d3b2f),new d(i[3],0x8189dbbc),new d(i[4],0xf348b538),new d(i[5],0xb605d019),new d(i[6],0xaf194f9b),new d(i[7],0xda6d8118),new d(i[8],0xa3030242),new d(i[9],0x45706fbe),new d(i[10],0x4ee4b28c),new d(i[11],0xd5ffb4e2),new d(i[12],0xf27b896f),new d(i[13],0x3b1696b1),new d(i[14],0x25c71235),new d(i[15],0xcf692694),new d(i[16],0x9ef14ad2),new d(i[17],0x384f25e3),new d(i[18],0x8b8cd5b5),new d(i[19],0x77ac9c65),new d(i[20],0x592b0275),new d(i[21],0x6ea6e483),new d(i[22],0xbd41fbd4),new d(i[23],0x831153b5),new d(i[24],0xee66dfab),new d(i[25],0x2db43210),new d(i[26],0x98fb213f),new d(i[27],0xbeef0ee4),new d(i[28],0x3da88fc2),new d(i[29],0x930aa725),new d(i[30],0xe003826f),new d(i[31],0xa0e6e70),new d(i[32],0x46d22ffc),new d(i[33],0x5c26c926),new d(i[34],0x5ac42aed),new d(i[35],0x9d95b3df),new d(i[36],0x8baf63de),new d(i[37],0x3c77b2a8),new d(i[38],0x47edaee6),new d(i[39],0x1482353b),new d(i[40],0x4cf10364),new d(i[41],0xbc423001),new d(i[42],0xd0f89791),new d(i[43],0x654be30),new d(i[44],0xd6ef5218),new d(i[45],0x5565a910),new d(i[46],0x5771202a),new d(i[47],0x32bbd1b8),new d(i[48],0xb8d2d0c8),new d(i[49],0x5141ab53),new d(i[50],0xdf8eeb99),new d(i[51],0xe19b48a8),new d(i[52],0xc5c95a63),new d(i[53],0xe3418acb),new d(i[54],0x7763e373),new d(i[55],0xd6b2b8a3),new d(i[56],0x5defb2fc),new d(i[57],0x43172f60),new d(i[58],0xa1f0ab72),new d(i[59],0x1a6439ec),new d(i[60],0x23631e28),new d(i[61],0xde82bde9),new d(i[62],0xb2c67915),new d(i[63],0xe372532b),new d(0xca273ece,0xea26619c),new d(0xd186b8c7,0x21c0c207),new d(0xeada7dd6,0xcde0eb1e),new d(0xf57d4f7f,0xee6ed178),new d(0x6f067aa,0x72176fba),new d(0xa637dc5,0xa2c898a6),new d(0x113f9804,0xbef90dae),new d(0x1b710b35,0x131c471b),new d(0x28db77f5,0x23047d84),new d(0x32caab7b,0x40c72493),new d(0x3c9ebe0a,0x15c9bebc),new d(0x431d67c4,0x9c100d4c),new d(0x4cc5d4be,0xcb3e42b6),new d(0x597f299c,0xfc657e2a),new d(0x5fcb6fab,0x3ad6faec),new d(0x6c44198c,0x4a475817)],s=[new d(0,1),new d(0,32898),new d(0x80000000,32906),new d(0x80000000,0x80008000),new d(0,32907),new d(0,0x80000001),new d(0x80000000,0x80008081),new d(0x80000000,32777),new d(0,138),new d(0,136),new d(0,0x80008009),new d(0,0x8000000a),new d(0,0x8000808b),new d(0x80000000,139),new d(0x80000000,32905),new d(0x80000000,32771),new d(0x80000000,32770),new d(0x80000000,128),new d(0,32778),new d(0x80000000,0x8000000a),new d(0x80000000,0x80008081),new d(0x80000000,32896),new d(0,0x80000001),new d(0x80000000,0x80008008)],a=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]],"function"==typeof define&&define.amd?(e.r,void 0!==l&&e.v(l)):void 0!==n?(t.exports&&(t.exports=l),n=l):o.jsSHA=l}(e.e)},245047,(e,t,n)=>{"use strict";n.ApiError=class extends Error{constructor(e){super(e),this.name=this.constructor.name,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error(e).stack}}},765982,(e,t,n)=>{"use strict";let o=e.r(245047);class i extends o.ApiError{constructor(e,t,n){super(n),this.request=e,this.statusCode=t}}n.ResponseError=i},283716,(e,t,n)=>{"use strict";let o=e.r(245047);class i extends o.ApiError{constructor(e){super("Client did not get response within ".concat(e.timeout," ms")),this.request=e}}n.TimeoutError=i},361044,(e,t,n)=>{"use strict";n.ApiError=e.r(245047).ApiError,n.ResponseError=e.r(765982).ResponseError,n.TimeoutError=e.r(283716).TimeoutError},906697,(e,t,n)=>{"use strict";let o=e.r(774123),i=e.r(361044);n.ApiClient=class{_getRegionalBaseUri(e){let t={"ap-se":"client-rapi-ap-se.recombee.com","ca-east":"client-rapi-ca-east.recombee.com","eu-west":"client-rapi-eu-west.recombee.com","us-west":"client-rapi-us-west.recombee.com"}[e.toLowerCase()];if(void 0===t)throw Error('Region "'.concat(e,'" is unknown. You may need to update the version of the SDK.'));return t}_getBaseUri(){let e=this.options.baseUri;if(this.options.region){if(e)throw Error("baseUri and region cannot be specified at the same time");e=this._getRegionalBaseUri(this.options.region)}return e||"client-rapi.recombee.com"}send(e,t){var n=this;if(void 0===t&&window.Promise)return new Promise(function(t,o){n.send(e,function(e,n){e?o(e):t(n)})});var o=this._signUrl(e.path),r=(this.useHttps||e.ensureHttps?"https://":"http://")+this.baseUri+o,a=new XMLHttpRequest;a.open("POST",r,this.async),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Content-Type","application/json"),this.async&&(a.timeout=e.timeout),a.onreadystatechange=function(){if(4==this.readyState&&this.responseText){if(200==this.status){if(t)return t(null,JSON.parse(this.responseText))}else if(t)return t(new i.ResponseError(e,this.status,this.responseText))}},a.ontimeout=function(){if(t)return t(new i.TimeoutError(e))},a.send(JSON.stringify(e.bodyParameters()))}_signUrl(e){let t="/"+this.databaseId+e;t+=(-1==e.indexOf("?")?"?":"&")+"frontend_timestamp="+parseInt(new Date().getTime()/1e3);let n=new o("SHA-1","TEXT");return n.setHMACKey(this.publicToken,"TEXT"),n.update(t),t+="&frontend_sign="+n.getHMAC("HEX")}constructor(e,t,n){this.databaseId=e,this.publicToken=t,this.options=n||{},this.baseUri=this._getBaseUri(),this.useHttps=!("useHttps"in this.options)||this.options.useHttps,this.async=!("async"in this.options)||this.options.async}}},534542,(e,t,n)=>{"use strict";n.Request=class{constructor(e,t,n,o){this.method=e,this.path=t,this.timeout=n,this.ensureHttps=o}}},828367,(e,t,n)=>{"use strict";let o=e.r(534542);class i extends o.Request{bodyParameters(){let e={};return e.cascadeCreate=void 0===this.cascadeCreate||this.cascadeCreate,e}constructor(e,t,n){super("PUT","/users/".concat(encodeURIComponent(e),"/merge/").concat(encodeURIComponent(t)),3e4,!1),this.targetUserId=e,this.sourceUserId=t,n=n||{},this.cascadeCreate=n.cascadeCreate}}n.MergeUsers=i},792205,(e,t,n)=>{"use strict";let o=e.r(534542);class i extends o.Request{bodyParameters(){let e={};return e.userId=this.userId,e.itemId=this.itemId,void 0!==this.timestamp&&(e.timestamp=this.timestamp),void 0!==this.duration&&(e.duration=this.duration),void 0!==this.cascadeCreate&&(e.cascadeCreate=this.cascadeCreate),void 0!==this.recommId&&(e.recommId=this.recommId),void 0!==this.additionalData&&(e.additionalData=this.additionalData),e.cascadeCreate=void 0===this.cascadeCreate||this.cascadeCreate,e}constructor(e,t,n){super("POST","/detailviews/",3e3,!1),this.userId=e,this.itemId=t,n=n||{},this.timestamp=n.timestamp,this.duration=n.duration,this.cascadeCreate=n.cascadeCreate,this.recommId=n.recommId,this.additionalData=n.additionalData}}n.AddDetailView=i},490053,(e,t,n)=>{"use strict";let o=e.r(534542);class i extends o.Request{bodyParameters(){let e={};return e.userId=this.userId,e.itemId=this.itemId,void 0!==this.timestamp&&(e.timestamp=this.timestamp),void 0!==this.cascadeCreate&&(e.cascadeCreate=this.cascadeCreate),void 0!==this.amount&&(e.amount=this.amount),void 0!==this.price&&(e.price=this.price),void 0!==this.profit&&(e.profit=this.profit),void 0!==this.recommId&&(e.recommId=this.recommId),void 0!==this.additionalData&&(e.additionalData=this.additionalData),e.cascadeCreate=void 0===this.cascadeCreate||this.cascadeCreate,e}constructor(e,t,n){super("POST","/purchases/",3e3,!1),this.userId=e,this.itemId=t,n=n||{},this.timestamp=n.timestamp,this.cascadeCreate=n.cascadeCreate,this.amount=n.amount,this.price=n.price,this.profit=n.profit,this.recommId=n.recommId,this.additionalData=n.additionalData}}n.AddPurchase=i},441359,(e,t,n)=>{"use strict";let o=e.r(534542);class i extends o.Request{bodyParameters(){let e={};return e.userId=this.userId,e.itemId=this.itemId,e.rating=this.rating,void 0!==this.timestamp&&(e.timestamp=this.timestamp),void 0!==this.cascadeCreate&&(e.cascadeCreate=this.cascadeCreate),void 0!==this.recommId&&(e.recommId=this.recommId),void 0!==this.additionalData&&(e.additionalData=this.additionalData),e.cascadeCreate=void 0===this.cascadeCreate||this.cascadeCreate,e}constructor(e,t,n,o){super("POST","/ratings/",3e3,!1),this.userId=e,this.itemId=t,this.rating=n,o=o||{},this.timestamp=o.timestamp,this.cascadeCreate=o.cascadeCreate,this.recommId=o.recommId,this.additionalData=o.additionalData}}n.AddRating=i},774120,(e,t,n)=>{"use strict";let o=e.r(534542);class i extends o.Request{bodyParameters(){let e={};return e.userId=this.userId,e.itemId=this.itemId,void 0!==this.timestamp&&(e.timestamp=this.timestamp),void 0!==this.cascadeCreate&&(e.cascadeCreate=this.cascadeCreate),void 0!==this.amount&&(e.amount=this.amount),void 0!==this.price&&(e.price=this.price),void 0!==this.recommId&&(e.recommId=this.recommId),void 0!==this.additionalData&&(e.additionalData=this.additionalData),e.cascadeCreate=void 0===this.cascadeCreate||this.cascadeCreate,e}constructor(e,t,n){super("POST","/cartadditions/",3e3,!1),this.userId=e,this.itemId=t,n=n||{},this.timestamp=n.timestamp,this.cascadeCreate=n.cascadeCreate,this.amount=n.amount,this.price=n.price,this.recommId=n.recommId,this.additionalData=n.additionalData}}n.AddCartAddition=i},6711,(e,t,n)=>{"use strict";let o=e.r(534542);class i extends o.Request{bodyParameters(){let e={};return e.userId=this.userId,e.itemId=this.itemId,void 0!==this.timestamp&&(e.timestamp=this.timestamp),void 0!==this.cascadeCreate&&(e.cascadeCreate=this.cascadeCreate),void 0!==this.recommId&&(e.recommId=this.recommId),void 0!==this.additionalData&&(e.additionalData=this.additionalData),e.cascadeCreate=void 0===this.cascadeCreate||this.cascadeCreate,e}constructor(e,t,n){super("POST","/bookmarks/",3e3,!1),this.userId=e,this.itemId=t,n=n||{},this.timestamp=n.timestamp,this.cascadeCreate=n.cascadeCreate,this.recommId=n.recommId,this.additionalData=n.additionalData}}n.AddBookmark=i},7090,(e,t,n)=>{"use strict";let o=e.r(534542);class i extends o.Request{bodyParameters(){let e={};return e.userId=this.userId,e.itemId=this.itemId,e.portion=this.portion,void 0!==this.sessionId&&(e.sessionId=this.sessionId),void 0!==this.timestamp&&(e.timestamp=this.timestamp),void 0!==this.cascadeCreate&&(e.cascadeCreate=this.cascadeCreate),void 0!==this.recommId&&(e.recommId=this.recommId),void 0!==this.additionalData&&(e.additionalData=this.additionalData),e.cascadeCreate=void 0===this.cascadeCreate||this.cascadeCreate,e}constructor(e,t,n,o){super("POST","/viewportions/",3e3,!1),this.userId=e,this.itemId=t,this.portion=n,o=o||{},this.sessionId=o.sessionId,this.timestamp=o.timestamp,this.cascadeCreate=o.cascadeCreate,this.recommId=o.recommId,this.additionalData=o.additionalData}}n.SetViewPortion=i},145602,(e,t,n)=>{"use strict";let o=e.r(534542);class i extends o.Request{bodyParameters(){let e={};return e.count=this.count,void 0!==this.scenario&&(e.scenario=this.scenario),void 0!==this.cascadeCreate&&(e.cascadeCreate=this.cascadeCreate),void 0!==this.returnProperties&&(e.returnProperties=this.returnProperties),void 0!==this.includedProperties&&(e.includedProperties=this.includedProperties),void 0!==this.filter&&(e.filter=this.filter),void 0!==this.booster&&(e.booster=this.booster),void 0!==this.logic&&(e.logic=this.logic),void 0!==this.diversity&&(e.diversity=this.diversity),void 0!==this.minRelevance&&(e.minRelevance=this.minRelevance),void 0!==this.rotationRate&&(e.rotationRate=this.rotationRate),void 0!==this.rotationTime&&(e.rotationTime=this.rotationTime),void 0!==this.expertSettings&&(e.expertSettings=this.expertSettings),void 0!==this.returnAbGroup&&(e.returnAbGroup=this.returnAbGroup),e.cascadeCreate=void 0===this.cascadeCreate||this.cascadeCreate,e}constructor(e,t,n){super("POST","/recomms/users/".concat(encodeURIComponent(e),"/items/"),9e3,!1),this.userId=e,this.count=t,n=n||{},this.scenario=n.scenario,this.cascadeCreate=n.cascadeCreate,this.returnProperties=n.returnProperties,this.includedProperties=n.includedProperties,this.filter=n.filter,this.booster=n.booster,this.logic=n.logic,this.diversity=n.diversity,this.minRelevance=n.minRelevance,this.rotationRate=n.rotationRate,this.rotationTime=n.rotationTime,this.expertSettings=n.expertSettings,this.returnAbGroup=n.returnAbGroup}}n.RecommendItemsToUser=i},722795,(e,t,n)=>{"use strict";let o=e.r(534542);class i extends o.Request{bodyParameters(){let e={};return e.targetUserId=this.targetUserId,e.count=this.count,void 0!==this.scenario&&(e.scenario=this.scenario),void 0!==this.cascadeCreate&&(e.cascadeCreate=this.cascadeCreate),void 0!==this.returnProperties&&(e.returnProperties=this.returnProperties),void 0!==this.includedProperties&&(e.includedProperties=this.includedProperties),void 0!==this.filter&&(e.filter=this.filter),void 0!==this.booster&&(e.booster=this.booster),void 0!==this.logic&&(e.logic=this.logic),void 0!==this.userImpact&&(e.userImpact=this.userImpact),void 0!==this.diversity&&(e.diversity=this.diversity),void 0!==this.minRelevance&&(e.minRelevance=this.minRelevance),void 0!==this.rotationRate&&(e.rotationRate=this.rotationRate),void 0!==this.rotationTime&&(e.rotationTime=this.rotationTime),void 0!==this.expertSettings&&(e.expertSettings=this.expertSettings),void 0!==this.returnAbGroup&&(e.returnAbGroup=this.returnAbGroup),e.cascadeCreate=void 0===this.cascadeCreate||this.cascadeCreate,e}constructor(e,t,n,o){super("POST","/recomms/items/".concat(encodeURIComponent(e),"/items/"),9e3,!1),this.itemId=e,this.targetUserId=t,this.count=n,o=o||{},this.scenario=o.scenario,this.cascadeCreate=o.cascadeCreate,this.returnProperties=o.returnProperties,this.includedProperties=o.includedProperties,this.filter=o.filter,this.booster=o.booster,this.logic=o.logic,this.userImpact=o.userImpact,this.diversity=o.diversity,this.minRelevance=o.minRelevance,this.rotationRate=o.rotationRate,this.rotationTime=o.rotationTime,this.expertSettings=o.expertSettings,this.returnAbGroup=o.returnAbGroup}}n.RecommendItemsToItem=i},137557,(e,t,n)=>{"use strict";let o=e.r(534542);class i extends o.Request{bodyParameters(){let e={};return e.count=this.count,e.cascadeCreate=void 0===this.cascadeCreate||this.cascadeCreate,e}constructor(e,t){super("POST","/recomms/next/items/".concat(encodeURIComponent(e)),9e3,!1),this.recommId=e,this.count=t}}n.RecommendNextItems=i},479563,(e,t,n)=>{"use strict";let o=e.r(534542);class i extends o.Request{bodyParameters(){let e={};return e.count=this.count,void 0!==this.scenario&&(e.scenario=this.scenario),void 0!==this.cascadeCreate&&(e.cascadeCreate=this.cascadeCreate),void 0!==this.filter&&(e.filter=this.filter),void 0!==this.booster&&(e.booster=this.booster),void 0!==this.logic&&(e.logic=this.logic),void 0!==this.expertSettings&&(e.expertSettings=this.expertSettings),void 0!==this.returnAbGroup&&(e.returnAbGroup=this.returnAbGroup),e.cascadeCreate=void 0===this.cascadeCreate||this.cascadeCreate,e}constructor(e,t,n){super("POST","/recomms/users/".concat(encodeURIComponent(e),"/item-segments/"),9e3,!1),this.userId=e,this.count=t,n=n||{},this.scenario=n.scenario,this.cascadeCreate=n.cascadeCreate,this.filter=n.filter,this.booster=n.booster,this.logic=n.logic,this.expertSettings=n.expertSettings,this.returnAbGroup=n.returnAbGroup}}n.RecommendItemSegmentsToUser=i},552866,(e,t,n)=>{"use strict";let o=e.r(534542);class i extends o.Request{bodyParameters(){let e={};return e.targetUserId=this.targetUserId,e.count=this.count,void 0!==this.scenario&&(e.scenario=this.scenario),void 0!==this.cascadeCreate&&(e.cascadeCreate=this.cascadeCreate),void 0!==this.filter&&(e.filter=this.filter),void 0!==this.booster&&(e.booster=this.booster),void 0!==this.logic&&(e.logic=this.logic),void 0!==this.expertSettings&&(e.expertSettings=this.expertSettings),void 0!==this.returnAbGroup&&(e.returnAbGroup=this.returnAbGroup),e.cascadeCreate=void 0===this.cascadeCreate||this.cascadeCreate,e}constructor(e,t,n,o){super("POST","/recomms/items/".concat(encodeURIComponent(e),"/item-segments/"),9e3,!1),this.itemId=e,this.targetUserId=t,this.count=n,o=o||{},this.scenario=o.scenario,this.cascadeCreate=o.cascadeCreate,this.filter=o.filter,this.booster=o.booster,this.logic=o.logic,this.expertSettings=o.expertSettings,this.returnAbGroup=o.returnAbGroup}}n.RecommendItemSegmentsToItem=i},155484,(e,t,n)=>{"use strict";let o=e.r(534542);class i extends o.Request{bodyParameters(){let e={};return e.contextSegmentId=this.contextSegmentId,e.targetUserId=this.targetUserId,e.count=this.count,void 0!==this.scenario&&(e.scenario=this.scenario),void 0!==this.cascadeCreate&&(e.cascadeCreate=this.cascadeCreate),void 0!==this.filter&&(e.filter=this.filter),void 0!==this.booster&&(e.booster=this.booster),void 0!==this.logic&&(e.logic=this.logic),void 0!==this.expertSettings&&(e.expertSettings=this.expertSettings),void 0!==this.returnAbGroup&&(e.returnAbGroup=this.returnAbGroup),e.cascadeCreate=void 0===this.cascadeCreate||this.cascadeCreate,e}constructor(e,t,n,o){super("POST","/recomms/item-segments/item-segments/",9e3,!1),this.contextSegmentId=e,this.targetUserId=t,this.count=n,o=o||{},this.scenario=o.scenario,this.cascadeCreate=o.cascadeCreate,this.filter=o.filter,this.booster=o.booster,this.logic=o.logic,this.expertSettings=o.expertSettings,this.returnAbGroup=o.returnAbGroup}}n.RecommendItemSegmentsToItemSegment=i},421750,(e,t,n)=>{"use strict";let o=e.r(534542);class i extends o.Request{bodyParameters(){let e={};return e.searchQuery=this.searchQuery,e.count=this.count,void 0!==this.scenario&&(e.scenario=this.scenario),void 0!==this.cascadeCreate&&(e.cascadeCreate=this.cascadeCreate),void 0!==this.returnProperties&&(e.returnProperties=this.returnProperties),void 0!==this.includedProperties&&(e.includedProperties=this.includedProperties),void 0!==this.filter&&(e.filter=this.filter),void 0!==this.booster&&(e.booster=this.booster),void 0!==this.logic&&(e.logic=this.logic),void 0!==this.expertSettings&&(e.expertSettings=this.expertSettings),void 0!==this.returnAbGroup&&(e.returnAbGroup=this.returnAbGroup),e.cascadeCreate=void 0===this.cascadeCreate||this.cascadeCreate,e}constructor(e,t,n,o){super("POST","/search/users/".concat(encodeURIComponent(e),"/items/"),9e3,!1),this.userId=e,this.searchQuery=t,this.count=n,o=o||{},this.scenario=o.scenario,this.cascadeCreate=o.cascadeCreate,this.returnProperties=o.returnProperties,this.includedProperties=o.includedProperties,this.filter=o.filter,this.booster=o.booster,this.logic=o.logic,this.expertSettings=o.expertSettings,this.returnAbGroup=o.returnAbGroup}}n.SearchItems=i},833875,(e,t,n)=>{"use strict";let o=e.r(534542);class i extends o.Request{bodyParameters(){let e={};return e.searchQuery=this.searchQuery,e.count=this.count,void 0!==this.scenario&&(e.scenario=this.scenario),void 0!==this.cascadeCreate&&(e.cascadeCreate=this.cascadeCreate),void 0!==this.filter&&(e.filter=this.filter),void 0!==this.booster&&(e.booster=this.booster),void 0!==this.logic&&(e.logic=this.logic),void 0!==this.expertSettings&&(e.expertSettings=this.expertSettings),void 0!==this.returnAbGroup&&(e.returnAbGroup=this.returnAbGroup),e.cascadeCreate=void 0===this.cascadeCreate||this.cascadeCreate,e}constructor(e,t,n,o){super("POST","/search/users/".concat(encodeURIComponent(e),"/item-segments/"),9e3,!1),this.userId=e,this.searchQuery=t,this.count=n,o=o||{},this.scenario=o.scenario,this.cascadeCreate=o.cascadeCreate,this.filter=o.filter,this.booster=o.booster,this.logic=o.logic,this.expertSettings=o.expertSettings,this.returnAbGroup=o.returnAbGroup}}n.SearchItemSegments=i},507263,(e,t,n)=>{"use strict";let o=e.r(534542);class i extends o.Request{bodyParameters(){let e={requests:this.requests.map(e=>this._request_to_batch_object(e))};return void 0!==this.distinctRecomms&&(e.distinctRecomms=this.distinctRecomms),e}_request_to_batch_object(e){let t=e.bodyParameters();return{method:e.method,path:e.path,params:Object.keys(t).length?t:void 0}}constructor(e,t){super("POST","/batch/",(e=>e.map(e=>e.timeout).reduce((e,t)=>e+t,0))(e),!0),this.requests=e,t=t||{},this.distinctRecomms=t.distinctRecomms}}n.Batch=i},404918,(e,t,n)=>{"use strict";n.ApiClient=e.r(906697).ApiClient,n.ApiError=e.r(245047).ApiError,n.ResponseError=e.r(765982).ResponseError,n.TimeoutError=e.r(283716).TimeoutError,n.MergeUsers=e.r(828367).MergeUsers,n.AddDetailView=e.r(792205).AddDetailView,n.AddPurchase=e.r(490053).AddPurchase,n.AddRating=e.r(441359).AddRating,n.AddCartAddition=e.r(774120).AddCartAddition,n.AddBookmark=e.r(6711).AddBookmark,n.SetViewPortion=e.r(7090).SetViewPortion,n.RecommendItemsToUser=e.r(145602).RecommendItemsToUser,n.RecommendItemsToItem=e.r(722795).RecommendItemsToItem,n.RecommendNextItems=e.r(137557).RecommendNextItems,n.RecommendItemSegmentsToUser=e.r(479563).RecommendItemSegmentsToUser,n.RecommendItemSegmentsToItem=e.r(552866).RecommendItemSegmentsToItem,n.RecommendItemSegmentsToItemSegment=e.r(155484).RecommendItemSegmentsToItemSegment,n.SearchItems=e.r(421750).SearchItems,n.SearchItemSegments=e.r(833875).SearchItemSegments,n.Batch=e.r(507263).Batch},712434,e=>{"use strict";let t;var n=e.i(404918),o=e.i(424935),i=e.i(552275);let r=()=>{if(!t){let e=i.recombeeDatabaseIdSetting.get(),o=i.recombeePublicApiTokenSetting.get();if(!e||!o)throw Error("Missing either databaseId or api token when initializing Recombee client!");t=new n.ApiClient(e,o,{region:"us-west"})}return t},a={bigDownvote:-1,smallDownvote:-.5,neutral:0,smallUpvote:.5,bigUpvote:1},s={createViewPortionRequest(e){let{userId:t,postId:o,portion:i,timestamp:r,recommId:a}=e;return new n.SetViewPortion(t,o,i,{timestamp:r.toISOString(),cascadeCreate:!1,recommId:a})},createDetailViewRequest:(e,t,o)=>new n.AddDetailView(t,e,{timestamp:new Date().toISOString(),recommId:o,cascadeCreate:!1}),createRatingRequest(e,t,o,i){let r=a[o];return"number"!=typeof r?void console.log("Attempted to create a recombee rating request for a non-karma vote on post with id ".concat(e,", voteType: ").concat(o)):new n.AddRating(t,e,r,{timestamp:new Date().toISOString(),recommId:i,cascadeCreate:!1})},shouldLogRecombeeError(e){let t=e instanceof n.TimeoutError,o="statusCode"in e?e.statusCode:void 0;return!(t||404===o||409===o)}},l={async createViewPortion(e){let t=r(),n=s.createViewPortionRequest(e);try{await t.send(n)}catch(e){s.shouldLogRecombeeError(e)&&(0,o.captureException)(e)}},async createDetailView(e,t,n){let i=r(),a=s.createDetailViewRequest(e,t,n);try{await i.send(a)}catch(e){s.shouldLogRecombeeError(e)&&(0,o.captureException)(e)}},async createRating(e,t,n,i){let a=r(),l=s.createRatingRequest(e,t,n,i);if(l)try{await a.send(l)}catch(e){s.shouldLogRecombeeError(e)&&(0,o.captureException)(e)}}};e.s(["recombeeApi",()=>l])},995669,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(558467);e.i(813868);var i=e.i(122756),r=e.i(530841),a=e.i(594891),s=e.i(190972),l=e.i(712434),d=e.i(552275),c=e.i(182584),u=e.i(229863);let m=n.default.createContext(null),p=()=>{let e=(0,n.useContext)(m);if(!e)throw Error("useItemsRead called but not a descedent of Layout");return e};(0,s.hookToHoc)(p),e.s(["ItemsReadContextWrapper",0,e=>{let{children:o}=e,[i,r]=(0,n.useState)({}),[a,s]=(0,n.useState)({}),l=(0,n.useMemo)(()=>({postsRead:i,tagsRead:a,setPostRead:(e,t)=>{r(n=>n[e]===t?n:{...n,[e]:t})},setTagRead:(e,t)=>{s(n=>n[e]===t?n:{...n,[e]:t})}}),[i,a]);return(0,t.jsx)(m.Provider,{value:l,children:o})},"useItemsRead",0,p,"useRecordPostView",0,e=>{let[t]=(0,o.useMutationNoCache)((0,i.gql)("\n    mutation increasePostViewCountMutation($postId: String) {\n      increasePostViewCount(postId: $postId)\n    }\n  ")),[s]=(0,o.useMutationNoCache)((0,i.gql)("\n    mutation markPostCommentsRead($postId: String!) {\n      markPostCommentsRead(postId: $postId)\n    }\n  ")),{recordEvent:m}=(0,a.useNewEvents)(),h=(0,r.useGetCurrentUser)(),g=(0,u.useClientId)(),{postsRead:f,setPostRead:v}=p(),x=e&&!!(e._id in f?f[e._id]:e.isRead);return{recordPostView:(0,n.useCallback)(async e=>{let{post:n,extraEventProperties:o,recommendationOptions:i}=e;try{var r,a;if(!n)throw Error("Tried to record view of null post");let e=h();if(f[n._id]||(await t({variables:{postId:n._id}}),v(n._id,!0)),e){let t={userId:e._id,important:!1,intercom:!0,...o,documentId:n._id,postTitle:n.title};m("post-view",!0,t)}let s=null!=(r=null==e?void 0:e._id)?r:g;s&&d.recombeeEnabledSetting.get()&&!(null==i?void 0:i.skip)&&(0,c.isRecombeeRecommendablePost)(n)&&(!e||!(e.spamRiskScore<=.1))&&l.recombeeApi.createDetailView(n._id,s,null==i||null==(a=i.recombeeOptions)?void 0:a.recommId)}catch(e){console.log("recordPostView error:",e)}},[f,v,t,h,g,m]),recordPostCommentsView:e=>{let{post:t}=e;h()&&!f[t._id]&&(v(t._id,!0),s({variables:{postId:t._id}}))},isRead:x}}])},959294,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(773736),i=e.i(946271);e.i(813868);let r=(0,e.i(122756).gql)("\n  query multiForumEventuseCurrentForumEventQuery($selector: ForumEventSelector, $limit: Int, $enableTotal: Boolean) {\n    forumEvents(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...ForumEventsDisplay\n      }\n      totalCount\n    }\n  }\n"),a=(0,n.createContext)({currentAndRecentForumEvents:[],currentForumEvent:null,isEventPost:()=>null});e.s(["CurrentAndRecentForumEventsProvider",0,e=>{var s;let{children:l}=e,{data:d,refetch:c}=(0,i.useQuery)(r,{variables:{selector:{currentAndRecentForumEvents:{}},limit:10,enableTotal:!1},skip:!(0,o.hasForumEvents)(),notifyOnNetworkStatusChange:!0}),u=null==d||null==(s=d.forumEvents)?void 0:s.results,m=(0,n.useMemo)(()=>null!=u?u:[],[u]),p=new Date,h=m.find(e=>!e.endDate||new Date(e.endDate)>=p)||null,g=(0,n.useCallback)(function(e){var t,n;let{includeRecent:o=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null==h?void 0:h.tag;return i&&(null==(t=e.tagRelevance)?void 0:t[i._id])>=1?h:o&&null!=(n=m.find(t=>{var n,o;return t.tag&&(null!=(n=null==(o=e.tagRelevance)?void 0:o[t.tag._id])?n:0)>=1}))?n:null},[m,h]),f=!h||h.endDate&&new Date(h.endDate)<new Date;(0,n.useEffect)(()=>{(0,o.hasForumEvents)()&&c()},[c,f]);let v=(0,n.useMemo)(()=>({currentAndRecentForumEvents:m,currentForumEvent:h,isEventPost:g,refetch:c}),[m,h,g,c]);return(0,t.jsx)(a.Provider,{value:v,children:l})},"useCurrentAndRecentForumEvents",0,()=>(0,n.useContext)(a)])},219331,979289,846065,e=>{"use strict";var t=e.i(804443),n=e.i(691149),o=e.i(614963);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){return"query"}function a(e,t,n){var i=r(e),a=(0,o.getCurrentRefinementValue)(e,t,n,i,"");return a||""}function s(e,t,n,a){var s,l,d,c=(l={},d=r(),(s=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==i(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(d,"string"),(d="symbol"===i(s)?s:String(s))in l)?Object.defineProperty(l,d,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[d]=n,l);return(0,o.refineValue)(t,c,a,!0)}let l=(0,n.default)({displayName:"AlgoliaSearchBox",$$type:"ais.searchBox",propTypes:{defaultRefinement:t.default.string},getProvidedProps:function(e,t,n){return{currentRefinement:a(e,t,{ais:e.contextValue,multiIndexContext:e.indexContextValue}),isSearchStalled:n.isSearchStalled}},refine:function(e,t,n){return s(e,t,n,{ais:e.contextValue,multiIndexContext:e.indexContextValue})},cleanUp:function(e,t){var n;return n={ais:e.contextValue,multiIndexContext:e.indexContextValue},(0,o.cleanUpValue)(t,n,r())},getSearchParameters:function(e,t,n){return e.setQuery(a(t,n,{ais:t.contextValue,multiIndexContext:t.indexContextValue}))},getMetadata:function(e,t){var n=r(e),i=a(e,t,{ais:e.contextValue,multiIndexContext:e.indexContextValue});return{id:n,index:(0,o.getIndexId)({ais:e.contextValue,multiIndexContext:e.indexContextValue}),items:null===i?[]:[{label:"".concat(n,": ").concat(i),value:function(t){return s(e,t,"",{ais:e.contextValue,multiIndexContext:e.indexContextValue})},currentRefinement:i}]}}});var d=e.i(343794),c=e.i(26749),u=e.i(271645);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){return(p=Object.assign.bind()).apply(this,arguments)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==m(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===m(t)?t:String(t)}function x(e){return function(t){var n,o=function(n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),n&&h(a,n);var o,i,r=(o=function(){if("u"<typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=f(a);return e=o?Reflect.construct(t,arguments,f(this).constructor):t.apply(this,arguments),function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return g(e)}(this,e)});function a(){var t,n,o,i;if(!(this instanceof a))throw TypeError("Cannot call a class as a function");for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=g(t=r.call.apply(r,[this].concat(l))),o="translate",i=function(n){var o=t.props.translations,i=o&&o.hasOwnProperty(n)?o[n]:e[n];if("function"==typeof i){for(var r=arguments.length,a=Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return i.apply(void 0,a)}return i},(o=v(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,t}return i=[{key:"render",value:function(){return u.default.createElement(t,p({translate:this.translate},this.props))}}],function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,v(o.key),o)}}(a.prototype,i),Object.defineProperty(a,"prototype",{writable:!1}),a}(u.Component),i=t.displayName||t.name||"UnknownComponent";return o.displayName="Translatable(".concat(i,")"),o.propTypes={translations:(n=Object.keys(e),function(e,t,o){var i=e[t];if(i)for(var r=0,a=Object.keys(i);r<a.length;r++){var s=a[r];if(-1===n.indexOf(s))return Error("Unknown `".concat(t,"` key `").concat(s,"`. Check the render method ")+"of `".concat(o,"`."))}})},o}}e.s(["translatable",()=>x],979289);var y=e.i(715807);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(){return(C=Object.assign.bind()).apply(this,arguments)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){T(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function j(e,t){return(j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,n){return(t=N(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e){var t=function(e,t){if("object"!==b(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==b(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===b(t)?t:String(t)}var L=(0,y.createClassNames)("SearchBox"),R=u.default.createElement("svg",{width:"18",height:"18",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"#444",className:L("loadingIcon"),"aria-hidden":"true"},u.default.createElement("g",{fill:"none",fillRule:"evenodd"},u.default.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},u.default.createElement("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:"18"}),u.default.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18"},u.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"}))))),_=u.default.createElement("svg",{className:L("resetIcon"),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",width:"10",height:"10","aria-hidden":"true"},u.default.createElement("path",{d:"M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z"})),A=u.default.createElement("svg",{className:L("submitIcon"),xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 40 40","aria-hidden":"true"},u.default.createElement("path",{d:"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z"})),M=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&j(i,e);var t,n,o=(t=function(){if("u"<typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=I(i);return e=t?Reflect.construct(n,arguments,I(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return S(e)}(this,e)});function i(e){var t;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");return T(S(t=o.call(this)),"getQuery",function(){return t.props.searchAsYouType?t.props.currentRefinement:t.state.query}),T(S(t),"onInputMount",function(e){t.input=e,t.props.inputRef&&("function"==typeof t.props.inputRef?t.props.inputRef(e):t.props.inputRef.current=e)}),T(S(t),"onKeyDown",function(e){if(t.props.focusShortcuts){var n=t.props.focusShortcuts.map(function(e){return"string"==typeof e?e.toUpperCase().charCodeAt(0):e}),o=e.target||e.srcElement,i=o.tagName;if(!o.isContentEditable&&"INPUT"!==i&&"SELECT"!==i&&"TEXTAREA"!==i){var r=e.which||e.keyCode;-1!==n.indexOf(r)&&(t.input.focus(),e.stopPropagation(),e.preventDefault())}}}),T(S(t),"onSubmit",function(e){e.preventDefault(),e.stopPropagation(),t.input.blur();var n=t.props,o=n.refine;return n.searchAsYouType||o(t.getQuery()),!1}),T(S(t),"onChange",function(e){var n=t.props,o=n.searchAsYouType,i=n.refine,r=n.onChange,a=e.target.value;o?i(a):t.setState({query:a}),r&&r(e)}),T(S(t),"onReset",function(e){var n=t.props,o=n.searchAsYouType,i=n.refine,r=n.onReset;i(""),t.input.focus(),o||t.setState({query:""}),r&&r(e)}),t.state={query:e.searchAsYouType?null:e.currentRefinement},t}return n=[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown)}},{key:"componentDidUpdate",value:function(e){this.props.searchAsYouType||e.currentRefinement===this.props.currentRefinement||this.setState({query:this.props.currentRefinement})}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,o=t.inputId,i=t.translate,r=t.autoFocus,a=t.loadingIndicator,s=t.submit,l=t.reset,c=this.getQuery(),m=Object.keys(this.props).reduce(function(t,n){return -1===["onsubmit","onreset","onchange"].indexOf(n.toLowerCase())&&0===n.indexOf("on")?k(k({},t),{},T({},n,e.props[n])):t},{}),p=this.props.showLoadingIndicator&&this.props.isSearchStalled;return u.default.createElement("div",{className:(0,d.default)(L(""),n)},u.default.createElement("form",{ref:this.props.formRef,noValidate:!0,onSubmit:this.props.onSubmit?this.props.onSubmit:this.onSubmit,onReset:this.onReset,className:L("form",p&&"form--stalledSearch"),action:"",role:"search"},u.default.createElement("input",C({ref:this.onInputMount,id:o,type:"search",placeholder:i("placeholder"),autoFocus:r,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",required:!0,maxLength:"512",value:c,onChange:this.onChange},m,{className:L("input")})),u.default.createElement("button",{type:"submit",title:i("submitTitle"),className:L("submit")},s),u.default.createElement("button",{type:"reset",title:i("resetTitle"),className:L("reset"),hidden:!c||p},l),this.props.showLoadingIndicator&&u.default.createElement("span",{hidden:!p,className:L("loadingIndicator")},a)))}}],function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,N(o.key),o)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(u.Component);T(M,"propTypes",{currentRefinement:c.default.string,className:c.default.string,refine:c.default.func.isRequired,translate:c.default.func.isRequired,loadingIndicator:c.default.node,reset:c.default.node,submit:c.default.node,focusShortcuts:c.default.arrayOf(c.default.oneOfType([c.default.string,c.default.number])),autoFocus:c.default.bool,searchAsYouType:c.default.bool,onSubmit:c.default.func,onReset:c.default.func,onChange:c.default.func,isSearchStalled:c.default.bool,showLoadingIndicator:c.default.bool,formRef:c.default.oneOfType([c.default.func,c.default.exact({current:c.default.object})]),inputRef:c.default.oneOfType([c.default.func,c.default.exact({current:c.default.object})]),inputId:c.default.string}),T(M,"defaultProps",{currentRefinement:"",className:"",focusShortcuts:["s","/"],autoFocus:!1,searchAsYouType:!0,showLoadingIndicator:!1,isSearchStalled:!1,loadingIndicator:R,reset:_,submit:A});let P=x({resetTitle:"Clear the search query.",submitTitle:"Submit your search query.",placeholder:"Search here"})(M);e.s(["default",0,P],846065);let E=l(P,{$$widgetType:"ais.searchBox"});e.s(["SearchBox",0,E],219331)},636867,e=>{"use strict";var t=e.i(843476),n=e.i(271645);let o=(0,e.i(339213).default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"})]}),"Close");e.s(["default",0,o])},361896,e=>{"use strict";var t=e.i(843476),n=e.i(271645);let o=(0,e.i(339213).default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0V0z"}),(0,t.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"})]}),"ChatBubbleOutline");e.s(["default",0,o])},553736,e=>{"use strict";var t=e.i(673991);e.i(552275);var n=e.i(935132);e.s(["userCanMakeAlignmentPost",0,(e,n)=>!!((0,t.userCanDo)(e,"posts.moderate.all")&&(0,t.userCanDo)(e,"posts.alignment.move")||(0,t.userCanDo)(e,"posts.alignment.move.all"))||!!e&&!!n&&!!(e._id===n.userId&&(0,t.userCanDo)(e,"posts.alignment.move")&&(0,t.userOwns)(e,n)),"userCanSuggestPostForAlignment",0,e=>{let{currentUser:n,post:o}=e;return n&&o&&!o.af&&!o.reviewForAlignmentUserId&&(0,t.userCanDo)(n,"posts.alignment.suggest")},"userNeedsAFNonMemberWarning",0,function(e){let o=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return!!e&&(0,n.isAF)()&&(!e.hideAFNonMemberInitialWarning||!o)&&!((0,t.userCanDo)(e,"comments.alignment.new")||(0,t.userCanDo)(e,"posts.alignment.new"))}])},851364,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(553736),i=e.i(725788),r=e.i(514089);e.i(813868);var a=e.i(122756),s=e.i(909817),l=e.i(530841),d=e.i(770703);let c=(0,d.default)(()=>e.A(190298),{loadableGenerated:{modules:[171073]},ssr:!1}),u=(0,d.default)(()=>e.A(83447),{loadableGenerated:{modules:[631963]},ssr:!1}),m=(0,a.gql)("\n  mutation updateCommentCommentsNewForm($selector: SelectorInput!, $data: UpdateCommentDataInput!) {\n    updateComment(selector: $selector, data: $data) {\n      data {\n        ...SuggestAlignmentComment\n      }\n    }\n  }\n"),p=(0,a.gql)("\n  mutation updatePostPostsEditForm($selector: SelectorInput!, $data: UpdatePostDataInput!) {\n    updatePost(selector: $selector, data: $data) {\n      data {\n        ...SuggestAlignmentPost\n      }\n    }\n  }\n");e.s(["afNonMemberDisplayInitialPopup",0,(e,n)=>!!(0,o.userNeedsAFNonMemberWarning)(e)&&(n({name:"AFNonMemberInitialPopup",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(c,{onClose:n})}}),!0),"useAfNonMemberSuccessHandling",0,()=>{let e=(0,l.useCurrentUser)(),{openDialog:a}=(0,i.useDialog)(),[d]=(0,r.useMutation)(m),[c]=(0,r.useMutation)(p);return(0,n.useCallback)(n=>{e&&(0,o.userNeedsAFNonMemberWarning)(e,!1)&&(("answer"in n?0:1)?(c({variables:{selector:{_id:n._id},data:{suggestForAlignmentUserIds:(0,s.default)([...n.suggestForAlignmentUserIds,e._id])}}}),a({name:"AFNonMemberSuccessPopup",contents:e=>{let{onClose:o}=e;return(0,t.jsx)(u,{onClose:o,_id:n._id})}})):(d({variables:{selector:{_id:n._id},data:{suggestForAlignmentUserIds:(0,s.default)([...n.suggestForAlignmentUserIds,e._id])}}}),a({name:"AFNonMemberSuccessPopup",contents:e=>{var o;let{onClose:i}=e;return(0,t.jsx)(u,{_id:n._id,postId:null!=(o=n.postId)?o:void 0,onClose:i})}})))},[e,a,d,c])}])},287215,(e,t,n)=>{"use strict";var o,i=e.i(167225),r=function(){function e(e,t){var n;if("function"!=typeof e)throw TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but got: "+e+".");this._batchLoadFn=e,this._maxBatchSize=function(e){if(!(!e||!1!==e.batch))return 1;var t=e&&e.maxBatchSize;if(void 0===t)return 1/0;if("number"!=typeof t||t<1)throw TypeError("maxBatchSize must be a positive number: "+t);return t}(t),this._batchScheduleFn=function(e){var t=e&&e.batchScheduleFn;if(void 0===t)return a;if("function"!=typeof t)throw TypeError("batchScheduleFn must be a function: "+t);return t}(t),this._cacheKeyFn=function(e){var t=e&&e.cacheKeyFn;if(void 0===t)return function(e){return e};if("function"!=typeof t)throw TypeError("cacheKeyFn must be a function: "+t);return t}(t),this._cacheMap=function(e){if(!(!e||!1!==e.cache))return null;var t=e&&e.cacheMap;if(void 0===t)return new Map;if(null!==t){var n=["get","set","delete","clear"].filter(function(e){return t&&"function"!=typeof t[e]});if(0!==n.length)throw TypeError("Custom cacheMap missing methods: "+n.join(", "))}return t}(t),this._batch=null,this.name=(n=t)&&n.name?n.name:null}var t=e.prototype;return t.load=function(e){if(null==e)throw TypeError("The loader.load() function must be called with a value, but got: "+String(e)+".");var t=function(e){var t=e._batch;if(null!==t&&!t.hasDispatched&&t.keys.length<e._maxBatchSize)return t;var n={hasDispatched:!1,keys:[],callbacks:[]};return e._batch=n,e._batchScheduleFn(function(){!function(e,t){var n;if(t.hasDispatched=!0,0===t.keys.length)return l(t);try{n=e._batchLoadFn(t.keys)}catch(n){return s(e,t,TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function errored synchronously: "+String(n)+"."))}if(!n||"function"!=typeof n.then)return s(e,t,TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise: "+String(n)+"."));n.then(function(e){if(!d(e))throw TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array: "+String(e)+".");if(e.length!==t.keys.length)throw TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array of the same length as the Array of keys.\n\nKeys:\n"+String(t.keys)+"\n\nValues:\n"+String(e));l(t);for(var n=0;n<t.callbacks.length;n++){var o=e[n];o instanceof Error?t.callbacks[n].reject(o):t.callbacks[n].resolve(o)}}).catch(function(n){s(e,t,n)})}(e,n)}),n}(this),n=this._cacheMap,o=this._cacheKeyFn(e);if(n){var i=n.get(o);if(i){var r=t.cacheHits||(t.cacheHits=[]);return new Promise(function(e){r.push(function(){e(i)})})}}t.keys.push(e);var a=new Promise(function(e,n){t.callbacks.push({resolve:e,reject:n})});return n&&n.set(o,a),a},t.loadMany=function(e){if(!d(e))throw TypeError("The loader.loadMany() function must be called with Array<key> but got: "+e+".");for(var t=[],n=0;n<e.length;n++)t.push(this.load(e[n]).catch(function(e){return e}));return Promise.all(t)},t.clear=function(e){var t=this._cacheMap;if(t){var n=this._cacheKeyFn(e);t.delete(n)}return this},t.clearAll=function(){var e=this._cacheMap;return e&&e.clear(),this},t.prime=function(e,t){var n=this._cacheMap;if(n){var o,i=this._cacheKeyFn(e);void 0===n.get(i)&&(t instanceof Error?(o=Promise.reject(t)).catch(function(){}):o=Promise.resolve(t),n.set(i,o))}return this},e}(),a="object"==typeof i.default&&"function"==typeof i.default.nextTick?function(e){o||(o=Promise.resolve()),o.then(function(){i.default.nextTick(e)})}:"function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){setTimeout(e)};function s(e,t,n){l(t);for(var o=0;o<t.keys.length;o++)e.clear(t.keys[o]),t.callbacks[o].reject(n)}function l(e){if(e.cacheHits)for(var t=0;t<e.cacheHits.length;t++)e.cacheHits[t]()}function d(e){return"object"==typeof e&&null!==e&&"number"==typeof e.length&&(0===e.length||e.length>0&&Object.prototype.hasOwnProperty.call(e,e.length-1))}t.exports=r},161432,710832,e=>{"use strict";var t=e.i(100916),n=e.i(287215),o=e.i(576955);async function i(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;return e.extraLoaders||(e.extraLoaders={}),e.extraLoaders[i]||(e.extraLoaders[i]=new n.default(async e=>{let n={...r,[a]:{$in:e}},i=await t.find(n,l).fetch(),s=(0,o.default)(i,e=>e[a]);return e.map(e=>s[e]||[])},{cache:!0})),await e.extraLoaders[i].load(s)}async function r(e,t,o,i){return e.extraLoaders[t]||(e.extraLoaders[t]=new n.default(i,{cache:!0})),await e.extraLoaders[t].load(o)}async function a(e,t,n){let o=await e.loaders[t].loadMany(n);for(let e of o)if(e instanceof Error)throw e;return o}e.s(["getWithCustomLoader",()=>r,"getWithLoader",()=>i,"loadByIds",()=>a],710832);let s=function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=n?(0,t.getSiteUrl)().slice(0,-1):"";return"".concat(o,"/s/").concat(e._id)};e.s(["SHOW_NEW_SEQUENCE_KARMA_THRESHOLD",0,100,"getCollectionOrSequenceUrl",0,function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.canonicalCollectionSlug)return s(e,n);let o=n?(0,t.getSiteUrl)().slice(0,-1):"";return"".concat(o,"/").concat(e.canonicalCollectionSlug,"#").concat(e._id)},"sequenceGetPageUrl",0,s],161432)},128380,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(937636),i=e.i(161517);e.s(["InteractionWrapper",0,e=>{let{href:i,openInNewTab:r,children:a,className:s}=e,l=(0,o.useNavigate)(),d=(0,n.useCallback)(e=>{e.stopPropagation(),i&&l(i,{openInNewTab:r})},[l,i,r]);return(0,t.jsx)("div",{onClick:d,className:s,children:a})},"useClickableCell",0,e=>{let{ignoreLinks:t,href:r,onClick:a,openInNewTab:s}=e,l=(0,o.useNavigate)(),{captureEvent:d}=(0,i.useTracking)({eventType:"linkClicked",eventProps:{to:r}});return{onClick:(0,n.useCallback)(e=>{if(t&&e.target.closest("a"))return!0;e.preventDefault(),e.stopPropagation(),a?a(e):e.metaKey||e.ctrlKey?(d(),window.open(r,"_blank")):(d(),l(r,{openInNewTab:s}))},[l,t,r,a,s,d])}}])},65189,e=>{"use strict";var t=e.i(843476),n=e.i(538794),o=e.i(343794);let i=(0,n.registerComponent)("DropdownMenu",e=>{let{children:n,className:i,classes:r}=e;return(0,t.jsx)("div",{className:(0,o.default)(r.root,i),children:n})},{styles:e=>({root:{...e.isFriendlyUI&&{padding:6,borderRadius:e.borderRadius.default,backgroundColor:e.palette.dropdown.background,border:"1px solid ".concat(e.palette.dropdown.border)}}})});e.s(["default",0,i])},547426,575059,e=>{"use strict";var t=e.i(271645),n=e.i(343794),o=e.i(79732);let i=(0,e.i(429329).defineStyles)("MuiListItemIcon",e=>({root:{marginRight:16,color:e.palette.action.active,flexShrink:0}}),{stylePriority:-10});e.s(["default",0,function(e){let{children:r,classes:a,className:s,...l}=e,d=(0,o.useStyles)(i,a);return t.default.cloneElement(r,{className:(0,n.default)(d.root,s,r.props.className),...l})}],575059),e.s([],547426)},109665,e=>{"use strict";var t=e.i(843476),n=e.i(813292);e.i(547426);var o=e.i(575059),i=e.i(159211),r=e.i(343794),a=e.i(372593),s=e.i(239832),l=e.i(110601),d=e.i(79732);let c=(0,e.i(429329).defineStyles)("DropdownItem",e=>({root:{...e.isFriendlyUI&&{"&:hover":{opacity:1}}},main:{...e.isFriendlyUI&&{borderRadius:e.borderRadius.default,padding:8,"&:hover":{background:e.palette.dropdown.hoverBackground,"& svg":{color:e.palette.grey[1e3]}},"& .ForumIcon-root":{fontSize:e.isFriendlyUI?20:void 0}}},noIcon:{paddingLeft:e.isFriendlyUI?12:void 0},title:{flexGrow:1,overflowX:"clip",textOverflow:"ellipsis"},afterIcon:{fontSize:"16px !important",marginLeft:8,color:e.palette.grey[600]},sideMessage:{position:"absolute",right:12,top:12,color:e.palette.text.dim40,[e.breakpoints.down("xs")]:{display:"none"}},tooltip:{display:"block"}})),u=e=>{let{className:n,children:o}=e;return(0,t.jsx)("div",{className:n,children:o})},m=e=>{let{to:n,className:o,children:i}=e;return(0,t.jsx)("a",{href:n,className:o,children:i})};e.s(["default",0,e=>{let{title:p,sideMessage:h,onClick:g,to:f,icon:v,iconClassName:x,menuItemClassName:y,afterIcon:b,tooltip:C,disabled:w,loading:k,rawLink:j}=e,S=f?j?m:i.Link:u,I=C?l.default:u,T=(0,d.useStyles)(c);return(0,t.jsx)(S,{to:f,className:T.root,children:(0,t.jsx)(I,{title:C,className:T.tooltip,children:(0,t.jsxs)(a.MenuItem,{onClick:g,disabled:w,className:(0,r.default)(T.main,y,{[T.noIcon]:!v}),children:[k&&(0,t.jsx)(o.default,{children:(0,t.jsx)(s.default,{})}),!k&&(0,t.jsxs)(t.Fragment,{children:[v&&(0,t.jsx)(o.default,{children:"string"==typeof v?(0,t.jsx)(n.default,{icon:v,className:x}):v()}),(0,t.jsx)("span",{className:T.title,children:p}),"string"==typeof b?(0,t.jsx)(n.default,{icon:b,className:T.afterIcon}):null==b?void 0:b(),h&&(0,t.jsx)("div",{className:T.sideMessage,children:h})]})]})})})}])},17662,437384,e=>{"use strict";var t=e.i(843476),n=e.i(538794),o=e.i(343794),i=e.i(79732);let r=(0,e.i(429329).defineStyles)("SimpleDivider",e=>({root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.greyAlpha(.12)}})),a=e=>{let{className:n}=e,a=(0,i.useStyles)(r);return(0,t.jsx)("hr",{className:(0,o.default)(a.root,n)})};e.s(["default",0,a],437384);let s=(0,n.registerComponent)("DropdownDivider",e=>{let{className:n,classes:i}=e;return(0,t.jsx)(a,{className:(0,o.default)(n,i.root)})},{styles:e=>({root:{margin:e.isFriendlyUI?"6px 0 !important":void 0}})});e.s(["default",0,s],17662)},946217,(e,t,n)=>{var o=e.r(848477),i=e.r(677325),r=e.r(473250),a=e.r(45350),s=e.r(351095),l=e.r(356956),d=e.r(763996),c=e.r(3023),u=Object.prototype.hasOwnProperty;t.exports=function(e){if(null==e)return!0;if(s(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||c(e)||r(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(d(e))return!o(e).length;for(var n in e)if(u.call(e,n))return!1;return!0}},152302,e=>{"use strict";var t=e.i(714818);let n=()=>t.isServer?0:window.innerHeight/5,o=(e,t)=>{var n;let o=null!=t?t:window.document.getElementById(e.elementId);if(!o)return null;if(o.id!==e.elementId)throw Error("Anchor element ID does not match the landmark element ID: expected ".concat(e.elementId,", but got ").concat(o.id));let i=o.getBoundingClientRect(),r=null!=(n=e.offset)?n:0;switch(e.position){default:case"topOfElement":return i.top+r;case"centerOfElement":return i.top+i.height/2+r;case"bottomOfElement":return i.bottom+r}};function i(e){return{landmarkName:e,elementId:e,position:"topOfElement",offset:25}}function r(e){let t;if("string"==typeof e){if(!(t=document.getElementById(e)))return 0}else t=e;let r=o(i(t.id));if(null===r)throw Error("Could not calculate position for element with id ".concat(t.id));return r+window.scrollY-n()+1}let a=null;function s(e){var t,n;let{id:o,options:i={}}=e;null==(t=(n=window).killPreloadScroll)||t.call(n);let s=document.getElementById(o);if(!s)return;a&&(a.cleanup(),a=null);let l=r(s);window.scrollTo({top:l,...i});let d={cleanup:()=>{}},c=new MutationObserver(()=>{if(!s.isConnected)return void d.cleanup();let e=r(s);40>=Math.abs(e-l)||(l=e,window.scrollTo({top:l,...i,behavior:"auto"}))});c.observe(document.body,{attributes:!0,childList:!0,subtree:!0});let u=function(e){d.cleanup()};["mousedown","keydown","wheel","touchstart"].forEach(e=>{window.addEventListener(e,u,{passive:!0})}),d.cleanup=()=>{c.disconnect(),["mousedown","keydown","wheel","touchstart"].forEach(e=>{window.removeEventListener(e,u)}),a&&a.cleanup===d.cleanup&&(a=null)},setTimeout(d.cleanup,5e3),a={cleanup:d.cleanup}}t.isProduction,e.s(["commentIdToLandmark",()=>i,"getCurrentSectionMark",0,n,"getLandmarkY",0,o,"scrollFocusOnElement",()=>s])},662841,182312,611138,696589,549831,e=>{"use strict";var t=e.i(843476),n=e.i(538794),o=e.i(96009),i=e.i(714818),r=e.i(644169),a=e.i(946217),s=e.i(384892),l=e.i(271645),d=e.i(152302);function c(e){let[t,n]=(0,l.useState)("above"),o=(0,l.useCallback)(()=>{if(i.isServer||!e)return null;let t=(0,d.getCurrentSectionMark)(),n="above";for(let o=0;o<e.length;o++){let i=(0,d.getLandmarkY)(e[o]);i&&i<t&&(n=e[o].elementId)}return n},[e]),r=(0,l.useCallback)(()=>{n(o())},[o]);return(0,l.useEffect)(()=>(window.addEventListener("scroll",r),r(),()=>{window.removeEventListener("scroll",r)}),[r]),{landmarkName:t}}e.s(["useScrollHighlight",()=>c],182312),e.i(552275);var u=e.i(935132),m=e.i(937636),p=e.i(343794),h=e.i(773736),g=e.i(79732),f=e.i(429329);let v=(0,f.defineStyles)("TableOfContentsDivider",e=>({divider:{width:80,marginBottom:e.spacing.unit,marginRight:"auto",borderBottom:e.palette.border.faint,paddingBottom:e.spacing.unit,display:"block"}})),x=e=>{let{scaleStyling:n}=e,o=(0,g.useStyles)(v);return(0,t.jsx)("div",{className:o.divider,style:n})};e.s(["default",0,x],611138);let y=()=>(0,h.fullHeightToCEnabled)()?{display:"flex",flexDirection:"column-reverse"}:{},b=(0,f.defineStyles)("TableOfContentsRow",e=>({root:{position:"relative",...e.typography.body2,...e.typography.commentStyle},highlighted:{"& $link":{color:e.palette.link.tocLinkHighlighted},"& $highlightDot:after":{content:e.isBookUI?null:'""',marginLeft:3,position:"relative",top:1},"& a:focus, & a:hover":{opacity:"initial"}},dense:{paddingTop:"0 !important",paddingBottom:"4px !important",fontSize:12},link:{display:"block",paddingTop:6,paddingBottom:6,color:e.palette.link.tocLink,lineHeight:(0,h.fullHeightToCEnabled)()?"1em":"1.2em","&:hover":{color:e.palette.link.tocLinkHighlighted,opacity:e.isFriendlyUI?1:void 0},...e.isFriendlyUI&&{lineHeight:"1.1rem",fontSize:"1rem"}},highlightDot:{},title:{paddingTop:3,paddingBottom:1.5*e.spacing.unit,borderBottom:e.palette.border.faint,fontSize:e.isFriendlyUI?"1em":void 0,"&:hover":{opacity:"unset"}},level0:{display:"block",maxWidth:"100%",marginBottom:e.spacing.unit,marginRight:e.spacing.unit,"& $link":{whiteSpace:"normal"},"& $link:after":{display:"none"},...y()},level1:{paddingLeft:0,...y()},level2:{fontSize:"1.1rem",paddingLeft:e.isFriendlyUI?16:12,...y()},level3:{fontSize:"1.1rem",color:e.palette.text.dim700,paddingLeft:e.isFriendlyUI?32:24,...y()},level4:{fontSize:"1.1rem",color:e.palette.text.dim700,paddingLeft:e.isFriendlyUI?48:36,...y()},titleContainer:{height:"100%",maxHeight:200,display:"flex",flexDirection:"column-reverse",transition:"opacity 0.4s ease-in-out, height 0.4s ease-in-out, max-height 0.4s ease-in-out, margin-top 0.4s ease-in-out"}})),C=e=>{let{indentLevel:n=0,highlighted:o=!1,href:i,onClick:r,children:a,title:s,divider:l,answer:d,dense:c,scale:u,fullHeight:m,commentToC:h}=e,f=(0,g.useStyles)(b),v=!!(s&&m),y=void 0!==u?{flex:u}:void 0;return l?(0,t.jsx)(x,{scaleStyling:y}):(0,t.jsx)("div",{className:(0,p.default)(f.root,(e=>{switch(e){case 0:return f.level0;case 1:return f.level1;case 2:return f.level2;case 3:return f.level3;default:return f.level4}})(n),{[f.titleContainer]:v},{[f.highlighted]:o}),style:y,children:(0,t.jsx)("a",{href:i,onClick:r,className:(0,p.default)(f.link,{[f.title]:s,[f.highlightDot]:!d,[f.dense]:c}),children:a})})};e.s(["default",0,C],696589);var w=e.i(110601),k=e.i(758623);let j=(0,n.registerComponent)("AnswerTocRow",e=>{let{classes:n,answer:o}=e,i=(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:n.tooltipKarma,children:[(0,t.jsxs)("div",{children:[o.baseScore," karma (",o.voteCount," votes)"]}),(0,t.jsxs)("div",{children:["Posted ",(0,t.jsx)(k.default,{date:o.postedAt,tooltip:!1})," ago"]})]}),(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:o.highlight},className:n.tooltip})]});return(0,t.jsx)("div",{children:(0,t.jsx)(w.default,{title:i,placement:"right-start",children:(0,t.jsxs)("span",{className:n.root,children:[(0,t.jsx)("span",{className:n.karma,children:o.baseScore}),(0,t.jsxs)("span",{className:n.firstLine,children:[(0,t.jsx)("div",{className:n.author,children:o.author}),(0,t.jsx)("div",{children:o.shortHighlight})]})]})})})},{styles:e=>({root:{marginLeft:-e.spacing.unit,display:"flex"},karma:{display:"inline-block",width:16,textAlign:"center",marginRight:e.spacing.unit,marginTop:1,fontFamily:e.typography.commentStyle.fontFamily},tooltip:{wordBreak:"break-word"},tooltipKarma:{fontStyle:"italic",marginBottom:2*e.spacing.unit,display:"flex",justifyContent:"space-between"},firstLine:{width:"calc(100% - 20px)",fontFamily:e.typography.commentStyle.fontFamily,marginTop:0,marginBottom:0},author:{fontFamily:e.typography.commentStyle.fontFamily,marginBottom:4}})});function S(e){return!!e&&0===e.button&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey}function I(e){let t=window.document.getElementById(e);if(!t)return null;{let e=t.getBoundingClientRect();return e.top+e.height/2}}function T(e){if(!i.isServer)try{window.scrollTo({top:e-(0,d.getCurrentSectionMark)()+1,behavior:"smooth"})}catch(e){console.warn("scrollTo not supported, using link fallback",e)}}function N(e,t){if(!e)return"";if(null==t||!t.downcaseAllCapsHeadings)return e.trim();var n=e.trim();return n!==n.toUpperCase()?n:n.split(" ").map(e=>e.length>1?e.substr(0,1)+e.substr(1).toLowerCase():e).join(" ")}e.s(["default",0,j],549831);let L=(0,n.registerComponent)("TableOfContentsList",e=>{let{tocSections:n,title:o,onClickSection:l,displayOptions:p}=e,h=(0,m.useNavigate)(),{query:g}=(0,m.useLocation)(),f=(null==p?void 0:p.maxHeadingDepth)&&n?(0,s.default)(n,e=>e.level<=p.maxHeadingDepth):n;(null==p?void 0:p.addedRows)&&(f=[...f,...p.addedRows]);let{landmarkName:v}=c([...f.map(e=>({landmarkName:e.anchor,elementId:e.anchor,position:"centerOfElement"})),{landmarkName:"comments",elementId:"postBody",position:"bottomOfElement"}]);if(!n)return(0,t.jsx)("div",{});let x=async(e,t)=>{e.preventDefault(),l&&(l(),await new Promise((e,t)=>setTimeout(e,0))),t()},y=null==g?void 0:g.answersSorting;return("newest"===y||"oldest"===y)&&(f=function(e,t){let n=e.map((e,t)=>[e,t]).filter(e=>{let[t,n]=e;return!!t.answer}),o=n.map(e=>{let[t,n]=e;return n}),i=n.map(e=>{let[t,n]=e;return t}),r="newest"===t?1:-1;i.sort((e,t)=>{var n,o;let i=(null==(n=e.answer)?void 0:n.postedAt)||"",a=(null==(o=t.answer)?void 0:o.postedAt)||"";return i<a?r:i>a?-r:0});let a=[...e];for(let[e,t]of i.entries())a[o[e]]=t;return a}(f,y)),(0,t.jsxs)("div",{children:[(0,t.jsx)(C,{href:"#",onClick:e=>{S(e)&&x(e,()=>{h("#",{skipRouter:!0}),T(0)})},highlighted:"above"===v||null===v,title:!0,children:null==o?void 0:o.trim()},"postTitle"),f.map((e,n)=>(0,t.jsx)(C,{indentLevel:e.level,divider:e.divider,highlighted:e.anchor===v,href:"#"+e.anchor,onClick:t=>{S(t)&&x(t,()=>{(e=>{if(i.isServer)return;let t=I(e);null!==t&&(delete g.commentId,h({search:(0,a.default)(g)?"":"?".concat(r.default.stringify(g)),hash:"#".concat(e)},{skipRouter:!0}),(0,u.isLWorAF)()?T(t+window.scrollY):(0,d.scrollFocusOnElement)({id:e,options:{behavior:"smooth"}}))})(e.anchor)})},answer:!!e.answer,children:e.answer?(0,t.jsx)(j,{answer:e.answer}):(0,t.jsx)("span",{children:N(e.title)})},e.anchor))]})},{hocs:[o.default]});e.s(["adjustHeadingText",()=>N,"default",0,L,"getAnchorY",()=>I,"isRegularClick",()=>S,"jumpToY",()=>T],662841)},566721,e=>{"use strict";var t=e.i(552275),n=e.i(935132),o=e.i(100916),i=e.i(182584),r=e.i(673991),a=e.i(820010),s=e.i(35693);async function l(e,t){var n,o=await t.Users.findOne({_id:e.userId});return o?(0,a.userGetDisplayName)(o):null!=(n=e.author)?n:"[unknown author]"}function d(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.post)return"".concat((0,i.postGetPageUrl)(e.post,t),"?commentId=").concat(e._id);if(e.tag)return(0,s.tagGetCommentLink)({tagSlug:e.tag.slug,commentId:e._id,tagCommentType:e.tagCommentType,isAbsolute:t});throw Error("Unable to find document for comment: ".concat(e._id))}function c(e){let{postId:t,postSlug:n,tagSlug:i,tagCommentType:r,commentId:a,permalink:l=!0,isAbsolute:d=!1}=e,c=d?(0,o.getSiteUrl)().slice(0,-1):"";if(t)if(l)return"".concat(c,"/posts/").concat(t,"/").concat(n||"","?commentId=").concat(a);else return"".concat(c,"/posts/").concat(t,"/").concat(n||"","#").concat(a);return i?(0,s.tagGetCommentLink)({tagSlug:i,commentId:a,tagCommentType:null!=r?r:"DISCUSSION",isAbsolute:d}):"/"}e.s(["commentAllowTitle",0,e=>(null==e?void 0:e.tagCommentType)==="SUBFORUM"&&!(null==e?void 0:e.parentCommentId),"commentDefaultToAlignment",0,(e,t,o)=>!!(0,n.isAF)()||(o?!!((0,r.userCanDo)(e,"comments.alignment.new")&&(null==t?void 0:t.af)&&o.af):!!((0,r.userCanDo)(e,"comments.alignment.new")&&(null==t?void 0:t.af))),"commentGetAuthorName",()=>l,"commentGetDefaultView",0,(e,t)=>{let o=(0,n.forumSelect)({AlignmentForum:"afPostCommentsTop",EAForum:"postCommentsMagic",default:"postCommentsTop"});return(e&&"commentSortOrder"in e?e.commentSortOrder:null)||(null==t?void 0:t.commentSorting)||o},"commentGetKarma",0,e=>((0,n.isAF)()?e.afBaseScore:e.baseScore)||0,"commentGetPageUrl",()=>d,"commentGetPageUrlFromIds",()=>c,"commentIncludedInCounts",0,e=>!e.deleted&&!e.rejected&&!e.debateResponse&&!e.authorIsUnreviewed&&!e.draft,"commentIsHiddenPendingReview",0,e=>{let n=t.hideUnreviewedAuthorCommentsSettings.get();return n&&new Date(n)<new Date(e.postedAt)&&e.authorIsUnreviewed}])},527156,e=>{"use strict";var t=e.i(843476),n=e.i(973327);let o=[{name:"agree",label:"Agreed",searchTerms:["check","correct","confirm","upvote","+1"],svg:"/reactionImages/nounproject/check.svg",description:""},{name:"disagree",label:"Disagree",svg:"/reactionImages/nounproject/x.svg",searchTerms:["x","downvote","-1"],description:""},{name:"important",label:"Important",searchTerms:["!"],svg:"/reactionImages/nounproject/exclamation.svg",description:""},{name:"insightful",label:"Insightful",searchTerms:["lightbulb"],svg:"/reactionImages/nounproject/lightbulb.svg",description:e=>"This ".concat(e," adds insight to the conversation")},{name:"goodpoint",label:"Good point!",searchTerms:["lightbulb","good","point","insight"],svg:"/reactionImages/nounproject/lightbulb.svg",description:e=>"This ".concat(e," makes a good point")},{name:"changemind",label:"Changed My Mind",searchTerms:["delta"],svg:"/reactionImages/nounproject/noun-triangle-305128.svg",filter:{opacity:.4,scale:1.4,translateY:1},description:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"I updated my beliefs based on this."}),(0,t.jsx)("p",{children:(0,t.jsx)("em",{children:"(In math, the triangle 'delta' symbol means 'change')"})})]})},{name:"thanks",label:"Thanks",searchTerms:["ty","thanks","gratitude"],svg:"/reactionImages/nounproject/thankyou.svg",filter:{scale:.9,opacity:.5},description:""},{name:"support",label:"Support",searchTerms:["pillar"],svg:"/reactionImages/nounproject/pillar.svg",description:"I am expressing supportiveness towards this"},{name:"verified",label:"I checked, it's true",searchTerms:["check","correct","confirm"],svg:"/reactionImages/nounproject/verified.svg",description:"I looked up sources, did empiricism, checked the equations, etc.",deprecated:!0},{name:"verifiedFalse",label:"I checked, it's False",searchTerms:["check","correct","confirm"],svg:"/reactionImages/nounproject/noun-cross-2014310.svg",description:"I looked up sources, did empiricism, checked the equations, etc.",deprecated:!0},{name:"betTrue",label:"I'd bet this is true",searchTerms:["bet","betting","true"],svg:"/reactionImages/nounproject/noun-dice-7011847.svg",description:"I'm willing to operationalize this, find an adjudicator, and bet this claim is true"},{name:"betFalse",label:"I'd bet this is false",searchTerms:["bet","betting","false"],svg:"/reactionImages/nounproject/noun-dice-7119510.svg",description:"I'm willing to operationalize this, find an adjudicator, and bet this claim is false"},{name:"surprise",label:"Surprise",svg:"/reactionImages/nounproject/surprise.svg",filter:{opacity:.8},description:"I did not expect that!",deprecated:!1},{name:"roll",label:"Skeptical",searchTerms:["examples","shapes","skeptical","eyebrow","dice","roll","disbelieve"],svg:"/reactionImages/nounproject/skeptical.svg",filter:{opacity:.55,scale:1.1},description:"I'm not sure I believe this.",deprecated:!1},{name:"yeswhatimean",label:"Yes, that's my position",searchTerms:["hand","yes","correct"],svg:"/reactionImages/nounproject/clickingpointinghand.svg",filter:{opacity:.5},description:"Based on this, I think you've understood my/other person's position"},{name:"miss",label:"Missed the point",svg:"/reactionImages/nounproject/inaccurate.svg",description:"I think this misses what I (or the other person) actually believes and was trying to say or explain"},{name:"elaborate",label:"Elaborate?",searchTerms:["questions"],svg:"/reactionImages/nounproject/noun-chat-1459491.svg",filter:{opacity:.4},description:""},{name:"offtopic",label:"Seems Offtopic?",searchTerms:["questions"],svg:"/reactionImages/nounproject/mapandpin.svg",filter:{opacity:1,scale:.9},description:"I don't see how this is relevant to what's being discussed."},{name:"shakyPremise",label:"Shaky Premise",svg:"/reactionImages/nounproject/shakypremise.svg",searchTerms:["premise","tower"],description:"This rests on shaky or false premises"},{name:"locallyInvalid",label:"Locally Invalid",svg:"/reactionImages/nounproject/negateddoubleturnstile.svg",searchTerms:["locally","invalid","unsound"],description:"This step is incorrect; these premises do not imply this conclusion."},{name:"coveredAlready",label:"I already addressed this",searchTerms:["check","already","covered","addressed","addressed"],svg:"/reactionImages/nounproject/noun-mail-checkmark-5316519.svg",filter:{opacity:.6,scale:1.2,translateY:2},description:"I covered this in my post and/or comments.",deprecated:!1},{name:"unnecessarily-combative",label:"Too Combative?",searchTerms:["swords","combative","fighting","battle","war","tribalism"],svg:"/reactionImages/nounproject/swords.svg",description:"This seems more combative than it needs to be to communicate its point.",filter:{padding:2,scale:1}},{name:"muddled",label:"Difficult to Parse",searchTerms:["splat","confused","muddled"],svg:"/reactionImages/nounproject/noun-fog-1028590.svg",description:"I had trouble reading this.",filter:{opacity:.7,scale:1.2},deprecated:!1},{name:"strawman",label:"Misunderstands position?",searchTerms:["examples","scarecrow","strawman","misunderstanding","position","misrepresent"],svg:"/reactionImages/nounproject/noun-misunderstanding-4936548-updated.svg",description:"This seems to misunderstand the thing that it argues against",deprecated:!1,filter:{opacity:.5,scale:1.3,translateY:1,translateX:1}},{name:"dontUnderstand",label:"I don't understand",svg:"/reactionImages/nounproject/noun-question-5771604.svg",searchTerms:["confused","understand"],description:"",deprecated:!1,filter:{translateY:2,scale:.9}},{name:"locallyValid",label:"Locally Valid",searchTerms:["locally","valid","sound"],svg:"/reactionImages/nounproject/doubleturnstile.svg",description:"I think the reasoning is valid, independent of the premises or conclusion.",deprecated:!1},{name:"notPlanningToRespond",label:"Not Planning to Respond",svg:"/reactionImages/nounproject/door.svg",searchTerms:["door","respond","planning"],description:"I'm not planning to respond further",deprecated:!1},{name:"seen",label:"I Saw This",searchTerms:["eyes"],svg:"/reactionImages/nounproject/eyes.svg",filter:{opacity:.8},description:"...and thought it'd be useful to let people know.",deprecated:!1},{name:"empathy",label:"Empathy",searchTerms:["heart"],svg:"/reactionImages/nounproject/noun-heart-1212629.svg",description:"",filter:{opacity:.6,translateY:1,scale:1.05},deprecated:!0},{name:"heart",label:"Heart",searchTerms:["empathy"],svg:"/reactionImages/nounproject/noun-heart-1212629.svg",description:"",filter:{opacity:.6,translateY:1,scale:1.05},deprecated:!1},{name:"crux",label:"That's a crux",searchTerms:["identity","matrix","crux","not"],svg:"/reactionImages/nounproject/branchingpath.svg",filter:{opacity:.6},description:"My other beliefs would be different if I had different beliefs about this",deprecated:!1},{name:"notacrux",label:"Not a crux",searchTerms:["identity","matrix","crux","not"],svg:"/reactionImages/nounproject/nonbranchingpath2.svg",filter:{opacity:.6},description:"My other beliefs would not change if I had different beliefs about this",deprecated:!1},{name:"prediction",label:"What's your prediction?",searchTerms:["telescope","prediction","anticipation"],svg:"/reactionImages/nounproject/telescope.svg",filter:{opacity:.4},description:"What do you concretely expect to observe given your beliefs?",deprecated:!0},{name:"examples",label:"Examples?",searchTerms:["examples","shapes"],svg:"/reactionImages/nounproject/shapes.svg",filter:{opacity:.6},description:"I'd be interested in seeing concrete examples of this",deprecated:!1},{name:"additionalQuestions",label:"Additional Questions",searchTerms:["elephant","questions"],svg:"/reactionImages/nounproject/elephant.svg",filter:{opacity:.8},description:"I now have additional questions.",deprecated:!1},{name:"taboo",label:"Taboo those words?",searchTerms:["taboo","shush","quiet"],svg:"/reactionImages/nounproject/noun-cancel-chat-5735669.svg",filter:{opacity:.6,translateY:1},description:(0,t.jsx)("div",{children:(0,t.jsx)("p",{children:"Could you rephrase this using different words, without using the same keyterms?"})}),deprecated:!1},{name:"discussedAlready",label:"This has already been discussed",searchTerms:["clock","history","prior"],svg:"/reactionImages/nounproject/history2.svg",filter:{opacity:.6},description:"Use Search, Concepts page, or ask in Open Thread if no one elaborates here.",deprecated:!1},{name:"unnecessarily-harsh",label:"Unnecessarily Harsh",searchTerms:["cactus","prickly"],svg:"/reactionImages/nounproject/cactus.svg",description:"This is harsh and didn't seem like it had to be.",deprecated:!0},{name:"handshake",label:"I Agree to This",searchTerms:["agreement"],filter:{opacity:.9},svg:"/reactionImages/nounproject/handshake.svg",description:"React to signal agreement (in the negotiation-y sense of the word)",deprecated:!0},{name:"scout",label:"Scout Mindset",searchTerms:["binoculars"],svg:"/reactionImages/nounproject/binoculars.svg",description:"Good job focusing on figuring out what's true, rather than fighting for a side",deprecated:!1},{name:"scholarship",label:"Nice Scholarship!",searchTerms:["cited"],svg:"/reactionImages/nounproject/scholarship.svg",description:"Good job looking into existing literature and citing sources",deprecated:!1},{name:"concrete",label:"Concrete",searchTerms:["bricks","examples"],svg:"/reactionImages/nounproject/concrete.svg",description:"This makes things more concrete by bringing in specifics or examples.",deprecated:!1,filter:{scale:1.1}},{name:"key",label:"Key Insight",searchTerms:["insight"],svg:"/reactionImages/nounproject/key.svg",description:"This is a key insight",deprecated:!0},{name:"shrug",label:"Unsure",svg:"/reactionImages/nounproject/shrug.svg",description:"I don't know what to think of this"},{name:"scales",label:"Seems Borderline",searchTerms:["balanced"],svg:"/reactionImages/nounproject/scales.svg",description:"I think this could go either way",deprecated:!1},{name:"thinking",label:"Thinking",svg:"/reactionImages/nounproject/thinking-nice-eyebrows.svg",description:"Food for thought",deprecated:!1,filter:{opacity:1,scale:1.4,translateY:2.6}},{name:"obtuse",label:"Obtuse",svg:"/reactionImages/nounproject/obtuse.svg",description:"This conversation is suffering from an acute lack of understanding. Your interpretation of the other person's position is not right. Try coming at this conversation from a different angle."},{name:"nonSequitur",label:"Non Sequitur",svg:"/reactionImages/nounproject/nonsequitur.svg",searchTerms:["sequitur","jump"],description:"This doesn't follow from the previous claim",deprecated:!0},{name:"tooManyAssumptions",label:"Too Many Assumptions",svg:"/reactionImages/nounproject/houseofcards.svg",searchTerms:["cards","house","assumptions"],filter:{opacity:.8},description:"This makes too many assumptions",deprecated:!1},{name:"hitsTheMark",label:"Hits the Mark",searchTerms:["bullseye","accurate"],svg:"/reactionImages/nounproject/bullseye.svg",description:"This hits the mark",deprecated:!1},{name:"timecost",label:"Not worth getting into?",description:"I'm guessing it's probably not worth the time to resolve this?",searchTerms:["time cost"],svg:"/reactionImages/nounproject/timequestion.svg",filter:{scale:.8},deprecated:!1},{name:"excitement",label:"Exciting",searchTerms:["partypopper","!"],svg:"/reactionImages/nounproject/partypopper.svg",description:"This is exciting!",filter:{translateY:-1},deprecated:!1},{name:"paperclip",label:"Paperclip",searchTerms:["paperclip"],svg:"/reactionImages/nounproject/paperclip.svg",description:"",deprecated:!1},{name:"clear",label:"Clearly Written",searchTerms:["clarity","gem","diamond"],svg:"/reactionImages/nounproject/noun-clear-sky-1958882.svg",filter:{opacity:.7,scale:1.2},description:"I had an easy time understanding this"},{name:"typo",label:"Typo",searchTerms:["typo","error","mistake","mispelling","spelling"],svg:"/reactionImages/nounproject/type-text.svg",description:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"This contains a typo, or minor editing error"}),(0,t.jsx)("p",{children:(0,t.jsx)("em",{children:"Note: you can inline react by selecting text"})})]}),filter:{scale:.9,translateY:2}},{name:"laugh",label:"Haha!",searchTerms:["laugh","haha","funny","lol"],svg:"/reactionImages/nounproject/noun-laughing-761845.svg",description:"",filter:{opacity:.9,scale:1.4,translateY:2}},{name:"disappointed",label:"Disappointed",searchTerms:["disappointed","sad","frown"],svg:"/reactionImages/nounproject/noun-sad-5760577.svg",filter:{opacity:.9,translateY:2},description:""},{name:"sad",label:"Sad",searchTerms:["sad","frown"],svg:"/reactionImages/nounproject/noun-sad-1152961.svg",filter:{opacity:.7,scale:1.4,translateY:2.5},description:""},{name:"confused",label:"I notice I'm confused",searchTerms:["confused","question","questionmark","bewildered"],svg:"/reactionImages/confused2.svg",description:"I don't have a clear explanation of what's going on here",filter:{opacity:.9,translateY:-2.5,translateX:0,scale:1}},{name:"smile",label:"Smile",searchTerms:["smile","happy","grin"],svg:"/reactionImages/nounproject/noun-smile-925549.svg",filter:{opacity:.5,translateY:2,scale:1.4},description:"This makes me happy. :)"},{name:"facilitation",label:"Good Facilitation",searchTerms:["understanding","helpful","facilitation","charitable"],svg:"/reactionImages/nounproject/noun-dialog-2172.svg",description:"This seemed to help people understand each other",filter:{translateY:2,scale:1.3}},{name:"soldier",label:"Soldier Mindset",searchTerms:["politics","soldier","war","battle","fight","fighting","argumentative","tribalism","downvote"],description:"This seems to be trying to fight for a side rather than figure out what's true",svg:"/reactionImages/nounproject/noun-soldier-5069240.svg",filter:{opacity:.7,translateY:1,scale:1.2}},{name:"thumbs-up",label:"Thumbs Up",searchTerms:["seen","like","+1","upvote"],description:"I saw this, and feel vaguely good about it",svg:"/reactionImages/nounproject/noun-thumbs-up-1686284.svg",filter:{opacity:.5,translateY:2}},{name:"thumbs-down",label:"Thumbs Down",searchTerms:["seen","dislike","downvote","-1"],description:"I saw this, and vaguely dislike it",svg:"/reactionImages/nounproject/noun-thumbs-down-1686285.svg",filter:{opacity:.5,translateY:3}},{name:"1percent",label:"Less than 1% likely",description:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"I put 1% or less likelihood on this claim"}),(0,t.jsx)("p",{children:(0,t.jsx)("em",{children:"Note: you can inline react by selecting text"})})]}),svg:"/reactionImages/1percent.svg",filter:{scale:1.4,opacity:.5,translateY:.75,translateX:.5}},{name:"10percent",label:"10% likely",description:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"I put about 10% likelihood on this claim"}),(0,t.jsx)("p",{children:(0,t.jsx)("em",{children:"Note: you can inline react by selecting text"})})]}),svg:"/reactionImages/10percent.svg",filter:{scale:1.4,opacity:.5,translateY:.75,translateX:.5}},{name:"25percent",label:"~25% likely",description:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"I put about 25% likelihood on this claim"}),(0,t.jsx)("p",{children:(0,t.jsx)("em",{children:"Note: you can inline react by selecting text"})})]}),svg:"/reactionImages/25percent.svg",filter:{scale:1.4,opacity:.5,translateY:1.25,translateX:.5}},{name:"40percent",label:"~40% likely",description:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"I put about 40% likelihood on this claim"}),(0,t.jsx)("p",{children:(0,t.jsx)("em",{children:"Note: you can inline react by selecting text"})})]}),svg:"/reactionImages/40percent.svg",filter:{scale:1.4,opacity:.5,translateY:.75,translateX:.5}},{name:"50percent",label:"~50% likely",description:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"I put about 50% likelihood on this claim"}),(0,t.jsx)("p",{children:(0,t.jsx)("em",{children:"Note: you can inline react by selecting text"})})]}),svg:"/reactionImages/50percent.svg",filter:{scale:1.4,opacity:.5,translateY:.75,translateX:.5}},{name:"60percent",label:"~60% likely",description:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"I put about 60% likelihood on this claim"}),(0,t.jsx)("p",{children:(0,t.jsx)("em",{children:"Note: you can inline react by selecting text"})})]}),svg:"/reactionImages/60percent.svg",filter:{scale:1.4,opacity:.5,translateY:.75,translateX:.5}},{name:"75percent",label:"~75% likely",description:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"I put about 75% likelihood on this claim"}),(0,t.jsx)("p",{children:(0,t.jsx)("em",{children:"Note: you can inline react by selecting text"})})]}),svg:"/reactionImages/75percent.svg",filter:{scale:1.4,opacity:.5,translateY:.75,translateX:.5}},{name:"90percent",label:"~90% likely",description:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"I put about 90% likelihood on this claim"}),(0,t.jsx)("p",{children:(0,t.jsx)("em",{children:"Note: you can inline react by selecting text"})})]}),svg:"/reactionImages/90percent.svg",filter:{scale:1.4,opacity:.5,translateY:.75,translateX:.5}},{name:"99percent",label:"99+% likely",description:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"I put 99% (or more) likelihood on this claim"}),(0,t.jsx)("p",{children:(0,t.jsx)("em",{children:"Note: you can inline react by selecting text"})})]}),svg:"/reactionImages/99percent.svg",filter:{scale:1.25,opacity:.5,translateY:.75,translateX:1}},{name:"why",label:"Why? / Citation?",searchTerms:["why","citation","source","needed","question"],svg:"/reactionImages/nounproject/noun-brackets-1942334-updated.svg",filter:{scale:1.2},description:"Why do you believe that? Or, what's your source for that?"},{name:"moloch",label:"Moloch",searchTerms:["moloch","coordination","tragedy","commons"],svg:"/reactionImages/nounproject/moloch-bw-2.svg",filter:{scale:1.1,opacity:.5,translateY:-1},description:(0,t.jsxs)("div",{children:["Moloch whose mind is pure machinery!",(0,t.jsx)("br",{}),"Moloch whose blood is running money!",(0,t.jsx)("br",{}),"Moloch whose fingers are ten armies!",(0,t.jsx)("br",{}),"Moloch whose breast is a cannibal dynamo!",(0,t.jsx)("br",{}),"Moloch whose ear is a smoking tomb!"]})},{name:"plus",label:"Plus One",searchTerms:["plus","one","agree","same","position"],svg:"/reactionImages/nounproject/Plus.png",filter:{scale:1.2,opacity:.5},description:""},{name:"llm-smell",label:"Smells like LLM",searchTerms:["llm","ai","language model","chatgpt","gpt","generated"],svg:"/reactionImages/nounproject/llm-smell.svg",filter:{opacity:.6,saturate:.6,scale:1.3},description:"This reads to me like it could've been written by a language model."},{name:"changed-mind-on-point",label:"Changed My Mind\n(on this point)",searchTerms:["changed","mind","point","specific","delta"],svg:"/reactionImages/nounproject/changedmindonpoint.svg",filter:{scale:1.2,translateX:.4},description:"I've changed my mind on this particular point (not necessarily on any larger claims)."},{name:"resolved",label:"Question Answered",searchTerms:["resolved","question","confusion","clear","understood"],svg:"/reactionImages/nounproject/resolved.svg",filter:{opacity:.7,scale:1.3},description:"This resolved my question! Thanks."},{name:"sneer",label:"Too Sneering?",searchTerms:["sneer","disrespect","derision","contempt","mocking"],svg:"/reactionImages/nounproject/NoSneeringThick.png",filter:{opacity:.8},description:"This is too much sneering (signaling disrespect and derision) relative to its substantive critique."},{name:"strong-argument",label:"Strong Argument",searchTerms:["strong","argument","convincing","persuasive","solid"],svg:"/reactionImages/nounproject/strong-argument2.svg",filter:{opacity:.5,scale:1.3},description:"This is a strong, well-reasoned argument."},{name:"weak-argument",label:"Weak Argument",searchTerms:["weak","argument","unconvincing","flimsy","poor"],svg:"/reactionImages/nounproject/weak-argument2.svg",filter:{opacity:.5,scale:1.3},description:"This argument is weak or poorly reasoned."},{name:"bet",label:"Let's make a bet!",searchTerms:["bet","betting","wager","challenge"],svg:"/reactionImages/nounproject/bet.svg",filter:{opacity:.8,scale:1.2},description:"I'm willing to put money on this claim!"},{name:"hat",label:"Bowing Out",searchTerms:["bow","out","goodbye","exit","leave"],svg:"/reactionImages/nounproject/HatInMotion.png",filter:{opacity:.7,scale:1.5},description:"I'm bowing out of this thread at this point. Goodbye for now!"},{name:"nitpick",label:"Nitpick",searchTerms:["nitpick","minor","unimportant","trivial","detail"],svg:"/reactionImages/nounproject/nitpick.svg",filter:{opacity:.5,scale:1.1},description:"This seems like it's focusing on a relatively unimportant point."},{name:"bowels",label:'"I beseech you!"',searchTerms:["beseech","bowels","christ","cromwell","mistaken","humble"],svg:"/reactionImages/nounproject/bowels.svg",filter:{opacity:.9,scale:1.1},description:(0,t.jsxs)("div",{children:['"I beseech you, in the bowels of Christ, think it possible you may be mistaken"',(0,t.jsx)("br",{})," ",(0,t.jsx)("em",{children:"Oliver Cromwell, 1650"})]})},{name:"addc",label:"Agree Denotationally, Disagree Connotationally",searchTerms:["agree","denotation","disagree","connotation","subtext","meaning"],svg:"/reactionImages/nounproject/ADDC.svg",filter:{opacity:.5,scale:1.2},description:"I agree with the explicit meaning of these words, but I don't agree with what I read as the subtext here."},{name:"beautiful",label:"Beautiful!",searchTerms:["beautiful","gorgeous","stunning","lovely","aesthetic"],svg:"https://res.cloudinary.com/lesswrong-2-0/image/upload/v1758861219/Beautiful_ynilb1.svg",filter:{opacity:1,scale:1.2},description:""},{name:"oops",label:"Oops!",searchTerms:["oops","mistake","error","whoops","accident"],svg:"/reactionImages/nounproject/Oops!.png",filter:{opacity:1,scale:1.3,translateY:1},description:"Oops! I made a mistake or error."},{name:"coveredAlready2",label:"Already addressed",searchTerms:["check","already","covered","addressed","addressed"],svg:"/reactionImages/nounproject/noun-mail-checkmark-5316519.svg",filter:{opacity:.6,scale:1.2,translateY:2},description:"This has been covered earlier in the post or comment thread.",deprecated:!1}],i={name:"missingReact",label:"Missing React",searchTerms:["404","missing","react"],svg:"/reactionImages/nounproject/notfound404.svg",filter:{opacity:.6},description:"This react was has been removed from the palette",deprecated:!1},r=(0,n.default)(o,e=>e.name);e.s(["defaultFilter",0,{padding:0,opacity:.4,saturate:.6,translateX:0,translateY:0,scale:1},"getNamesAttachedReactionsByName",0,e=>o.find(t=>t.name===e)||{...i,label:'deleted react: "'.concat(e,'"')},"namesAttachedReactions",0,o,"namesAttachedReactionsByName",0,r])},405706,e=>{"use strict";var t=e.i(843476),n=e.i(538794),o=e.i(527156),i=e.i(343794);let r=(0,n.registerComponent)("ReactionIcon",e=>{var n,r,a,s,l,d,c,u,m,p,h;let{react:g,inverted:f=!1,size:v=18,classes:x}=e,y=(0,o.getNamesAttachedReactionsByName)(g),b=null!=(n=null==(d=y.filter)?void 0:d.opacity)?n:o.defaultFilter.opacity,C=null!=(r=null==(c=y.filter)?void 0:c.saturate)?r:o.defaultFilter.saturate,w=(null==(u=y.filter)?void 0:u.padding)?"".concat(y.filter.padding,"px"):void 0,k=null!=(a=null==(m=y.filter)?void 0:m.scale)?a:o.defaultFilter.scale,j=null!=(s=null==(p=y.filter)?void 0:p.translateX)?s:o.defaultFilter.translateX,S=null!=(l=null==(h=y.filter)?void 0:h.translateY)?l:o.defaultFilter.translateY;return(0,t.jsx)("span",{className:(0,i.default)({[x.invertIfDarkMode]:!f,[x.invertUnlessDarkMode]:f}),children:(0,t.jsx)("img",{src:y.svg,style:{filter:"opacity(".concat(b,") saturate(").concat(C,")"),transform:"scale(".concat(k,") translate(").concat(j,"px, ").concat(S,"px)"),padding:w,width:v,height:v},className:x.reactionSvg})})},{styles:e=>({reactionSvg:{verticalAlign:"middle",marginTop:1},invertIfDarkMode:{filter:"dark"===e.palette.type?"invert(1)":"unset"},invertUnlessDarkMode:{filter:"dark"===e.palette.type?"unset":"invert(1)"}})});e.s(["default",0,r])},765744,e=>{"use strict";var t=e.i(843476),n=e.i(898298),o=e.i(820010),i=e.i(159211),r=e.i(530841),a=e.i(110601);let s=e=>{let{user:r}=e,{eventHandlers:s,hover:l}=(0,n.useHover)();return(0,t.jsx)("span",{...s,children:(0,t.jsx)(a.default,{title:(0,t.jsx)("div",{children:"This user account has been deleted. The username is only visible to site admins, and only visible on hover-over."}),inlineBlock:!1,children:l?(0,t.jsx)(i.Link,{to:(0,o.userGetProfileUrl)(r),children:(0,o.userGetDisplayName)(r)}):"[anonymous]"})})};e.s(["default",0,e=>{let{userShownToAdmins:n}=e,o=(0,r.useCurrentUser)();return(null==o?void 0:o.isAdmin)&&n?(0,t.jsx)(s,{user:n}):(0,t.jsx)(a.default,{title:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:"Author has deactivated their account,"}),(0,t.jsx)("div",{children:"or is no longer associated with this post."})]}),children:"[anonymous]"})}])},517794,e=>{"use strict";var t=e.i(843476),n=e.i(791434),o=e.i(283593),i=e.i(110601);e.s(["default",0,e=>{let r=(0,n.isFriendlyUI)()?o.default:i.default;return(0,t.jsx)(r,{...e})}])},85528,e=>{"use strict";var t=e.i(791434),n=e.i(283593);e.s(["POST_PREVIEW_ELEMENT_CONTEXT",0,"hoverPreview","getPostPreviewWidth",0,()=>(0,t.isFriendlyUI)()?n.FRIENDLY_HOVER_OVER_WIDTH:400])},821058,811062,e=>{"use strict";e.s(["default",()=>w,"jargonTermsToTextReplacements",()=>C],821058);var t=e.i(843476),n=e.i(271645),o=e.i(444098),i=e.i(253592),r=e.i(690118),a=e.i(530841),s=e.i(161517),l=e.i(338552),d=e.i(600723),c=e.i(514089);e.i(813868);let u=(0,e.i(122756).gql)("\n  mutation updateUseruseUpdateGlossaryPinnedState($selector: SelectorInput!, $data: UpdateUserDataInput!) {\n    updateUser(selector: $selector, data: $data) {\n      data {\n        ...UsersCurrent\n      }\n    }\n  }\n");function m(){var e;let{captureEvent:t}=(0,s.useTracking)(),o=(0,a.useCurrentUser)(),[i,r]=(0,l.useCookiesWithConsent)([d.PINNED_GLOSSARY_COOKIE]),[m]=(0,c.useMutation)(u),p=null!=(e=null==o?void 0:o.postGlossariesPinned)?e:"true"===i[d.PINNED_GLOSSARY_COOKIE],[h,g]=(0,n.useState)(p);return{postGlossariesPinned:h,togglePin:(0,n.useCallback)(async e=>{if(o){let n=!o.postGlossariesPinned;t("toggleGlossaryPin",{newValue:n,source:e}),g(n),await m({variables:{selector:{_id:o._id},data:{postGlossariesPinned:n}},optimisticResponse:{updateUser:{__typename:"UserOutput",data:{__typename:"User",...o,postGlossariesPinned:n}}}})}else{let n="true"!==i[d.PINNED_GLOSSARY_COOKIE];t("toggleGlossaryPin",{newValue:n,source:e}),r(d.PINNED_GLOSSARY_COOKIE,n.toString(),{path:"/"}),g(n)}},[m,o,t,i,r])}}e.s(["useGlossaryPinnedState",()=>m],811062);var p=e.i(343794),h=e.i(79732),g=e.i(429329),f=e.i(110601),v=e.i(813292),x=e.i(105736);let y=(0,g.defineStyles)("JargonTooltip",e=>({card:{padding:16,paddingBottom:10,backgroundColor:e.palette.background.pageActiveAreaBackground,maxWidth:350,...(0,i.commentBodyStyles)(e),color:e.palette.grey[700],marginTop:0,marginBottom:0,"& $jargonWord":{color:e.palette.text.jargonTerm,"&:after":{content:'""'},"&:first-child":{color:"unset"}},"& strong $jargonWord, & b $jargonWord":{color:"unset"}},jargonWord:{cursor:"default","&:after":{content:'""',display:"inline-block",width:4,height:4},"&:hover":{opacity:.6},"a &":{color:"inherit"}},pinnedJargonWord:{color:e.palette.text.jargonTerm},metadata:{marginTop:8,display:"flex",justifyContent:"space-between",alignItems:"center",color:e.palette.grey[600],fontSize:"0.8em"},metadataItem:{marginRight:8},icon:{width:12,height:12,color:e.palette.grey[400],marginRight:4,position:"relative",top:1},open:{border:"1px solid ".concat(e.palette.lwTertiary.main)},close:{color:e.palette.grey[500],marginRight:"auto",marginLeft:10},warning:{color:e.palette.text.warning,fontSize:".9em",marginBottom:8}}));function b(e){var t,n;return{replacedString:[e.term,...e.altTerms].map(e=>e.trim()).sort((e,t)=>t.length-e.length).map(e=>e.replace(/[\\/$^*+?.()|[\]{}]-/g,"\\$&")).join("|"),componentName:"JargonTooltip",replace:"all",caseInsensitive:!0,props:{term:e.term,approved:e.approved,deleted:e.deleted,definitionHTML:null!=(t=null==(n=e.contents)?void 0:n.html)?t:"",altTerms:e.altTerms,humansAndOrAIEdited:e.humansAndOrAIEdited},isRegex:!0}}function C(e){return e.map(b)}let w=e=>{let{term:i,definitionHTML:a,approved:l,deleted:d,humansAndOrAIEdited:c,isFirstOccurrence:u=!1,placement:g="top-start",children:b,tooltipClassName:C,tooltipTitleClassName:w,forceTooltip:k=!1,replacedSubstrings:j}=e,S=(0,h.useStyles)(y),{captureEvent:I}=(0,s.useTracking)(),[T,N]=(0,n.useState)(!1),{postGlossariesPinned:L}=m(),R="AI Generated",_=(0,t.jsx)(v.default,{icon:"Sparkles",className:S.icon});"humans"===c?(R="Edited by Human",_=(0,t.jsx)(v.default,{icon:"Pencil",className:S.icon})):"humansAndAI"===c&&(R="Edited by AI and Human",_=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.default,{icon:"Sparkles",className:S.icon}),(0,t.jsx)(v.default,{icon:"Pencil",className:S.icon})]}));let A=(0,t.jsxs)(o.Card,{className:(0,p.default)(S.card,T&&S.open),children:[!l&&(0,t.jsx)("div",{className:S.warning,children:"Unapproved by author. Believe at your own peril"}),(0,t.jsx)(r.ContentItemBody,{dangerouslySetInnerHTML:{__html:a},replacedSubstrings:j}),(0,t.jsxs)("div",{className:S.metadata,children:[R&&(0,t.jsx)("div",{children:(0,t.jsxs)("span",{className:S.metadataItem,children:[_,R]})}),T&&(0,t.jsx)("div",{className:S.close,children:(0,t.jsx)("em",{children:"Click to close"})})]})]});return u||L||k?(0,t.jsx)(s.AnalyticsContext,{nestedPageElementContext:i,children:(0,t.jsx)(f.default,{title:A,tooltip:!1,inlineBlock:!1,placement:g,className:C,titleClassName:w,forceOpen:T,analyticsProps:{pageElementContext:"jargonTermHovered"},otherEventProps:{term:i},children:(0,t.jsx)(x.default,{onClickAway:()=>N(!1),children:(0,t.jsx)("span",{className:(0,p.default)(S.jargonWord,L&&S.pinnedJargonWord),onClick:()=>{I("clickJargonTermInPost",{term:i}),N(!T)},children:b})})})}):(0,t.jsx)(t.Fragment,{children:b})}},100432,(e,t,n)=>{t.exports=function(e,t){for(var n,o=-1,i=e.length;++o<i;){var r=t(e[o]);void 0!==r&&(n=void 0===n?r:n+r)}return n}},656003,(e,t,n)=>{var o=e.r(666305),i=e.r(100432);t.exports=function(e,t){return e&&e.length?i(e,o(t,2)):0}},397891,e=>{"use strict";var t=e.i(656003),n=e.i(788099),o=e.i(831195),i=e.i(460793);function r(e,i){if(!e)return[];let r=[];for(let o of Object.keys(e)){let a=(0,t.default)(e[o],e=>"disagreed"===e.reactType?-1:1);(a>0||(0,n.default)(e[o],e=>e.userId===i))&&r.push({react:o,numberShown:a})}return(0,o.default)(r,e=>-e.numberShown)}function a(e){var t;let n=null==(t=e.document)?void 0:t.extendedScore;if(!n)return;let o=(0,i.default)(n.reacts,e=>(function(e){if(!e)return[];let t=[];for(let n of e)if(!n.quotes||n.quotes.length<=1)t.push(n);else for(let e of n.quotes)t.push({...n,quotes:[e]});return t})(e));return{...n,reacts:o}}function s(e){var t;let n=null==(t=e.document)?void 0:t.currentUserExtendedVote;if(!n)return;let o=[];if(n.reacts)for(let e of n.reacts)if(!e.quotes||e.quotes.length<=1)o.push(e);else for(let t of e.quotes)o.push({...e,quotes:[t]});return{...n,reacts:o}}function l(e){let t=a(e);if(!(null==t?void 0:t.reacts))return[];let n={};for(let e of Object.keys(t.reacts)){let o=t.reacts[e];if(o){for(let t of o)if(t.quotes)for(let o of t.quotes)n[o]||(n[o]={}),n[o][e]||(n[o][e]=[]),n[o][e].push(t)}}let o=[];for(let e of Object.keys(n))o.push({replacedString:e,componentName:"InlineReactHoverableHighlight",replace:"first",props:{quote:e,reactions:n[e]}});return o}function d(e,t,n){let o=c(e,n),i={userId:n._id,displayName:n.displayName,karma:n.karma};if(t)for(let e of t){let t={...i,reactType:e.vote,quotes:e.quotes};o[e.react]?o[e.react]=[...o[e.react],t]:o[e.react]=[t]}return o}function c(e,t){return e?(0,i.default)(e,e=>e.filter(e=>e.userId!==t._id)):{}}e.s(["addReactsVote",()=>d,"getDocumentHighlights",()=>l,"getNormalizedReactionsListFromVoteProps",()=>a,"getNormalizedUserVoteFromVoteProps",()=>s,"reactionsListToDisplayedNumbers",()=>r,"removeReactsVote",()=>c])},536059,e=>{"use strict";var t=e.i(843476),n=e.i(271645);let o=n.default.createContext(null),i=n.default.createContext(null),r=n.default.createContext(null);function a(e,t){return t.isHovered&&!e.find(e=>e.reactionName===t.reactionName&&e.quote===t.quote)?[...e,{reactionName:t.reactionName,quote:t.quote}]:!t.isHovered&&e.find(e=>e.reactionName===t.reactionName&&e.quote===t.quote)?e.filter(e=>e.reactionName!==t.reactionName||e.quote!==t.quote):e}e.s(["HoveredReactionListContext",0,o,"InlineReactVoteContext",0,r,"SetHoveredReactionContext",0,i,"default",0,e=>{let{voteProps:s,children:l}=e,[d,c]=(0,n.useReducer)(a,[]);return(0,t.jsx)(o.Provider,{value:d,children:(0,t.jsx)(r.Provider,{value:s,children:(0,t.jsx)(i.Provider,{value:c,children:l})})})}])},879809,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(538794),i=e.i(422046),r=e.i(444098),a=e.i(361896);e.i(547426);var s=e.i(575059),l=e.i(776153),d=e.i(343794),c=e.i(773736),u=e.i(110601),m=e.i(372593);let p=[{name:"hidden",label:"Hide All"},{name:"highKarma",label:"Show Upvoted",detailedLabel:"Show Upvoted (".concat(i.sideCommentFilterMinKarma,"+ karma)")},{name:"all",label:"Show All"}],h=[{name:"hidden",label:"Hide All"},{name:"netPositive",label:"Hide Downvoted"},{name:"all",label:"Show All"}],g="netPositive",f=(0,n.createContext)(null),v=(0,o.registerComponent)("SetSideItemVisibility",e=>{var o,i;let{classes:g}=e,v=(0,n.useContext)(f);if(!v||!(0,c.hasSideComments)())return null;let{sideCommentMode:x,setSideCommentMode:y,inlineReactsMode:b,setInlineReactsMode:C}=v,w=(0,t.jsxs)(r.Paper,{children:[(0,t.jsx)("span",{className:(0,d.default)(g.showOnlyIfMobile,g.largerScreenNeededNotice),children:"Side-comments require a larger screen"}),p.map(e=>(0,t.jsxs)(m.MenuItem,{onClick:()=>{y(e.name)},children:[x===e.name?(0,t.jsx)(l.default,{className:g.check}):(0,t.jsx)("div",{className:g.notChecked}),e.detailedLabel||e.label]},e.name))]}),k=(0,t.jsx)(r.Paper,{children:h.map(e=>(0,t.jsxs)(m.MenuItem,{onClick:()=>{C(e.name)},children:[b===e.name?(0,t.jsx)(l.default,{className:g.check}):(0,t.jsx)("div",{className:g.notChecked}),e.detailedLabel||e.label]},e.name))});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.default,{title:w,tooltip:!1,clickable:!0,inlineBlock:!1,placement:"left-start",children:(0,t.jsxs)(m.MenuItem,{children:[(0,t.jsx)(s.default,{children:(0,t.jsx)(a.default,{})}),(0,t.jsx)("span",{children:"Side-comments"}),(0,t.jsx)("span",{className:(0,d.default)(g.showOnlyIfMobile,g.currentSelectionPreview),children:"Hidden"}),(0,t.jsx)("span",{className:g.currentSelectionPreview,children:null==(o=p.find(e=>e.name===x))?void 0:o.label})]})}),(0,t.jsx)(u.default,{title:k,tooltip:!1,clickable:!0,inlineBlock:!1,placement:"left-start",children:(0,t.jsxs)(m.MenuItem,{children:[(0,t.jsx)(s.default,{children:(0,t.jsx)(a.default,{})}),(0,t.jsx)("span",{children:"Inline Reactions"}),(0,t.jsx)("span",{className:g.currentSelectionPreview,children:null==(i=h.find(e=>e.name===b))?void 0:i.label})]})})]})},{styles:e=>({check:{width:20,marginRight:8},notChecked:{width:20,marginRight:8},currentSelectionPreview:{position:"absolute",right:12,top:12,color:e.palette.text.dim40,[e.breakpoints.down("xs")]:{display:"none"}},showOnlyIfMobile:{display:"none",[e.breakpoints.down("xs")]:{display:"block"}},largerScreenNeededNotice:{padding:8,...e.typography.commentStyle}})});e.s(["SideItemVisibilityContext",0,f,"SideItemVisibilityContextProvider",0,e=>{var o;let{post:i,children:r}=e,a=(0,c.hasSideComments)()?null!=(o=null==i?void 0:i.sideCommentVisibility)?o:"highKarma":"hidden",[s,l]=(0,n.useState)(a),[d,u]=(0,n.useState)(g),m=(0,n.useMemo)(()=>({sideCommentMode:s,setSideCommentMode:l,inlineReactsMode:d,setInlineReactsMode:u}),[s,l,d,u]);return(0,t.jsx)(f.Provider,{value:m,children:r})},"default",0,v,"defaultInlineReactsMode",0,g])},442492,(e,t,n)=>{var o=e.r(100432),i=e.r(653336);t.exports=function(e){return e&&e.length?o(e,i):0}},399109,e=>{"use strict";var t=e.i(442492),n=e.i(552275),o=e.i(935132);let i=n.timeDecayFactorSetting,r=n.frontpageBonusSetting,a=n.curatedBonusSetting;e.s(["frontpageTimeDecayExpr",0,(e,o)=>{var i,r,a,s,l,d;let{startingAgeHours:c,decayFactorSlowest:u,decayFactorFastest:m,activityWeight:p,activityHalfLifeHours:h,overrideActivityFactor:g}={startingAgeHours:null!=(i=null==e?void 0:e.startingAgeHours)?i:n.startingAgeHoursSetting.get(),decayFactorSlowest:null!=(r=null==e?void 0:e.decayFactorSlowest)?r:n.decayFactorSlowestSetting.get(),decayFactorFastest:null!=(a=null==e?void 0:e.decayFactorFastest)?a:n.decayFactorFastestSetting.get(),activityWeight:null!=(s=null==e?void 0:e.activityWeight)?s:n.activityWeightSetting.get(),activityHalfLifeHours:null!=(l=null==e?void 0:e.activityHalfLifeHours)?l:n.activityHalfLifeSetting.get(),overrideActivityFactor:null==e?void 0:e.overrideActivityFactor},f=Math.min(u*(1+p*(null!=g?g:((e,n)=>{if(!e)return 0;let o=function(e,t){let n=Array(e.length).fill(0);for(let t=0;t<e.length;t++)if(1===e[t]){let o=Math.max(0,t-11),i=Math.min(e.length,t+11+1);for(let e=o;e<i;e++)n[e]=1}return n}(e,0),i=Math.log(2)/n;return(0,t.default)(o.map((e,t)=>e*Math.exp(-i*t)))/(1/(1-Math.exp(-i)))})(null==o||null==(d=o.visitorActivity)?void 0:d.activityArray,h))),m);return{$pow:[{$add:[{$divide:[{$subtract:[new Date,"$postedAt"]},36e5]},c]},f]}},"postScoreModifiers",0,()=>[{$cond:{if:"$frontpageDate",then:r.get(),else:0}},{$cond:{if:"$curatedDate",then:a.get(),else:0}}],"recalculateScore",0,e=>{var t;if(e.postedAt){let t=e.postedAt.valueOf(),o=new Date().getTime(),s=e.baseScore||0;return Math.round((s=s+(e.frontpageDate?r.get():0)+(e.curatedDate?a.get():0)+(e=>{if("tagCommentType"in e&&"SUBFORUM"===e.tagCommentType){var t;let{base:o,magnitude:i,duration:r,exponent:a}=Object.assign({...n.defaultSubforumCommentBonus},n.subforumCommentBonusSetting.get()),s=null!=(t=e.createdAt)?t:new Date,l=(Date.now()-s.getTime())/36e5;return Math.max(o,i*(1-(l/r)**a))}return 0})(e))/Math.pow((o-t)/36e5+2,i.get())*1e6)/1e6}return null!=(t=e.baseScore)?t:0},"timeDecayExpr",0,()=>({$pow:[{$add:[{$divide:[{$subtract:[new Date,"$postedAt"]},36e5]},(0,o.isLW)()?6:2]},i.get()]})],399109)},261417,523083,e=>{"use strict";var t=e.i(673991),n=e.i(399109);let o=(e,t)=>{if("smallUpvote"===t)return i(e,1);if("smallDownvote"===t)return i(e,-1);if("bigUpvote"===t)return r(e,1);if("bigDownvote"===t)return r(e,-1);if("neutral"===t)return 0;throw Error("Invalid vote type in calculateVotePower: ".concat(t))},i=(e,t)=>e>=1e3?2*t:+t,r=(e,t)=>e>=5e5?16*t:e>=25e4?15*t:e>=175e3?14*t:e>=1e5?13*t:e>=75e3?12*t:e>=5e4?11*t:e>=25e3?10*t:e>=1e4?9*t:e>=5e3?8*t:e>=2500?7*t:e>=1e3?6*t:e>=500?5*t:e>=250?4*t:e>=100?3*t:e>=10?2*t:+t,a=["smallUpvote","smallDownvote","bigUpvote","bigDownvote","neutral"],s=e=>a.includes(e);function l(e,t,n){var i;let r=null==(i=e.extendedVoteType)?void 0:i[n];return r?o(t[e.userId].karma,r):0}e.s(["calculateVotePower",0,o,"getVoteAxisStrength",()=>l,"isValidVoteType",0,s],523083);var d=e.i(384592),c=e.i(552275);let u=e=>{let{user:t,voteType:n,document:i}=e,r=t.karma;return t._id===c.karmaRewarderId100.get()?100:t._id===c.karmaRewarderId1000.get()?1e3:o(r,n)},m=async e=>{let{document:i,collectionName:r,voteType:a="neutral",extendedVote:l=null,user:c,votingSystem:m}=e;if(a&&!s(a))throw Error("Invalid vote type in setVoteClient: ".concat(a));if(!i||!c||!l&&a&&"neutral"!==a&&!(0,t.userCanDo)(c,"".concat(r.toLowerCase(),".").concat(a)))throw Error("Cannot vote on '".concat(r.toLowerCase()));return i.currentUserVote&&(i=(e=>{let{document:i,collectionName:r,user:a,votingSystem:s}=e;if(!i.currentUserVote)return i;let l=i.currentUserVote,d=u({user:a,voteType:null!=l?l:"neutral",document:i}),c=i.af&&(0,t.userCanDo)(a,"votes.alignment"),m=c?o(a.afKarma,null!=l?l:"neutral"):0,p={...i,currentUserVote:null,currentUserExtendedVote:null,extendedScore:s.cancelVoteClient({voteType:i.currentUserVote,document:i,oldExtendedScore:i.extendedScore,cancelledExtendedVote:i.currentUserExtendedVote,currentUser:a}),afExtendedScore:c?s.cancelVoteClient({voteType:i.currentUserVote,document:i,oldExtendedScore:i.afExtendedScore,cancelledExtendedVote:i.currentUserExtendedVote,currentUser:a}):i.afExtendedScore,baseScore:(i.baseScore||0)-d,afBaseScore:(i.afBaseScore||0)-m,voteCount:(i.voteCount||0)-1,afVoteCount:(i.afVoteCount||0)-!!c};return p.score=(0,n.recalculateScore)(p),p})({document:i,collectionName:r,user:c,votingSystem:m})),(a||l)&&(i=(e=>{let{document:i,collectionName:r,voteType:a,extendedVote:s,user:l,votingSystem:c}=e,m=u({user:l,voteType:null!=a?a:"neutral",document:i}),p=i.af&&(0,t.userCanDo)(l,"votes.alignment"),h=p?o(l.afKarma,null!=a?a:"neutral"):0,g={...i,currentUserVote:a,currentUserExtendedVote:s,extendedScore:c.addVoteClient({voteType:a,document:i,oldExtendedScore:i.extendedScore,extendedVote:s,currentUser:l}),afExtendedScore:p?c.addVoteClient({voteType:a,document:i,oldExtendedScore:i.afExtendedScore,extendedVote:s,currentUser:l}):i.afExtendedScore,baseScore:(i.baseScore||0)+m,voteCount:(i.voteCount||0)+1,afBaseScore:(i.afBaseScore||0)+h,afVoteCount:(i.afVoteCount||0)+ +!!p,__typename:d.collectionNameToTypeName[r]};return g.score=(0,n.recalculateScore)(g),g})({document:i,collectionName:r,voteType:a,extendedVote:l,user:c,votingSystem:m})),i};e.s(["getVotePower",0,u,"setVoteClient",0,m],261417)},123993,e=>{"use strict";e.s(["defineVotingSystem",0,e=>e])},584262,(e,t,n)=>{var o=e.r(892708),i=e.r(666305),r=e.r(181829),a=e.r(807889);t.exports=function(e,t){if(null==e)return{};var n=o(a(e),function(e){return[e]});return t=i(t),r(e,n,function(e,n){return t(e,n[0])})}},348433,(e,t,n)=>{t.exports=function(e){for(var t=-1,n=null==e?0:e.length,o={};++t<n;){var i=e[t];o[i[0]]=i[1]}return o}},224931,583091,466608,692436,e=>{"use strict";let t;var n=e.i(843476),o=e.i(271645),i=e.i(144437),r=e.i(725788),a=e.i(514089),s=e.i(261417),l=e.i(552275),d=e.i(935132);e.i(566721);var c=e.i(523083),u=e.i(710832),m=e.i(345955),p=e.i(123993),h=e.i(527156),g=e.i(909817),f=e.i(973327),v=e.i(788099),x=e.i(656003),y=e.i(397891);let b=(0,p.defineVotingSystem)({name:"namesAttachedReactions",userCanActivate:d.isLW,description:"Reacts (Two-axis plus Names-attached reactions)",hasInlineReacts:!0,addVoteClient:e=>{var t;let{voteType:n,document:o,oldExtendedScore:i,extendedVote:r,currentUser:a}=e,s=(0,c.calculateVotePower)(a.karma,(null==r?void 0:r.agreement)||"neutral"),l=i&&"approvalVoteCount"in i?i.approvalVoteCount:o.voteCount,d=(0,y.addReactsVote)(null==i?void 0:i.reacts,null!=(t=null==r?void 0:r.reacts)?t:[],a);return{approvalVoteCount:l+ +!!(n&&"neutral"!==n),agreement:((null==i?void 0:i.agreement)||0)+s,agreementVoteCount:((null==i?void 0:i.agreementVoteCount)||0)+1,reacts:d}},cancelVoteClient:e=>{let{voteType:t,document:n,oldExtendedScore:o,cancelledExtendedVote:i,currentUser:r}=e,a=null==i?void 0:i.agreement,s=a&&"neutral"!==a,l=s?(0,c.calculateVotePower)(r.karma,a):0,d=o&&"approvalVoteCount"in o?o.approvalVoteCount:n.voteCount,u=(0,y.removeReactsVote)(null==o?void 0:o.reacts,r);return{approvalVoteCount:d-!!(t&&"neutral"!==t),agreement:((null==o?void 0:o.agreement)||0)-(s?l:0),agreementVoteCount:((null==o?void 0:o.agreementVoteCount)||0)-!!s,reacts:u}},computeExtendedScore:async(e,t)=>{let n=(0,g.default)(e.map(e=>e.userId)),o=await (0,u.loadByIds)(t,"Users",n),i=(0,f.default)((0,m.filterNonnull)(o),e=>e._id),r={};for(let t of e){var a;let e=t.extendedVoteType,n={userId:t.userId,displayName:null!=(a=i[t.userId].displayName)?a:"",karma:i[t.userId].karma};if(null==e?void 0:e.reacts)for(let t of e.reacts){let e={...n,reactType:t.vote,quotes:t.quotes};r[t.react]?r[t.react].push(e):r[t.react]=[e]}}return{approvalVoteCount:e.filter(e=>e.voteType&&"neutral"!==e.voteType).length,agreement:(0,x.default)(e,e=>(0,c.getVoteAxisStrength)(e,i,"agreement")),agreementVoteCount:e.filter(e=>0!==(0,c.getVoteAxisStrength)(e,i,"agreement")).length,reacts:r}},isAllowedExtendedVote:e=>{let{user:t,document:n,oldExtendedScore:o,extendedVote:i,skipRateLimits:r}=e;return(null==i?void 0:i.reacts)&&i.reacts.length>0?function(e){let{user:t,document:n,oldExtendedScore:o,extendedVote:i,skipRateLimits:r}=e;if(!i.reacts)return{allowed:!0};if((0,v.default)(i.reacts,e=>"disagreed"===e.vote)&&t._id===n.userId&&!i.reacts.filter(e=>"disagreed"===e.vote).every(e=>"typo"===e.react))return{allowed:!1,reason:"You cannot antireact to reactions on your own content"};let a=t.karma;if(!r&&a<l.downvoteExistingReactKarmaThreshold.get()&&(0,v.default)(i.reacts,e=>"disagreed"===e.vote))return{allowed:!1,reason:"You need at least ".concat(l.downvoteExistingReactKarmaThreshold.get()," karma to antireact")};if(!r&&a<l.addNameToExistingReactKarmaThreshold.get())return{allowed:!1,reason:"You need at least ".concat(l.addNameToExistingReactKarmaThreshold.get()," karma to use reacts")};if(!r&&a<l.addNewReactKarmaThreshold.get()){for(let e of i.reacts)if(!(e.react in o.reacts))return{allowed:!1,reason:"You need at least ".concat(l.addNewReactKarmaThreshold.get()," karma to be the first to use a new react on a given comment")}}for(let e of i.reacts)if(!(e.react in h.namesAttachedReactionsByName))return{allowed:!1,reason:"Unrecognized reaction: ".concat(e.react)};return{allowed:!0}}({user:t,document:n,oldExtendedScore:o,extendedVote:i,skipRateLimits:r}):{allowed:!0}},isNonblankExtendedVote:e=>{var t,n;return(null==e||null==(t=e.extendedVoteType)?void 0:t.agreement)&&"neutral"!==e.extendedVoteType.agreement||(null==e||null==(n=e.extendedVoteType)?void 0:n.reacts)&&e.extendedVoteType.reacts.length>0},getCommentHighlights:e=>{let{comment:t,voteProps:n}=e;return(0,y.getDocumentHighlights)(n)},getPostHighlights:e=>{let{post:t,voteProps:n}=e;return(0,y.getDocumentHighlights)(n)},getMessageHighlights:e=>{let{message:t,voteProps:n}=e;return(0,y.getDocumentHighlights)(n)}});var C=e.i(820010),w=e.i(831195);let k=(0,p.defineVotingSystem)({name:"reactionsAndLikes",userCanActivate:d.isLW,description:"Likes (single-axis non-anonymous) plus reactions",hasInlineReacts:!0,addVoteClient:e=>{var t,n;let{voteType:o,document:i,oldExtendedScore:r,extendedVote:a,currentUser:s}=e,l=(0,y.addReactsVote)(null==r?void 0:r.reacts,null!=(t=null==a?void 0:a.reacts)?t:[],s);return{usersWhoLiked:null!=(n=null==r?void 0:r.usersWhoLiked)?n:[],reacts:l}},cancelVoteClient:e=>{var t;let{voteType:n,document:o,oldExtendedScore:i,cancelledExtendedVote:r,currentUser:a}=e,s=(0,y.removeReactsVote)(null==i?void 0:i.reacts,a);return{usersWhoLiked:null!=(t=null==i?void 0:i.usersWhoLiked)?t:[],reacts:s}},computeExtendedScore:async(e,t)=>{let n=(0,g.default)(e.map(e=>e.userId)),o=await (0,u.loadByIds)(t,"Users",n),i=(0,f.default)((0,m.filterNonnull)(o),e=>e._id),r={};for(let t of e){var a;let e=t.extendedVoteType,n={userId:t.userId,displayName:null!=(a=i[t.userId].displayName)?a:"",karma:i[t.userId].karma};if(null==e?void 0:e.reacts)for(let t of e.reacts){let e={...n,reactType:t.vote,quotes:t.quotes};r[t.react]?r[t.react].push(e):r[t.react]=[e]}}let s=e.filter(e=>"smallUpvote"===e.voteType||"bigUpvote"===e.voteType);return{usersWhoLiked:(0,w.default)(s,e=>-i[e.userId].karma).map(e=>({_id:e.userId,displayName:(0,C.userGetDisplayName)(i[e.userId])})),reacts:r}},isAllowedExtendedVote:e=>{let{user:t,document:n,oldExtendedScore:o,extendedVote:i,skipRateLimits:r}=e;return{allowed:!0}},isNonblankExtendedVote:e=>!0,getCommentHighlights:e=>{let{comment:t,voteProps:n}=e;return(0,y.getDocumentHighlights)(n)},getPostHighlights:e=>{let{post:t,voteProps:n}=e;return(0,y.getDocumentHighlights)(n)},getTagOrLensHighlights:e=>{let{tagOrLens:t,voteProps:n}=e;return(0,y.getDocumentHighlights)(n)}});var j=e.i(481867),S=e.i(662703);let I=[{Component:j.TickReactionIcon,name:"agree",label:"Agree"},{Component:S.CrossReactionIcon,name:"disagree",label:"Disagree",isNegative:!0}],T=[{Component:()=>(0,n.jsx)("svg",{width:"14",height:"12",viewBox:"0 0 14 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{id:"Vector",d:"M10.9594 0.0838336C9.75857 -0.208832 8.12283 0.211214 7.00411 2.1998C5.88331 0.211206 4.24737 -0.208832 3.04234 0.0838336C1.5451 0.450323 0.5 1.8468 0.5 3.48009C0.5 6.11666 2.48195 8.01141 4.77779 10.2057C5.08507 10.4984 5.3425 10.7553 5.5611 10.9744C6.24702 11.658 6.62346 12 7 12C7.37654 12 7.75296 11.6582 8.43891 10.9744C8.65741 10.7554 8.91493 10.5007 9.22221 10.2057C11.5179 8.01821 13.5 6.1279 13.5 3.48009C13.5 1.8445 12.4549 0.447974 10.9577 0.0838336H10.9594Z",fill:"currentColor"})}),name:"love",label:"Heart"},{Component:()=>(0,n.jsx)("svg",{width:"18",height:"14",viewBox:"0 0 18 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsxs)("g",{id:"Group 103",children:[(0,n.jsx)("path",{id:"Vector",d:"M14.5574 9.2523L9.33638 4.46653C8.3658 4.60041 7.47887 5.53752 7.46215 5.55423C6.47587 6.33728 5.47081 5.75504 5.43731 5.72157C4.63407 4.98527 5.37037 3.76366 5.40384 3.71348C5.48751 3.57961 5.57118 3.44573 5.67159 3.31186C5.68832 3.27839 5.70505 3.26166 5.72179 3.22819C5.80546 3.11105 5.90586 2.97718 5.98953 2.86004C6.00627 2.84331 6.023 2.82657 6.03974 2.7931C6.12341 2.6927 6.20708 2.57556 6.30748 2.49189L6.57077 2.23441H2.87251V2.25114C2.87251 2.31808 2.97735 2.25763 2.97735 2.32457C2.97735 2.3413 2.97735 2.35803 2.96062 2.37477C2.94389 2.44171 2.92715 2.52538 2.91042 2.59231L1.65698 6.35253C4.88119 9.13077 7.98076 12.8504 8.39921 13.1518C8.66695 13.3359 8.98492 13.3694 9.20245 13.1518C9.47019 12.8841 9.47019 12.4657 9.20245 12.198L8.39921 11.3947L7.51228 10.4911C7.44534 10.4241 7.44534 10.3237 7.51228 10.2568C7.57922 10.1899 7.76737 9.88896 7.8343 9.95589L9.95952 12.0811C10.2775 12.3991 10.6918 12.7 11.0097 12.382C11.1603 12.2314 11.244 12.0306 11.244 11.8131C11.244 11.5955 11.1603 11.4114 11.0264 11.2608L11.0097 11.2441L9.43669 9.62085L9.13547 9.31964C9.06853 9.2527 9.06853 9.1523 9.13547 9.08536C9.20241 9.01842 9.39768 8.81763 9.46462 8.88457L11.3388 10.8257L11.7572 11.2608C12.0752 11.5788 12.4823 11.7963 12.817 11.5118C13.0011 11.3612 13.1015 11.1269 13.1015 10.8926C13.1015 10.6751 13.0178 10.4575 12.8505 10.2902L11.4448 8.918L10.5245 8.03107C10.4575 7.96414 10.6917 7.7299 10.7587 7.66296C10.8256 7.59602 10.926 7.59602 10.9929 7.66296L13.3357 9.92205L13.7206 10.2902C13.8712 10.4408 14.0415 10.5227 14.2728 10.5077C14.4028 10.4994 14.4808 10.477 14.5909 10.4073C14.9342 10.1897 14.9088 9.68775 14.6745 9.36978L14.5574 9.2523Z",fill:"currentColor"}),(0,n.jsx)("path",{id:"Vector_2",d:"M2.72148 6.72653L3.79362 3.97303C3.82053 3.94196 3.84125 3.9227 3.85985 3.88726C3.89917 3.83256 3.94468 3.76605 3.97569 3.70698L3.98189 3.69517L4.03149 3.60067C4.24216 3.13869 4.94793 2.34452 4.70229 2.06489C4.16515 1.45147 3.50418 1.13466 3.28176 1.03299L0.330381 6.65585L0.962343 6.98756C1.30328 7.16651 2.38822 7.13921 2.72148 6.72653Z",fill:"currentColor"}),(0,n.jsx)("path",{id:"Vector_3",d:"M14.126 3.18453C14.1047 3.14025 14.0818 3.08067 14.0605 3.0364C14.059 3.02109 14.0406 3.00744 14.0391 2.99213C14.0192 2.96316 14.0147 2.91724 14.0118 2.88663C14.0103 2.87132 14.0073 2.84071 13.9889 2.82705C13.9859 2.79643 13.9814 2.75051 13.9616 2.72155L13.9556 2.66032L13.9511 2.6144L9.28579 1.41661C9.00683 1.35114 8.70012 1.35019 8.45445 1.45145C8.05843 1.58285 8.11056 1.62561 7.46656 2.18303C7.35741 2.28641 7.10673 2.60842 6.99065 2.73392C6.99065 2.73392 5.25935 4.82038 5.81035 5.2963C6.04019 5.49482 6.17529 5.66312 7.16317 4.96395C7.28621 4.82831 8.34046 3.84999 9.41147 3.65262L9.42834 3.65098L9.46209 3.64768L9.47896 3.64603C9.49584 3.64438 9.51421 3.65804 9.53258 3.6717L15.0721 8.44053L15.164 8.50883C15.7963 8.35435 15.9616 7.78613 16.2018 7.16965C16.839 5.53466 14.126 3.18453 14.126 3.18453Z",fill:"currentColor"}),(0,n.jsx)("path",{id:"Vector_4",d:"M13.3474 2.32685C12.938 2.59461 12.7574 3.07647 12.884 3.51727C12.9262 3.6642 13.0036 3.79778 13.1004 3.9115L14.5795 6.54009L15.4489 6.49349L14.6078 6.57948C14.9059 6.90521 16.2704 6.95939 16.7172 6.79026L17.6696 6.42976L15.6947 1.21275C15.3614 1.32641 14.3025 1.68964 13.3474 2.32685Z",fill:"currentColor"})]})}),name:"helpful",label:"Helpful"},{Component:()=>(0,n.jsx)("svg",{width:"10",height:"14",viewBox:"0 0 10 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsxs)("g",{id:"Group",children:[(0,n.jsx)("path",{id:"Vector",d:"M7.18233 9.82584H2.81909C2.6691 9.82584 2.54639 10.0058 2.54639 10.2258V11.8258H7.45503V10.2258C7.45503 10.0058 7.33232 9.82584 7.18233 9.82584Z",fill:"currentColor"}),(0,n.jsx)("path",{id:"Vector_2",d:"M3.09179 11.2H2.54639V12.1797C2.54639 12.3144 2.6691 12.4246 2.81909 12.4246H7.18233C7.33232 12.4246 7.45503 12.3144 7.45503 12.1797V11.2H3.09179Z",fill:"currentColor"}),(0,n.jsx)("path",{id:"Vector_3",d:"M4.28058 12.9903H3.58521C3.86606 13.4287 4.39515 13.7251 5.00058 13.7251C5.60601 13.7251 6.13496 13.4287 6.41595 12.9903H4.28058Z",fill:"currentColor"}),(0,n.jsx)("path",{id:"Vector_4",d:"M8.01392 1.35959C7.14395 0.612576 6.0014 0.228038 4.79322 0.279541C2.55438 0.372588 0.729798 2.02088 0.64004 4.03423C0.596458 5.00405 0.953633 5.94952 1.64355 6.69651C2.3308 7.4362 2.73705 8.36437 2.80521 9.33672H3.90967V6.50002H3.50061C2.97431 6.50002 2.54615 6.01315 2.54615 5.54047C2.54615 5.06779 2.97431 4.68325 3.50061 4.68325C4.02691 4.68325 4.45507 5.06779 4.45507 5.54047V5.90785H5.54588V5.54047C5.54588 5.06779 5.97404 4.68325 6.50034 4.68325C7.02664 4.68325 7.4548 5.06779 7.4548 5.54047C7.4548 6.01315 7.02664 6.50002 6.50034 6.50002H6.09129V9.33672H7.19575C7.2666 8.37661 7.68113 7.45084 8.40661 6.6426C9.02285 5.9495 9.36375 5.08005 9.36375 4.19341C9.36375 3.11336 8.88388 2.10664 8.01392 1.35959Z",fill:"currentColor"}),(0,n.jsx)("path",{id:"Vector_5",d:"M4.45532 6.5H5.54613V9.34H4.45532V6.5Z",fill:"currentColor"}),(0,n.jsx)("path",{id:"Vector_6",d:"M3.50061 5.17322C3.27429 5.17322 3.09155 5.33734 3.09155 5.5406C3.09155 5.74386 3.27429 5.90798 3.50061 5.90798H3.90966V5.5406C3.90966 5.33734 3.72692 5.17322 3.50061 5.17322Z",fill:"currentColor"}),(0,n.jsx)("path",{id:"Vector_7",d:"M6.90942 5.5406C6.90942 5.33734 6.72668 5.17322 6.50036 5.17322C6.27404 5.17322 6.09131 5.33734 6.09131 5.5406V5.90798H6.50036C6.72668 5.90798 6.90942 5.74386 6.90942 5.5406Z",fill:"currentColor"})]})}),name:"insightful",label:"Insightful"},{Component:()=>(0,n.jsx)("svg",{width:"12",height:"11",viewBox:"0 0 12 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{id:"Polygon 3",d:"M6 1.28885L10.2056 9.7H1.79443L6 1.28885Z",stroke:"currentColor",strokeWidth:"1.6"})}),name:"changed-mind",label:"Changed my mind"},{Component:()=>(0,n.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 8C1 3.575 4.575 0 9 0C13.425 0 17 3.575 17 8C17 12.425 13.425 16 9 16C4.575 16 1 12.425 1 8ZM11.25 6C11.25 5.57614 11.5761 5.25 12 5.25C12.4239 5.25 12.75 5.57614 12.75 6C12.75 6.27614 12.9739 6.5 13.25 6.5C13.5261 6.5 13.75 6.27614 13.75 6C13.75 5.02386 12.9761 4.25 12 4.25C11.0239 4.25 10.25 5.02386 10.25 6C10.25 6.27614 10.4739 6.5 10.75 6.5C11.0261 6.5 11.25 6.27614 11.25 6ZM5.82501 5.25C5.40115 5.25 5.07501 5.57614 5.07501 6C5.07501 6.27614 4.85115 6.5 4.57501 6.5C4.29887 6.5 4.07501 6.27614 4.07501 6C4.07501 5.02386 4.84887 4.25 5.82501 4.25C6.80115 4.25 7.57501 5.02386 7.57501 6C7.57501 6.27614 7.35115 6.5 7.07501 6.5C6.79887 6.5 6.57501 6.27614 6.57501 6C6.57501 5.57614 6.24887 5.25 5.82501 5.25ZM12.1727 8.5C12.406 8.5 12.6393 8.60468 12.809 8.7931C12.9574 8.96059 13.0423 9.21182 12.9786 9.46305C12.2999 11.431 10.9849 12.75 8.99128 12.75C6.99761 12.75 5.51294 11.431 5.00394 9.46305C4.98273 9.21182 5.04635 8.98153 5.21603 8.7931C5.3857 8.60468 5.5978 8.5 5.85231 8.5H12.1727Z",fill:"currentColor"})}),name:"laugh",label:"Made me laugh"}],N=[...I,...T].map(e=>{let{name:t}=e;return t});T.map(e=>{let{name:t}=e;return t}),e.s(["eaAnonymousEmojiPalette",0,I,"eaEmojiNames",0,N,"eaEmojiPalette",0,T,"getEAAnonymousEmojiByName",0,e=>I.find(t=>{let{name:n}=t;return n===e}),"getEAPublicEmojiByName",0,e=>T.find(t=>{let{name:n}=t;return n===e}),"getEmojiMutuallyExclusivePartner",0,e=>{switch(e){case"agree":return"disagree";case"disagree":return"agree";default:return}}],583091);var L=e.i(584262),R=e.i(348433);let _=[{name:"truth",scoreLabel:"Truth",goodLabel:"True",badLabel:"False"},{name:"aim",scoreLabel:"Aim",goodLabel:"Hits the Mark",badLabel:"Misses the Point"},{name:"clarity",scoreLabel:"Clarity",goodLabel:"Clear",badLabel:"Muddled"},{name:"seeking",scoreLabel:"Seeking",goodLabel:"Seeks Truth",badLabel:"Seeks Conflict"}],A=[{name:"skepticism",label:"Skepticism",icon:""},{name:"enthusiasm",label:"Enthusiasm",icon:""},{name:"empathy",label:"Empathy",icon:""},{name:"surprise",label:"Surprise",icon:""}],M=[{name:"raised-hands",icon:""},{name:"enthusiasm",icon:""},{name:"empathy",icon:""},{name:"star",icon:""},{name:"surprise",icon:""}];e.s(["emojiReactions",0,M,"reactBallotAxes",0,_,"reactBallotStandaloneReactions",0,A],466608);let P=(0,p.defineVotingSystem)({name:"default",description:"Reddit-style up/down with strongvotes",addVoteClient:e=>{let{oldExtendedScore:t,extendedVote:n,currentUser:o}=e;return null},cancelVoteClient:e=>{let{oldExtendedScore:t,cancelledExtendedVote:n,currentUser:o}=e;return null},computeExtendedScore:async(e,t)=>null,isNonblankExtendedVote:e=>!1}),E=(0,p.defineVotingSystem)({name:"twoAxis",description:"Default (Two-Axis Approve and Agree)",userCanActivate:()=>!0,addVoteClient:e=>{let{voteType:t,document:n,oldExtendedScore:o,extendedVote:i,currentUser:r}=e,a=(0,c.calculateVotePower)(r.karma,(null==i?void 0:i.agreement)||"neutral");return{approvalVoteCount:(o&&"approvalVoteCount"in o?o.approvalVoteCount:n.voteCount)+ +!!(t&&"neutral"!==t),agreement:((null==o?void 0:o.agreement)||0)+a,agreementVoteCount:((null==o?void 0:o.agreementVoteCount)||0)+1}},cancelVoteClient:e=>{let{voteType:t,document:n,oldExtendedScore:o,cancelledExtendedVote:i,currentUser:r}=e,a=null==i?void 0:i.agreement,s=a&&"neutral"!==a,l=s?(0,c.calculateVotePower)(r.karma,a):0;return{approvalVoteCount:(o&&"approvalVoteCount"in o?o.approvalVoteCount:n.voteCount)-!!(t&&"neutral"!==t),agreement:((null==o?void 0:o.agreement)||0)-(s?l:0),agreementVoteCount:((null==o?void 0:o.agreementVoteCount)||0)-!!s}},computeExtendedScore:async(e,t)=>{let n=(0,g.default)(e.map(e=>e.userId)),o=await (0,u.loadByIds)(t,"Users",n),i=(0,f.default)((0,m.filterNonnull)(o),e=>e._id);return{approvalVoteCount:e.filter(e=>e.voteType&&"neutral"!==e.voteType).length,agreement:(0,x.default)(e,e=>(0,c.getVoteAxisStrength)(e,i,"agreement")),agreementVoteCount:e.filter(e=>0!==(0,c.getVoteAxisStrength)(e,i,"agreement")).length}},isNonblankExtendedVote:e=>{var t;return(null==e||null==(t=e.extendedVoteType)?void 0:t.agreement)&&"neutral"!==e.extendedVoteType.agreement}}),F=_.map(e=>e.name),B=A.map(e=>e.name),D=(0,p.defineVotingSystem)({name:"reactsBallot",description:"React-Ballots",addVoteClient:e=>{let{oldExtendedScore:t,extendedVote:n,currentUser:o}=e,i=(0,R.default)(F.map(e=>{let i=(0,c.calculateVotePower)(o.karma,(null==n?void 0:n[e])||"neutral");return[e,((null==t?void 0:t[e])||0)+i]})),r=(0,R.default)(B.map(e=>{let o=!!(null==n?void 0:n[e]);return[e,((null==t?void 0:t[e])||0)+ +!!o]}));return O({...i,...r})},cancelVoteClient:e=>{let{oldExtendedScore:t,cancelledExtendedVote:n,currentUser:o}=e,i=(0,R.default)(F.map(e=>{let i=null==n?void 0:n[e],r=(null==t?void 0:t[e])||0;return i&&"neutral"!==i?[e,r-(0,c.calculateVotePower)(o.karma,i)]:[e,r]})),r=(0,R.default)(B.map(e=>{let o=!!(null==n?void 0:n[e]);return[e,(null==t?void 0:t[e])-!!o]}));return O({...i,...r})},computeExtendedScore:async(e,t)=>{let n=(0,g.default)(e.map(e=>e.userId)),o=await (0,u.loadByIds)(t,"Users",n),i=(0,f.default)((0,m.filterNonnull)(o),e=>e._id),r=(0,R.default)(F.map(t=>[t,(0,x.default)(e,e=>(0,c.getVoteAxisStrength)(e,i,t))])),a=(0,R.default)(B.map(t=>[t,(0,x.default)(e,e=>{var n;return+(null!=e&&null!=(n=e.extendedVoteType)&&!!n[t])})]));return O({...r,...a})},isNonblankExtendedVote:e=>{if(!e.extendedVoteType)return!1;for(let t of Object.keys(e.extendedVoteType))if(e.extendedVoteType[t]&&"neutral"!==e.extendedVoteType[t])return!0;return!1}}),U=M.map(e=>e.name),H=(0,p.defineVotingSystem)({name:"emojiReactions",description:"Emoji reactions",addVoteClient:e=>{let{oldExtendedScore:t,extendedVote:n,currentUser:o}=e;return O({...(0,R.default)(U.map(e=>{let o=!!(null==n?void 0:n[e]);return[e,((null==t?void 0:t[e])||0)+ +!!o]}))})},cancelVoteClient:e=>{let{oldExtendedScore:t,cancelledExtendedVote:n,currentUser:o}=e;return O({...(0,R.default)(U.map(e=>{let o=!!(null==n?void 0:n[e]);return[e,(null==t?void 0:t[e])-!!o]}))})},computeExtendedScore:async(e,t)=>O({...(0,R.default)(U.map(t=>[t,(0,x.default)(e,e=>{var n;return+(null!=e&&null!=(n=e.extendedVoteType)&&!!n[t])})]))}),isNonblankExtendedVote:e=>{if(!e.extendedVoteType)return!1;for(let t of Object.keys(e.extendedVoteType))if(e.extendedVoteType[t]&&"neutral"!==e.extendedVoteType[t])return!0;return!1}}),W=(0,p.defineVotingSystem)({name:"eaEmojis",description:"Approval voting, plus EA Forum emoji reactions",addVoteClient:e=>{let{oldExtendedScore:t,extendedVote:n,document:o,voteType:i}=e,r=t&&"approvalVoteCount"in t?t.approvalVoteCount:o.voteCount;return{...O({...(0,R.default)(N.map(e=>{let o=+(!0===(null==n?void 0:n[e]));return[e,((null==t?void 0:t[e])||0)+o]}))}),approvalVoteCount:r+ +!!(i&&"neutral"!==i)}},cancelVoteClient:e=>{let{oldExtendedScore:t,cancelledExtendedVote:n}=e;return O({...(0,R.default)(N.map(e=>{var o;let i=!!(null==n?void 0:n[e]),r=null!=(o=null==t?void 0:t[e])?o:0;return[e,r-!!i]}))})},computeExtendedScore:async(e,t)=>O({...(0,R.default)(N.map(t=>[t,(0,x.default)(e,e=>{var n;return+(null!=e&&null!=(n=e.extendedVoteType)&&!!n[t])})]))}),isNonblankExtendedVote:e=>{if(!e.extendedVoteType)return!1;for(let t of Object.keys(e.extendedVoteType))if(e.extendedVoteType[t]&&"neutral"!==e.extendedVoteType[t])return!0;return!1}});function O(e){return(0,L.default)(e,e=>!!e)}function V(e){let t=$();return e&&t[e]?t[e]:z()}function z(){return $().default}let $=()=>(t||(t={default:P,twoAxis:E,namesAttachedReactions:b,reactionsAndLikes:k,reactsBallot:D,emojiReactions:H,eaEmojis:W}),t);function q(){let e=$();return Object.keys(e).map(t=>e[t])}e.s(["getDefaultVotingSystem",()=>z,"getVotingSystemByName",()=>V,"getVotingSystems",()=>q],692436);var G=e.i(384592),Z=e.i(538794);e.i(793794);var Y=e.i(527633),Q=e.i(136541),K=e.i(476331),X=e.i(833851);let J=(0,Z.registerComponent)("VotingPatternsWarningPopup",e=>{let{onClose:t,classes:o}=e;return(0,n.jsxs)(X.default,{open:!0,children:[(0,n.jsx)(K.DialogTitle,{children:"Hang on there"}),(0,n.jsxs)(Q.DialogContent,{children:[(0,n.jsx)("p",{children:"You're voting pretty fast. Please only vote on things you've actually read. Mass-voting directed towards a user or topic is against site rules."}),(0,n.jsx)(Y.default,{onClick:t,className:o.dismissButton,children:"Acknowledge"})]})]})},{styles:e=>({dismissButton:{}})});e.i(813868);var ee=e.i(122756),et=e.i(530841);let en=(0,ee.gql)("\n  mutation performVoteComment($documentId: String, $voteType: String, $extendedVote: JSON) {\n    performVoteComment(documentId: $documentId, voteType: $voteType, extendedVote: $extendedVote) {\n      document {\n        ...WithVoteComment\n      }\n      showVotingPatternWarning\n    }\n  }\n"),eo=(0,ee.gql)("\n  mutation performVotePost($documentId: String, $voteType: String, $extendedVote: JSON) {\n    performVotePost(documentId: $documentId, voteType: $voteType, extendedVote: $extendedVote) {\n      document {\n        ...WithVotePost\n      }\n      showVotingPatternWarning\n    }\n  }\n"),ei=(0,ee.gql)("\n  mutation performVoteTagRel($documentId: String, $voteType: String, $extendedVote: JSON) {\n    performVoteTagRel(documentId: $documentId, voteType: $voteType, extendedVote: $extendedVote) {\n      document {\n        ...WithVoteTagRel\n      }\n      showVotingPatternWarning\n    }\n  }\n"),er=(0,ee.gql)("\n  mutation performVoteRevision($documentId: String, $voteType: String, $extendedVote: JSON) {\n    performVoteRevision(documentId: $documentId, voteType: $voteType, extendedVote: $extendedVote) {\n      document {\n        ...WithVoteRevision\n      }\n      showVotingPatternWarning\n    }\n  }\n"),ea=(0,ee.gql)("\n  mutation performVoteElectionCandidate($documentId: String, $voteType: String, $extendedVote: JSON) {\n    performVoteElectionCandidate(documentId: $documentId, voteType: $voteType, extendedVote: $extendedVote) {\n      document {\n        ...WithVoteElectionCandidate\n      }\n      showVotingPatternWarning\n    }\n  }\n"),es=(0,ee.gql)("\n  mutation performVoteTag($documentId: String, $voteType: String, $extendedVote: JSON) {\n    performVoteTag(documentId: $documentId, voteType: $voteType, extendedVote: $extendedVote) {\n      document {\n        ...WithVoteTag\n      }\n      showVotingPatternWarning\n    }\n  }\n"),el=(0,ee.gql)("\n  mutation performVoteMultiDocument($documentId: String, $voteType: String, $extendedVote: JSON) {\n    performVoteMultiDocument(documentId: $documentId, voteType: $voteType, extendedVote: $extendedVote) {\n      document {\n        ...WithVoteMultiDocument\n      }\n      showVotingPatternWarning\n    }\n  }\n"),ed={Comment:en,Post:eo,TagRel:ei,Message:(0,ee.gql)("\n  mutation performVoteMessage($documentId: String, $voteType: String, $extendedVote: JSON) {\n    performVoteMessage(documentId: $documentId, voteType: $voteType, extendedVote: $extendedVote) {\n      document {\n        ...WithVoteMessage\n      }\n      showVotingPatternWarning\n    }\n  }\n"),Revision:er,ElectionCandidate:ea,Tag:es,MultiDocument:el};e.s(["useVote",0,(e,t,l)=>{let c=(0,et.useGetCurrentUser)(),u=(0,i.useMessages)(),[m,p]=(0,o.useState)(null),h=(0,o.useRef)({optimisticMutationIndex:0,completedMutationIndex:0}),g=G.collectionNameToTypeName[t],f=ed[g],v=l||z(),{openDialog:x}=(0,r.useDialog)(),y=(0,o.useCallback)(()=>{x({name:"VotingPatternsWarningPopup",contents:e=>{let{onClose:t}=e;return(0,n.jsx)(J,{onClose:t})},closeOnNavigate:!0})},[x]),[b]=(0,a.useMutation)(f,{onCompleted:(0,o.useCallback)(e=>{var t;++h.current.completedMutationIndex===h.current.optimisticMutationIndex&&p(null);let n="performVote".concat(g);(null==e||null==(t=e[n])?void 0:t.showVotingPatternWarning)&&y()},[g,y])}),C=(0,o.useCallback)(async e=>{let{document:n,voteType:o,extendedVote:i=null}=e,r=c();if(!r)throw Error("You must be logged in to vote");let a=await (0,s.setVoteClient)({collectionName:t,document:n,user:r,voteType:o,extendedVote:i,votingSystem:v});try{h.current.optimisticMutationIndex++,p(a),await b({variables:{documentId:n._id,voteType:o,extendedVote:i}})}catch(e){u.flash({messageString:e.message}),p(null)}},[u,b,t,v,c]),w=m||e,k=((0,d.isAF)()?w.afBaseScore:w.baseScore)||0,j=w.voteCount||0;return(0,o.useMemo)(()=>({vote:C,collectionName:t,document:w,baseScore:k,voteCount:j}),[C,t,w,k,j])}],224931)},533940,(e,t,n)=>{var o=e.r(428138),i=e.r(45350);t.exports=function(e,t,n,r){return null==e?[]:(i(t)||(t=null==t?[]:[t]),i(n=r?void 0:n)||(n=null==n?[]:[n]),o(e,t,n))}},633731,(e,t,n)=>{var o=e.r(504688),i=e.r(541891),r=e.r(395059),a=e.r(791072);t.exports=r(function(e,t){return a(e)?o(e,i(t,1,a,!0)):[]})},8045,409560,410285,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(339213);let i=(0,o.default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"}),(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0V0z"})]}),"FormatListBulleted");e.s(["default",0,i],8045);var r=e.i(538794),a=e.i(343794);let s=(0,o.default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"})]}),"KeyboardArrowUp"),l=e=>{let{orientation:n,onClick:o,className:i,classes:r}=e;return(0,t.jsx)("span",{className:r.voteArrow,children:(0,t.jsx)(s,{onClick:o,className:(0,a.default)(i,r.voteArrowIcon,{[r.voteArrowLeft]:"left"===n,[r.voteArrowRight]:"right"===n})})})},d=(0,r.registerComponent)("ReactOrAntireactVote",e=>{let{reactionName:n,quote:o,netReactionCount:i,currentUserReaction:r,setCurrentUserReaction:a,classes:s}=e,d=e=>{"reacted"===e?"created"===r||"seconded"===r?a(n,null,o):a(n,"seconded",o):"disagreed"===r?a(n,null,o):a(n,"disagreed",o)};return(0,t.jsxs)("div",{className:s.reactOrAntireact,children:[(0,t.jsx)(l,{orientation:"left",onClick:()=>d("disagreed"),classes:s,className:"disagreed"===r?s.colorRed:void 0}),(0,t.jsx)("span",{className:s.reactionVoteCount,children:i}),(0,t.jsx)(l,{orientation:"right",onClick:()=>d("reacted"),classes:s,className:"created"===r||"seconded"===r?s.colorGreen:void 0})]})},{styles:e=>({reactOrAntireact:{minWidth:55},reactionVoteCount:{display:"inline-block",verticalAlign:"middle"},voteArrow:{color:e.palette.grey[400]},voteArrowIcon:{fontSize:"inherit",padding:0,width:24,height:24,verticalAlign:"middle",cursor:"pointer"},voteArrowLeft:{transform:"rotate(-90deg)",marginRight:-4},voteArrowRight:{transform:"rotate(-270deg)",marginLeft:-4},colorRed:{color:e.palette.error.main},colorGreen:{color:e.palette.primary.main}})});e.s(["default",0,d],409560);var c=e.i(110601);let u=(0,r.registerComponent)("UsersWhoReacted",e=>{let{reactions:n,wrap:o=!1,showTooltip:i=!0,classes:r}=e;if(0===n.length)return null;let s=n.filter(e=>"disagreed"!==e.reactType),l=n.filter(e=>"disagreed"===e.reactType),d=(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"Users Who Reacted:"}),(0,t.jsx)("ul",{children:s.map(e=>(0,t.jsx)("li",{children:e.displayName},e.userId))}),l.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:"Users Who Anti-reacted:"}),(0,t.jsx)("ul",{children:l.map(e=>(0,t.jsx)("li",{children:e.displayName},e.userId))})]})]}),u=(0,t.jsx)("div",{className:r.usersWhoReactedRoot,children:(0,t.jsxs)("div",{className:(0,a.default)(r.usersWhoReacted,{[r.usersWhoReactedWrap]:o}),children:[s.length>0&&(0,t.jsx)(t.Fragment,{children:s.map((e,n)=>(0,t.jsxs)("span",{children:[n>0&&", ",e.displayName]},e.userId))}),s.length>0&&l.length>0&&", ",l.length>0&&(0,t.jsx)(t.Fragment,{children:l.map((e,n)=>(0,t.jsxs)("span",{className:r.userWhoAntiReacted,children:[n>0&&", ",e.displayName]},e.userId))})]})});return i?(0,t.jsx)(c.default,{title:d,children:u}):u},{styles:e=>({usersWhoReactedRoot:{maxWidth:205,display:"flex",color:e.palette.grey[600]},usersWhoReactedWrap:{whiteSpace:"unset",overflow:"hidden",textOverflow:"ellipsis"},userWhoAntiReacted:{color:e.palette.error.main,opacity:.6},usersWhoReacted:{fontSize:12}})});e.s(["default",0,u],410285)},693062,e=>{"use strict";e.s(["useVoteButtonsDisabled",0,()=>({fail:!1})])},791440,e=>{"use strict";var t=e.i(843476),n=e.i(271645);let o=(0,n.createContext)(null);e.s(["RecombeeRecommendationsContext",0,o,"RecombeeRecommendationsContextWrapper",0,e=>{let{postId:i,recommId:r,children:a}=e,s=(0,n.useMemo)(()=>({recommId:r,postId:i}),[r,i]);return(0,t.jsx)(o.Provider,{value:s,children:a})}])},710970,248700,521128,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(530841),i=e.i(725788),r=e.i(161517),a=e.i(712434),s=e.i(791440),l=e.i(552275),d=e.i(293958),c=e.i(186947),u=e.i(79732),m=e.i(429329);let p=(0,m.defineStyles)("VoteButton",e=>({root:{color:e.palette.grey[400],fontSize:"inherit",width:"initial",height:"initial",padding:0,"&:hover":{backgroundColor:"transparent"},textAlign:"center",flex:"0 0 auto",borderRadius:"50%",overflow:"visible",transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:"none",border:0,margin:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none","&::-moz-focus-inner":{borderStyle:"none"}},inner:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"},colorMainPrimary:{color:e.palette.primary.main},colorMainSecondary:{color:e.palette.secondary.main},colorMainError:{color:e.palette.error.main},colorLightPrimary:{color:e.palette.primary.light},colorLightSecondary:{color:e.palette.secondary.light},colorLightError:{color:e.palette.error.light},entering:{animation:"".concat(1e3,"ms 1 normal strongVote"),transition:"opacity ".concat(1e3,"ms cubic-bezier(0.74, -0.01, 1, 1) 0ms")},"@keyframes strongVote":{from:{opacity:0},to:{opacity:.7}}})),h=(e,t,n)=>{if("main"===n)switch(t){case"error":return e.colorMainError;case"primary":return e.colorMainPrimary;case"secondary":return e.colorMainSecondary}else switch(t){case"error":return e.colorLightError;case"primary":return e.colorLightPrimary;case"secondary":return e.colorLightSecondary}},g=e=>{let{vote:t,currentStrength:o,children:i}=e,[r,a]=(0,n.useReducer)(e=>e+1,0),s=(0,n.useRef)({mode:"idle",vote:o});(0,n.useEffect)(()=>{"idle"===s.current.mode&&s.current.vote!==o&&(s.current={mode:"idle",vote:o},a())},[o]);let l=()=>{(0,c.isMobile)()||("completed"===s.current.mode?(t("big"),s.current={mode:"idle",vote:"big"}):"animating"===s.current.mode&&(clearTimeout(s.current.timer),"neutral"===s.current.from?(t("small"),s.current={mode:"idle",vote:"small"}):"small"===s.current.from&&(t("neutral"),s.current={mode:"idle",vote:"neutral"})),a())};return i({eventHandlers:{onMouseDown:()=>{if(!(0,c.isMobile)()){if("idle"===s.current.mode)if("big"===s.current.vote)t("small"),s.current={mode:"idle",vote:"small"};else{let e=s.current.vote;s.current={mode:"animating",from:e,timer:setTimeout(()=>{"animating"===s.current.mode&&clearTimeout(s.current.timer),s.current={mode:"completed",from:e},a()},1e3)}}a()}},onMouseUp:l,onClick:()=>{(0,c.isMobile)()&&("small"===o?(t("big"),s.current={mode:"idle",vote:"big"}):"neutral"===o?(t("small"),s.current={mode:"idle",vote:"small"}):(t("neutral"),s.current={mode:"idle",vote:"neutral"}),"animating"===s.current.mode&&(clearTimeout(s.current.timer),s.current={mode:"idle",vote:s.current.from},a()))},onMouseOut:()=>{l()}},state:s.current})};e.s(["VoteButtonAnimation",0,g,"getVoteButtonColor",0,h,"voteButtonSharedStyles",0,p],248700);var f=e.i(343794),v=e.i(900914);let x=e=>(0,t.jsx)("svg",{width:"9",height:"9",viewBox:"0 0 9 6",fill:"currentColor",...e,children:(0,t.jsx)("path",{d:"m4.499308,0.51796875 c-0.142868,0 -0.284967,0.059816 -0.384961,0.1810547 L0.84481497,4.6646484 c-0.268978,0.32612 -0.03777,0.8173828 0.38496103,0.8173828 H1.999698 L4.114347,2.9173828 c0.199989,-0.242477 0.571689,-0.242477 0.771679,0 l2.114649,2.5646484 h0.768164 c0.42273,0 0.65569,-0.4912628 0.386719,-0.8173828 L4.886026,0.69902345 C4.786031,0.57778495 4.642175,0.51796875 4.499308,0.51796875 Z"})}),y=(0,m.defineStyles)("VoteArrowIconSolid",e=>({root:{position:"relative"},disabled:{cursor:"not-allowed"},smallArrow:{opacity:e.isEAForum?.7:.6,pointerEvents:"none"},smallArrowLarge:{opacity:e.isEAForum?.7:.6,pointerEvents:"none"},up:{},upLarge:{},down:{transform:"rotate(-180deg)",top:1},downLarge:{transform:"rotate(-180deg)",top:1},right:{transform:"rotate(-270deg)"},rightLarge:{transform:"rotate(-270deg)"},left:{transform:"rotate(-90deg)"},leftLarge:{transform:"rotate(-90deg)"},bigArrow:{height:10,width:10,pointerEvents:"none",position:"absolute",top:"-70%",fontSize:"82%"},bigArrowLarge:{height:14,width:14,pointerEvents:"none",position:"absolute",top:"-90%",fontSize:"100%"},bigArrowSolid:{top:"-35%",transform:"scale(1.4)"},bigArrowSolidLarge:{top:"-30%",transform:"scale(1.6)"},bigArrowCompleted:{fontSize:"90%",top:"-35%"},bigArrowCompletedLarge:{fontSize:"110%",top:"-35%"}})),b=e=>{let{orientation:n,enabled:o=!0,color:i,animation:r,alwaysColored:a,largeArrow:s=!1}=e,l=(0,u.useStyles)(y),{state:d,eventHandlers:c}=r,m=(0,u.useStyles)(p),g=s?14:10,b="idle"!==d.mode||"neutral"!==d.vote;return(0,t.jsx)("button",{className:(0,f.default)(l.root,m.root,l[n],s&&l["".concat(n,"Large")],!o&&l.disabled),type:"button",...o?c:{},children:(0,t.jsxs)("span",{className:m.inner,children:[(0,t.jsx)(v.SoftUpArrowIcon,{width:g,height:g,className:(0,f.default)(s?l.smallArrowLarge:l.smallArrow,(b||a)&&h(m,i,"main"))}),("idle"===d.mode&&"big"===d.vote||"idle"!==d.mode)&&(0,t.jsx)(x,{className:(0,f.default)("animating"===d.mode&&m.entering,s?l.bigArrowLarge:l.bigArrow,"completed"===d.mode&&(s?l.bigArrowCompletedLarge:l.bigArrowCompleted),s?l.bigArrowSolidLarge:l.bigArrowSolid,h(m,i,"light"))})]})})},C=(0,m.defineStyles)("VoteArrowIconHollow",e=>({disabled:{cursor:"not-allowed"},smallArrow:{fontSize:"50%",opacity:e.isEAForum?.7:.6,width:"1em",height:"1em",fill:"currentColor",pointerEvents:"none"},up:{},right:{transform:"rotate(-270deg)"},down:{transform:"rotate(-180deg)"},left:{transform:"rotate(-90deg)"},bigArrow:{position:"absolute",top:"-70%",fontSize:"82%",pointerEvents:"none",width:"1em",height:"1em",fill:"currentColor"},bigArrowCompleted:{fontSize:"90%",top:"-75%",opacity:1}})),w=e=>{let{className:n}=e;return(0,t.jsxs)("svg",{className:n,viewBox:"6 6 12 12",children:[(0,t.jsx)("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"})]})},k=e=>{let{orientation:n,enabled:o=!0,color:i,animation:r,alwaysColored:a}=e,s=(0,u.useStyles)(C),{state:l,eventHandlers:d}=r,c=(0,u.useStyles)(p),m="idle"!==l.mode||"neutral"!==l.vote;return(0,t.jsx)("button",{className:(0,f.default)(c.root,s[n],!o&&s.disabled),type:"button",...o?d:{},children:(0,t.jsxs)("span",{className:c.inner,children:[(0,t.jsx)(w,{className:(0,f.default)(s.smallArrow,(m||a)&&h(c,i,"main"))}),("idle"===l.mode&&"big"===l.vote||"idle"!==l.mode)&&(0,t.jsx)(w,{className:(0,f.default)("animating"===l.mode&&c.entering,s.bigArrow,"completed"===l.mode&&s.bigArrowCompleted,h(c,i,"light"))})]})})},j=e=>{let{solidArrow:n}=e;return n?(0,t.jsx)(b,{...e}):(0,t.jsx)(k,{...e})};e.s(["default",0,j],521128),e.s(["default",0,e=>{let{vote:c,collectionName:u,document:m,upOrDown:p,color:h="secondary",orientation:f="up",enabled:v,solidArrow:x,largeArrow:y}=e,b=(0,o.useGetCurrentUser)(),{openDialog:C}=(0,i.useDialog)(),{captureEvent:w}=(0,r.useTracking)(),k=(0,n.useContext)(s.RecombeeRecommendationsContext),S=m.currentUserVote==="big"+p?"big":m.currentUserVote==="small"+p?"small":"neutral";return(0,t.jsx)(g,{vote:e=>{var n;let o="neutral"===e?"neutral":e+p,i=null==(n=b())?void 0:n._id;i?(null==c||c({document:m,voteType:o,extendedVote:null==m?void 0:m.currentUserExtendedVote}),w("vote",{collectionName:u}),l.recombeeEnabledSetting.get()&&"Posts"===u&&(null==k?void 0:k.postId)===m._id&&a.recombeeApi.createRating(m._id,i,o,k.recommId)):C({name:"LoginPopup",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(d.default,{onClose:n})}})},currentStrength:S,children:e=>(0,t.jsx)(j,{animation:e,color:h,orientation:f,solidArrow:x,largeArrow:y,alwaysColored:!1})})}],710970)},334445,e=>{"use strict";e.s(["default",()=>x]);var t=e.i(843476),n=e.i(271645),o=e.i(673991),i=e.i(244026),r=e.i(530841);e.i(552275);var a=e.i(935132),s=e.i(693062),l=e.i(710970),d=e.i(343794),c=e.i(791434),u=e.i(79732),m=e.i(429329),p=e.i(695310),h=e.i(110601);let g=(0,m.defineStyles)("OverallVoteAxis",e=>({overallSection:{display:"inline-block",height:24,paddingTop:2.5*!!e.isFriendlyUI},overallSectionBox:{marginLeft:8,outline:e.palette.border.commentBorder,borderRadius:e.isFriendlyUI?e.borderRadius.small:2,textAlign:"center",minWidth:60},vote:{fontSize:25,lineHeight:.6,whiteSpace:"nowrap",display:"inline-block"},voteScore:{lineHeight:1,fontSize:"1.1rem",margin:"0 4px",verticalAlign:"baseline"},secondarySymbol:{fontFamily:e.typography.body1.fontFamily},secondaryScore:{marginLeft:2,marginRight:14,fontSize:"1.1rem",display:"initial"},secondaryScoreNumber:{marginLeft:3},tooltipHelp:{fontSize:"1rem",fontStyle:"italic"},tooltip:{transform:"translateY(-10px)"},lwTooltip:{transform:"translateY(-3px)"},verticalArrows:{"& .LWTooltip-root":{},"& $voteScore":{display:"block"}}})),f=()=>(0,c.isFriendlyUI)()?"Is this a valuable contribution?":"How much do you like this overall?",v=e=>{let{collectionName:n,document:a}=e,s=(0,u.useStyles)(g),l=(0,r.useCurrentUser)(),d="";"Comments"===n&&(d=a.moveToAlignmentUserId);let c=a.afDate;return(0,o.userIsAdmin)(l)&&!!d&&(0,t.jsx)("div",{className:s.tooltipHelp,children:(0,t.jsxs)("span",{children:["Moved to AF by ",(0,t.jsx)(p.default,{documentId:d})," on ",c&&(0,i.default)(new Date(c)).format("YYYY-MM-DD")]})})},x=e=>{var o;let{document:i,hideKarma:r=!1,voteProps:c,showBox:m=!1,verticalArrows:p,largeArrows:x,hideAfScore:y,className:b,voteScoreClassName:C,secondaryScoreClassName:w}=e,k=(0,u.useStyles)(g),j=c.collectionName,S=null==(o=c.document)?void 0:o.extendedScore,I=S&&"approvalVoteCount"in S?S.approvalVoteCount:c.voteCount||0,T=c.baseScore,{fail:N,reason:L}=(0,s.useVoteButtonsDisabled)(),R=!N,_="comment";"Posts"===j&&(_="post"),"Revisions"===j&&(_="revision");let A=i.af,M=c.document.afBaseScore,P=n.default.useMemo(()=>r?"This post has disabled karma visibility":(0,t.jsxs)("div",{children:["This ",_," has ",T," ",(0,t.jsx)("b",{children:"overall"})," karma (",I," ",1===I?"Vote":"Votes",")"]}),[r,_,T,I]),E=n.default.useMemo(()=>R?e=>{let{children:n}=e;return(0,t.jsx)(t.Fragment,{children:n})}:e=>{let{children:n}=e;return(0,t.jsx)(h.default,{placement:"top",popperClassName:k.tooltip,title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:L}),(0,t.jsx)("div",{children:P})]}),children:n})},[R,P,L,k.tooltip]),F=n.default.useMemo(()=>R?e=>{let{children:n,...o}=e;return(0,t.jsx)(h.default,{...o,popperClassName:k.tooltip,children:n})}:e=>{let{children:n}=e;return(0,t.jsx)(t.Fragment,{children:n})},[R,k.tooltip]);return i?(0,t.jsx)(E,{children:(0,t.jsxs)("span",{className:k.vote,children:[!!A&&!(0,a.isAF)()&&!y&&(0,t.jsx)(h.default,{placement:"top",popperClassName:k.tooltip,title:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"AI Alignment Forum Karma"}),(0,t.jsx)(v,{collectionName:j,document:i})]}),children:(0,t.jsxs)("span",{className:(0,d.default)(k.secondaryScore,w),children:[(0,t.jsx)("span",{className:k.secondarySymbol,children:""}),(0,t.jsx)("span",{className:k.secondaryScoreNumber,children:M||0})]})}),!A&&(0,a.isAF)()&&(0,t.jsx)(h.default,{title:"LessWrong Karma",placement:"top",className:k.lwTooltip,children:(0,t.jsxs)("span",{className:(0,d.default)(k.secondaryScore,w),children:[(0,t.jsx)("span",{className:k.secondarySymbol,children:"LW"}),(0,t.jsx)("span",{className:k.secondaryScoreNumber,children:i.baseScore||0})]})}),(!(0,a.isAF)()||!!A)&&(0,t.jsxs)("span",{className:(0,d.default)(k.overallSection,b,{[k.overallSectionBox]:m,[k.verticalArrows]:p}),children:[(0,t.jsx)(F,{title:(0,t.jsxs)("div",{children:[(0,t.jsx)("b",{children:"Overall Karma: Downvote"}),(0,t.jsx)("br",{}),f(),(0,t.jsx)("br",{}),(0,t.jsxs)("em",{children:["For strong downvote, click-and-hold",(0,t.jsx)("br",{}),"(Click twice on mobile)"]})]}),placement:"top",children:(0,t.jsx)(l.default,{orientation:p?"down":"left",color:"error",upOrDown:"Downvote",enabled:R,largeArrow:x,solidArrow:p,document:c.document,collectionName:c.collectionName,vote:c.vote})}),(0,t.jsx)(F,{title:P,placement:"top",children:r?(0,t.jsx)("span",{children:" "}):(0,t.jsx)("span",{className:(0,d.default)(k.voteScore,C),children:T})}),(0,t.jsx)(F,{title:(0,t.jsxs)("div",{children:[(0,t.jsx)("b",{children:"Overall Karma: Upvote"}),(0,t.jsx)("br",{}),f(),(0,t.jsx)("br",{}),(0,t.jsxs)("em",{children:["For strong upvote, click-and-hold",(0,t.jsx)("br",{}),"(Click twice on mobile)"]})]}),placement:"top",children:(0,t.jsx)(l.default,{orientation:p?"up":"right",color:"secondary",upOrDown:"Upvote",enabled:R,largeArrow:x,solidArrow:p,document:c.document,collectionName:c.collectionName,vote:c.vote})})]})]})}):null}},266640,559347,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(693062),i=e.i(79732),r=e.i(429329),a=e.i(343794),s=e.i(813292),l=e.i(248700);let d=(0,r.defineStyles)("VoteAgreementIcon",e=>({root:{bottom:2},check:{fontSize:"50%",opacity:.6,height:15,position:"absolute",top:3,left:2},bigCheck:{opacity:0,position:"absolute",top:-3,left:2,fontSize:"82%",height:23,pointerEvents:"none"},bigCheckCompleted:{opacity:1},smallCheckBigVoted:{fontSize:"50%",opacity:.6,position:"absolute",height:14,transform:"translate(-4.5px, -2px)",pointerEvents:"none"},clear:{fontSize:"45%",opacity:.6,position:"absolute",top:6,left:4},bigClear:{opacity:0,position:"absolute",top:1,left:5,fontSize:"70%",pointerEvents:"none"},bigClearCompleted:{opacity:1,fontSize:"80%",position:"absolute",left:-2,top:0,pointerEvents:"none"},smallArrowBigVoted:{opacity:.6,position:"absolute",height:14,transform:"scale(1.4) translate(-4.1px, 2.3px)",pointerEvents:"none"},hideIcon:{opacity:0},iconsContainer:{position:"relative",width:18,height:18},disabled:{cursor:"not-allowed"}})),c=e=>{let{orientation:n,enabled:o=!0,color:r,animation:c,alwaysColored:u}=e,m=(0,i.useStyles)(d),{state:p,eventHandlers:h}=c,g=(0,i.useStyles)(l.voteButtonSharedStyles),f="left"===n?"Downvote":"Upvote",v="Downvote"===f?"CrossReaction":"TickReaction",x="idle"===p.mode&&"big"===p.vote||"idle"!==p.mode,y="idle"!==p.mode||"neutral"!==p.vote,b="idle"!==p.mode||"big"===p.vote;return(0,t.jsx)("button",{className:(0,a.default)(m.root,g.root,!o&&m.disabled),type:"button",...o?h:{},children:(0,t.jsx)("span",{className:g.inner,children:(0,t.jsxs)("div",{className:m.iconsContainer,children:[(0,t.jsx)(s.default,{icon:v,className:(0,a.default)("Downvote"===f?m.clear:m.check,x&&m.hideIcon,(y||u)&&(0,l.getVoteButtonColor)(g,r,"main"))}),("idle"===p.mode&&"big"===p.vote||"idle"!==p.mode)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.default,{icon:v,className:(0,a.default)("animating"===p.mode&&g.entering,"Downvote"===f?m.bigClear:m.bigCheck,x&&("Downvote"===f?m.bigClearCompleted:m.bigCheckCompleted),(0,l.getVoteButtonColor)(g,r,"light"))}),(0,t.jsx)(s.default,{icon:"Downvote"===f?"CrossReactionCap":"TickReaction",className:(0,a.default)("animating"===p.mode&&g.entering,"Downvote"===f?m.smallArrowBigVoted:m.smallCheckBigVoted,x&&"Downvote"===f?m.smallArrowBigVoted:m.smallCheckBigVoted,!b&&m.hideIcon,(0,l.getVoteButtonColor)(g,r,"light"))})]})]})})})};var u=e.i(530841),m=e.i(725788),p=e.i(161517),h=e.i(293958);let g=e=>{var n;let{VoteIconComponent:o,vote:i,document:r,axis:a,upOrDown:s,color:d,orientation:c,enabled:g,collectionName:f}=e,v=(0,u.useCurrentUserId)(),{openDialog:x}=(0,m.useDialog)(),{captureEvent:y}=(0,p.useTracking)(),b=(null==(n=r.currentUserExtendedVote)?void 0:n[a])||"neutral";return(0,t.jsx)(l.VoteButtonAnimation,{vote:e=>{v?(i({document:r,voteType:r.currentUserVote||"neutral",extendedVote:{...r.currentUserExtendedVote,[a]:"neutral"===e?"neutral":e+s}}),y("axisVote",{axis:a,...f&&{collectionName:f}})):x({name:"LoginPopup",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(h.default,{onClose:n})}})},currentStrength:b==="small"+s?"small":b==="big"+s?"big":"neutral",children:e=>(0,t.jsx)(o,{color:d,orientation:c,animation:e,alwaysColored:!1})})};e.s(["default",0,g],559347);var f=e.i(110601);let v=(0,r.defineStyles)("AgreementVoteAxis",e=>({root:{},agreementSection:{display:"inline-block",fontSize:25,marginLeft:8,lineHeight:.6,height:24,minWidth:60,borderRadius:e.isFriendlyUI?e.borderRadius.small:2,textAlign:"center",whiteSpace:"nowrap"},agreementScore:{lineHeight:1,fontSize:"1.1rem",margin:"0 3px"},tooltip:{transform:"translateY(-10px)"}}));e.s(["default",0,e=>{var r,s,l,d;let{document:u,hideKarma:m=!1,voteProps:p,agreementScoreClassName:h}=e,x=(0,i.useStyles)(v),y=(null==(s=p.document)||null==(r=s.extendedScore)?void 0:r.agreementVoteCount)||0,b=(null==(d=p.document)||null==(l=d.extendedScore)?void 0:l.agreement)||0,{fail:C,reason:w}=(0,o.useVoteButtonsDisabled)(),k=!C,j="comment";"Posts"===p.collectionName&&(j="post"),"Revisions"===p.collectionName&&(j="revision");let S=n.default.useMemo(()=>m?"This post has disabled karma visibility":(0,t.jsxs)("div",{children:["This ",j," has ",b," ",(0,t.jsx)("b",{children:"agreement"})," karma (",y," ",1===y?"Vote":"Votes",")"]}),[m,j,b,y]),I=n.default.useMemo(()=>k?e=>{let{children:n}=e;return(0,t.jsx)(t.Fragment,{children:n})}:e=>{let{children:n}=e;return(0,t.jsx)(f.default,{placement:"top",popperClassName:x.tooltip,title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:w}),(0,t.jsx)("div",{children:S})]}),children:n})},[k,S,w,x.tooltip]),T=n.default.useMemo(()=>k?e=>{let{children:n,...o}=e;return(0,t.jsx)(f.default,{...o,popperClassName:x.tooltip,children:n})}:e=>{let{children:n}=e;return(0,t.jsx)(t.Fragment,{children:n})},[k,x.tooltip]);return(0,t.jsx)(I,{children:(0,t.jsxs)("span",{className:x.agreementSection,children:[(0,t.jsx)(T,{title:(0,t.jsxs)("div",{children:[(0,t.jsx)("b",{children:"Agreement: Downvote"}),(0,t.jsx)("br",{}),"How much do you ",(0,t.jsx)("b",{children:"disagree"})," with this, separate from whether you think it's a good comment?",(0,t.jsx)("br",{}),(0,t.jsxs)("em",{children:["For strong downvote, click-and-hold.",(0,t.jsx)("br",{}),"(Click twice on mobile)"]})]}),placement:"top",children:(0,t.jsx)(g,{VoteIconComponent:c,axis:"agreement",orientation:"left",color:"error",upOrDown:"Downvote",enabled:k,vote:p.vote,collectionName:p.collectionName,document:p.document})}),(0,t.jsx)("span",{className:(0,a.default)(x.agreementScore,h),children:(0,t.jsx)(T,{title:S,placement:"top",children:m?(0,t.jsx)("span",{children:" "}):(0,t.jsx)("span",{children:b})})}),(0,t.jsx)(T,{title:(0,t.jsxs)("div",{children:[(0,t.jsx)("b",{children:"Agreement: Upvote"}),(0,t.jsx)("br",{}),"How much do you ",(0,t.jsx)("b",{children:"agree"})," with this, separate from whether you think it's a good comment?",(0,t.jsx)("br",{}),(0,t.jsxs)("em",{children:["For strong upvote, click-and-hold",(0,t.jsx)("br",{}),"(Click twice on mobile)"]})]}),placement:"top",children:(0,t.jsx)(g,{VoteIconComponent:c,axis:"agreement",orientation:"right",color:"secondary",upOrDown:"Upvote",enabled:k,vote:p.vote,collectionName:p.collectionName,document:p.document})})]})})}],266640)},759398,e=>{"use strict";var t=e.i(843476);e.s(["default",0,e=>{let{reaction:n,contentType:o="comment",className:i}=e;return n.description?"string"==typeof n.description?(0,t.jsx)("div",{className:i,children:n.description}):"function"==typeof n.description?(0,t.jsx)("div",{className:i,children:n.description(o)}):(0,t.jsx)("div",{className:i,children:n.description}):null}])},51298,e=>{"use strict";e.s(["default",()=>c]);var t=e.i(843476),n=e.i(397891),o=e.i(197643),i=e.i(656003),r=e.i(409560),a=e.i(410285),s=e.i(429329),l=e.i(79732);let d=(0,s.defineStyles)("ReactionQuotesHoverInfo",e=>({root:{fontFamily:e.typography.commentStyle.fontFamily},quote:{borderTop:e.palette.border.faint,paddingTop:8,paddingBottom:8,paddingLeft:12,paddingRight:8,"&:hover":{background:e.palette.panelBackground.darken04}},tinyQuoteRow:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative","&:hover $tinyQuoteReactToggle":{opacity:1,color:e.palette.grey[900]}},tinyQuoteWrapper:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:205},tinyQuote:{textOverflow:"ellipsis",marginBottom:6,overflow:"hidden",maxHeight:"2em"},tinyQuoteReactToggle:{position:"relative",top:2,padding:6,cursor:"pointer",opacity:.2,fontWeight:600,"&&:hover":{opacity:.5}},usersWhoQuoted:{fontSize:12,color:e.palette.grey[500]}})),c=e=>{var s,c;let{react:u,quote:m,voteProps:p,commentBodyRef:h}=e,g=(0,l.useStyles)(d),f=(0,n.getNormalizedReactionsListFromVoteProps)(p),v=(null!=(s=null==f||null==(c=f.reacts)?void 0:c[u])?s:[]).filter(e=>{var t;return(null==(t=e.quotes)?void 0:t[0])===m}),{getCurrentUserReactionVote:x,setCurrentUserReaction:y}=(0,o.useNamesAttachedReactionsVoting)(p);if(!v.length)return null;let b=(0,i.default)(v,e=>"disagreed"===e.reactType?-1:1);return(0,t.jsx)("div",{className:g.root,children:(0,t.jsx)("div",{className:g.quote,children:(0,t.jsxs)("div",{className:g.tinyQuoteRow,onMouseEnter:()=>{},onMouseLeave:()=>void 0,children:[(0,t.jsxs)("div",{className:g.tinyQuoteWrapper,children:[(0,t.jsx)("div",{className:g.tinyQuote,children:m.trim()}),(0,t.jsx)("div",{className:g.usersWhoQuoted,children:(0,t.jsx)(a.default,{reactions:v})})]}),(0,t.jsx)(r.default,{reactionName:u,currentUserReaction:x(u,m),netReactionCount:b,quote:m,setCurrentUserReaction:(e,t)=>y(e,t,m)})]})},m)})}},374132,e=>{"use strict";var t=e.i(843476),n=e.i(538794),o=e.i(444098),i=e.i(903780);let r=(0,n.registerComponent)("PopperCard",e=>{let{children:n,placement:r="bottom-start",open:a,anchorEl:s,allowOverflow:l,flip:d,style:c,className:u}=e;return(0,t.jsx)(i.default,{open:a,anchorEl:s,placement:r,allowOverflow:l,flip:d,children:(0,t.jsx)(o.Card,{style:c,className:u,children:n})})},{stylePriority:-1});e.s(["default",0,r])},80119,671077,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(339213);let i=(0,o.default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("path",{d:"M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z"}),(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"})]}),"Apps");e.s(["default",0,i],80119);let r=(0,o.default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("path",{d:"M4 14h4v-4H4v4zm0 5h4v-4H4v4zM4 9h4V5H4v4zm5 5h12v-4H9v4zm0 5h12v-4H9v4zM9 5v4h12V5H9z"}),(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"})]}),"ViewList");e.s(["default",0,r],671077)},801659,e=>{"use strict";var t=e.i(527156),n=e.i(909817);let o=["agree","disagree","important","dontUnderstand","plus","shrug","thumbs-up","thumbs-down","seen"],i=["smile","laugh","sad","disappointed","confused","thinking","oops","surprise","excitement"],r=["changemind","changed-mind-on-point","heart","goodpoint","thanks","typo","why","resolved","beautiful","hat","offtopic","coveredAlready2"],a=["strong-argument","weak-argument","crux","notacrux","hitsTheMark","miss","strawman","nitpick","addc","bet","llm-smell","bowels","moloch","paperclip"],s=["clear","muddled","scholarship","facilitation","concrete","examples","scout","soldier","unnecessarily-combative","sneer"],l=["agree","disagree","important","dontUnderstand","plus","shrug","thumbs-up","thumbs-down","seen"],d=["smile","laugh","sad","disappointed","confused","thinking","oops","surprise","excitement"],c=["changemind","strong-argument","crux","hitsTheMark","clear","concrete","scout","moloch","why","changed-mind-on-point","weak-argument","notacrux","miss","muddled","examples","soldier","paperclip","resolved"],u=["heart","coveredAlready2","beautiful","goodpoint","strawman","addc","llm-smell","scholarship","unnecessarily-combative","thanks","hat","nitpick","offtopic","facilitation","bowels","typo","bet","sneer"],m=["1percent","10percent","25percent","40percent","50percent","60percent","75percent","90percent","99percent"];e.s(["getCuratedActiveReactions",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",p=(0,n.default)([...o,...i,...r,...a,...s,...l,...d,...c,...u,...m]),h=t.namesAttachedReactions.filter(e=>!e.deprecated&&p.includes(e.name));if(!e||!e.length)return h;let g=e.toLowerCase();return h.filter(e=>{var t;return e.name.toLowerCase().startsWith(g)||e.label.toLowerCase().startsWith(g)||(null==(t=e.searchTerms)?void 0:t.some(e=>e.toLowerCase().startsWith(g)))})},"gridEmotions",0,d,"gridPrimary",0,l,"gridSectionB",0,c,"gridSectionC",0,u,"likelihoods",0,m,"listEmotions",0,i,"listPrimary",0,o,"listViewSectionB",0,r,"listViewSectionC",0,a,"listViewSectionD",0,s])},703577,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(527156),i=e.i(343794),r=e.i(80119),a=e.i(671077),s=e.i(530841),l=e.i(161517),d=e.i(374009),c=e.i(79732),u=e.i(429329),m=e.i(405706),p=e.i(110601),h=e.i(756838),g=e.i(759398),f=e.i(478386),v=e.i(514089);e.i(813868);var x=e.i(122756),y=e.i(801659);let b=(0,x.gql)("\n  mutation updateUserReactionsPalette($selector: SelectorInput!, $data: UpdateUserDataInput!) {\n    updateUser(selector: $selector, data: $data) {\n      data {\n        ...UsersCurrent\n      }\n    }\n  }\n"),C=(0,u.defineStyles)("ReactionsPalette",e=>({moreReactions:{paddingLeft:12,paddingRight:12},searchBox:{border:e.palette.border.faint,borderRadius:3,width:"100%",padding:4,background:e.palette.panelBackground.default,"&:focus":{border:e.palette.border.normal}},hoverBallotLabel:{marginLeft:10,verticalAlign:"middle",display:"flex",alignItems:"center",justifyContent:"space-between",flexGrow:1,whiteSpace:"pre-wrap"},hoverBallotLabelSmall:{fontSize:11},paletteEntry:{cursor:"pointer",width:162,marginBottom:1,display:"flex",alignItems:"center","&:hover":{background:e.palette.panelBackground.darken04}},paletteIcon1:{cursor:"pointer",padding:4,margin:2,"&:hover":{background:e.palette.panelBackground.darken04}},paletteIcon2:{padding:3,margin:1},selected:{background:e.palette.panelBackground.darken10,borderRadius:6},selectedAnti:{background:e.palette.namesAttachedReactions.selectedAnti,borderRadius:6},reactionPaletteScrollRegion:{width:350,maxHeight:305,overflowY:"scroll",marginTop:12},tooltipIcon:{marginRight:12,padding:8,minWidth:55,"& img":{filter:"opacity(1) !important"}},showAll:{maxHeight:"none"},showAllButton:{display:"flex",justifyContent:"center"},viewButton:{cursor:"pointer",width:18,height:18,marginLeft:6,color:e.palette.grey[300],"&:hover":{opacity:.5}},viewButtonSelected:{color:e.palette.grey[600]},reactPaletteFooter:{textAlign:"center",padding:6,paddingTop:10},reactPaletteFooterFeedbackButton:{display:"inline",color:e.palette.primary.light,marginRight:e.spacing.unit,fontSize:"1rem",cursor:"pointer","&:hover, &:active, &:focus":{color:e.palette.grey[400]}},tooltipLabel:{fontSize:15},primarySection:{marginBottom:13},iconSection:{borderBottom:e.palette.border.faint,paddingBottom:6,marginBottom:6,marginRight:7,display:"flex",flexWrap:"wrap"},bottomSection:{marginTop:13},tooltipRoot:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingRight:8},tooltipRootMoloch:{paddingRight:0},paddedRow:{marginTop:"1em",marginBottom:"1em"}}));e.s(["default",0,e=>{var u;let{getCurrentUserReactionVote:x,toggleReaction:w,quote:k}=e,j=(0,c.useStyles)(C),S=(0,s.useCurrentUser)(),{captureEvent:I}=(0,l.useTracking)(),T=null!=(u=null==S?void 0:S.reactPaletteStyle)?u:"listView",[N,L]=(0,n.useState)(""),[R,_]=(0,n.useState)(!1),[A,M]=(0,n.useState)(T),P=(0,n.useRef)((0,d.default)(I,500)),E=(0,y.getCuratedActiveReactions)(N),[F]=(0,v.useMutation)(b),B=e=>{M(e),I("reactionPaletteChangeViewClicked",{view:e}),S&&F({variables:{selector:{_id:S._id},data:{reactPaletteStyle:e}}})};function D(e){return(0,t.jsxs)("div",{className:(0,i.default)(j.tooltipRoot,{[j.tooltipRootMoloch]:"moloch"===e.name}),children:[(0,t.jsx)("div",{className:j.tooltipIcon,children:(0,t.jsx)(m.default,{inverted:!0,react:e.name,size:40})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:j.tooltipLabel,children:e.label}),(0,t.jsx)(g.default,{reaction:e})]})]})}let U=e=>o.namesAttachedReactions.find(t=>t.name===e&&E.includes(t)),H=y.listPrimary.map(e=>U(e)).filter(e=>e),W=y.listEmotions.map(e=>U(e)).filter(e=>e),O=y.gridPrimary.map(e=>U(e)).filter(e=>e),V=y.gridEmotions.map(e=>U(e)).filter(e=>e),z=y.gridSectionB.map(e=>U(e)).filter(e=>e),$=y.gridSectionC.map(e=>U(e)).filter(e=>e),q=y.likelihoods.map(e=>U(e)).filter(e=>e),G=y.listViewSectionB.map(e=>U(e)).filter(e=>e),Z=y.listViewSectionC.map(e=>U(e)).filter(e=>e),Y=y.listViewSectionD.map(e=>U(e)).filter(e=>e),Q=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,o=x(e.name,k);return(0,t.jsx)(p.default,{title:D(e),children:(0,t.jsx)("div",{className:(0,i.default)(j.paletteIcon1,{[j.selected]:"created"===o||"seconded"===o,[j.selectedAnti]:"disagreed"===o}),onClick:t=>w(e.name,k),children:(0,t.jsx)(m.default,{react:e.name,size:n})})},"icon-".concat(e.name))},K=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"left",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:22,r=x(e.name,k);return(0,t.jsx)(p.default,{placement:n,title:D(e),children:(0,t.jsxs)("div",{className:j.paletteEntry,onClick:t=>w(e.name,k),children:[(0,t.jsx)("span",{className:(0,i.default)(j.paletteIcon2,{[j.selected]:"created"===r||"seconded"===r,[j.selectedAnti]:"disagreed"===r}),children:(0,t.jsx)(m.default,{react:e.name,size:o})}),(0,t.jsx)("span",{className:(0,i.default)(j.hoverBallotLabel,{[j.hoverBallotLabelSmall]:"addc"===e.name}),children:e.label})]},e.name)},e.name)};return(0,t.jsxs)("div",{className:j.moreReactions,children:[k&&(0,t.jsxs)("p",{children:['Reacting to "',k,'"']}),(0,t.jsxs)(h.default,{justifyContent:"space-between",children:[(0,t.jsx)("input",{type:"text",className:j.searchBox,value:N,placeholder:"Search",onChange:e=>{L(e.currentTarget.value),P.current("reactPaletteSearchKeysLogged",{searchText:e.currentTarget.value})}}),(0,t.jsxs)(h.default,{children:[(0,t.jsx)(p.default,{title:"Switch to list view",children:(0,t.jsx)(a.default,{className:(0,i.default)(j.viewButton,{[j.viewButtonSelected]:"listView"===A}),onClick:()=>B("listView")})}),(0,t.jsx)(p.default,{title:"Switch to grid view",children:(0,t.jsx)(r.default,{className:(0,i.default)(j.viewButton,{[j.viewButtonSelected]:"gridView"===A}),onClick:()=>B("gridView")})})]})]}),(0,t.jsxs)("div",{className:(0,i.default)(j.reactionPaletteScrollRegion,{[j.showAll]:R}),children:["listView"===A&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:j.primarySection,children:H.map(e=>e&&Q(e,24))}),(0,t.jsx)("div",{className:j.iconSection,children:G.map((e,t)=>e&&K(e,t%2==0?"left":"right"))}),(0,t.jsx)("div",{className:j.iconSection,children:Z.map((e,t)=>e&&K(e,t%2==0?"left":"right"))}),(0,t.jsx)("div",{children:Y.map((e,t)=>e&&K(e,t%2==0?"left":"right"))}),(0,t.jsxs)("div",{className:j.bottomSection,children:[q.map(e=>e&&Q(e,24)),W.map(e=>e&&Q(e,24))]})]}),"gridView"===A&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:j.iconSection,children:[O.map(e=>e&&Q(e,24)),V.map(e=>e&&Q(e,24))]}),(0,t.jsx)("div",{className:j.iconSection,children:z.map(e=>e&&Q(e,24))}),(0,t.jsx)("div",{className:j.iconSection,children:$.map(e=>e&&Q(e,24))}),(0,t.jsx)("div",{children:q.map(e=>e&&Q(e,24))})]})]}),(0,t.jsx)("div",{className:j.reactPaletteFooter,children:"listView"===A&&(0,t.jsx)("a",{className:j.showAllButton,onClick:()=>{_(!R),I("reactPaletteShowMoreClicked",{showAll:!R})},children:(0,t.jsx)(f.default,{children:R?"Show Fewer":"Show All"})})})]})}])},808794,197643,78136,6598,613074,378986,98058,209259,838122,e=>{"use strict";e.s(["addNofollowToHTML",()=>eh,"replacementComponentMap",()=>ep],808794);var t=e.i(821058),n=e.i(843476),o=e.i(271645),i=e.i(397891),r=e.i(343794),a=e.i(536059),s=e.i(656003),l=e.i(898298),d=e.i(879809),c=e.i(79732),u=e.i(429329),m=e.i(405706),p=e.i(538794),h=e.i(444098),g=e.i(527156);e.s(["AddReactionButton",()=>Y,"HoverableReactionIcon",()=>q,"NamesAttachedReactionsCommentBottom",()=>X,"NamesAttachedReactionsVoteOnComment",()=>K,"useNamesAttachedReactionsVoting",()=>z],197643);var f=e.i(530841),v=e.i(224931),x=e.i(725788),y=e.i(96009),b=e.i(384892),C=e.i(533940),w=e.i(8045),k=e.i(657298),j=e.i(633731),S=e.i(909817),I=e.i(161517),T=e.i(345955),N=e.i(186947),L=e.i(20282),R=e.i(293958),_=e.i(409560),A=e.i(410285),M=e.i(334445),P=e.i(266640),E=e.i(903780),F=e.i(756838),B=e.i(110601),D=e.i(759398),U=e.i(51298),H=e.i(374132),W=e.i(105736),O=e.i(703577);let V=(0,u.defineStyles)("NamesAttachedReactionsVoteOnComment",e=>({root:{display:"flex",alignItems:"center",whiteSpace:"nowrap"},footerReactions:{display:"inline-block",fontSize:25,lineHeight:.6,height:26,textAlign:"center",whiteSpace:"nowrap",zIndex:e.zIndexes.reactionsFooter,marginRight:6},footerReactionsRow:{display:"flex",alignItems:"center",marginLeft:8},footerReaction:{height:26,display:"inline-block",borderRadius:8,paddingLeft:7,paddingRight:7,"&:hover":{background:e.palette.panelBackground.darken04}},footerReactionSpacer:{display:"inline-block",width:2},mouseHoverTrap:{position:"absolute",right:0,height:50},footerReactionHover:{width:300},reactionCount:{fontSize:13,fontFamily:e.typography.commentStyle.fontFamily,color:e.palette.text.dim60,marginLeft:3,paddingBottom:2,verticalAlign:"middle"},addReactionButton:{verticalAlign:"bottom",filter:e.palette.buttons.messageReaction,cursor:"pointer","& svg":{width:20,height:20,position:"relative",top:2},"&:hover":{filter:"opacity(0.8)"},"@media print":{display:"none"}},hoverBallot:{fontFamily:e.typography.commentStyle.fontFamily,paddingTop:12,maxWidth:350},reactOverview:{background:e.palette.background.pageActiveAreaBackground,fontFamily:e.typography.commentStyle.fontFamily,paddingTop:12,maxWidth:350,borderRadius:2,padding:12},alreadyUsedReactions:{padding:8},overviewSummaryRow:{paddingBottom:2},footerSelected:{background:e.palette.panelBackground.darken10},footerSelectedInverted:{background:e.palette.grey[600]},footerSelectedAnti:{background:e.palette.namesAttachedReactions.selectedAnti},overviewButton:{opacity:.35,marginTop:2,marginRight:8,cursor:"pointer",height:18,width:18},reactionQuotes:{paddingTop:8,paddingBottom:8,paddingLeft:12,paddingRight:8,borderTop:e.palette.border.faint,fontFamily:e.typography.commentStyle.fontFamily},hasQuotes:{border:e.palette.border.dashed500},invertColors:{filter:"invert(1)"}})),z=e=>{var t;let{openDialog:o}=(0,x.useDialog)(),r=(0,f.useCurrentUserId)(),{captureEvent:a}=(0,I.useTracking)(),s=null!=(t=(0,i.getNormalizedUserVoteFromVoteProps)(e))?t:null;function l(e,t){var n;let o=null!=(n=null==s?void 0:s.reacts)?n:[];for(let n=0;n<o.length;n++)if($(o[n],e,t))return o[n];return null}function d(e,t){let n=l(e,t);return n?n.vote:null}function c(){o({name:"LoginPopup",contents:e=>{let{onClose:t}=e;return(0,n.jsx)(R.default,{onClose:t})}})}async function u(t,n){if(!r)return void c();let o=!!d(t,n);a("reactionToggled",{reactionName:t,action:o?"remove":"add",isInlineReaction:!!n,documentId:e.document._id,collectionName:e.collectionName}),o?await p(t,n):await m(t,"created",n)}async function m(t,n,o){var i;if(!r)return void c();let a=null!=(i=null==s?void 0:s.reacts)?i:[],l=[...(0,b.default)(a,e=>!$(e,t,o)),{react:t,vote:n,quotes:o?[o]:void 0}],d={...s,reacts:l};await e.vote({document:e.document,voteType:e.document.currentUserVote||null,extendedVote:d})}async function p(t,n){var o;if(!r)return void c();let i=null!=(o=null==s?void 0:s.reacts)?o:[],a={...s,reacts:(0,b.default)(i,e=>!$(e,t,n))};await e.vote({document:e.document,voteType:e.document.currentUserVote||null,extendedVote:a})}function h(){var t;let n=(0,i.getNormalizedReactionsListFromVoteProps)(e);return null!=(t=null==n?void 0:n.reacts)?t:{}}return{getCurrentUserReaction:l,getCurrentUserReactionVote:d,toggleReaction:u,setCurrentUserReaction:async function e(e,t,n){t?await m(e,t,n):await p(e,n)},getAlreadyUsedReactTypesByKarma:function(){let e=h(),t=Object.keys(e);return(0,C.default)(t,t=>e[t].length>0?e[t][0].karma:0)},getAlreadyUsedReacts:h}};function $(e,t,n){var o;return e.react===t&&(n?!!(e.quotes&&e.quotes.indexOf(n)>=0):!(null==(o=e.quotes)?void 0:o.length))}let q=e=>{var t,s;let{reactionRowRef:d,react:u,numberShown:p,voteProps:g,quote:f,contentBodyRef:v,invertColors:x=!1,style:y="default",footerReactionClassName:C}=e,w=(0,c.useStyles)(V),{hover:k,eventHandlers:{onMouseOver:j,onMouseLeave:S}}=(0,l.useHover)(),{getCurrentUserReaction:I,getCurrentUserReactionVote:T,toggleReaction:L}=z(g),R=T(u,f),_=I(u,f),A=(0,o.useContext)(a.SetHoveredReactionContext),M=null==(s=(0,i.getNormalizedReactionsListFromVoteProps)(g))?void 0:s.reacts,P=(null!=(t=null==M?void 0:M[u])?t:[]).flatMap(e=>e.quotes),F=(0,b.default)(P,e=>void 0!==e),B=x&&("created"===R||"seconded"===R),D="message"===y;return(0,n.jsxs)("span",{onMouseEnter:function(e){null==A||A({reactionName:u,isHovered:!0,quote:null}),j(e)},onMouseLeave:function(e){null==A||A({reactionName:u,isHovered:!1,quote:null}),S(e)},children:[(0,n.jsxs)("span",{className:(0,r.default)(w.footerReaction,{[w.footerSelected]:!D&&("created"===R||"seconded"===R),[w.footerSelectedInverted]:!D&&B,[w.footerSelectedAnti]:!D&&"disagreed"===R,[w.hasQuotes]:F.length>0},C),children:[(0,n.jsx)("span",{onMouseDown:()=>{var e;(0,N.isMobile)()||null!=_&&null!=(e=_.quotes)&&e.length||L(u,f)},children:(0,n.jsx)(m.default,{react:u,inverted:x})}),(!D||p>1)&&(0,n.jsx)("span",{className:(0,r.default)(w.reactionCount,{[w.invertColors]:x}),children:p}),k&&(null==d?void 0:d.current)&&(0,n.jsxs)(E.default,{open:!!k,anchorEl:d.current,placement:"bottom-end",allowOverflow:!0,children:[(0,n.jsx)("div",{className:w.mouseHoverTrap,style:{width:d.current.clientWidth}}),(0,n.jsx)(h.Card,{children:(0,n.jsx)(Z,{react:u,voteProps:g,commentBodyRef:v})})]})]}),!D&&(0,n.jsx)("span",{className:w.footerReactionSpacer})]})},G=e=>{let{voteProps:t}=e,o=(0,c.useStyles)(V),{getCurrentUserReactionVote:i,setCurrentUserReaction:r,getAlreadyUsedReactTypesByKarma:a,getAlreadyUsedReacts:l}=z(t),d=a(),u=l();return(0,n.jsx)(h.Card,{children:(0,n.jsxs)("div",{className:o.reactOverview,children:[(0,n.jsx)("h3",{children:"Reacts Overview"}),(0,n.jsx)("div",{className:o.alreadyUsedReactions,children:d.map(e=>{let t=u[e],a=(0,s.default)(t,e=>"disagreed"===e.reactType?-1:1),l=(0,g.getNamesAttachedReactionsByName)(e);return(0,n.jsx)("div",{className:o.overviewSummaryRow,children:(0,n.jsxs)(F.default,{justifyContent:"flex-start",children:[(0,n.jsx)(B.default,{title:(0,n.jsxs)(n.Fragment,{children:[l.label,"  ",(0,n.jsx)(D.default,{reaction:l})]}),children:(0,n.jsx)(m.default,{react:e})}),(0,n.jsx)(_.default,{reactionName:e,quote:null,netReactionCount:a,currentUserReaction:i(e,null),setCurrentUserReaction:r}),(0,n.jsx)(A.default,{reactions:t})]})},"".concat(e))})})]})})},Z=e=>{var t,o;let{react:r,voteProps:a,commentBodyRef:s}=e,l=(0,c.useStyles)(V),d=(0,i.getNormalizedReactionsListFromVoteProps)(a),u=null!=(o=(null!=(t=null==d?void 0:d.reacts)?t:{})[r])?o:[],m=u.every(e=>{var t;return null==(t=e.quotes)?void 0:t.length}),p=(0,T.filterNonnull)((0,S.default)(null==u?void 0:u.flatMap(e=>e.quotes)));return(0,n.jsxs)("div",{className:l.footerReactionHover,children:[(0,n.jsx)(ee,{reactionName:r,userReactions:u,showNonInlineVoteButtons:!m,voteProps:a}),p.map(e=>(0,n.jsx)(U.default,{react:r,quote:e,voteProps:a,commentBodyRef:s},"".concat(r,"-").concat((0,L.slugify)(e))))]})},Y=e=>{let{title:t,voteProps:i}=e,a=(0,c.useStyles)(V),[s,l]=(0,o.useState)(!1),d=(0,o.useRef)(null),{captureEvent:u}=(0,I.useTracking)(),{getCurrentUserReactionVote:m,toggleReaction:p}=z(i);return(0,n.jsx)(B.default,{disabled:s,inlineBlock:!1,title:(0,n.jsx)(n.Fragment,{children:null!=t?t:"Click to react to this comment"}),children:(0,n.jsxs)("span",{ref:d,onClick:e=>{l(!0),s||u("reactPaletteStateChanged",{open:!0})},className:(0,r.default)(a.addReactionButton,"react-hover-style"),children:[(0,n.jsx)(k.AddReactionIcon,{}),(0,n.jsx)(H.default,{open:s,anchorEl:d.current,placement:"bottom-end",allowOverflow:!0,children:(0,n.jsx)(W.default,{onClickAway:()=>{l(!1),u("reactPaletteStateChanged",{open:!1})},children:(0,n.jsx)("div",{className:a.hoverBallot,children:(0,n.jsx)(O.default,{quote:null,getCurrentUserReactionVote:m,toggleReaction:(e,t)=>{l(!1),p(e,t)}})})})})]})})},Q=e=>{let{voteProps:t}=e,o=(0,c.useStyles)(V);return(0,n.jsx)(B.default,{inlineBlock:!1,clickable:!0,tooltip:!1,title:(0,n.jsx)(G,{voteProps:t}),children:(0,n.jsx)(w.default,{className:o.overviewButton})})},K=(0,p.registerComponent)("NamesAttachedReactionsVoteOnComment",e=>{let{document:t,hideKarma:o=!1,collectionName:i,votingSystem:r}=e,a=(0,c.useStyles)(V),s=(0,v.useVote)(t,i,r);return(0,n.jsxs)("span",{className:a.root,children:[(0,n.jsx)(M.default,{document:t,hideKarma:o,voteProps:s,verticalArrows:!0,largeArrows:!0}),(0,n.jsx)(P.default,{document:t,hideKarma:o,voteProps:s})]})},{hocs:[y.default]}),X=(0,p.registerComponent)("NamesAttachedReactionsCommentBottom",e=>{var t;let{document:r,hideKarma:a=!1,commentBodyRef:s,voteProps:l,post:d,invertColors:u=!1}=e,m=(0,c.useStyles)(V),p=(0,o.useRef)(null),h=(0,f.useCurrentUserId)(),{getAlreadyUsedReactTypesByKarma:g}=z(l),v=g(),x=(0,i.getNormalizedReactionsListFromVoteProps)(l),y=(0,i.reactionsListToDisplayedNumbers)(null!=(t=null==x?void 0:x.reacts)?t:null,h),b=y.map(e=>e.react),C=(0,j.default)(v,b),w=(null==d?void 0:d.debate)&&"debateResponse"in r&&r.debateResponse,S=d?[...d.coauthorUserIds,d.userId]:[],I=!!h&&S.includes(h);return(0,n.jsxs)("span",{className:m.footerReactionsRow,ref:p,children:[y.length>0&&(0,n.jsxs)("span",{className:m.footerReactions,children:[y.map(e=>{let{react:t,numberShown:o}=e;return(0,n.jsx)("span",{children:(0,n.jsx)(q,{reactionRowRef:p,react:t,quote:null,numberShown:o,voteProps:l,contentBodyRef:s,invertColors:u})},t)}),a&&(0,n.jsx)(k.AddReactionIcon,{})]}),C.length>0&&(0,n.jsx)(Q,{voteProps:l}),(!w||I)&&(0,n.jsx)(Y,{voteProps:l})]})},{hocs:[y.default]}),J=(0,u.defineStyles)("ReactionHoverTopRow",e=>({hoverBallotEntry:{fontFamily:e.typography.commentStyle.fontFamily,cursor:"pointer",paddingTop:8,paddingBottom:8,paddingLeft:12,paddingRight:8,"&:hover":{background:e.palette.panelBackground.darken04},display:"flex",alignItems:"center",borderRadius:4},hoverInfo:{paddingLeft:10,maxWidth:205,flexGrow:1},hoverBallotLabel:{verticalAlign:"middle",display:"inline-block",minWidth:70,marginRight:10,marginBottom:4},hoverBallotReactDescription:{fontSize:11,marginBottom:8,"& em":{display:"none"}}})),ee=e=>{let{reactionName:t,userReactions:o,showNonInlineVoteButtons:i,voteProps:r}=e,a=(0,c.useStyles)(J),l=(0,b.default)(o,e=>{var t;return!(null==(t=e.quotes)?void 0:t.length)}),d=(0,s.default)(l,e=>"disagreed"===e.reactType?-1:1),{getCurrentUserReactionVote:u,setCurrentUserReaction:p}=z(r);return(0,n.jsxs)("div",{className:a.hoverBallotEntry,children:[(0,n.jsx)(m.default,{react:t,size:30}),(0,n.jsxs)("div",{className:a.hoverInfo,children:[(0,n.jsx)("span",{className:a.hoverBallotLabel,children:(0,g.getNamesAttachedReactionsByName)(t).label}),(0,n.jsx)(D.default,{reaction:(0,g.getNamesAttachedReactionsByName)(t),className:a.hoverBallotReactDescription}),(0,n.jsx)(A.default,{reactions:l,wrap:!0,showTooltip:!1})]}),i&&(0,n.jsx)(_.default,{reactionName:t,quote:null,netReactionCount:d,currentUserReaction:u(t,null),setCurrentUserReaction:p})]})},et=(0,p.registerComponent)("InlineReactHoverInfo",e=>{let{quote:t,reactions:o,voteProps:i,classes:r}=e,a=Object.keys(o);return(0,n.jsx)(h.Card,{children:a.map(e=>{var r;return(0,n.jsxs)("div",{children:[(0,n.jsx)(ee,{reactionName:e,userReactions:null!=(r=o[e])?r:[],showNonInlineVoteButtons:!1,voteProps:i}),(0,n.jsx)(U.default,{react:e,quote:t,voteProps:i})]},e)})})},{styles:e=>({})});var en=e.i(174080),eo=e.i(762166);let ei={format:"block",offsetTop:0},er=(0,o.createContext)(null),ea=(0,o.createContext)(null),es=(0,u.defineStyles)("SideItems",e=>({sideItem:{position:"absolute",width:"100%"},sidebar:{position:"relative",height:"100%"}})),el=e=>{let{options:t,children:i}=e,r=(0,o.useContext)(er),a=(0,o.useRef)(null),[s,l]=(0,o.useState)(null),d={...ei,...t};return((0,o.useEffect)(()=>{if(r&&a.current){let e=a.current;return l(r.addSideItem(e,d)),()=>{r.removeSideItem(e),l(null)}}},[r,d.format,d.offsetTop,d.measuredElement]),r)?(0,n.jsx)("span",{ref:a,children:s&&(0,en.createPortal)(i,s)}):null};e.s(["NoSideItems",0,e=>{let{children:t}=e;return(0,n.jsx)(er.Provider,{value:null,children:(0,n.jsx)(ea.Provider,{value:null,children:t})})},"SideItem",0,el,"SideItemsContainer",0,e=>{let{children:t}=e,i=(0,c.useStyles)(es),r=(0,o.useRef)({sideItems:[],maxId:-1}),a=(0,o.useRef)(null),{renderCount:s,rerender:l}=function(){let[e,t]=(0,o.useReducer)(e=>e+1,0);return{renderCount:e,rerender:t}}(),d=(0,o.useCallback)((e,t)=>{let n=document.createElement("div");return n.setAttribute("class",i.sideItem),r.current.sideItems=[...r.current.sideItems,{id:++r.current.maxId,anchorEl:e,container:n,options:t,anchorTop:null,anchorLeft:null,sideItemHeight:null}],l(),n},[l,i]),u=(0,o.useCallback)(e=>{let t=r.current.sideItems.findIndex(t=>t.anchorEl===e);if(t>=0){let[e]=r.current.sideItems.splice(t,1);e&&e.container.remove(),l()}},[l]),m=(0,o.useCallback)((e,t)=>{let n=r.current.sideItems.find(t=>t.container===e);n&&n.sideItemHeight&&Math.abs(n.sideItemHeight-t)>=1&&(r.current.sideItems=[...r.current.sideItems],l())},[l]),p=(0,o.useMemo)(()=>({addSideItem:d,removeSideItem:u,resizeItem:m}),[d,u,m]),h=(0,o.useMemo)(()=>({sideItems:r.current.sideItems}),[s,r.current.sideItems]);return(0,o.useEffect)(()=>{let e=a.current;if(e){let t=new ResizeObserver(e=>{l()});return t.observe(e),()=>{t.disconnect()}}},[l]),(0,n.jsx)(er.Provider,{value:p,children:(0,n.jsx)(ea.Provider,{value:h,children:(0,n.jsx)("div",{ref:a,children:t})})})},"SideItemsSidebar",0,()=>{let e=(0,c.useStyles)(es),t=(0,o.useContext)(er),i=(0,o.useContext)(ea),r=(0,o.useRef)(null);return(0,o.useEffect)(()=>{var e,n,o,a;if(!r.current||!i)return;let s=(0,eo.getOffsetChainTop)(r.current);for(let e of i.sideItems)e.container.parentNode!==r.current&&(null!==e.container.parentNode&&e.container.remove(),r.current.appendChild(e.container));for(let t=0;t<i.sideItems.length;t++){let r=i.sideItems[t];r.anchorTop=(0,eo.getOffsetChainTop)(r.anchorEl)-s+r.options.offsetTop,r.anchorLeft=r.anchorEl.offsetLeft,r.sideItemHeight=null!=(e=null==(o=r.options.measuredElement)||null==(n=o.current)?void 0:n.clientHeight)?e:r.container.clientHeight}let l=(0,C.default)(i.sideItems,[e=>e.anchorTop,e=>e.anchorLeft]),d=0;for(let e=0;e<l.length;e++){let t=l[e],n=Math.max(d,t.anchorTop),o=null==(a=r.current)?void 0:a.clientHeight,i="top:".concat(n,"px; --sidebar-column-remaining-height: ").concat(o-n,"px");t.container.setAttribute("style",i),d=n+t.sideItemHeight}let c=new ResizeObserver(e=>{if(t)for(let n of e)t.resizeItem(n.target,n.contentRect.height)});for(let e of i.sideItems)c.observe(e.container);return()=>{c.disconnect()}},[i,t]),(0,o.useMemo)(()=>(0,n.jsx)("div",{className:e.sidebar,ref:r}),[e])},"useHasSideItemsSidebar",0,()=>!!(0,o.useContext)(er)],78136);let ed=(0,u.defineStyles)("SideItemLine",e=>({sidebarInlineReactMobile:{display:"none",[e.breakpoints.down("xs")]:{display:"block"},width:13},sidebarInlineReactMobileLine:{width:4,left:9,height:24,position:"relative",borderTopLeftRadius:4,borderBottomLeftRadius:4}})),ec=e=>{let{colorClass:t}=e,o=(0,c.useStyles)(ed);return(0,n.jsx)("span",{className:o.sidebarInlineReactMobile,children:(0,n.jsx)("div",{className:(0,r.default)(o.sidebarInlineReactMobileLine,t)})})};e.s(["default",0,ec],6598);var eu=e.i(937636);let em=(0,u.defineStyles)("InlineReactHoverableHighlight",e=>({reactionTypeHovered:{backgroundColor:e.palette.greyAlpha(.1)},reactionTypeHoveredInverted:{backgroundColor:e.palette.greyAlpha(.4)},sidebarInlineReactIcons:{opacity:.5,marginLeft:4,paddingLeft:4,paddingRight:4},sidebarInlineReactIconsNonInbox:{display:"none",[e.breakpoints.up("sm")]:{display:"inline-block"}},inlineReactSidebarLine:{background:e.palette.sideItemIndicator.inlineReaction}})),ep={JargonTooltip:t.default,InlineReactHoverableHighlight:e=>{var t,u,p,h;let{quote:g,reactions:f,isSplitContinuation:v=!1,children:x,invertColors:y=!1}=e,b=(0,c.useStyles)(em),C=(0,o.useRef)(null),w=(0,o.useContext)(a.HoveredReactionListContext),k=(0,o.useContext)(a.InlineReactVoteContext),j=w&&Object.keys(f).some(e=>w.find(t=>t.reactionName===e&&(t.quote===g||null===t.quote))),S=(0,o.useContext)(a.SetHoveredReactionContext);function I(e){for(let[t,n]of Object.entries(f))if(n)for(let{quotes:o}of n){let[n]=null!=o?o:[];g===n&&(null==S||S({isHovered:e,quote:n,reactionName:t}))}}let T={onEnter:()=>I(!0),onLeave:()=>I(!1)},{eventHandlers:N,hover:L}=(0,l.useHover)(T),{eventHandlers:R}=(0,l.useHover)(T),_=function(e,t){let n=function(e){if(!e)return!1;for(let t of Object.keys(e))if((0,s.default)(e[t],e=>"disagreed"===e.reactType?-1:1)>0)return!0;return!1}(t);switch(e){case"hidden":return!1;case"netPositive":return n;case"all":return!0}}(null!=(t=null==(p=(0,o.useContext)(d.SideItemVisibilityContext))?void 0:p.inlineReactsMode)?t:d.defaultInlineReactsMode,f),{pathname:A}=(0,eu.useLocation)(),M=A.startsWith("/inbox");if(!k)return(0,n.jsx)(n.Fragment,{children:x});let P=null!=(u=null==(h=(0,i.getNormalizedReactionsListFromVoteProps)(k))?void 0:h.reacts)?u:{},F=Object.keys(P).filter(e=>{var t;return null==(t=P[e])?void 0:t.some(e=>{var t;return null==(t=e.quotes)?void 0:t.includes(g)})});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("span",{ref:C,className:(0,r.default)({[b.reactionTypeHovered]:j&&!y,[b.reactionTypeHoveredInverted]:j&&y}),children:[!v&&_&&(0,n.jsxs)(el,{options:{format:"icon"},children:[!M&&(0,n.jsx)("span",{...N,children:(0,n.jsx)(ec,{colorClass:b.inlineReactSidebarLine})}),(0,n.jsx)("span",{...R,className:(0,r.default)(b.sidebarInlineReactIcons,!M&&b.sidebarInlineReactIconsNonInbox),children:F.map(e=>(0,n.jsx)("span",{children:(0,n.jsx)(B.default,{title:(0,n.jsx)(et,{quote:g,reactions:f,voteProps:k}),placement:"bottom-start",tooltip:!1,flip:!0,inlineBlock:!1,clickable:!0,children:(0,n.jsx)(m.default,{react:e})})},e))})]}),x]}),L&&(0,n.jsx)(E.default,{anchorEl:C.current,open:L,placement:"bottom-start",flip:!0,children:(0,n.jsx)(et,{quote:g,reactions:f,voteProps:k})})]})}},eh=e=>e.replace(/<a /g,'<a rel="nofollow" ');var eg=e.i(658153);e.s(["ElementType",0,eg],613074);var ef=e.i(284306);e.s(["DomUtils",0,ef],378986);let ev=(0,u.defineStyles)("HorizScrollBlock",e=>({scrollIndicatorWrapper:{display:"block",position:"relative",maxWidth:"100% !important",paddingLeft:13,paddingRight:13},scrollIndicator:{position:"absolute",top:"50%",marginTop:-28,cursor:"pointer",borderTop:"20px solid transparent",borderBottom:"20px solid transparent"},scrollIndicatorLeft:{left:0,borderRight:"10px solid ".concat(e.palette.grey[310]),"&:hover":{borderRight:"10px solid ".concat(e.palette.grey[620])}},scrollIndicatorRight:{right:0,borderLeft:"10px solid ".concat(e.palette.grey[310]),"&:hover":{borderLeft:"10px solid ".concat(e.palette.grey[620])}},scrollableContents:{overflowX:"auto",overflowY:"hidden",marginTop:"-1em !important",marginBottom:"-1em !important",paddingTop:"2em !important",paddingBottom:"2em !important","-ms-overflow-style":"-ms-autohiding-scrollbar","&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"},hidden:{display:"none !important"}}),{stylePriority:-1}),ex=e=>{let{children:t,className:i,contentsClassName:a}=e,s=(0,c.useStyles)(ev),l=(0,o.useRef)(null),[d,u]=(0,o.useState)(!0),[m,p]=(0,o.useState)(!1),h=(0,o.useCallback)(()=>{if(l.current){let e=l.current.scrollLeft;u(0===e),p(e===l.current.scrollWidth-l.current.clientWidth)}},[]);return(0,o.useEffect)(()=>{h()},[h]),(0,n.jsxs)("div",{className:(0,r.default)(s.scrollIndicatorWrapper,i),children:[(0,n.jsx)("div",{className:(0,r.default)(s.scrollIndicator,s.scrollIndicatorLeft,{[s.hidden]:d}),onClick:e=>{let t=l.current;t.scrollLeft=Math.max(t.scrollLeft-t.clientWidth,0)}}),(0,n.jsx)("div",{className:(0,r.default)(s.scrollableContents,a),ref:l,onScroll:h,children:t}),(0,n.jsx)("div",{onClick:e=>{let t=l.current;t.scrollLeft+=Math.min(t.scrollLeft+t.clientWidth,t.scrollWidth-t.clientWidth)},className:(0,r.default)(s.scrollIndicator,s.scrollIndicatorRight,{[s.hidden]:m})})]})};e.s(["MaybeScrollableBlock",0,e=>{let{TagName:t,attribs:i,bodyRef:r,children:a}=e,s=(0,o.useRef)(null),[l,d]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{s.current&&r.current&&s.current.scrollWidth>r.current.clientWidth&&s.current.clientWidth>0&&d(!0)},[r]),l)?(0,n.jsx)(ex,{children:(0,n.jsx)(t,{...i,ref:s,children:a})}):(0,n.jsx)(t,{...i,ref:s,children:a})}],98058);var ey=e.i(585642),eb=e.i(650847);let eC=(0,u.defineStyles)("MuiCollapse",e=>({container:{height:0,overflow:"hidden",transition:e.transitions.create("height")},entered:{height:"auto"},wrapper:{display:"flex"},wrapperInner:{width:"100%"}}),{stylePriority:-10});e.s(["default",0,e=>{let t=(0,c.useStyles)(eC),i=(0,o.useRef)(null),a=(0,o.useRef)(null),{children:s,className:l,timeout:d=eb.duration.standard}=e;return(0,n.jsx)(ey.default,{onEnter:()=>{i.current&&(i.current.style.height="0px"),e.onEnter&&e.onEnter(i.current)},onEntered:()=>{var t;i.current&&(i.current.style.height="auto"),null==(t=e.onEntered)||t.call(e,i.current)},onEntering:()=>{var t;let n=a.current?a.current.clientHeight:0,o=e.timeout;i.current&&(i.current.style.transitionDuration="string"==typeof o?o:"".concat(o,"ms"),i.current.style.height="".concat(n,"px")),null==(t=e.onEntering)||t.call(e,i.current)},onExit:()=>{var t;let n=a.current?a.current.clientHeight:0;i.current&&(i.current.style.height="".concat(n,"px")),null==(t=e.onExit)||t.call(e,i.current)},onExiting:()=>{var t;let n=e.timeout;i.current&&(i.current.style.transitionDuration="string"==typeof n?n:"".concat(n,"ms"),i.current.style.height="0px"),null==(t=e.onExiting)||t.call(e,i.current)},timeout:d,nodeRef:i,in:e.in,children:(e,o)=>(0,n.jsx)("div",{className:(0,r.default)(t.container,{[t.entered]:"entered"===e},l),style:{minHeight:"0px"},ref:i,...o,children:(0,n.jsx)("div",{className:t.wrapper,ref:a,children:(0,n.jsx)("div",{className:t.wrapperInner,children:s})})})})}],209259),e.s([],838122)},77255,686590,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(79732),i=e.i(429329);e.i(838122);var r=e.i(209259),a=e.i(128380),s=e.i(937636),l=e.i(343794);let d=(0,i.defineStyles)("CollapsedFootnotes",e=>({collapse:{marginTop:"-1.5em"},fullyExpanded:{overflow:"visible"},buttonWrapper:{marginTop:"1em"},button:{fontFamily:e.palette.fonts.sansSerifStack,fontSize:14,fontWeight:600,color:e.palette.primary.main,cursor:"pointer","&:hover":{color:e.palette.primary.dark}}})),c=e=>e.startsWith("#fn")&&!e.startsWith("#fnref");function u(e){let{previewCount:i=3,attributes:u,footnoteElements:m}=e,{hash:p}=(0,s.useLocation)(),[h,g]=(0,n.useState)(!c(null!=p?p:"")),[f,v]=(0,n.useState)(!h);(0,n.useRef)(null);let x=(0,o.useStyles)(d),y=m.slice(0,i),b=m.slice(i);return(0,t.jsxs)("div",{...u,children:[y,(0,t.jsx)(r.default,{in:!h,onEntered:()=>v(!0),timeout:200,className:(0,l.default)({[x.collapse]:h,[x.fullyExpanded]:f}),children:b}),(0,t.jsx)(r.default,{in:h,className:x.buttonWrapper,children:(0,t.jsx)(a.InteractionWrapper,{children:(0,t.jsx)("span",{className:x.button,onClick:()=>g(!1),children:"Show all footnotes"})})})]})}e.s(["CollapsedFootnotes",()=>u,"EXPAND_FOOTNOTES_EVENT",0,"expand-footnotes","locationHashIsFootnote",0,c,"locationHashIsFootnoteBackreference",0,e=>e.startsWith("#fnref")],77255);var m=e.i(946271);e.i(813868);let p=(0,e.i(122756).gql)("\n  query multiCommentuseCommentQuery($selector: CommentSelector, $limit: Int, $enableTotal: Boolean) {\n    comments(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...CommentsList\n      }\n      totalCount\n    }\n  }\n");e.s(["useCommentByLegacyId",0,e=>{var t;let{legacyId:n,ssr:o=!0}=e,i=!isNaN(parseInt(n,36)),{data:r,error:a,loading:s}=(0,m.useQuery)(p,{variables:{selector:{legacyIdComment:{legacyId:n}},limit:1,enableTotal:!1},skip:!i,notifyOnNetworkStatusChange:!0,ssr:o}),l=null==r||null==(t=r.comments)?void 0:t.results;return i?l&&l.length>0&&l[0]._id?{comment:l[0],loading:!1,error:null}:{comment:null,loading:s,error:a}:{comment:null,loading:!1,error:"Invalid ID"}}],686590)},467292,e=>{"use strict";var t=e.i(843476);e.s(["ArbitalLogo",0,e=>{let{className:n,strokeWidth:o,color:i}=e,r={fill:"currentColor",stroke:"currentColor",strokeWidth:o,color:i};return(0,t.jsx)("svg",{className:n,x:"0px",y:"0px",height:"100%",viewBox:"0 0 27.5 23.333",children:(0,t.jsxs)("g",{children:[(0,t.jsx)("path",{d:"M19.166,20.979v-0.772c-1.035,0.404-2.159,0.626-3.334,0.626c-0.789,0-1.559-0.1-2.291-0.288 c-0.813-0.21-1.584-0.529-2.292-0.94c-0.032-0.019-0.06-0.042-0.091-0.061c-2.686-1.596-4.49-4.525-4.492-7.877 c0.001-3.027,1.471-5.713,3.733-7.381c-0.229,0.04-0.458,0.079-0.679,0.139C9.68,4.435,9.643,4.449,9.604,4.461 C9.359,4.53,9.123,4.613,8.891,4.706c-0.07,0.028-0.14,0.057-0.209,0.086C8.42,4.906,8.164,5.029,7.918,5.172 c-2.243,1.299-3.752,3.717-3.752,6.494c0,2.99,1.123,5.711,2.973,7.777c0.285,0.319,0.594,0.625,0.918,0.915 c1.123,1.005,2.44,1.797,3.888,2.309c0.626,0.223,1.272,0.39,1.944,0.503c0.632,0.105,1.281,0.162,1.943,0.162 c1.159,0,2.277-0.17,3.334-0.484V20.979z",...r}),(0,t.jsx)("path",{d:"M19.443,2.975c-1.123-1.007-2.441-1.799-3.889-2.311c-0.623-0.221-1.273-0.391-1.943-0.502 C12.979,0.056,12.33,0,11.666,0c-1.365,0-2.671,0.233-3.889,0.664C6.33,1.176,5.012,1.966,3.889,2.971 C1.5,5.11,0.001,8.208,0,11.666c0.001,3.457,1.5,6.557,3.889,8.695c1.123,1.004,2.441,1.794,3.889,2.306 c0.32,0.113,0.646,0.213,0.979,0.298c-0.186-0.116-0.361-0.248-0.541-0.373c-0.108-0.075-0.219-0.146-0.324-0.224 c-0.327-0.243-0.645-0.498-0.947-0.77c-0.363-0.327-0.715-0.674-1.047-1.044C3.785,18.198,2.5,15.078,2.5,11.666 c0-3.393,1.846-6.355,4.582-7.937c1.35-0.78,2.916-1.231,4.584-1.231c0.789,0,1.559,0.102,2.292,0.291 c0.813,0.209,1.584,0.529,2.292,0.938c2.738,1.583,4.582,4.546,4.584,7.938c-0.002,3.027-1.473,5.713-3.736,7.381 c-0.007,0.005-0.013,0.011-0.02,0.016c0.237-0.039,0.471-0.092,0.699-0.154c0.042-0.011,0.082-0.026,0.124-0.038 c0.24-0.069,0.475-0.151,0.704-0.242c0.072-0.029,0.144-0.058,0.215-0.089c0.261-0.113,0.517-0.236,0.761-0.378l1.251-0.725v2.562 v0.98v2.354h2.5v-2.351v-0.984v-8.332c0-2.992-1.123-5.712-2.971-7.777C20.074,3.568,19.767,3.265,19.443,2.975z",...r}),(0,t.jsx)("path",{d:"M23.609,2.971c-1.123-1.005-2.44-1.795-3.888-2.307C19.4,0.551,19.073,0.451,18.74,0.365 c0.186,0.116,0.36,0.246,0.539,0.371c0.109,0.076,0.223,0.148,0.33,0.228c0.326,0.243,0.643,0.497,0.945,0.769 c0.365,0.327,0.716,0.674,1.049,1.043c2.109,2.357,3.396,5.479,3.396,8.891v8.332v0.984v2.35H27.5V11.666 C27.498,8.208,25.999,5.11,23.609,2.971z",...r})]})})}])},919202,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(161517);e.s(["default",0,e=>{let{eventType:i,eventProps:r,children:a,captureOnClick:s=!0,captureOnMount:l,skip:d}=e,{captureEvent:c}=(0,o.useOnMountTracking)({eventType:i,eventProps:r,captureOnMount:l}),u=(0,n.useCallback)(e=>{!d&&s&&c("".concat(i,"Clicked"),{...r,buttonPressed:e.button})},[r,c,d,s,i]);return(0,t.jsx)("span",{onMouseDown:u,children:a})}])},188685,255947,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(339213);let i=(0,o.default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"})]}),"CheckBoxOutlineBlank");e.s(["default",0,i],188685);let r=(0,o.default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0V0z"}),(0,t.jsx)("path",{d:"M5 19h14V5H5v14zm2.41-7.4l2.58 2.58 6.59-6.59L17.99 9l-8 8L6 13.01l1.41-1.41z",opacity:".3"}),(0,t.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z"}),(0,t.jsx)("path",{d:"M17.99 9l-1.41-1.42-6.59 6.59-2.58-2.57-1.42 1.41 4 3.99z"})]}),"CheckBoxTwoTone");e.s(["default",0,r],255947)},495600,e=>{"use strict";var t=e.i(843476),n=e.i(538794),o=e.i(188685),i=e.i(255947),r=e.i(995669),a=e.i(343794),s=e.i(110601),l=e.i(514089);e.i(813868);var d=e.i(122756);let c=(0,n.registerComponent)("PostReadCheckbox",e=>{let{classes:n,post:c,width:u=12}=e,{postsRead:m,setPostRead:p}=(0,r.useItemsRead)(),h=c&&(c._id in m?m[c._id]:c.isRead),[g]=(0,l.useMutation)((0,d.gql)("\n    mutation markAsReadOrUnread($postId: String, $isRead: Boolean) {\n      markAsReadOrUnread(postId: $postId, isRead: $isRead)\n    }\n  ")),f=e=>{g({variables:{postId:c._id,isRead:e}}),p(c._id,e)};return h?(0,t.jsx)(s.default,{title:"Mark as unread",children:(0,t.jsx)(i.default,{className:(0,a.default)(n.root,n.read),style:{width:u},onClick:()=>f(!1)})}):(0,t.jsx)(s.default,{title:"Mark as read",children:(0,t.jsx)(o.default,{className:(0,a.default)(n.root,n.unread),style:{width:u},onClick:()=>f(!0)})})},{styles:e=>({root:{cursor:"pointer"},read:{color:e.isFriendlyUI?e.palette.primary.main:e.palette.primary.light},unread:{color:e.palette.grey[400]}})});e.s(["default",0,c])},408380,351716,e=>{"use strict";e.s(["default",()=>c],408380);var t=e.i(843476),n=e.i(538794),o=e.i(159211),i=e.i(182584),r=e.i(343794);e.i(552275);var a=e.i(935132),s=e.i(791434),l=e.i(244389),d=e.i(495600);let c=(0,n.registerComponent)("SequencesSmallPostLink",e=>{let{classes:n,post:c,sequenceId:u,large:m,placement:p="left-start"}=e;return(0,t.jsxs)("div",{className:(0,r.default)(n.title,{[n.large]:m}),children:[(0,t.jsx)("span",{className:n.checkbox,children:(0,t.jsx)(d.default,{post:c,width:(0,s.isFriendlyUI)()?14:void 0})}),(0,t.jsx)(l.default,{..."contents"in c?{post:c}:{postId:c._id,preload:"on-screen"},postsList:(0,a.isLWorAF)(),placement:p,inlineBlock:!1,clickable:!0,children:(0,t.jsx)(o.Link,{to:(0,i.postGetPageUrl)(c,!1,u),children:c.title})})]})},{styles:e=>({title:{position:"relative",flexGrow:1,...e.typography.body2,...e.typography.postStyle,color:e.palette.grey[900],display:"flex",alignItems:e.isFriendlyUI?"flex-start":"center",marginBottom:6,marginTop:6,...e.isFriendlyUI&&{fontFamily:e.palette.fonts.sansSerifStack,fontSize:14,fontWeight:500,lineHeight:"150%"}},large:{...e.typography.postsItemTitle,marginBottom:10,marginTop:10},checkbox:{position:"relative",top:e.isFriendlyUI?-1:1,marginRight:10}})}),u=(0,n.registerComponent)("ChapterTitle",e=>{let{classes:n,title:o,large:i}=e;return(0,t.jsx)("div",{className:(0,r.default)(n.root,{[n.large]:i}),children:o})},{styles:e=>({root:{...e.typography.chapterTitle},large:{...e.typography.largeChapterTitle}})});e.s(["default",0,u],351716)},567091,e=>{"use strict";e.s(["default",()=>d]);var t=e.i(843476),n=e.i(271645),o=e.i(964344),i=e.i(343794),r=e.i(690118),a=e.i(429329),s=e.i(79732);let l=(0,a.defineStyles)("ContentItemTruncated",e=>({maxHeight:{maxHeight:600,overflow:"hidden"}})),d=e=>{let{maxLengthWords:a,graceWords:d=20,expanded:c=!1,rawWordCount:u,getTruncatedSuffix:m,nonTruncatedSuffix:p,dangerouslySetInnerHTML:h,className:g,description:f,nofollow:v}=e,x=(0,s.useStyles)(l),y=(0,n.useRef)(null),[b,C]=(0,n.useState)(!1),w=h.__html,{truncatedHtml:k,wasTruncated:j,wordsLeft:S}=c?{truncatedHtml:w,wasTruncated:!1,wordsLeft:0}:(0,o.truncateWithGrace)(w,a,d,u);(0,n.useEffect)(()=>{y.current&&y.current.offsetHeight>600&&C(!0)},[k]);let I=j||b&&!c;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{ref:y,className:(0,i.default)(!c&&b&&x.maxHeight),children:(0,t.jsx)(r.ContentItemBody,{dangerouslySetInnerHTML:{__html:k},className:g,description:f,nofollow:v})}),I&&m&&m({wordsLeft:b?null:S}),!I&&p]})}},503567,213019,e=>{"use strict";e.s(["default",()=>C],503567);var t=e.i(843476),n=e.i(791434),o=e.i(517794);e.s(["default",()=>b],213019);var i=e.i(538794),r=e.i(444098),a=e.i(159211),s=e.i(161432),l=e.i(283593),d=e.i(695310),c=e.i(408380),u=e.i(351716),m=e.i(239832),p=e.i(87828),h=e.i(567091),g=e.i(110601),f=e.i(946271);e.i(813868);let v=(0,e.i(122756).gql)("\n  query multiChapterSequencesSummaryQuery($selector: ChapterSelector, $limit: Int, $enableTotal: Boolean) {\n    chapters(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...ChaptersFragment\n      }\n      totalCount\n    }\n  }\n"),x=e=>{let{user:o,postCount:i,wordCountNode:r,classes:a}=e;return(0,n.isFriendlyUI)()?(0,t.jsxs)("div",{className:a.author,children:[(0,t.jsx)(d.default,{user:o}),"  ",i," post",1===i?"":"s","  ",r]}):(0,t.jsxs)("div",{className:a.author,children:["by ",(0,t.jsx)(d.default,{user:o})]})},y=e=>{let{sequence:n,chapters:o,maxPosts:i,totalPosts:r,classes:a}=e,s=[];for(let e=0;e<o.length&&0<i;e++){let r=o[e],a=r.posts.slice(0,i-0);s.push((0,t.jsxs)("div",{children:[r.title&&(0,t.jsx)(u.default,{title:r.title}),a.map(e=>(0,t.jsx)(c.default,{post:e,sequenceId:n._id},n._id+e._id))]},r._id))}return i<r&&s.push((0,t.jsxs)("div",{className:a.morePosts,children:["+",r-i," more"]})),(0,t.jsx)(t.Fragment,{children:s})},b=(0,i.registerComponent)("SequencesSummary",e=>{var o,i,l,d,c;let{classes:u,sequence:b,showAuthor:C=!0,maxPosts:w}=e,{data:k,loading:j}=(0,f.useQuery)(v,{variables:{selector:{SequenceChapters:{sequenceId:null==b?void 0:b._id}},limit:100,enableTotal:!1},notifyOnNetworkStatusChange:!0}),S=null==k||null==(l=k.chapters)?void 0:l.results,I=null!=(o=null==S?void 0:S.flatMap(e=>{var t;return null!=(t=e.posts)?t:[]}))?o:[],T=I.reduce((e,t)=>{var n;return e+((null==t||null==(n=t.contents)?void 0:n.wordCount)||0)},0),N=(0,t.jsx)(g.default,{title:(0,t.jsxs)("div",{children:[" (",T.toLocaleString("en-US")," words)"]}),children:(0,t.jsxs)("div",{className:u.wordcount,children:[Math.round(T/300)," min read"]})});return"number"!=typeof w&&(w=I.length),(0,t.jsxs)(r.Card,{className:u.root,children:[b&&(0,t.jsx)(a.Link,{to:(0,s.getCollectionOrSequenceUrl)(b),children:(0,t.jsx)("div",{className:u.title,children:b.title})}),C&&(null==b?void 0:b.user)&&(0,t.jsx)(x,{user:null==b?void 0:b.user,postCount:null!=(i=null==b?void 0:b.postsCount)?i:0,wordCountNode:N,classes:u}),!(0,n.isFriendlyUI)()&&(0,t.jsx)(p.default,{contentType:"postHighlight",className:u.description,children:(0,t.jsx)(h.default,{maxLengthWords:100,graceWords:20,rawWordCount:(null==b||null==(d=b.contents)?void 0:d.wordCount)||0,expanded:!1,getTruncatedSuffix:()=>null,dangerouslySetInnerHTML:{__html:(null==b||null==(c=b.contents)?void 0:c.htmlHighlight)||""},description:"sequence ".concat(null==b?void 0:b._id)})}),(!b||!S&&j)&&(0,t.jsx)(m.default,{}),b&&S&&(0,t.jsx)(y,{sequence:b,chapters:S,maxPosts:w,totalPosts:I.length,classes:u}),!(0,n.isFriendlyUI)()&&N]})},{styles:e=>({root:{padding:16,width:e.isFriendlyUI?l.FRIENDLY_HOVER_OVER_WIDTH:450},title:{...e.typography.body1,...e.typography.postStyle,...e.typography.smallCaps,...e.isFriendlyUI&&{fontFamily:e.palette.fonts.sansSerifStack,fontSize:"1.3rem",fontWeight:700,lineHeight:"130%"}},description:{...e.typography.body2,...e.typography.postStyle,paddingTop:8,paddingBottom:8},author:{color:e.palette.text.dim,...e.isFriendlyUI&&{fontFamily:e.palette.fonts.sansSerifStack,fontSize:13,fontWeight:500,marginTop:10,marginBottom:14}},wordcount:e.isFriendlyUI?{}:{...e.typography.commentStyle,color:e.palette.grey[500],marginTop:12,fontSize:"1rem"},morePosts:{color:e.palette.grey[600],fontFamily:e.palette.fonts.sansSerifStack,fontWeight:500,size:14}})}),C=e=>{let{sequence:i,showAuthor:r=!0,allowOverflow:a,placement:s,children:l}=e;return(0,t.jsx)(o.default,{title:(0,t.jsx)(b,{sequence:i,showAuthor:r,maxPosts:(0,n.isFriendlyUI)()?8:void 0}),tooltip:!1,inlineBlock:!1,flip:!a,placement:s,clickable:!0,children:l})}},594158,e=>{"use strict";var t=e.i(773736);e.i(79732);let n=(0,e.i(429329).defineStyles)("LinkStyles",e=>{var n,o,i;return{link:{...(0,t.visitedLinksHaveFilledInCircle)()?{"&:after":{content:'""',top:-7,position:"relative",marginLeft:2,marginRight:0,width:4,height:4,display:"inline-block",background:e.palette.background.default,border:"1.2px solid ".concat(null!=(n=e.palette.link.color)?n:e.palette.primary.main),borderRadius:"50%"},"&:visited:after, &.visited:after":{background:null!=(o=e.palette.link.visited)?o:e.palette.primary.main,border:"1.2px solid ".concat(null!=(i=e.palette.link.visited)?i:e.palette.primary.main)}}:{"&:after":{content:'""',marginLeft:1}}},redLink:{...(0,t.visitedLinksHaveFilledInCircle)()?{color:"".concat(e.palette.error.main," !important"),"&:after":{border:"1.2px solid ".concat(e.palette.error.main)},"&:visited:after, &.visited:after":{border:"1.2px solid ".concat(e.palette.error.main)}}:{}},owidIframe:{width:600,height:375,border:"none",maxWidth:"100vw"},owidBackground:{},metaculusIframe:{width:400,height:250,border:"none",maxWidth:"100vw"},metaculusBackground:{backgroundColor:e.palette.panelBackground.metaculusBackground},fatebookIframe:{width:560,height:200,border:"none",maxWidth:"100vw",backgroundColor:e.palette.panelBackground.default,borderRadius:3,boxShadow:e.palette.boxShadow.eaCard},manifoldIframe:{width:560,height:405,border:"none",maxWidth:"100vw"},neuronpediaIframe:{width:"100%",height:360,border:"1px solid",borderColor:e.palette.grey[300],borderRadius:6,maxWidth:639},metaforecastIframe:{width:560,height:405,border:"none",maxWidth:"100vw"},estimakerIframe:{width:560,height:405,border:"none",maxWidth:"100vw"},viewpointsIframe:{width:560,height:300,border:"none",maxWidth:"100vw"}}});e.s(["linkStyles",0,n])},865962,e=>{"use strict";e.i(100916),e.s(["conversationGetFriendlyTitle",0,(e,t)=>{var n,o;if(e.title)return e.title;let i=(null!=(n=null==(o=e.participants)?void 0:o.filter(e=>e._id!==t))?n:[]).map(e=>e.displayName);if(!(i.length>0))return"Conversation";{let e;return 2===i.length?e=i.join(" and "):(e=i.slice(0,2).join(", "),i.length>2&&(e+=" + ".concat(i.length-2," more"))),e}},"conversationGetTitle",0,(e,t)=>{if(e.title)return e.title;if(e.participants){let n=e.participants.map(e=>e.displayName).filter(e=>e!==t.displayName);return"Conversation with ".concat(n.join(" and "))}throw Error("Can't create title for conversation ".concat(e._id," for user ").concat(t._id,"  missing participant info"))},"userCanStartConversations",0,e=>!e.deleted&&!e.conversationsDisabled])},92386,e=>{"use strict";var t=e.i(843476),n=e.i(538794),o=e.i(271645);let i=(0,e.i(339213).default)((0,t.jsxs)(o.default.Fragment,{children:[(0,t.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"}),(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"})]}),"AccountCircle");var r=e.i(343794),a=e.i(159211),s=e.i(425415);let l=(0,n.registerComponent)("ProfilePhoto",e=>{let{user:n,noLink:o=!1,from:l,className:d,classes:c}=e,u=(0,t.jsx)(i,{viewBox:"3 3 18 18",className:(0,r.default)(c.img,c.emptyProfileImg)});return n?(n.profileImageId?u=(0,t.jsx)(s.default,{imgProps:{q:"100",h:"".concat(72),w:"".concat(72)},publicId:n.profileImageId,className:(0,r.default)(c.img,c.profileImg)}):n.displayName&&(u=(0,t.jsx)("div",{className:(0,r.default)(c.img,c.defaultProfileImg),children:n.displayName.split(/[\s_\-.]/).reduce((e,t)=>!t.length||e.length>1?e:"".concat(e).concat(t[0]),"")})),o?(0,t.jsx)("div",{className:d,children:u}):(0,t.jsx)(a.Link,{to:"/users/".concat(n.slug).concat(l?"?from=".concat(l):""),className:d,children:u})):(0,t.jsx)("div",{className:d,children:u})},{styles:e=>({img:{height:36,width:36,borderRadius:"50%",[e.breakpoints.down("xs")]:{height:26,width:26}},emptyProfileImg:{color:e.palette.grey[400],fontSize:36,[e.breakpoints.down("xs")]:{fontSize:26}},defaultProfileImg:{display:"flex",justifyContent:"center",alignItems:"center",background:e.palette.grey[400],color:e.palette.grey[0],fontFamily:e.typography.fontFamily,fontSize:18,textTransform:"uppercase",overflow:"hidden",[e.breakpoints.down("xs")]:{fontSize:13}},profileImg:{"box-shadow":"3px 3px 1px ".concat(e.palette.boxShadowColor(.25)),"-webkit-box-shadow":"0px 0px 2px 0px ".concat(e.palette.boxShadowColor(.25)),"-moz-box-shadow":"3px 3px 1px ".concat(e.palette.boxShadowColor(.25))}})});e.s(["PROFILE_IMG_DIAMETER",0,36,"PROFILE_IMG_DIAMETER_MOBILE",0,26,"default",0,l],92386)},455400,e=>{"use strict";e.s(["default",()=>d]);var t=e.i(843476),n=e.i(271645),o=e.i(538794),i=e.i(197643),r=e.i(343794),a=e.i(110601),s=e.i(813292),l=e.i(703577);let d=(0,o.registerComponent)("AddInlineReactionButton",e=>{let{voteProps:o,classes:d,quote:c,disabled:u,wrapperClassName:m,iconClassName:p,paletteClassName:h}=e,[g,f]=(0,n.useState)(!1),v=(0,n.useRef)(null),{getCurrentUserReactionVote:x,toggleReaction:y}=(0,i.useNamesAttachedReactionsVoting)(o);return(0,t.jsxs)("span",{className:(0,r.default)(d.container,m),children:[(0,t.jsx)(a.default,{disabled:g,title:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"Click to react to the selected text"}),u&&(0,t.jsx)("p",{children:(0,t.jsxs)("em",{children:["You need to select a unique snippet.",(0,t.jsx)("br",{}),"Please select more text until the snippet is unique"]})})]}),className:d.tooltip,children:(0,t.jsx)("span",{ref:v,children:!g&&(0,t.jsx)(s.default,{icon:"AddReaction",onMouseDown:e=>{e.stopPropagation(),e.preventDefault(),u||f(!0)},className:(0,r.default)(d.icon,{[d.disabled]:u},p)})})}),g&&(0,t.jsx)("div",{className:(0,r.default)(d.palette,h),children:(0,t.jsx)(l.default,{getCurrentUserReactionVote:x,toggleReaction:(e,t)=>{f(!1),y(e,t)},quote:c})})]})},{styles:e=>({container:{position:"relative"},tooltip:{height:38},icon:{borderRadius:8,padding:"7px 8px","&:hover":{background:e.palette.panelBackground.darken08},width:"1.666em",height:"1.666em",cursor:"pointer"},disabled:{opacity:.25},palette:{fontFamily:e.typography.commentStyle.fontFamily,backgroundColor:e.palette.background.pageActiveAreaBackground,boxShadow:e.shadows[2],paddingTop:12,maxWidth:350,position:"absolute",left:0,top:-30}})})},916449,e=>{"use strict";e.s(["default",()=>a]);var t=e.i(843476),n=e.i(271645),o=e.i(538794),i=e.i(455400),r=e.i(903780);let a=(0,o.registerComponent)("InlineReactSelectionWrapper",e=>{let{contentRef:o,voteProps:a,styling:s,setSelection:l,children:d,classes:c}=e,u=(0,n.useRef)(null),m=(0,n.useRef)(null),[p,h]=(0,n.useState)(""),[g,f]=(0,n.useState)(null),[v,x]=(0,n.useState)(0),[y,b]=(0,n.useState)(!1),C=(0,n.useCallback)(e=>{var t,n,i,r,a,s;function d(){f(null),h(""),b(!1),null==l||l()}let c=window.getSelection(),p=null!=(t=null==c?void 0:c.toString())?t:"",g=null==c?void 0:c.anchorNode;if(!g)return void d();let v=null==o||null==(n=o.current)?void 0:n.containsNode(g),y=m&&(null==(i=m.current)?void 0:i.contains(g));if(v&&!y){let e=null==o||null==(r=o.current)?void 0:r.getAnchorEl();if(e instanceof HTMLElement&&p.length>1){f(e),h(p),x(function(e,t){var n;let o=null==(n=t.current)?void 0:n.getBoundingClientRect();if(!o)return 0;let i=(null==o?void 0:o.top)+(null==o?void 0:o.height)/2;return e.getRangeAt(0).getBoundingClientRect().top-i}(c,u));let t=function(e,t){let n=0,o=0;for(;-1!==(o=e.indexOf(t,o));)n++,o+=t.length;return n}(null!=(a=null==o||null==(s=o.current)?void 0:s.getText())?a:"",p);b(t>1),null==l||l({text:p,disabled:t>1})}else d()}v||y||d()},[o,u,l]);(0,n.useEffect)(()=>(document.addEventListener("selectionchange",C),()=>{document.removeEventListener("selectionchange",C)}),[C]);let w=function(e,t){switch(e){case"comment":return 12;case"messageLeft":var n,o,i;return -1*((null!=(n=null==t||null==(i=t.current)||null==(o=i.getAnchorEl())?void 0:o.getBoundingClientRect().width)?n:0)+64);case"messageRight":return 0;case"post":case"tag":return 30}}(s,o),k=function(e){switch(e){case"comment":case"messageLeft":case"messageRight":return -10;case"post":case"tag":return 0}}(s);return(0,t.jsxs)("div",{ref:u,children:[!l&&(0,t.jsx)(r.default,{className:c.popper,open:!!g,anchorEl:g,placement:"right",allowOverflow:!0,children:(0,t.jsx)("span",{ref:m,className:c.button,style:{position:"relative",top:v+k,marginLeft:w},children:(0,t.jsx)(i.default,{quote:p,voteProps:a,disabled:y})})}),d]})},{styles:e=>({popper:{height:0},button:{zIndex:1e3,position:"relative",left:12}})})},251027,e=>{"use strict";e.s(["ReactionsAndLikesCommentBottom",()=>f,"ReactionsAndLikesVote",()=>g,"ReactionsAndLikesVoteOnComment",()=>h]);var t=e.i(843476),n=e.i(224931),o=e.i(79732),i=e.i(429329),r=e.i(530841),a=e.i(673991),s=e.i(343794),l=e.i(725788),d=e.i(293958),c=e.i(197643),u=e.i(110601),m=e.i(813292);let p=(0,i.defineStyles)("ReactionsAndLikesVote",e=>({unselectedLikeButton:{cursor:"pointer",display:"flex",alignItems:"center",color:e.palette.grey[800]},selectedLikeButton:{cursor:"pointer",display:"flex",alignItems:"center",color:e.palette.grey[600]},icon:{width:16,height:16,verticalAlign:"middle",marginRight:2,"$unselectedLikeButton:hover, $selectedLikeButton:hover &":{opacity:.7}},likeCount:{fontSize:"0.9rem",verticalAlign:"middle",paddingBottom:2,fontFamily:e.palette.fonts.sansSerifStack,fontWeight:500,marginLeft:1},likeCountButtonRow:{...e.typography.commentStyle,...e.typography.body2,color:e.palette.grey[700],verticalAlign:"middle",paddingBottom:2,marginLeft:2}})),h=e=>{let{document:n,hideKarma:o=!1,collectionName:i,votingSystem:r,isSelected:a=!1}=e;return(0,t.jsx)(g,{document:n,hideKarma:o,collectionName:i,votingSystem:r,isSelected:a})},g=e=>{var i,c,h,g,f;let{document:v,hideKarma:x=!1,collectionName:y,votingSystem:b,isSelected:C=!1,stylingVariant:w="default",className:k}=e,j=(0,o.useStyles)(p),S=(0,r.useCurrentUser)(),{openDialog:I}=(0,l.useDialog)(),T=(0,n.useVote)(v,y,b),N=null!=(i=null==(g=T.document)||null==(h=g.extendedScore)?void 0:h.usersWhoLiked)?i:[],L=N.length,R=null!=(c=null==(f=T.document)?void 0:f.baseScore)?c:0,_="smallUpvote"===T.document.currentUserVote||"bigUpvote"===T.document.currentUserVote,A=async e=>{e.stopPropagation(),e.preventDefault(),S?_?await T.vote({document:T.document,voteType:"neutral",extendedVote:null==v?void 0:v.currentUserExtendedVote}):await T.vote({document:T.document,voteType:"bigUpvote",extendedVote:null==v?void 0:v.currentUserExtendedVote}):I({name:"LoginPopup",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(d.default,{onClose:n})}})},M=(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:(0,t.jsxs)("strong",{children:["Click to ",_?"unlike":"like"]})}),N.length>0&&(0,t.jsxs)("div",{children:["Liked by: ",N.slice(0,10).map(e=>e.displayName).join(", "),N.length>10&&(0,t.jsxs)("span",{children:[" +",N.length-10," others"]})]}),(0,a.userIsAdmin)(S)&&(0,t.jsxs)("div",{children:["(admin visible only) baseScore: ",R]})]}),P="buttonRow"===w?(0,t.jsx)("span",{className:j.likeCountButtonRow,children:"".concat(L)}):(0,t.jsx)("span",{className:j.likeCount,children:L});return(0,t.jsx)("div",{className:k,children:(0,t.jsx)(u.default,{title:M,disabledOnMobile:!0,children:(0,t.jsxs)("div",{className:(0,s.default)({[j.unselectedLikeButton]:!C,[j.selectedLikeButton]:C}),onClick:A,children:[(0,t.jsx)(m.default,{icon:_?"ThumbUp":"ThumbUpOutline",className:j.icon}),L>0&&P]})})})},f=e=>{let{document:n,hideKarma:o=!1,commentBodyRef:i,voteProps:r,post:a,collectionName:s,votingSystem:l}=e;return(0,t.jsx)(c.NamesAttachedReactionsCommentBottom,{document:n,hideKarma:o,commentBodyRef:i,voteProps:r,post:a,collectionName:s,votingSystem:l})}},939114,e=>{"use strict";e.s(["default",()=>u]);var t=e.i(843476),n=e.i(271645),o=e.i(397891),i=e.i(530841),r=e.i(197643),a=e.i(79732),s=e.i(429329),l=e.i(343794),d=e.i(455400);let c=(0,s.defineStyles)("NamesAttachedReactionsMessageBottom",e=>({reactionsContainer:{position:"absolute",bottom:-10,right:8,display:"flex",alignItems:"center",zIndex:e.zIndexes.reactionsFooter},addReactionButtonContainer:{position:"absolute",top:-10,right:-10,transition:"opacity 0.2s ease-in-out",zIndex:e.zIndexes.reactionsFooter,background:e.palette.background.paper,height:24,width:24,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%"},hidden:{opacity:0,pointerEvents:"none"},visible:{opacity:1,pointerEvents:"auto"},footerReactions:{background:e.palette.grey[700]},footerReactionsCurrentUser:{background:e.palette.grey[200]},footerReactionsSingle:{borderRadius:"50%"},footerReactionsMultiple:{display:"flex",borderRadius:13},footerReaction:{lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",width:20,height:20,borderRadius:"50%"},reactionCount:{fontSize:11,fontFamily:e.typography.commentStyle.fontFamily,color:e.palette.text.dim60,marginLeft:2,verticalAlign:"middle",display:"none"},showCount:{display:"inline"},invertColors:{filter:"invert(1)"},footerSelected:{background:e.palette.panelBackground.darken10},footerSelectedInverted:{background:e.palette.grey[600]},footerSelectedAnti:{background:e.palette.namesAttachedReactions.selectedAnti},hasQuotes:{border:e.palette.border.dashed500},mouseHoverTrap:{position:"absolute",right:0,height:50},footerReactionHover:{width:300},footerReactionSpacer:{display:"inline-block",width:2},inlineReactionButtonTooltip:{height:20},inlineReactionButtonIcon:{width:20,height:20,padding:"unset","&:hover":{background:"unset"},borderRadius:"50%",opacity:.15},currentUserPalettePositioning:{right:-10,left:"unset",top:0},otherUserPalettePositioning:{left:-10,right:"unset",top:0}}),{stylePriority:1}),u=e=>{var s;let{voteProps:u,invertColors:m=!1,isCurrentUser:p=!1,showReactionButton:h=!1,selection:g}=e,f=(0,a.useStyles)(c),v=(0,i.useCurrentUserId)(),x=(0,n.useRef)(null),y=(0,o.getNormalizedReactionsListFromVoteProps)(u),b=(0,o.reactionsListToDisplayedNumbers)(null!=(s=null==y?void 0:y.reacts)?s:null,v).filter(e=>{var t,n;return!(null==y||null==(n=y.reacts)||null==(t=n[e.react])?void 0:t.every(e=>{var t;return null==(t=e.quotes)?void 0:t.length}))}),C=(0,l.default)(p?f.footerReactionsCurrentUser:f.footerReactions,1===b.length?f.footerReactionsSingle:f.footerReactionsMultiple);return(0,t.jsxs)(t.Fragment,{children:[b.length>0&&(0,t.jsx)("div",{className:f.reactionsContainer,ref:x,children:(0,t.jsx)("div",{className:C,children:b.map(e=>{let{react:n,numberShown:o}=e;return(0,t.jsx)(r.HoverableReactionIcon,{reactionRowRef:x,react:n,numberShown:o,voteProps:u,invertColors:!m,quote:null,style:"message",footerReactionClassName:f.footerReaction},n)})})}),(0,t.jsx)("div",{className:(0,l.default)(f.addReactionButtonContainer,h?f.visible:f.hidden),children:g?(0,t.jsx)(d.default,{voteProps:u,quote:g.text,disabled:g.disabled,wrapperClassName:f.inlineReactionButtonTooltip,iconClassName:f.inlineReactionButtonIcon,paletteClassName:p?f.currentUserPalettePositioning:f.otherUserPalettePositioning}):(0,t.jsx)(r.AddReactionButton,{title:"Add reaction",voteProps:u})})]})}},181232,e=>{"use strict";var t=e.i(843476),n=e.i(343794),o=e.i(224931);e.i(552275);var i=e.i(935132),r=e.i(693062),a=e.i(791434),s=e.i(900174),l=e.i(710970),d=e.i(716512),c=e.i(429329),u=e.i(79732);let m=(0,c.defineStyles)("PostsVoteDefault",e=>({voteBlock:{width:50},voteBlockHorizontal:{display:"flex",flexDirection:"row-reverse",justifyContent:"flex-end",alignItems:"center"},upvote:{marginBottom:-21},upvoteHorizontal:{marginTop:-8},downvote:{marginTop:-28},downvoteHorizontal:{marginTop:-6},voteScores:{margin:"15%",...e.isLW&&{margin:"25% 15% 15% 15%"},...e.isAF&&{fontVariantNumeric:"lining-nums"}},voteScoresHorizontal:{margin:"0 12px"},voteScore:{color:e.isFriendlyUI?e.palette.grey[600]:e.palette.grey[500],fontFamily:e.isFriendlyUI?e.palette.fonts.sansSerifStack:void 0,position:"relative",zIndex:e.zIndexes.postsVote,fontSize:e.isFriendlyUI?"50%":"55%",...e.isFriendlyUI&&{paddingTop:4,paddingBottom:2,paddingLeft:1,paddingRight:0,fontSize:"50%",fontFamily:e.palette.fonts.sansSerifStack}},voteScoreFooter:{fontSize:18,fontWeight:500},voteScoreGoodHeart:{...e.typography.commentStyle,color:e.palette.grey[700],fontSize:"45%",textAlign:"center"},secondaryVoteScore:{fontSize:"35%",marginBottom:2},tooltip:{color:e.palette.grey[500],fontSize:"1rem",backgroundColor:e.palette.panelBackground.default,transition:"opacity 150ms cubic-bezier(0.4, 0, 1, 1) 0ms",marginLeft:0,paddingTop:12*!!e.isFriendlyUI}}));e.s(["default",0,e=>{let{post:c,useHorizontalLayout:p,votingSystem:h,isFooter:g}=e,f=(0,u.useStyles)(m),v=(0,o.useVote)(c,"Posts",h),{fail:x,reason:y}=(0,r.useVoteButtonsDisabled)(),b=!x,C=(0,a.isFriendlyUI)()?"left":"right";return p&&(C="top"),(0,t.jsxs)("div",{className:(0,n.default)({[f.voteBlock]:!p,[f.voteBlockHorizontal]:p}),children:[(0,t.jsx)(s.TooltipRef,{title:null!=y?y:"Click-and-hold for strong vote (click twice on mobile)",placement:C,popperClassName:f.tooltip,children:e=>(0,t.jsx)("div",{ref:e,className:(0,n.default)({[f.upvote]:!p,[f.upvoteHorizontal]:p}),children:(0,t.jsx)(l.default,{orientation:"up",color:"secondary",upOrDown:"Upvote",enabled:b,...v})})}),(0,t.jsxs)("div",{className:(0,n.default)({[f.voteScores]:!p,[f.voteScoresHorizontal]:p}),children:[(0,t.jsx)(s.TooltipSpan,{title:"".concat(v.voteCount," ").concat(1===v.voteCount?"Vote":"Votes"),placement:C,popperClassName:f.tooltip,hideOnTouchScreens:!0,children:(0,t.jsx)(d.Typography,{variant:"headline",className:(0,n.default)(f.voteScore,{[f.voteScoreFooter]:g}),children:v.baseScore})}),!!c.af&&!!c.afBaseScore&&!(0,i.isAF)()&&(0,t.jsx)(s.TooltipSpan,{title:"AI Alignment Forum karma",placement:C,popperClassName:f.tooltip,children:(0,t.jsxs)(d.Typography,{variant:"headline",className:(0,n.default)(f.voteScore,f.secondaryVoteScore,{[f.voteScoreFooter]:g}),children:[" ",c.afBaseScore]})})]}),(0,t.jsx)(s.TooltipRef,{title:null!=y?y:"Click-and-hold for strong vote (click twice on mobile)",placement:C,popperClassName:f.tooltip,children:e=>(0,t.jsx)("div",{ref:e,className:(0,n.default)({[f.downvote]:!p,[f.downvoteHorizontal]:p}),children:(0,t.jsx)(l.default,{orientation:"down",color:"error",upOrDown:"Downvote",enabled:b,...v})})})]})}])},586397,491841,587115,62309,e=>{"use strict";var t=e.i(843476),n=e.i(538794),o=e.i(224931),i=e.i(343794),r=e.i(181232),a=e.i(271645),s=e.i(161517),l=e.i(530841),d=e.i(725788),c=e.i(583091),u=e.i(242021),m=e.i(552275),p=e.i(293958),h=e.i(782611);let g=e=>{let{title:n,options:o,onSelectEmoji:i,classes:r}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.default,{title:n,titleClassName:r.title,noTopMargin:!0}),(0,t.jsx)("div",{children:o.map(e=>(0,t.jsxs)("div",{onClick:()=>i(e),className:r.emoji,children:[(0,t.jsx)("div",{className:r.icon,children:(0,t.jsx)(e.Component,{})}),e.label]},e.name))})]})},f=(0,n.registerComponent)("EAEmojiPalette",e=>{let{onSelectEmoji:n,classes:o}=e;return(0,t.jsxs)("div",{className:o.root,children:[(0,t.jsx)(g,{title:"Anonymous",options:c.eaAnonymousEmojiPalette,onSelectEmoji:n,classes:o}),(0,t.jsx)("hr",{className:o.divider}),(0,t.jsx)(g,{title:"Non-anonymous",options:c.eaEmojiPalette,onSelectEmoji:n,classes:o})]})},{styles:e=>({root:{padding:6},title:{margin:"4px 6px -4px 4px",fontSize:11},divider:{border:"none",borderBottom:"1px solid ".concat(e.palette.grey[200]),margin:"6px 0"},emoji:{display:"flex",padding:"8px 12px 8px 0",fontFamily:e.palette.fonts.sansSerifStack,fontWeight:500,fontSize:14,cursor:"pointer",userSelect:"none",borderRadius:e.borderRadius.default,"&:hover":{background:e.palette.grey[200]}},icon:{display:"flex",alignItems:"center",justifyContent:"center",color:e.palette.primary.main,textAlign:"center",width:32,marginRight:4,"& svg":{width:18,height:18}}})});var v=e.i(813292),x=e.i(110601),y=e.i(429329),b=e.i(79732);let C=(0,y.defineStyles)("EAReactsSection",e=>({button:{display:"flex",alignItems:"center",borderRadius:e.borderRadius.small,color:e.palette.grey[600],padding:"0 4px",gap:"4px",marginLeft:2,height:24,cursor:"pointer",userSelect:"none",border:"1px solid transparent","&:hover":{background:e.palette.grey[100]}},buttonLarge:{gap:"6px"},buttonSelected:{background:e.palette.primaryAlpha(.05),color:e.palette.primary.main,border:"1px solid ".concat(e.palette.primaryAlpha(.5)),"&:hover":{background:e.palette.primaryAlpha(.2)}},buttonViewOnly:{cursor:"default","&:hover":{background:"none"}},emojiPreview:{display:"flex",color:e.palette.primary.main},tooltip:{background:e.palette.panelBackground.tooltipBackground2,color:e.palette.text.tooltipText,transform:"translateY(-8px)",textAlign:"center",maxWidth:190},tooltipWide:{maxWidth:400},addEmojiTooltip:{transform:"translateY(-10px)"},addEmojiIcon:{transform:"translateY(2px)",width:"18px !important",height:"18px !important"},addEmojiIconLarge:{width:"20px !important",height:"20px !important"},tooltipSecondaryText:{color:e.palette.text.tooltipTextDim},tooltipEmojiRow:{display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},tooltipEmoji:{fontSize:"1.4em",color:e.palette.primary.main},menu:{"& .MuiPaper-root":{transform:"translateY(8px) !important",border:"1px solid ".concat(e.palette.grey[200])},"& .MuiList-padding":{padding:0}}})),w=(e,t)=>!!(null==e?void 0:e[t.name]),k=e=>{let{emojiOption:n,count:o}=e,i=(0,b.useStyles)(C);return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:[1===o?"1 person":"".concat(o," people")," ",(0,t.jsx)("span",{className:i.tooltipSecondaryText,children:"reacted with"})]}),(0,t.jsxs)("div",{className:i.tooltipEmojiRow,children:[(0,t.jsx)("span",{className:i.tooltipEmoji,children:(0,t.jsx)(n.Component,{})})," ",n.label]})]})},j=e=>{var n;let o,{currentUser:i,emojiOption:r,isSelected:a,reactors:s}=e,l=(0,b.useStyles)(C),d=null!=(n=null==s?void 0:s[r.name])?n:[];if(i){let{displayName:e}=i;d=d.filter(t=>t!==e),a&&(d=["You",...d])}return(0,t.jsxs)("div",{children:[d.length>0&&(0,t.jsxs)("div",{children:[(o=d).length>1?o.slice(0,-1).join(", ")+", and "+o[o.length-1]:o[0]," ",(0,t.jsx)("span",{className:l.tooltipSecondaryText,children:"reacted with"})]}),(0,t.jsxs)("div",{className:l.tooltipEmojiRow,children:[(0,t.jsx)("span",{className:l.tooltipEmoji,children:(0,t.jsx)(r.Component,{})})," ",r.label]})]})},S=e=>{var n;let{document:o,voteProps:r,large:h,viewOnly:g}=e,y=(0,b.useStyles)(C),S=(0,l.useCurrentUser)(),{openDialog:I}=(0,d.useDialog)(),[T,N]=(0,a.useState)(null),[L,R]=(0,a.useState)(!1),{captureEvent:_}=(0,s.useTracking)({eventType:"emojiMenuClicked",eventProps:{documentId:o._id,..."collectionName"in r&&{itemType:r.collectionName}}}),A=(0,a.useCallback)(e=>{_("emojiMenuClicked",{open:!0}),N(e.currentTarget),R(!0)},[_]),M=(0,a.useCallback)(()=>{_("emojiMenuClicked",{open:!1}),N(null)},[_]),P=(0,a.useCallback)(async e=>{var n,o;if(g)return;if(!S)return void I({name:"LoginPopup",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(p.default,{onClose:n})}});let i={...r.document.currentUserExtendedVote,[e.name]:!w(null==(o=r.document)?void 0:o.currentUserExtendedVote,e)},a=(0,c.getEmojiMutuallyExclusivePartner)(e.name);a&&i[e.name]&&(i[a]=!1),await r.vote({document:r.document,voteType:null!=(n=r.document.currentUserVote)?n:"neutral",extendedVote:i})},[S,I,r,g]),E=(e=>{var t,n;let o=[];for(let n of c.eaAnonymousEmojiPalette)(m.alwaysShowAnonymousReactsSetting.get()||(null==e?void 0:e[n.name]))&&o.push({emojiOption:n,score:null!=(t=null==e?void 0:e[n.name])?t:0,anonymous:!0});if(!e||!Object.keys(e).length)return o;for(let t of c.eaEmojiPalette)(null!=(n=e[t.name])?n:0)>0&&o.push({emojiOption:t,score:e[t.name],anonymous:!1});return o})(null==(n=r.document)?void 0:n.extendedScore);return(0,t.jsxs)(t.Fragment,{children:[E.map(e=>{var n;let{emojiOption:a,anonymous:s,score:l}=e,d=w(null==(n=r.document)?void 0:n.currentUserExtendedVote,a);return(0,t.jsx)(x.default,{title:s?(0,t.jsx)(k,{emojiOption:a,count:l}):(0,t.jsx)(j,{currentUser:S,emojiOption:a,isSelected:d,reactors:"emojiReactors"in o?o.emojiReactors:void 0}),placement:"top",popperClassName:(0,i.default)(y.tooltip,{[y.tooltipWide]:l>10}),disabled:!!g,children:(0,t.jsxs)("div",{role:"button",onClick:()=>P(a),className:(0,i.default)(y.button,{[y.buttonSelected]:d,[y.buttonLarge]:h,[y.buttonViewOnly]:g}),children:[(0,t.jsx)("div",{className:y.emojiPreview,children:(0,t.jsx)(a.Component,{})}),(0,t.jsx)("div",{children:l})]})},a.name)}),!g&&(0,t.jsx)("div",{role:"button",onClick:A,className:(0,i.default)(y.button,{[y.buttonLarge]:h}),children:(0,t.jsx)(x.default,{title:"Add reaction",placement:"top",popperClassName:(0,i.default)(y.tooltip,y.addEmojiTooltip),children:(0,t.jsx)(v.default,{icon:"AddEmoji",noDefaultStyles:!0,className:(0,i.default)(y.addEmojiIcon,{[y.addEmojiIconLarge]:h})})})}),(0,t.jsx)(u.Menu,{onClick:M,open:!!T,anchorEl:T,className:y.menu,children:L&&(0,t.jsx)(f,{onSelectEmoji:P})})]})};e.s(["default",0,S,"isEAReactableDocument",0,(e,t)=>"Posts"===e||"Comments"===e],491841);let I=(0,n.registerComponent)("EAEmojisVoteOnPost",e=>{let{document:n,votingSystem:a,isFooter:s,classes:l}=e,d=(0,o.useVote)(n,"Posts",a);return s?(0,t.jsxs)("div",{className:l.root,children:[(0,t.jsx)(r.default,{post:n,votingSystem:a,useHorizontalLayout:!0}),(0,t.jsx)("div",{className:(0,i.default)(l.divider,l.hideOnMobile)}),(0,t.jsx)("div",{className:(0,i.default)(l.reacts,l.hideOnMobile),children:(0,t.jsx)(S,{document:n,voteProps:d,large:!0})})]}):(0,t.jsx)(r.default,{post:n,votingSystem:a})},{styles:e=>({root:{display:"flex"},divider:{borderLeft:e.palette.border.grey300,margin:"6px 8px 8px 16px"},reacts:{flexGrow:1,display:"flex",alignItems:"center",gap:"6px",fontSize:16,fontWeight:500,fontFamily:e.palette.fonts.sansSerifStack,color:e.palette.grey[600],"& svg":{width:"auto",height:16}},hideOnMobile:{[e.breakpoints.down("xs")]:{display:"none"}}})});e.s(["default",0,I],586397);let T=(0,n.registerComponent)("EAEmojisVoteOnPostSecondary",e=>{let{document:n,votingSystem:i,classes:r}=e,a=(0,o.useVote)(n,"Posts",i);return(0,t.jsxs)("div",{className:r.root,children:[(0,t.jsx)("div",{className:r.divider}),(0,t.jsx)(h.default,{title:"Reactions",titleClassName:r.heading}),(0,t.jsx)("div",{className:r.reacts,children:(0,t.jsx)(S,{document:n,voteProps:a,large:!0})})]})},{styles:e=>({root:{display:"flex",flexDirection:"column",marginTop:-15,marginBottom:40,[e.breakpoints.up("sm")]:{display:"none"}},divider:{borderTop:e.palette.border.grey300},heading:{marginBottom:4},reacts:{flexGrow:1,display:"flex",alignItems:"center",fontSize:16,fontWeight:500,fontFamily:e.palette.fonts.sansSerifStack,color:e.palette.grey[600],"& svg":{width:14,height:14}}})});e.s(["default",0,T],587115),e.s(["default",()=>L],62309);var N=e.i(334445);let L=e=>{let{document:n,hideKarma:i=!1,collectionName:r,votingSystem:a}=e,s=(0,o.useVote)(n,r,a);return(0,t.jsx)(N.default,{document:n,hideKarma:i,voteProps:s,showBox:!1})}},497808,(e,t,n)=>{var o=e.r(795014),i=e.r(170237),r=e.r(304653),a=Math.ceil,s=Math.max;t.exports=function(e,t,n){t=(n?i(e,t,n):void 0===t)?1:s(r(t),0);var l=null==e?0:e.length;if(!l||t<1)return[];for(var d=0,c=0,u=Array(a(l/t));d<l;)u[c++]=o(e,d,d+=t);return u}},64278,e=>{"use strict";e.s(["commentBottomComponents",()=>F,"commentVotingComponents",()=>E,"messageBottomComponents",()=>B,"postBottomSecondaryVotingComponents",()=>U,"postBottomVotingComponents",()=>D],64278);var t=e.i(251027),n=e.i(197643),o=e.i(939114),i=e.i(586397),r=e.i(587115),a=e.i(62309),s=e.i(843476),l=e.i(538794),d=e.i(224931),c=e.i(334445),u=e.i(266640);let m=(0,l.registerComponent)("TwoAxisVoteOnComment",e=>{let{document:t,hideKarma:n=!1,collectionName:o,votingSystem:i,classes:r}=e,a=(0,d.useVote)(t,o,i);return(0,s.jsxs)("span",{className:r.root,children:[(0,s.jsx)(c.default,{document:t,hideKarma:n,voteProps:a,showBox:!0}),(0,s.jsx)(u.default,{document:t,hideKarma:n,voteProps:a})]})},{styles:e=>({root:{whiteSpace:"nowrap"}})});var p=e.i(466608),h=e.i(898298),g=e.i(725788),f=e.i(530841),v=e.i(343794),x=e.i(497808),y=e.i(521128),b=e.i(293958),C=e.i(559347),w=e.i(374132);let k=e=>{let{axis:t,voteProps:n,classes:o}=e;return(0,s.jsxs)("div",{className:o.hoverBallotRow,children:[(0,s.jsx)(j,{axis:t,direction:"up",voteProps:n,classes:o}),(0,s.jsx)(j,{axis:t,direction:"down",voteProps:n,classes:o})]})},j=e=>{let{axis:t,voteProps:n,direction:o,classes:i}=e;return(0,s.jsx)(C.default,{VoteIconComponent:e=>{let{animation:n,...r}=e,{eventHandlers:a,state:l}=n;return(0,s.jsxs)("div",{...a,className:(0,v.default)(i.voteButton,{[i.goodVersion]:"up"===o,[i.badVersion]:"down"===o,[i.voteButtonSelected]:"idle"===l.mode&&"neutral"!==l.vote}),children:[(0,s.jsx)("span",{className:i.voteArrow,children:(0,s.jsx)(y.default,{animation:n,...r,alwaysColored:!0})}),(0,s.jsx)("span",{className:i.buttonLabel,children:"up"===o?t.goodLabel:t.badLabel})]})},axis:t.name,orientation:o,color:"up"===o?"secondary":"error",upOrDown:"up"===o?"Upvote":"Downvote",enabled:!0,...n})},S=e=>{var t,n;let{axis:o,voteProps:i,classes:r}=e,a=(null==i||null==(n=i.document)||null==(t=n.extendedScore)?void 0:t[o.name])||0;if(0===a)return null;let l=o.scoreLabel;return(0,s.jsxs)("div",{className:r.axisScore,children:[(0,s.jsx)("span",{className:r.scoreNumber,children:a}),(0,s.jsx)("span",{className:r.axisLabel,children:l})]})},I=e=>{var t,n;let{reaction:o,voteProps:i,classes:r}=e,a=(null==(n=i.document)||null==(t=n.extendedScore)?void 0:t[o.name])||0;if(!a)return null;let l=o.icon;return(0,s.jsxs)("div",{className:r.emoji,children:[l," ",a]})},T=e=>{var t,n;let{reaction:o,voteProps:i,classes:r}=e;o.icon;let a=!!(null==(n=i.document)||null==(t=n.currentUserExtendedVote)?void 0:t[o.name]),{openDialog:l}=(0,g.useDialog)(),d=(0,f.useCurrentUserId)();return(0,s.jsxs)("div",{className:(0,v.default)(r.voteButton,r.standaloneReaction,{[r.voteButtonSelected]:a}),onClick:async e=>{d?await i.vote({document:i.document,voteType:i.document.currentUserVote||null,extendedVote:{...i.document.currentUserExtendedVote,[o.name]:!a}}):l({name:"LoginPopup",contents:e=>{let{onClose:t}=e;return(0,s.jsx)(b.default,{onClose:t})}})},children:[o.icon," ",o.label]})},N=(0,l.registerComponent)("ReactBallotVoteOnComment",e=>{let{document:t,hideKarma:n=!1,collectionName:o,votingSystem:i,classes:r}=e,a=(0,d.useVote)(t,o,i),{hover:l,anchorEl:u,eventHandlers:m}=(0,h.useHover)();return(0,s.jsxs)("span",{className:r.root,...m,children:[(0,s.jsx)(c.default,{document:t,hideKarma:n,voteProps:a,showBox:!1}),(0,s.jsxs)("span",{className:r.axisScores,children:[p.reactBallotAxes.map(e=>(0,s.jsx)(S,{axis:e,voteProps:a,classes:r},e.name)),p.reactBallotStandaloneReactions.map(e=>(0,s.jsx)(I,{reaction:e,voteProps:a,classes:r},e.name))]}),l&&(0,s.jsx)(w.default,{open:!!l,anchorEl:u,placement:"bottom-start",children:(0,s.jsxs)("div",{className:r.hoverBallot,children:[p.reactBallotAxes.map(e=>(0,s.jsx)(k,{axis:e,voteProps:a,classes:r},e.name)),(0,s.jsx)("div",{className:r.divider}),(0,x.default)(p.reactBallotStandaloneReactions,2).map((e,t)=>(0,s.jsx)("div",{className:r.hoverBallotRow,children:e.map(e=>(0,s.jsx)(T,{reaction:e,voteProps:a,classes:r},e.name))},t)),(0,s.jsxs)("div",{className:r.hoverBallotRow,children:[(0,s.jsx)("span",{children:"Overall"}),(0,s.jsx)(c.default,{document:t,hideKarma:n,voteProps:a,showBox:!1})]})]})})]})},{styles:e=>({root:{},agreementSection:{display:"inline-block",fontSize:25,marginLeft:16,lineHeight:.6},agreementScore:{fontSize:"1.1rem",marginLeft:4,lineHeight:1,marginRight:4},hoverBallot:{padding:16,fontFamily:e.typography.commentStyle.fontFamily,display:"inline-block"},voteButton:{display:"inline-block",width:140,padding:4,marginRight:6,fontSize:16,cursor:"pointer","&:hover":{background:e.palette.grey[250]}},buttonLabel:{marginLeft:8},voteArrow:{fontSize:25,lineHeight:.6},hoverBallotRow:{},goodVersion:{},badVersion:{},voteButtonSelected:{background:e.palette.grey[200]},divider:{height:12},emoji:{display:"inline-block",padding:6,paddingTop:8,borderRadius:3,marginRight:4,border:e.palette.border.extraFaint},axisScores:{paddingLeft:16,fontFamily:e.typography.commentStyle.fontFamily,fontSize:12,lineHeight:.6},axisScore:{display:"inline-block",padding:6,paddingTop:8,borderRadius:3,marginRight:4,border:e.palette.border.extraFaint},scoreNumber:{marginRight:6},axisLabel:{},standaloneReaction:{}})}),L=e=>{var t,n;let{reaction:o,voteProps:i,classes:r}=e,a=(null==(n=i.document)||null==(t=n.extendedScore)?void 0:t[o.name])||0;return a?(0,s.jsxs)("div",{className:r.score,children:[(0,s.jsx)("span",{className:r.icon,children:o.icon}),(0,s.jsx)("span",{children:a})]}):null},R=e=>{var t,n;let{reaction:o,voteProps:i,classes:r}=e,a=!!(null==(n=i.document)||null==(t=n.currentUserExtendedVote)?void 0:t[o.name]),{openDialog:l}=(0,g.useDialog)(),d=(0,f.useCurrentUserId)();return(0,s.jsx)("div",{className:(0,v.default)(r.voteButton,{[r.voteButtonSelected]:a}),onClick:async()=>{d?await i.vote({document:i.document,voteType:i.document.currentUserVote||null,extendedVote:{...i.document.currentUserExtendedVote,[o.name]:!a}}):l({name:"LoginPopup",contents:e=>{let{onClose:t}=e;return(0,s.jsx)(b.default,{onClose:t})}})},children:o.icon})},_=e=>{let{voteProps:t,classes:n}=e,{hover:o,anchorEl:i,eventHandlers:r}=(0,h.useHover)(),a=p.emojiReactions.some(e=>{var n,o;return null==(o=t.document)||null==(n=o.extendedScore)?void 0:n[e.name]});return(0,s.jsxs)("span",{className:n.emojiReactionsAxisRoot,...r,children:[(0,s.jsxs)("span",{className:n.scores,children:[p.emojiReactions.map(e=>(0,s.jsx)(L,{reaction:e,voteProps:t,classes:n},e.name)),!a&&(0,s.jsx)("svg",{className:(0,v.default)("MuiSvgIcon-root",n.addReactionIcon),fill:"none",height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsxs)("g",{fill:"#212121",children:[(0,s.jsx)("path",{d:"m13 7c0-3.31371-2.6863-6-6-6-3.31371 0-6 2.68629-6 6 0 3.3137 2.68629 6 6 6 .08516 0 .1699-.0018.25419-.0053-.11154-.3168-.18862-.6499-.22673-.9948l-.02746.0001c-2.76142 0-5-2.23858-5-5s2.23858-5 5-5 5 2.23858 5 5l-.0001.02746c.3449.03811.678.11519.9948.22673.0035-.08429.0053-.16903.0053-.25419z"}),(0,s.jsx)("path",{d:"m7.11191 10.4982c.08367-.368.21246-.71893.38025-1.04657-.15911.03174-.32368.04837-.49216.04837-.74037 0-1.40506-.3212-1.86354-.83346-.18417-.20576-.50026-.22327-.70603-.03911-.20576.18417-.22327.50026-.03911.70603.64016.71524 1.57205 1.16654 2.60868 1.16654.03744 0 .07475-.0006.11191-.0018z"}),(0,s.jsx)("path",{d:"m6 6c0 .41421-.33579.75-.75.75s-.75-.33579-.75-.75.33579-.75.75-.75.75.33579.75.75z"}),(0,s.jsx)("path",{d:"m8.75 6.75c.41421 0 .75-.33579.75-.75s-.33579-.75-.75-.75-.75.33579-.75.75.33579.75.75.75z"}),(0,s.jsx)("path",{d:"m15 11.5c0 1.933-1.567 3.5-3.5 3.5s-3.5-1.567-3.5-3.5 1.567-3.5 3.5-3.5 3.5 1.567 3.5 3.5zm-3-2c0-.27614-.2239-.5-.5-.5s-.5.22386-.5.5v1.5h-1.5c-.27614 0-.5.2239-.5.5s.22386.5.5.5h1.5v1.5c0 .2761.2239.5.5.5s.5-.2239.5-.5v-1.5h1.5c.2761 0 .5-.2239.5-.5s-.2239-.5-.5-.5h-1.5z"})]})})]}),o&&(0,s.jsx)(w.default,{open:!!o,anchorEl:i,placement:"bottom-start",children:(0,s.jsx)("div",{className:n.hoverBallot,children:p.emojiReactions.map(e=>(0,s.jsx)(R,{reaction:e,voteProps:t,classes:n},e.name))})})]})},A=(0,l.registerComponent)("EmojiReactionVoteOnComment",e=>{let{document:t,hideKarma:n=!1,collectionName:o,votingSystem:i,classes:r}=e,a=(0,d.useVote)(t,o,i);return(0,s.jsxs)("span",{className:r.root,children:[(0,s.jsx)(c.default,{document:t,hideKarma:n,voteProps:a}),(0,s.jsx)(_,{voteProps:a,classes:r})]})},{styles:e=>({root:{},hoverBallot:{display:"flex",columnGap:6,padding:6},voteButton:{padding:"3px 6px",fontSize:16,cursor:"pointer","@media (hover: hover)":{"&:hover":{background:e.palette.background.primaryDim}}},voteButtonSelected:{background:e.palette.grey[200]},emojiReactionsAxisRoot:{marginLeft:10},addReactionIcon:{verticalAlign:"text-bottom",fontSize:20,cursor:"pointer","& g":{fill:e.palette.grey[500]},"@media (hover: hover)":{"&:hover":{"& g":{fill:e.palette.grey[300]}}}},scores:{display:"inline-block",fontFamily:e.typography.commentStyle.fontFamily,fontSize:12,lineHeight:"12px"},score:{display:"inline-flex",columnGap:4,padding:"6px 6px 4px",borderRadius:3,border:e.palette.border.extraFaint,marginLeft:4},icon:{color:e.palette.text.slightlyDim}})});var M=e.i(491841);let P=(0,l.registerComponent)("EAEmojisVoteOnComment",e=>{let{document:t,hideKarma:n=!1,collectionName:o,votingSystem:i,classes:r}=e,a=(0,d.useVote)(t,o,i);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.default,{document:t,hideKarma:n,voteProps:a,className:r.overallAxis,showBox:!0}),(0,M.isEAReactableDocument)(o,t)&&(0,s.jsx)(M.default,{document:t,voteProps:a})]})},{styles:e=>({overallAxis:{marginRight:1,"&.OverallVoteAxis-overallSection":{height:22,"& > *":{transform:"translateY(-1px)"},"& > *:nth-child(2)":{transform:"translateY(-2px)"}}}})}),E={default:()=>a.default,twoAxis:()=>m,reactsBallot:()=>N,emojiReactions:()=>A,eaEmojis:()=>P,reactionsAndLikes:()=>t.ReactionsAndLikesVoteOnComment,namesAttachedReactions:()=>n.NamesAttachedReactionsVoteOnComment},F={reactionsAndLikes:()=>t.ReactionsAndLikesCommentBottom,namesAttachedReactions:()=>n.NamesAttachedReactionsCommentBottom},B={namesAttachedReactions:()=>o.default},D={eaEmojis:()=>i.default},U={eaEmojis:()=>r.default}},733385,981432,179096,e=>{"use strict";e.s(["ArbitalPreview",()=>ek,"CommentLinkPreviewLegacy",()=>ea,"DefaultPreview",()=>eg,"EstimakerPreview",()=>ej,"FatebookPreview",()=>ex,"ManifoldPreview",()=>ey,"MessagePreview",()=>ep,"MetaculusPreview",()=>ev,"MetaforecastPreview",()=>eC,"NeuronpediaPreview",()=>eb,"OWIDPreview",()=>ef,"PostCommentLinkPreviewGreaterWrong",()=>es,"PostLinkPreview",()=>en,"PostLinkPreviewLegacy",()=>er,"PostLinkPreviewSequencePost",()=>eo,"PostLinkPreviewSlug",()=>ei,"SequencePreview",()=>em,"ViewpointsPreview",()=>eS],733385);var t=e.i(843476),n=e.i(946271),o=e.i(444098),i=e.i(159211),r=e.i(937636),a=e.i(686590),s=e.i(898298),l=e.i(46758),d=e.i(714818),c=e.i(791434),u=e.i(343794),m=e.i(467292);e.i(813868);var p=e.i(122756),h=e.i(79732),g=e.i(429329),f=e.i(919202),v=e.i(244389),x=e.i(503567),y=e.i(903780),b=e.i(87828),C=e.i(56075),w=e.i(594158),k=e.i(110601);e.s(["default",()=>Z],179096);var j=e.i(865962),S=e.i(239832);e.s(["default",()=>V],981432);var I=e.i(271645),T=e.i(538794),N=e.i(96009),L=e.i(530841),R=e.i(92386),_=e.i(716512),A=e.i(695310),M=e.i(478386),P=e.i(758623),E=e.i(690118),F=e.i(692436),B=e.i(224931),D=e.i(916449),U=e.i(64278),H=e.i(536059),W=e.i(78136),O=e.i(253592);let V=(0,T.registerComponent)("MessageItem",e=>{var n,o;let i,{message:r,highlight:a=!1,showFullWidth:l=!1,classes:d}=e,m=(0,L.useCurrentUser)(),[p,h]=(0,I.useState)(),{html:g=""}=(null==r?void 0:r.contents)||{},f=m&&r.user&&m._id===r.user._id,v=(0,F.getVotingSystemByName)("namesAttachedReactions"),x=(0,B.useVote)(r,"Messages",v),y=(0,I.useRef)(null),{hover:b,eventHandlers:C}=(0,s.useHover)();if(!r||!g)return null;let w=(0,u.default)({[d.whiteMeta]:f}),k=null;!f&&(0,c.isFriendlyUI)()&&(k=(0,t.jsx)(R.default,{user:r.user,className:d.profileImg})),x&&(null==v?void 0:v.getMessageHighlights)&&(i=v.getMessageHighlights({message:r,voteProps:x}));let j=null!=(n=null==(o=U.messageBottomComponents[v.name])?void 0:o.call(U.messageBottomComponents))?n:null,S=(0,t.jsx)(E.ContentItemBody,{ref:y,dangerouslySetInnerHTML:{__html:g},className:d.messageBody,description:"message ".concat(r._id),replacedSubstrings:i,invertSubstitutionColors:!!f});return(0,t.jsxs)("span",{className:(0,u.default)(d.hoverWrapper,f&&d.currentUserHoverWrapper),...C,children:[f&&(0,t.jsx)("span",{className:d.currentUserMessageReactSidebar,children:(0,t.jsx)(W.SideItemsSidebar,{})}),(0,t.jsxs)("div",{className:(0,u.default)(d.root,(0,c.isFriendlyUI)()?d.rootWithImages:d.rootWithoutImages,f&&d.rootCurrentUser,l&&d.fullWidth),children:[k,(0,t.jsx)(H.default,{voteProps:x,children:(0,t.jsxs)("div",{className:d.messageWrapper,children:[(0,t.jsxs)(_.Typography,{variant:"body2",className:(0,u.default)(d.message,{[d.backgroundIsCurrent]:f,[d.highlighted]:a}),children:[(0,t.jsxs)("div",{className:d.meta,children:[r.user&&(0,t.jsx)("span",{className:d.username,children:(0,t.jsx)("span",{className:w,children:(0,t.jsx)(A.default,{user:r.user})})}),(0,t.jsx)("span",{children:" "}),r.createdAt&&(0,t.jsx)(M.default,{children:(0,t.jsx)("span",{className:w,children:(0,t.jsx)(P.default,{date:r.createdAt})})})]}),v.hasInlineReacts?(0,t.jsx)(D.default,{contentRef:y,voteProps:x,styling:f?"messageLeft":"messageRight",setSelection:h,children:S}):S]}),j&&(0,t.jsx)(j,{voteProps:x,invertColors:!!f,isCurrentUser:!!f,showReactionButton:b||!!p,selection:p})]})})]}),!f&&(0,t.jsx)(W.SideItemsSidebar,{})]})},{styles:e=>({hoverWrapper:{width:"100%",display:"flex"},root:{marginBottom:1.5*e.spacing.unit},rootWithImages:{maxWidth:"95%",display:"grid",columnGap:10,gridTemplateColumns:"".concat(R.PROFILE_IMG_DIAMETER,"px minmax(100px, 100%)"),gridTemplateAreas:'"image message"',[e.breakpoints.down("xs")]:{gridTemplateColumns:"".concat(R.PROFILE_IMG_DIAMETER_MOBILE,"px minmax(100px, 100%)")}},rootWithoutImages:{maxWidth:"60%",width:"fit-content",[e.breakpoints.down("xs")]:{maxWidth:"80%"}},rootCurrentUser:{columnGap:0},fullWidth:{maxWidth:"100%"},messageWrapper:{position:"relative",gridArea:"message"},message:{backgroundColor:e.palette.grey[200],"&$highlighted":{backgroundColor:e.palette.grey[500]},paddingTop:e.spacing.unit,paddingBottom:e.spacing.unit,paddingLeft:1.5*e.spacing.unit,paddingRight:1.5*e.spacing.unit,borderRadius:5,wordWrap:"break-word",overflowWrap:"break-word",whiteSpace:"normal",flexGrow:1},highlighted:{},backgroundIsCurrent:{backgroundColor:e.palette.grey[700],color:e.palette.inverseGreyAlpha(.87),"& *, & li::marker":{color:e.palette.inverseGreyAlpha(.87)},"&$highlighted":{backgroundColor:e.palette.grey[500]},marginLeft:1.5*e.spacing.unit},meta:{marginBottom:e.spacing.unit*(e.isFriendlyUI?1.5:.5)},whiteMeta:{color:e.palette.inverseGreyAlpha(.93)},messageBody:{...(0,O.postBodyStyles)(e),...(0,O.commentBodyStyles)(e),"& a":{wordWrap:"break-word",overflowWrap:"break-word",whiteSpace:"normal"},"& img":{maxWidth:"100%"},"& .LWTooltip-root":{display:"inline"}},profileImg:{gridArea:"image",alignSelf:"flex-end"},username:{marginRight:6,fontWeight:600},bottom:{display:"flex",justifyContent:"flex-end"},currentUserHoverWrapper:{justifyContent:"flex-end"},currentUserMessageReactSidebar:{marginRight:20}}),hocs:[N.default]}),z=(0,p.gql)("\n  query multiMessageConversationPreviewQuery($selector: MessageSelector, $limit: Int, $enableTotal: Boolean) {\n    messages(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...messageListFragment\n      }\n      totalCount\n    }\n  }\n"),$=(0,p.gql)("\n  query singleMessageConversationPreviewQuery($documentId: String) {\n    message(selector: { documentId: $documentId }) {\n      result {\n        ...messageListFragment\n      }\n    }\n  }\n"),q=(0,p.gql)("\n  query ConversationPreview($documentId: String) {\n    conversation(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...ConversationsList\n      }\n    }\n  }\n"),G=(0,g.defineStyles)("ConversationPreview",e=>({root:{padding:e.spacing.unit,maxWidth:700,[e.breakpoints.down("xs")]:{display:"none"}},title:{...e.typography.body2,...e.typography.commentStyle,marginBottom:e.spacing.unit}})),Z=e=>{var o,i,r,a;let{conversationId:s,messageId:l,showTitle:d=!0,count:c=10,showFullWidth:u}=e,m=(0,h.useStyles)(G),p=(0,L.useCurrentUser)(),{loading:g,data:f}=(0,n.useQuery)(q,{variables:{documentId:s},fetchPolicy:"cache-first"}),v=null==f||null==(i=f.conversation)?void 0:i.result,{data:x}=(0,n.useQuery)(z,{variables:{selector:{conversationPreview:{conversationId:s}},limit:c,enableTotal:!1},fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),{data:y,loading:b}=(0,n.useQuery)($,{variables:{documentId:l},fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0,skip:!l}),C=null==y||null==(r=y.message)?void 0:r.result,w=null!=(o=null==x||null==(a=x.messages)?void 0:a.results)?o:[],k=l&&C&&v&&(null==w?void 0:w.some(e=>e._id===l)),I=[...w].reverse(),T=g&&!v||l&&b&&!C;return(0,t.jsxs)("div",{className:m.root,children:[v&&d&&(0,t.jsx)("div",{className:m.title,children:(0,j.conversationGetTitle)(v,p)}),T&&(0,t.jsx)(S.default,{}),!T&&(C&&(!k||1===c)?(0,t.jsx)(V,{message:C,showFullWidth:!0}):I.map(e=>(0,t.jsx)(V,{highlight:e._id===l,message:e,showFullWidth:u||1===c},e._id)))]})};var Y=e.i(100916),Q=e.i(651605);let K=(0,p.gql)("\n  query PostLinkPreviewSequence($documentId: String, $allowNull: Boolean) {\n    sequence(input: { selector: { documentId: $documentId }, allowNull: $allowNull }) {\n      result {\n        ...SequencesPageFragment\n      }\n    }\n  }\n"),X=(0,p.gql)("\n  query PostLinkPreviewComment($documentId: String, $allowNull: Boolean) {\n    comment(input: { selector: { documentId: $documentId }, allowNull: $allowNull }) {\n      result {\n        ...CommentsList\n      }\n    }\n  }\n"),J=(0,p.gql)("\n  query PostLinkPreviewPost($documentId: String, $allowNull: Boolean) {\n    post(input: { selector: { documentId: $documentId }, allowNull: $allowNull }) {\n      result {\n        ...PostsList\n      }\n    }\n  }\n"),ee=new Set;function et(e){d.isClient&&!ee.has(e)&&(ee.add(e),console.log(e))}let en=e=>{var o;let{href:i,originalHref:r,targetLocation:a,id:s,className:l,children:d}=e,c=a.params._id,{loading:u,error:m,data:p}=(0,n.useQuery)(J,{variables:{documentId:c,allowNull:!0},fetchPolicy:"cache-first",ssr:(0,C.apolloSSRFlag)(!1)}),h=null==p||null==(o=p.post)?void 0:o.result;return(u||h)&&!m||et("Link preview: No post found with ID ".concat(c,", error: ").concat(m)),(0,t.jsx)(el,{post:h||null,targetLocation:a,error:m,href:i,originalHref:r,id:s,className:l,children:d})},eo=e=>{var o;let{href:i,originalHref:r,targetLocation:a,id:s,className:l,children:d}=e,c=a.params.postId,{loading:u,error:m,data:p}=(0,n.useQuery)(J,{variables:{documentId:c,allowNull:!0},fetchPolicy:"cache-first",ssr:!1}),h=null==p||null==(o=p.post)?void 0:o.result;return(u||h)&&!m||et("Link preview: No post found with ID ".concat(c,", error: ").concat(m)),(0,t.jsx)(el,{post:h||null,targetLocation:a,error:m,href:i,originalHref:r,id:s,className:l,children:d})},ei=e=>{let{href:n,originalHref:o,targetLocation:i,id:r,className:a,children:s}=e,d=i.params.slug,{post:c,error:u}=(0,l.usePostBySlug)({slug:d,ssr:!1});return(0,t.jsx)(el,{href:n,originalHref:o,post:c,targetLocation:i,error:u,id:r,className:a,children:s})},er=e=>{let{href:n,originalHref:o,targetLocation:i,id:r,className:a,children:s}=e,d=i.params.id,{post:c,error:u}=(0,l.usePostByLegacyId)({legacyId:d,ssr:!1});return(0,t.jsx)(el,{href:n,originalHref:o,post:c,targetLocation:i,error:u,id:r,className:a,children:s})},ea=e=>{let{href:n,targetLocation:o,id:i,className:r,children:s}=e,d=o.params.id,c=o.params.commentId,{post:u,error:m}=(0,l.usePostByLegacyId)({legacyId:d,ssr:!1}),{comment:p,error:h}=(0,a.useCommentByLegacyId)({legacyId:c,ssr:!1}),g=m||h;return p?(0,t.jsx)(eu,{comment:p,post:u,error:g,href:n,id:i,className:r,children:s}):(0,t.jsx)(ec,{href:n,post:u,error:g,id:i,className:r,children:s})},es=e=>{var o;let{href:i,targetLocation:r,id:a,className:s,children:l}=e,d=r.params._id,c=r.params.commentId,{loading:u,data:m,error:p}=(0,n.useQuery)(J,{variables:{documentId:d,allowNull:!0},fetchPolicy:"cache-first",ssr:!1}),h=null==m||null==(o=m.post)?void 0:o.result;return(u||h)&&!p||et("Link preview: No post found with ID ".concat(d,", error: ").concat(p)),(0,t.jsx)(ed,{href:i,commentId:c,post:h||null,id:a,className:s,children:l})},el=e=>{let{href:n,originalHref:o,post:i,targetLocation:a,comment:s,commentId:l,error:d,id:c,className:u,children:m}=e;if(new((0,Q.getUrlClass)())(o,(0,Y.getSiteUrl)()).searchParams.get("commentId"))return(0,t.jsx)(ed,{commentId:a.query.commentId,href:n,post:i,id:c,className:u,children:m});if(a.hash){let e=a.hash.split("#")[1];if((0,r.looksLikeDbIdString)(e))return(0,t.jsx)(ed,{commentId:e,href:n,post:i,id:c,className:u,children:m})}return l?(0,t.jsx)(ed,{commentId:l,post:i,href:n,id:c,className:u,children:m}):(0,t.jsx)(ec,{href:n,post:i,error:d,id:c,className:u,children:m})},ed=e=>{var o;let{href:i,commentId:r,post:a,id:s,className:l,children:d}=e,{loading:c,error:u,data:m}=(0,n.useQuery)(X,{variables:{documentId:r,allowNull:!0},fetchPolicy:"cache-first",ssr:!1}),p=null==m||null==(o=m.comment)?void 0:o.result;return((c||p)&&!u||et("Link preview: No comment found with ID ".concat(r,", error: ").concat(u)),p)?(0,t.jsx)(eu,{comment:p,post:a,error:u,href:i,id:s,className:l,children:d}):(0,t.jsx)(ec,{href:i,post:a,error:u,id:s,className:l,children:d})},ec=e=>{let{href:n,post:o,id:r,className:a,children:s}=e,l=(0,h.useStyles)(w.linkStyles);if(!o)return(0,t.jsx)(i.Link,{to:n,className:(0,u.default)(l.link,a),children:s});let d=n.indexOf("#")>=0?n.split("#")[1]:void 0,m=null==o?void 0:o.isRead;return(0,t.jsx)(v.default,{post:o,hash:d,placement:"bottom-start",clickable:!(0,c.isFriendlyUI)(),As:"span",children:(0,t.jsx)(i.Link,{className:(0,u.default)(l.link,m&&"visited",a),to:n,id:r,smooth:!0,children:s})})},eu=e=>{let{href:n,comment:o,post:r,id:a,className:s,children:l}=e,d=(0,h.useStyles)(w.linkStyles);return o?(0,t.jsx)(v.default,{post:r,comment:o,placement:"bottom-start",As:"span",clickable:!(0,c.isFriendlyUI)(),children:(0,t.jsx)(i.Link,{className:(0,u.default)(d.link,s),to:n,id:a,children:l})}):(0,t.jsx)(i.Link,{to:n,className:(0,u.default)(d.link,s),children:l})},em=e=>{var o;let{targetLocation:r,href:a,className:s,children:l}=e,d=(0,h.useStyles)(w.linkStyles),c=r.params._id,{loading:m,data:p,error:g}=(0,n.useQuery)(K,{variables:{documentId:c,allowNull:!0},fetchPolicy:"cache-first",ssr:!1}),f=null==p||null==(o=p.sequence)?void 0:o.result;return(f||m)&&!g||et("Link preview: No sequence  found with ID ".concat(c,", error: ").concat(g)),(0,t.jsx)(x.default,{sequence:null!=f?f:null,placement:"bottom-start",allowOverflow:!0,children:(0,t.jsx)(i.Link,{className:(0,u.default)(d.link,s),to:a,id:c,children:l})})},ep=e=>{var n;let{href:i,targetLocation:r,id:a,className:s,children:l}=e;return(0,t.jsx)(k.default,{tooltip:!1,title:(0,t.jsx)("span",{children:(0,t.jsx)(o.Card,{children:(0,t.jsx)(Z,{conversationId:null==r||null==(n=r.query)?void 0:n.conversation})})}),children:l})},eh=(0,g.defineStyles)("DefaultPreview",e=>({hovercard:{padding:e.spacing.unit,paddingLeft:1.5*e.spacing.unit,paddingRight:1.5*e.spacing.unit,...e.typography.body2,fontSize:"1.1rem",...e.typography.commentStyle,color:e.palette.grey[600],maxWidth:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}})),eg=e=>{let{href:n,onsite:r=!1,id:a,rel:l,className:d,children:c}=e,u=(0,h.useStyles)(eh),{eventHandlers:m,hover:p,anchorEl:g}=(0,s.useHover)({eventProps:{pageElementContext:"linkPreview",hoverPreviewType:"DefaultPreview",href:n,onsite:r}});return(0,t.jsxs)("span",{...m,children:[(0,t.jsx)(y.default,{open:p,anchorEl:g,placement:"bottom-start",clickable:!1,children:(0,t.jsx)(o.Card,{children:(0,t.jsx)("div",{className:u.hovercard,children:n})})}),r?(0,t.jsx)(i.Link,{to:n,id:a,rel:l,className:d,children:c}):(0,t.jsx)(f.default,{eventType:"link",eventProps:{to:n},children:(0,t.jsx)("a",{href:n,id:a,rel:l,className:d,children:c})})]})},ef=e=>{let{href:n,id:o,className:i,children:r}=e,a=(0,h.useStyles)(w.linkStyles),{anchorEl:l,hover:d,eventHandlers:c}=(0,s.useHover)(),[m]=n.match(/^http(?:s?):\/\/ourworldindata\.org\/grapher\/.*/)||[];return m?(0,t.jsx)(f.default,{eventType:"link",eventProps:{to:n},children:(0,t.jsxs)("span",{...c,children:[(0,t.jsx)("a",{className:(0,u.default)(a.link,i),href:n,id:o,children:r}),(0,t.jsx)(y.default,{open:d,anchorEl:l,placement:"bottom-start",children:(0,t.jsx)("div",{className:a.owidBackground,children:(0,t.jsx)("iframe",{className:a.owidIframe,src:m})})})]})}):(0,t.jsx)("a",{href:n,className:i,children:r})},ev=e=>{let{href:n,id:o,className:i,children:r}=e,a=(0,h.useStyles)(w.linkStyles),{anchorEl:l,hover:d,eventHandlers:c}=(0,s.useHover)(),[m,p,g]=n.match(/^http(?:s?):\/\/(www\.)?metaculus\.com\/questions\/(\d+)/)||[];return g?(0,t.jsx)(f.default,{eventType:"link",eventProps:{to:n},children:(0,t.jsxs)("span",{...c,children:[(0,t.jsx)("a",{className:(0,u.default)(a.link,i),href:n,id:o,children:r}),(0,t.jsx)(y.default,{open:d,anchorEl:l,placement:"bottom-start",children:(0,t.jsx)("div",{className:a.metaculusBackground,children:(0,t.jsx)("iframe",{className:a.metaculusIframe,src:"https://www.metaculus.com/questions/embed/".concat(g)})})})]})}):(0,t.jsx)("a",{href:n,className:i,children:r})},ex=e=>{let{href:n,id:o,className:i,children:r}=e,a=(0,h.useStyles)(w.linkStyles),{anchorEl:l,hover:d,eventHandlers:c}=(0,s.useHover)(),m=/^https?:\/\/fatebook\.io\/embed\/q\/[\w-]+$/.test(n),[,p]=n.match(/^https?:\/\/fatebook\.io\/q\/(.+)$/)||[];if(!m&&!p)return(0,t.jsx)("a",{href:n,className:i,children:r});let g=m?n:"https://fatebook.io/embed/q/".concat(p,"?requireSignIn=false&compact=true");return(0,t.jsx)(f.default,{eventType:"link",eventProps:{to:n},children:(0,t.jsxs)("span",{...c,children:[(0,t.jsx)("a",{className:(0,u.default)(a.link,i),href:n,id:o,children:r}),(0,t.jsx)(y.default,{open:d,anchorEl:l,placement:"bottom-start",children:(0,t.jsx)("iframe",{className:a.fatebookIframe,src:g})})]})})},ey=e=>{let{href:n,id:o,className:i,children:r}=e,a=(0,h.useStyles)(w.linkStyles),{anchorEl:l,hover:d,eventHandlers:c}=(0,s.useHover)(),m=/^https?:\/\/manifold\.markets\/embed\/.+$/.test(n),[,p]=n.match(/^https?:\/\/manifold\.markets\/(\w+\/[\w-]+)/)||[];if(!m&&!p)return(0,t.jsx)("a",{href:n,className:i,children:r});let g=m?n:"https://manifold.markets/embed/".concat(p);return(0,t.jsx)(f.default,{eventType:"link",eventProps:{to:n},children:(0,t.jsxs)("span",{...c,children:[(0,t.jsx)("a",{className:(0,u.default)(a.link,i),href:n,id:o,children:r}),(0,t.jsx)(y.default,{open:d,anchorEl:l,placement:"bottom-start",children:(0,t.jsx)("iframe",{className:a.manifoldIframe,src:g})})]})})},eb=e=>{let{href:n,id:o,className:i,children:r}=e,a=(0,h.useStyles)(w.linkStyles),{anchorEl:l,hover:d,eventHandlers:c}=(0,s.useHover)(),m=/https:\/\/(www\.)?neuronpedia\.org\/[a-zA-Z0-9-]+\/[a-zA-Z0-9-]+\/\d+\?embed=true/.test(n),p=n.match(/^https?:\/\/(www\.)?neuronpedia\.org\/([a-zA-Z0-9-/]+).*/)||[];if(!m&&(!p||0===p.length))return(0,t.jsx)("a",{href:n,className:i,children:r});let g=p[p.length-1],v=m?n:"https://neuronpedia.org/".concat(g,"?embed=true");return(0,t.jsx)(f.default,{eventType:"link",eventProps:{to:n},children:(0,t.jsxs)("span",{...c,children:[(0,t.jsx)("a",{className:(0,u.default)(a.link,i),href:n,id:o,children:r}),(0,t.jsx)(y.default,{open:d,anchorEl:l,placement:"bottom-start",children:(0,t.jsx)("iframe",{className:a.neuronpediaIframe,src:v})})]})})},eC=e=>{let{href:n,id:o,className:i,children:r}=e,a=(0,h.useStyles)(w.linkStyles),{anchorEl:l,hover:d,eventHandlers:c}=(0,s.useHover)(),m=/^https?:\/\/metaforecast\.org\/questions\/embed\/.+$/.test(n),[,p]=n.match(/^https?:\/\/metaforecast\.org\/questions\/([\w-]+)/)||[];if(!m&&!p)return(0,t.jsx)("a",{href:n,className:i,children:r});let g=m?n:"https://metaforecast.org/questions/embed/".concat(p);return(0,t.jsx)(f.default,{eventType:"link",eventProps:{to:n},children:(0,t.jsxs)("span",{...c,children:[(0,t.jsx)("a",{className:(0,u.default)(a.link,i),href:n,id:o,children:r}),(0,t.jsx)(y.default,{open:d,anchorEl:l,placement:"bottom-start",children:(0,t.jsx)("iframe",{className:a.metaforecastIframe,src:g})})]})})},ew=(0,g.defineStyles)("ArbitalPreview",e=>({hovercard:{padding:e.spacing.unit,paddingLeft:1.5*e.spacing.unit,paddingRight:1.5*e.spacing.unit,maxWidth:500,overflow:"hidden",textOverflow:"ellipsis","& h2":{marginTop:4},"& a[href='https://arbital.com/edit/']":{color:e.palette.error.main}},headerRow:{display:"flex",justifyContent:"space-between"},logo:{height:24,fill:e.palette.icon.dim2,marginTop:-5}})),ek=e=>{var i,r,a;let{href:l,id:d,className:c,children:g}=e,v=(0,h.useStyles)(ew),x=(0,h.useStyles)(w.linkStyles),{anchorEl:C,hover:k,eventHandlers:j}=(0,s.useHover)(),[S,I,T]=l.match(/^http(?:s?):\/\/(www\.)?arbital\.com\/p\/([a-zA-Z0-9_]+)+/)||[],{data:N,loading:L}=(0,n.useQuery)((0,p.gql)("\n    query ArbitalPageRequest($arbitalSlug: String!) {\n      ArbitalPageData(pageAlias: $arbitalSlug) {\n        title\n        html\n      }\n    }\n  "),{ssr:!1,skip:!T,variables:{arbitalSlug:T}});return!T||L?(0,t.jsx)(eg,{href:l,id:d,className:c,children:g}):(0,t.jsx)(f.default,{eventType:"link",eventProps:{to:l},children:(0,t.jsxs)("span",{...j,children:[(0,t.jsx)("a",{className:(0,u.default)(x.link,c),href:l,id:d,children:g}),(0,t.jsx)(y.default,{open:k,anchorEl:C,placement:"bottom-start",children:(0,t.jsx)(o.Card,{children:(0,t.jsxs)(b.default,{contentType:"comment",className:v.hovercard,children:[(0,t.jsxs)("div",{className:v.headerRow,children:[(0,t.jsx)("a",{href:l,children:(0,t.jsx)("h2",{children:null==N||null==(r=N.ArbitalPageData)?void 0:r.title})}),(0,t.jsx)("a",{href:"https://arbital.com",title:"This article is hosted on Arbital.com",children:(0,t.jsx)("div",{className:v.logo,children:(0,t.jsx)(m.ArbitalLogo,{})})})]}),(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:null!=(i=null==N||null==(a=N.ArbitalPageData)?void 0:a.html)?i:""},id:d})]})})})]})})},ej=e=>{let{href:n,id:o,className:i,children:r}=e,a=(0,h.useStyles)(w.linkStyles),{anchorEl:l,hover:d,eventHandlers:c}=(0,s.useHover)();return/^https?:\/\/estimaker\.app\/_\/.+$/.test(n)?(0,t.jsx)(f.default,{eventType:"link",eventProps:{to:n},children:(0,t.jsxs)("span",{...c,children:[(0,t.jsx)("a",{className:(0,u.default)(a.link,i),href:n,id:o,children:r}),(0,t.jsx)(y.default,{open:d,anchorEl:l,placement:"bottom-start",children:(0,t.jsx)("iframe",{className:a.estimakerIframe,src:n})})]})}):(0,t.jsx)("a",{href:n,className:i,children:r})},eS=e=>{let{href:n,id:o,className:i,children:r}=e,a=(0,h.useStyles)(w.linkStyles),{anchorEl:l,hover:d,eventHandlers:c}=(0,s.useHover)(),m=/^https?:\/\/viewpoints\.xyz\/embed\/polls\/.+$/.test(n),[,p]=n.match(/^https?:\/\/viewpoints\.xyz\/polls\/([\w-]+)/)||[];if(!m&&!p)return(0,t.jsx)("a",{href:n,className:i,children:r});let g=m?n:"https://viewpoints.xyz/embed/polls/".concat(p);return(0,t.jsx)(f.default,{eventType:"link",eventProps:{to:g},children:(0,t.jsxs)("span",{...c,children:[(0,t.jsx)("a",{className:(0,u.default)(a.link,i),href:n,id:o,children:r}),(0,t.jsx)(y.default,{open:d,anchorEl:l,placement:"bottom-start",children:(0,t.jsx)("iframe",{className:a.viewpointsIframe,src:g})})]})})}},331795,e=>{"use strict";function t(e){if(!bundleIsServer)return{document:new DOMParser().parseFromString(e,"text/html"),window};{let{document:t,window:n}=(()=>{throw Error("Not implemented on the client")})("<html><body>".concat(e,"</body></html>"));return{document:t,window:n}}}e.s(["ServerSafeNode",0,{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32},"parseDocumentFromString",()=>t],331795)},164783,e=>{"use strict";var t=e.i(271645);let n=(0,t.createContext)(null);e.s(["PostsPageContext",0,n,"usePostsPageContext",0,()=>(0,t.useContext)(n)])},656702,e=>{"use strict";e.s(["BOOKUI_LINKPOST_WORDCOUNT_THRESHOLD",0,800,"CENTRAL_COLUMN_WIDTH",0,682,"MAX_COLUMN_WIDTH",0,720,"RECOMBEE_RECOMM_ID_QUERY_PARAM",0,"recombeeRecommId","RIGHT_COLUMN_WIDTH_WITHOUT_SIDENOTES",0,50,"RIGHT_COLUMN_WIDTH_WITH_SIDENOTES",0,300,"RIGHT_COLUMN_WIDTH_XS",0,5,"SHARE_POPUP_QUERY_PARAM",0,"sharePopup","sidenotesHiddenBreakpoint",0,e=>e.breakpoints.down("md")])},336787,e=>{"use strict";e.s(["default",()=>R],336787);var t=e.i(843476),n=e.i(271645),o=e.i(444098),i=e.i(538794),r=e.i(898298),a=e.i(77255),s=e.i(773736),l=e.i(343794),d=e.i(331795),c=e.i(164783),u=e.i(656702),m=e.i(222393),p=e.i(78136),h=e.i(725788),g=e.i(662841),f=e.i(186947),v=e.i(87828),x=e.i(833851),y=e.i(429329),b=e.i(79732);let C=(0,y.defineStyles)("FootnoteDialog",e=>({dialogPaper:{marginTop:48,marginBottom:100,marginLeft:18,marginRight:18},content:{margin:16,"& .footnote-content":{width:"auto"},"& .footnote-back-link":{display:"none"}}})),w=e=>{let{footnoteHTML:n,onClose:o}=e,i=(0,b.useStyles)(C);return(0,t.jsx)(x.default,{open:!0,onClose:o,paperClassName:i.dialogPaper,children:(0,t.jsx)(v.default,{contentType:"postHighlight",className:i.content,children:(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:n||""}})})})};var k=e.i(6598),j=e.i(903780),S=e.i(690118),I=e.i(128380),T=e.i(289078);let N=n.default.createContext(null),L=e=>{let{footnoteHref:n,footnoteHTML:o,contentStyleType:i,classes:r}=e,a=function(e,t){let n=function(e,t){if(e.match(/^#fn.*/))return e.substring(3);{var n,o;let{document:e}=(0,d.parseDocumentFromString)(t);return null==(o=e.getElementsByClassName("footnote-back-link"))||null==(n=o[0])?void 0:n.getAttribute("data-footnote-id")}}(e,t);if(!n)return null;let o=document.getElementById("fnref"+n),i=null==o?void 0:o.getAttribute("data-footnote-index");if(i)return i;let r=Array.from(document.querySelectorAll("#fn".concat(n))).find(e=>{var t;return(null==(t=e.parentElement)?void 0:t.tagName)==="OL"&&(e.parentElement.classList.contains("footnotes")||e.parentElement.classList.contains("footnotes-list"))});if(r){var a;let e=r.parentElement,t=null==e?void 0:e.getAttribute("start"),n=t?parseInt(t):1,o=0;for(let t=0;t<(null!=(a=null==e?void 0:e.children.length)?a:0);t++){let n=null==e?void 0:e.children.item(t);if(n===r)break;(null==n?void 0:n.tagName)==="LI"&&o++}return(n+o).toString()}return null}(n,o);return(0,t.jsx)(v.default,{contentType:i,children:(0,t.jsxs)("span",{className:r.sidenoteWithIndex,children:[null!==a&&(0,t.jsxs)("span",{className:r.sidenoteIndex,children:[a,"."]}),(0,t.jsxs)("div",{className:r.sidenoteContent,children:[(0,t.jsx)(S.ContentItemBody,{dangerouslySetInnerHTML:{__html:o}}),(0,t.jsx)("div",{className:r.overflowFade})]})]})})},R=(0,i.registerComponent)("FootnotePreview",e=>{var i,d;let{classes:u,href:x,id:y,rel:b,contentStyleType:C="postHighlight",children:R}=e,{openDialog:_}=(0,h.useDialog)(),[A,M]=(0,n.useState)(!1),P=(0,T.useTheme)().breakpoints.values.sm,{eventHandlers:E,hover:F,anchorEl:B}=(0,r.useHover)({eventProps:{pageElementContext:"linkPreview",hoverPreviewType:"DefaultPreview",href:x},getIsEnabled:()=>!(0,f.isMobile)()&&window.innerWidth>=P}),{eventHandlers:D,hover:U}=(0,r.useHover)(),H=F||U,[W,O]=(0,n.useState)(null),V=(0,n.useMemo)(()=>[],[]),z=null!=(i=(0,n.useContext)(N))?i:V,$=(0,n.useMemo)(()=>[...z,x],[z,x]);(0,n.useEffect)(()=>{let e=z.includes(x)?null:function(e){try{var t;let n,o=document.querySelector(e),i=null!=(t=null==o?void 0:o.innerHTML)?t:null;if(o&&(n=o)&&Array.from(n.querySelectorAll("p, li")).reduce((e,t)=>e+t.textContent,"").trim())return i;return null}catch(e){return null}}(x);e&&O(t=>null!=t?t:e)},[x,z]);let q=(0,n.useCallback)(e=>{let n=window.innerWidth>=P,o=(0,f.isMobile)()||!n;(0,g.isRegularClick)(e)&&o&&null!==W?(M(!0),_({name:"FootnoteDialog",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(w,{onClose:n,footnoteHTML:W})}}),e.preventDefault()):window.dispatchEvent(new CustomEvent(a.EXPAND_FOOTNOTES_EVENT,{detail:x}))},[x,W,_,P]),G=(0,c.usePostsPageContext)(),Z=null!=(d=null==G?void 0:G.fullPost)?d:null==G?void 0:G.postPreload,Y=null==Z?void 0:Z.disableSidenotes,Q=(0,m.useIsAboveBreakpoint)("lg"),K=(0,p.useHasSideItemsSidebar)(),X=(0,s.hasSidenotes)()&&K&&!Y&&Q;return(0,t.jsxs)("span",{children:[(0,s.hasSidenotes)()&&!Y&&null!==W&&(0,t.jsxs)(p.SideItem,{options:{offsetTop:-6},children:[(0,t.jsx)("div",{...D,className:(0,l.default)(u.sidenote,H&&u.sidenoteHover),children:(0,t.jsx)(N.Provider,{value:$,children:(0,t.jsx)(L,{footnoteHref:x,footnoteHTML:W,contentStyleType:C,classes:u})})}),(0,t.jsx)("span",{className:u.footnoteMobileIndicator,onClick:q,children:(0,t.jsx)(k.default,{colorClass:u.lineColor})})]}),(0,t.jsxs)("a",{...E,href:s.hasCollapsedFootnotes?void 0:x,id:y,rel:b,onClick:q,className:(0,l.default)(H&&u.anchorHover),children:[R,null!==W&&!A&&(0,t.jsx)(j.default,{open:F&&!X,anchorEl:B,placement:"bottom-start",allowOverflow:!0,flip:!0,clickable:!0,children:(0,t.jsx)(I.InteractionWrapper,{children:(0,t.jsx)(o.Card,{children:(0,t.jsx)(v.default,{contentType:C,className:u.hovercard,children:(0,t.jsx)(S.ContentItemBody,{dangerouslySetInnerHTML:{__html:W||""}})})})})})]})]})},{styles:e=>({hovercard:{padding:16,...e.typography.body2,fontSize:"1.1rem",...e.typography.commentStyle,color:e.palette.grey[800],maxWidth:500,"& a":{color:e.palette.primary.main},"& .footnote-back-link":{display:"none"}},anchorHover:{border:"2px solid ".concat(e.palette.primary.dark),margin:-2,borderRadius:2},sidenote:{[(0,u.sidenotesHiddenBreakpoint)(e)]:{display:"none"},'& .footnote-back-link, & a[href^="#fnref"]':{display:"none"},width:u.RIGHT_COLUMN_WIDTH_WITH_SIDENOTES,padding:12,"& .footnote-content":{width:"auto !important",maxWidth:"100%","& ul:first-child, & ol:first-child":{marginTop:0}}},footnoteMobileIndicator:{display:"none",[(0,u.sidenotesHiddenBreakpoint)(e)]:{display:"inline-block"}},lineColor:{background:e.palette.sideItemIndicator.footnote},sidenoteWithIndex:{display:"flex"},sidenoteIndex:{display:"inline-block",verticalAlign:"top",fontSize:15,marginRight:0,whiteSpace:"nowrap",lineHeight:"19px",color:e.palette.greyAlpha(.65),"$sidenoteHover &":{color:e.palette.text.normal}},sidenoteContent:{display:"inline-block",position:"relative",verticalAlign:"top",fontSize:15,lineHeight:"19px",maxWidth:"100%",maxHeight:200,overflow:"hidden",color:e.palette.greyAlpha(.65),"$sidenoteHover &":{color:e.palette.text.normal},"& li":{fontSize:"0.9em",lineHeight:"1.4em"}},overflowFade:{position:"absolute",top:160,height:40,width:"100%",background:"linear-gradient(0deg,".concat(e.palette.background.pageActiveAreaBackground,",transparent)")},sidenoteHover:{background:e.palette.background.sidenoteBackground,borderRadius:3,"& $sidenoteContent":{maxHeight:"unset"},"& $overflowFade":{display:"none"}}})})},52674,e=>{"use strict";var t=e.i(946271);e.i(813868);var n=e.i(122756),o=e.i(773736),i=e.i(565816),r=e.i(480210);let a={TagFragment:(0,n.gql)("\n  query tagFragmentBySlug($selector: TagSelector, $limit: Int) {\n    tags(selector: $selector, limit: $limit) {\n      results {\n        ...TagFragment\n      }\n    }\n  }\n"),TagBasicInfo:(0,n.gql)("\n  query tagBasicInfoBySlug($selector: TagSelector, $limit: Int) {\n    tags(selector: $selector, limit: $limit) {\n      results {\n        ...TagBasicInfo\n      }\n    }\n  }\n"),AllTagsPageFragment:(0,n.gql)("\n  query allTagsPageFragmentBySlug($selector: TagSelector, $limit: Int) {\n    tags(selector: $selector, limit: $limit) {\n      results {\n        ...AllTagsPageFragment\n      }\n    }\n  }\n"),TagPageFragment:(0,n.gql)("\n  query tagPageFragmentBySlug($selector: TagSelector, $limit: Int, $contributorsLimit: Int) {\n    tags(selector: $selector, limit: $limit) {\n      results {\n        ...TagPageFragment\n      }\n    }\n  }\n"),TagPageWithRevisionFragment:(0,n.gql)("\n  query tagPageWithRevisionFragmentBySlug($selector: TagSelector, $limit: Int, $version: String, $contributorsLimit: Int) {\n    tags(selector: $selector, limit: $limit) {\n      results {\n        ...TagPageWithRevisionFragment\n      }\n    }\n  }\n"),TagEditFragment:(0,n.gql)("\n  query tagEditFragmentBySlug($selector: TagSelector, $limit: Int) {\n    tags(selector: $selector, limit: $limit) {\n      results {\n        ...TagEditFragment\n      }\n    }\n  }\n"),TagHistoryFragment:(0,n.gql)("\n  query tagHistoryFragmentBySlug($selector: TagSelector, $limit: Int) {\n    tags(selector: $selector, limit: $limit) {\n      results {\n        ...TagHistoryFragment\n      }\n    }\n  }\n"),TagPageWithArbitalContentFragment:(0,n.gql)("\n  query tagPageWithArbitalContentFragmentBySlug($selector: TagSelector, $limit: Int, $contributorsLimit: Int) {\n    tags(selector: $selector, limit: $limit) {\n      results {\n        ...TagPageWithArbitalContentFragment\n      }\n    }\n  }\n"),TagPageRevisionWithArbitalContentFragment:(0,n.gql)("\n  query tagPageRevisionWithArbitalContentFragmentBySlug($selector: TagSelector, $limit: Int, $version: String, $contributorsLimit: Int) {\n    tags(selector: $selector, limit: $limit) {\n      results {\n        ...TagPageRevisionWithArbitalContentFragment\n      }\n    }\n  }\n"),TagPageWithArbitalContentAndLensRevisionFragment:(0,n.gql)("\n  query tagPageWithArbitalContentAndLensRevisionFragmentBySlug($selector: TagSelector, $limit: Int, $version: String, $contributorsLimit: Int, $lensSlug: String) {\n    tags(selector: $selector, limit: $limit) {\n      results {\n        ...TagPageWithArbitalContentAndLensRevisionFragment\n      }\n    }\n  }\n")},s=(0,n.gql)("\n  query getTagOrLensPreview($slug: String!, $hash: String) {\n    TagPreview(slug: $slug, hash: $hash) {\n      tag {\n        ...TagPreviewFragment\n      }\n      lens {\n        ...MultiDocumentContentDisplay\n      }\n      summaries {\n        ...MultiDocumentContentDisplay\n      }\n    }\n  }\n"),l=(0,n.gql)("\n  query getTagOrLensSectionPreview($slug: String!, $hash: String) {\n    TagPreview(slug: $slug, hash: $hash) {\n      tag {\n        ...TagSectionPreviewFragment\n      }\n      lens {\n        ...MultiDocumentContentDisplay\n      }\n      summaries {\n        ...MultiDocumentContentDisplay\n      }\n    }\n  }\n"),d=(0,n.gql)("\n  query getTagPreview($selector: TagSelector, $limit: Int) {\n    tags(selector: $selector, limit: $limit) {\n      results {\n        ...TagPreviewFragment\n      }\n    }\n  }\n"),c=(0,n.gql)("\n  query getTagSectionPreview($selector: TagSelector, $limit: Int, $hash: String) {\n    tags(selector: $selector, limit: $limit) {\n      results {\n        ...TagSectionPreviewFragment\n      }\n    }\n  }\n");e.s(["useTagBySlug",0,(e,n,o)=>{var i;let r=a[n],{extraVariables:s,skip:l}=null!=o?o:{},{data:d,loading:c,error:u,refetch:m}=(0,t.useQuery)(r,{variables:{selector:{tagBySlug:{slug:e}},limit:1,...s},skip:l}),p=null==d||null==(i=d.tags)?void 0:i.results;return p&&p.length>0&&p[0]._id?{tag:p[0],loading:!1,error:null,refetch:m}:{tag:null,loading:c,error:u,refetch:m}},"useTagPreview",0,(e,n,a)=>{var u,m;let{query:p,queryWithLens:h,...g}=n?{query:c,queryWithLens:l,hash:n}:{query:d,queryWithLens:s},{data:f,loading:v,error:x}=(0,t.useQuery)(h,{skip:a||!(0,o.hasWikiLenses)(),variables:{...g,slug:e},ssr:!1}),{data:y,loading:b,error:C}=(0,t.useQuery)(p,{variables:{selector:{tagBySlug:{slug:e}},limit:1,...g},skip:a||(0,o.hasWikiLenses)(),ssr:!1});if((0,o.hasWikiLenses)()){if(null==f||null==(m=f.TagPreview)||!m.tag)return{tag:null,loading:v,error:x};{let e,t=f.TagPreview.tag,n=f.TagPreview.lens,o=f.TagPreview.summaries;if(n){let a=Object.keys(t),s=Object.keys(n),l=(0,i.default)(a,s),d=(0,r.default)(n,l);e={...t,...d,description:n.contents,summaries:o}}else e={...t,summaries:o};return{tag:e,loading:!1,error:null}}}let w=null==y||null==(u=y.tags)?void 0:u.results;return w&&w.length>0&&w[0]._id?{tag:w[0],loading:!1,error:null}:{tag:null,loading:b,error:C}}],52674)},972445,317710,e=>{"use strict";var t=e.i(843476),n=e.i(79732),o=e.i(429329);e.i(793794);var i=e.i(527633),r=e.i(552275),a=e.i(35693),s=e.i(946271),l=e.i(159211),d=e.i(937636),c=e.i(716970),u=e.i(716512),m=e.i(87828),p=e.i(846361);e.i(813868);var h=e.i(122756),g=e.i(709348);let f=(0,h.gql)("\n  query multiMultiDocumentRedlinkTagPageQuery($selector: MultiDocumentSelector, $limit: Int, $enableTotal: Boolean) {\n    multiDocuments(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...MultiDocumentMinimumInfo\n      }\n      totalCount\n    }\n  }\n"),v=(0,h.gql)("\n  query multiTagRedlinkTagPageQuery($selector: TagSelector, $limit: Int, $enableTotal: Boolean) {\n    tags(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...TagBasicInfo\n      }\n      totalCount\n    }\n  }\n"),x=(0,o.defineStyles)("RedlinkTagPage",e=>({title:{marginBottom:16},pingbacksList:{marginBottom:"32px"},createButton:{padding:8}})),y=(e,t)=>{var n,o,i,r,a,l,d,c,u,m,p,h,g;let x=(0,s.useQuery)(v,{variables:{selector:{pingbackWikiPages:{tagId:e,excludedTagIds:t}},limit:10,enableTotal:!0},skip:!e,notifyOnNetworkStatusChange:!0}),y=(0,s.useQuery)(f,{variables:{selector:{pingbackLensPages:{documentId:e,excludedDocumentIds:t}},limit:10,enableTotal:!0},skip:!e,notifyOnNetworkStatusChange:!0});return{results:[...(null!=(n=null==(d=x.data)||null==(l=d.tags)?void 0:l.results)?n:[]).map(e=>({_id:e._id,slug:e.slug,name:e.name})),...(null!=(o=null==(u=y.data)||null==(c=u.multiDocuments)?void 0:c.results)?o:[]).map(e=>({_id:e._id,slug:e.slug,name:function(e){if(e.title)return e.title;let t=e.tabSubtitle?": ".concat(e.tabSubtitle):"";return"".concat(e.tabTitle).concat(t)}(e)}))],totalCount:(null!=(i=null==(p=x.data)||null==(m=p.tags)?void 0:m.totalCount)?i:0)+(null!=(r=null==(g=y.data)||null==(h=g.multiDocuments)?void 0:h.totalCount)?r:0),loading:x.loading||y.loading,error:null!=(a=x.error)?a:y.error}};function b(e){return e.substring(0,1).toUpperCase()+e.substring(1)}let C=(e,t)=>{var n,o;let i=t&&t.split(/[_-]/).map(b).join(" ");return null!=(n=null!=(o=null==e?void 0:e.name)?o:i)?n:null};e.s(["default",0,e=>{var o,s;let{tag:h,slug:f}=e,v=(0,n.useStyles)(x),{results:w,loading:k,error:j}=y(null==h?void 0:h._id);(0,d.useNavigate)();let S=b(null!=(o=C(h,null!=f?f:null))?o:"Unnamed"),I="/".concat(r.tagUrlBaseSetting.get(),"/create?name=").concat(encodeURIComponent(S),"&type=wiki"),T=null!=(s=null==h?void 0:h.slug)?s:f;return T?(0,t.jsxs)(c.default,{children:[(0,t.jsx)(g.StatusCodeSetter,{status:404}),(0,t.jsx)(u.Typography,{variant:"display3",children:(0,t.jsx)(l.Link,{className:v.title,to:(0,a.tagGetUrl)({slug:T}),children:S})}),(0,t.jsxs)(m.default,{contentType:"tag",children:[(0,t.jsx)("p",{children:"This wiki page has not been created yet."}),w&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:"These wiki pages link to this page:"}),(0,t.jsx)("ul",{className:v.pingbacksList,children:null==w?void 0:w.map(e=>(0,t.jsx)("li",{children:(0,t.jsx)(l.Link,{to:(0,a.tagGetUrl)({slug:e.slug}),children:e.name})},e._id))})]}),!(null==w?void 0:w.length)&&!k&&!j&&(0,t.jsx)("p",{children:"There are no wiki pages linking to this page."})]}),(0,t.jsx)(l.Link,{to:I,children:(0,t.jsx)(i.default,{className:v.createButton,variant:"contained",color:"primary",children:"Create Page"})})]}):(0,t.jsx)(p.default,{})},"inferRedLinkTitle",0,C,"useRedLinkPingbacks",0,y],972445);var w=e.i(271645);let k=(0,w.createContext)(null);e.s(["TagPageContext",0,k,"useTagPageContext",0,()=>(0,w.useContext)(k)],317710)},251314,e=>{"use strict";e.s(["MAIN_TAB_ID",0,"main-tab"])},406402,e=>{"use strict";var t=e.i(843476),n=e.i(110601);e.s(["RelevanceLabel",0,()=>(0,t.jsx)(n.default,{title:'"Relevance" represents how related the tag is to the post it is tagging. You can vote on relevance below, or by hovering over tags on post pages.',placement:"bottom-end",children:"Relevance"}),"tagPageHeaderStyles",0,e=>({postListMeta:{display:"flex",alignItems:"baseline",marginBottom:8},relevance:{fontFamily:e.palette.fonts.sansSerifStack,color:e.palette.grey[600],fontWeight:500,textAlign:"right",flexGrow:1,marginRight:8}}),"tagPostTerms",0,e=>({filterSettings:{tags:[{tagId:e._id,tagName:e.name,filterMode:"Required"}]},view:"tagRelevance",tagId:e._id})])},940755,8406,886723,e=>{"use strict";e.s(["default",()=>A],940755);var t=e.i(843476),n=e.i(271645),o=e.i(35693),i=e.i(159211),r=e.i(406402),a=e.i(552275);e.s(["default",()=>d,"getTagDescriptionHtml",()=>l],8406);var s=e.i(918889);let l=e=>{if(e.description)return"htmlHighlight"in e.description?e.description.htmlHighlight:e.description.htmlHighlightStartingAtHash},d=e=>{let{tag:n,...i}=e,r=l(n);return r?(0,t.jsx)(s.default,{contentHtml:r,moreLink:(0,o.tagGetUrl)(n),contentType:"tag",...i}):null};var c=e.i(283593),u=e.i(791434),m=e.i(343794),p=e.i(79732),h=e.i(429329);e.s(["default",()=>j,"getTagDescriptionHtmlHighlight",()=>k],886723);var g=e.i(538794),f=e.i(964344),v=e.i(457918),x=e.i(935132),y=e.i(937636),b=e.i(690118),C=e.i(87828);let w={Rationality:"The <strong>Rationality</strong> tag is for posts about how to think in ways that more reliably result in you having true beliefs and making decisions that result in attainment of your goals.",AI:"The <strong>AI</strong> tag is for anything related to AI and ML, including technical alignment, strategy/governance, and timelines forecasting.","World Modeling":"<p>The <strong>World Modeling</strong> tag is for posts that simply describe how the world is, e.g. physics, math, history, etc.</p><p>Often this tag is superceded by a more specific one like <em>Rationality</em>, <em>AI</em>, or <em>World Optimization</em>.</p>","World Optimization":"The <strong>World Optimization</strong> tag is for posts about how to make the world better at scale, e.g. altruistic cause areas, society-wide interventions, moral philosophy, etc.",Practical:"The <strong>Practical</strong> tag is for posts about things you can use to make your life locally better, e.g. health, productivity, relationships, DIY, etc.","Site Meta":"<strong>Site Meta</strong> is for posts about the site itself, including bugs, feature requests, and site policy.",Community:"The <strong>Community</strong> tag is for LessWrong/Rationality community events, analysis of community health, norms and directions of the community, and posts about understanding communities in general."},k=e=>e.description?"htmlHighlight"in e.description?e.description.htmlHighlight:e.description.htmlHighlightStartingAtHash:void 0,j=(0,g.registerComponent)("TagPreviewDescription",e=>{var n,i;let r,a,{tag:s,hash:l,classes:c,activeTab:m}=e,p=(0,y.useNavigate)();if(!s)return null;if((0,u.isFriendlyUI)())return(0,t.jsx)(d,{tag:s,lines:4,hideMultimedia:!0,hideMoreLink:!0});(0,x.isLW)()&&s.core&&!l&&(r=w[s.name]),r||(r=(0,f.truncate)(k(s),!s.description||"htmlHighlight"in s.description?1:(0,x.isLWorAF)()?8:2,"paragraphs",'.. <a class="read-more-button" href="#">(read more)</a>'));let h=(0,o.tagGetUrl)(s,void 0,void 0,l),g=(0,v.getHashLinkOnClick)({to:h,id:"read-more-button"});return(a=void 0!==m&&s.summaries?null!=(n=null==(i=s.summaries[m].contents)?void 0:i.html)?n:"":r)?(0,t.jsx)("div",{onClick:e=>{var t;(null==(t=e.target)?void 0:t.className)==="read-more-button"&&(e.preventDefault(),p(h),g(e))},children:(0,t.jsx)(C.default,{contentType:"comment",children:(0,t.jsx)(b.ContentItemBody,{className:c.root,dangerouslySetInnerHTML:{__html:a},description:"tag ".concat(s.name)})})}):(0,t.jsx)("div",{className:c.root,children:(0,t.jsx)("b",{children:s.name})})},{styles:e=>({root:{"& a.read-more-button":{fontSize:".85em",color:e.palette.grey[600]}}})});var S=e.i(797341),I=e.i(775964),T=e.i(239832),N=e.i(946271);e.i(813868);let L=(0,e.i(122756).gql)("\n  query multiPostTagPreviewQuery($selector: PostSelector, $limit: Int, $enableTotal: Boolean) {\n    posts(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...PostsList\n      }\n      totalCount\n    }\n  }\n"),R=(0,h.defineStyles)("TagPreview",e=>({root:{...e.isFriendlyUI?{paddingTop:8,paddingLeft:16,paddingRight:16}:{width:500,paddingBottom:8},[e.breakpoints.down("xs")]:{width:"100%"}},rootEAWidth:{width:c.FRIENDLY_HOVER_OVER_WIDTH},mainContent:{...!e.isFriendlyUI&&{paddingLeft:16,paddingRight:16,maxHeight:600,overflowY:"auto"}},title:{...e.typography.commentStyle,fontSize:"1.2rem",color:e.palette.grey[900],fontWeight:600,paddingLeft:16,paddingRight:16,paddingTop:12},relatedTagWrapper:{...e.typography.body2,...e.typography.postStyle,fontFamily:e.isFriendlyUI?e.palette.fonts.sansSerifStack:void 0,fontSize:"1.1rem",color:e.palette.grey[900],display:"-webkit-box","-webkit-line-clamp":2,"-webkit-box-orient":"vertical",overflow:"hidden"},relatedTagLink:{color:e.palette.lwTertiary.dark},footer:{borderTop:e.palette.border.extraFaint,paddingTop:6,display:"flex",...e.typography.commentStyle,color:e.palette.lwTertiary.main,marginTop:6,marginBottom:2},autoApplied:{flexGrow:1},postsWithoutDescription:{paddingTop:8,marginBottom:8,overflow:"hidden"},postsWithDescription:{marginTop:10,paddingTop:8,borderTop:e.palette.border.extraFaint,marginBottom:8,overflow:"hidden"},relatedTags:{marginTop:12,paddingTop:8,borderTop:e.palette.border.extraFaint},footerCount:{fontFamily:e.palette.fonts.sansSerifStack,color:e.palette.primary.main,fontSize:14,fontWeight:600,marginBottom:16,marginTop:8},footerMarginTop:{marginTop:16},tabsContainer:{display:"flex",flexDirection:"row",borderBottom:"1px solid ".concat(e.palette.greyAlpha(.1)),backgroundColor:e.palette.panelBackground.postsItemHover},summaryTab:{padding:"8px 14px",fontSize:"1.2em",color:e.palette.greyAlpha(1),cursor:"pointer !important",'&[data-selected="true"]':{backgroundColor:e.palette.panelBackground.default,borderBottom:"1px solid ".concat(e.palette.panelBackground.default),marginBottom:-1,borderLeft:"1px solid ".concat(e.palette.greyAlpha(.1)),borderRight:"1px solid ".concat(e.palette.greyAlpha(.1))},'&:first-of-type[data-selected="true"]':{borderLeft:"none"}},description:{...!e.isFriendlyUI&&{marginTop:16}}})),_=e=>{let{tag:n}=e,o=(0,p.useStyles)(R);return(e=>{var t,n,o,i;if((0,u.isFriendlyUI)())return!1;let r=null!=(t=null==(i=e.summaries)||null==(o=i[0])||null==(n=o.contents)?void 0:n.html)?t:k(e);return!r||!function(e,t){let n=t.toLowerCase().replace(/[^\w\s]/g,"");for(let t of Array.from(new DOMParser().parseFromString(e,"text/html").querySelectorAll("b, strong"))){var o;let e=null==(o=t.textContent)?void 0:o.toLowerCase().replace(/[^\w\s]/g,"");if(null==e?void 0:e.includes(n))return!0}return!1}(r,e.name)})(n)?(0,t.jsx)("div",{className:(0,m.default)(o.title),children:n.name}):null},A=e=>{var s,d,c,h;let{tag:g,hash:f,showCount:v=!0,hideRelatedTags:x,hideDescription:y=!1,postCount:b=6,autoApplied:C=!1,setForceOpen:w}=e,k=(0,p.useStyles)(R),[A,M]=(0,n.useState)(0),P=b>0&&!!(null==g?void 0:g._id)&&!(0,u.isFriendlyUI)(),{view:E,limit:F,...B}=(0,r.tagPostTerms)(g),{data:D}=(0,N.useQuery)(L,{variables:{selector:{[E]:B},limit:b,enableTotal:!1},skip:!P,notifyOnNetworkStatusChange:!0}),U=null==D||null==(d=D.posts)?void 0:d.results;if(!g)return(0,t.jsx)("div",{className:k.root});let H=null!=(s=null==(c=g.summaries)?void 0:c.map((e,n)=>(0,t.jsx)("div",{className:k.summaryTab,"data-selected":A===n,onClick:()=>{M(n),null==w||w(!0)},children:(0,S.default)(e.tabTitle)},e.tabTitle)))?s:[],W=!(0,u.isFriendlyUI)()&&!x&&!!(g.parentTag||g.subTags.length),O=v||C,V="Sub-"+(g.subTags.length>1?a.taggingNamePluralCapitalSetting.get():a.taggingNameCapitalSetting.get()),z=!!l(g)&&!y,$=H.length>1;return(0,t.jsxs)("div",{className:(0,m.default)(k.root,{[k.rootEAWidth]:(0,u.isFriendlyUI)()&&z}),children:[$&&(0,t.jsx)("div",{className:k.tabsContainer,children:H}),(0,t.jsx)(_,{tag:g}),(0,t.jsxs)("div",{className:k.mainContent,children:[z&&(0,t.jsx)("div",{className:k.description,children:(0,t.jsx)(j,{tag:g,hash:f,...(null==(h=g.summaries)?void 0:h.length)?{activeTab:A}:{}})}),W&&(0,t.jsxs)("div",{className:k.relatedTags,children:[g.parentTag&&(0,t.jsxs)("div",{className:k.relatedTagWrapper,children:["Parent topic:"," ",(0,t.jsx)(i.Link,{className:k.relatedTagLink,to:(0,o.tagGetUrl)(g.parentTag),children:g.parentTag.name})]}),g.subTags.length?(0,t.jsx)("div",{className:k.relatedTagWrapper,children:(0,t.jsxs)("span",{children:[V,":",g.subTags.map((e,r)=>(0,t.jsxs)(n.Fragment,{children:[(0,t.jsx)(i.Link,{className:k.relatedTagLink,to:(0,o.tagGetUrl)(e),children:e.name}),r<g.subTags.length-1?", ":null]},r))]})}):null]}),P&&!g.wikiOnly&&(0,t.jsxs)(t.Fragment,{children:[U?(0,t.jsx)("div",{className:z?k.postsWithDescription:k.postsWithoutDescription,children:U.map(e=>e&&(0,t.jsx)(I.default,{post:e,widerSpacing:b>3},e._id))}):(0,t.jsx)(T.default,{}),O&&(0,t.jsxs)("div",{className:k.footer,children:[C&&(0,t.jsx)("span",{className:k.autoApplied,children:"Tag was auto-applied"}),v&&(0,t.jsx)("span",{children:(0,t.jsxs)(i.Link,{to:(0,o.tagGetUrl)(g),children:["View all ",g.postCount," posts"]})})]})]}),(0,u.isFriendlyUI)()&&(0,t.jsx)("div",{className:(0,m.default)(k.footerCount,{[k.footerMarginTop]:z}),children:(0,t.jsxs)(i.Link,{to:(0,o.tagGetUrl)(g),children:["View all ",g.postCount," posts"]})})]})]})}},956277,e=>{"use strict";e.s(["default",()=>F],956277);var t=e.i(843476),n=e.i(271645),o=e.i(52674),i=e.i(159211),r=e.i(343794),a=e.i(79732),s=e.i(429329),l=e.i(972445),d=e.i(35693),c=e.i(317710),u=e.i(251314),m=e.i(505930),p=e.i(239832),h=e.i(716512),g=e.i(87828),f=e.i(517794),v=e.i(552275),x=e.i(791434),y=e.i(693062),b=e.i(538794),C=e.i(224931),w=e.i(940755),k=e.i(710970),j=e.i(725788),S=e.i(161517),I=e.i(530841),T=e.i(293958);let N=(0,b.registerComponent)("TagRelevanceButton",e=>{let{document:n,voteType:o,vote:i,label:a,classes:s,cancelVote:l}=e,d=(0,I.useCurrentUser)(),{openDialog:c}=(0,j.useDialog)(),{captureEvent:u}=(0,S.useTracking)(),m=n.currentUserVote===o;return(0,t.jsx)("a",{className:(0,r.default)(s.root,{[s.voted]:l?!m:m}),onClick:()=>{d?(i({document:n,voteType:null,collectionName:"TagRels",currentUser:d}),u("vote",{collectionName:"TagRels"})):c({name:"LoginPopup",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(T.default,{onClose:n})}})},children:a})},{styles:e=>({root:{...e.typography.body2,...e.typography.commentStyle,...e.typography.smallText,marginRight:16,color:e.palette.grey[600]},voted:{color:e.palette.grey[900],borderRadius:2,backgroundColor:e.palette.panelBackground.darken10,padding:6,marginTop:-6}})});var L=e.i(110601);let R=(0,b.registerComponent)("TagRelCard",e=>{let{tagRel:n,classes:o}=e,i=(0,C.useVote)(n,"TagRels"),r="smallUpvote"===n.currentUserVote&&1===i.voteCount,{fail:a,reason:s}=(0,y.useVoteButtonsDisabled)(),l=n.currentUserCanVote&&!a,d=l?e=>{let{children:n}=e;return(0,t.jsx)(t.Fragment,{children:n})}:e=>{let{children:n}=e;return(0,t.jsx)(L.default,{placement:"top",title:s,children:n})};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:o.relevance,children:[(0,t.jsx)(L.default,{title:"How relevant is this tag to this post?",placement:"top",children:(0,t.jsx)("span",{className:o.relevanceLabel,children:"Relevance"})}),(0,t.jsx)(d,{children:(0,t.jsx)("div",{className:o.voteButton,children:(0,t.jsx)(k.default,{orientation:"left",color:"error",upOrDown:"Downvote",enabled:l,...i})})}),(0,t.jsx)("span",{className:o.score,children:i.baseScore}),(0,t.jsx)(d,{children:(0,t.jsx)("div",{className:o.voteButton,children:(0,t.jsx)(k.default,{orientation:"right",color:"secondary",upOrDown:"Upvote",enabled:l,...i})})}),r&&(0,t.jsx)("span",{className:o.removeButton,children:(0,t.jsx)(L.default,{title:"Remove your relevance vote from this ".concat(v.taggingNameSetting.get()),placement:"top",children:(0,t.jsx)(N,{label:(0,x.preferredHeadingCase)("Remove ".concat(v.taggingNameCapitalSetting.get())),...i,voteType:"smallUpvote",cancelVote:!0})})}),i.baseScore<=0&&(0,t.jsx)("span",{className:o.removed,children:"Removed (refresh page)"})]}),n.tag&&(0,t.jsx)(w.default,{tag:n.tag,autoApplied:n.autoApplied})]})},{styles:e=>({relevance:{marginTop:e.isFriendlyUI?void 0:2,marginLeft:16,...e.typography.commentStyle},relevanceLabel:{marginRight:8,color:e.palette.grey[600]},voteButton:{display:"inline-block",fontSize:25,transform:e.isFriendlyUI?"translateY(2px)":void 0},score:{marginLeft:4,marginRight:4,color:e.palette.grey[1e3]},removeButton:{...e.isFriendlyUI?{float:"right",marginTop:10,marginLeft:10}:{position:"absolute",top:7,right:0}},removed:{...e.isFriendlyUI?{float:"right",marginTop:12,marginRight:16}:{position:"absolute",top:7,right:16},color:e.palette.grey[400]}})});var _=e.i(105736);let A=(0,s.defineStyles)("TagsTooltip",e=>({tooltip:e.isFriendlyUI?{}:{padding:0,background:e.palette.panelBackground.default,boxShadow:e.palette.boxShadow.lwTagHoverOver},tooltipTitle:e.isFriendlyUI?{}:{maxWidth:"unset"},loading:{paddingLeft:16,paddingRight:32,paddingBottom:24},noTagOrPlaceholderMessage:{paddingTop:0,paddingLeft:16,paddingRight:16,paddingBottom:8,"& .ContentStyles-base.ContentStyles-tagBody":{marginBottom:"0 !important"}},redLinkTooltip:{paddingTop:8,paddingLeft:16,paddingRight:16,width:500,paddingBottom:6,[e.breakpoints.down("xs")]:{width:"100%"},"& .ContentStyles-base.ContentStyles-tagBody":{marginBottom:"0 !important"}},redLinkTooltipTitle:{marginTop:8,fontSize:"13px",marginBottom:4,color:e.palette.text.secondary}})),M=e=>{let{children:n}=e;return(0,t.jsx)(t.Fragment,{children:n})},P=e=>{var n;let o,{tag:r}=e,{selectedLens:a}=null!=(n=(0,c.useTagPageContext)())?n:{};a&&(o=[a._id===u.MAIN_TAB_ID?a.parentDocumentId:a._id]);let{results:s,loading:h,totalCount:g}=(0,l.useRedLinkPingbacks)(null==r?void 0:r._id,o);return h?(0,t.jsx)(p.default,{}):s&&0===s.length?(0,t.jsx)("div",{children:"The linked page does not exist; it is a red link."}):(0,t.jsxs)("div",{children:["This red link was used on ",g," other ",1===g?"page":"pages",":",(0,t.jsx)("ul",{children:s.slice(0,5).map(e=>(0,t.jsx)("li",{children:(0,t.jsx)(m.TagHoverPreview,{targetLocation:{params:{slug:e.slug},hash:"",query:{}},href:(0,d.tagGetUrl)({slug:e.slug}),noPrefetch:!0,children:(0,t.jsx)(i.Link,{to:(0,d.tagGetUrl)({slug:e.slug}),children:e.name})})},e._id))}),s.length>5&&(0,t.jsxs)("div",{children:["And ",s.length-5," more..."]})]})},E=e=>{let{tag:n,slug:o}=e,i=(0,a.useStyles)(A),r=(0,l.inferRedLinkTitle)(n,null!=o?o:null);return n?(0,t.jsxs)("div",{className:i.redLinkTooltip,children:[(0,t.jsx)(h.Typography,{variant:"title",children:r}),(0,t.jsxs)(g.default,{contentType:"tag",children:[(0,t.jsx)(P,{tag:n}),(0,t.jsx)("div",{className:i.redLinkTooltipTitle,children:"A red link is a placeholder for a wikitag page that an author thinks should exist."})]})]}):(0,t.jsx)("div",{className:i.noTagOrPlaceholderMessage,children:(0,t.jsx)(g.default,{contentType:"tag",children:"No page or placeholder found for this link."})})},F=e=>{let{tagRel:i,hash:s,previewPostCount:l=6,hideDescription:d=!1,hideRelatedTags:c,noPrefetch:u,PreviewWrapper:m=M,As:h,inlineBlock:g=!1,placement:v,className:x,popperClassName:y,isRedLink:b,children:C,...k}=e,j=(0,a.useStyles)(A),[S,I]=(0,n.useState)(!1),[T,N]=(0,n.useState)(!1),{tag:L,loading:P}=((e,t,n)=>{let{tag:i,tagSlug:r}=e,{tag:a,loading:s}=(0,o.useTagPreview)(null!=r?r:"",t,n||!!i);return i?{tag:i,loading:!1}:{tag:a,loading:s}})(k,s,u&&!S);return(0,t.jsx)(f.default,{title:(0,t.jsx)(_.default,{onClickAway:()=>N(!1),children:(0,t.jsxs)(m,{tag:L,loading:P,children:[P&&(0,t.jsx)(p.default,{className:j.loading}),!P&&i&&(0,t.jsx)(R,{tagRel:i}),!P&&!i&&L&&!b&&(0,t.jsx)(w.default,{tag:L,hash:s,postCount:l,hideRelatedTags:c,hideDescription:d,setForceOpen:N}),b&&(0,t.jsx)(E,{tag:L,slug:k.tagSlug})]})}),clickable:!0,As:h,inlineBlock:g,analyticsProps:{pageElementContext:"tagItem",tagId:null==L?void 0:L._id,tagName:null==L?void 0:L.name,tagSlug:null==L?void 0:L.slug},onShow:(0,n.useCallback)(()=>I(!0),[]),className:x,popperClassName:(0,r.default)(j.tooltip,y),titleClassName:j.tooltipTitle,placement:v,forceOpen:T,children:C})}},505930,e=>{"use strict";e.s(["TagHoverPreview",()=>m]);var t=e.i(843476),n=e.i(159211),o=e.i(52674),i=e.i(594158),r=e.i(937636),a=e.i(343794),s=e.i(773736),l=e.i(79732),d=e.i(429329),c=e.i(956277);let u=(0,d.defineStyles)("TagHoverPreview",e=>({count:{color:e.palette.secondary.main,fontSize:".9em",position:"relative",marginLeft:3,marginRight:0}})),m=e=>{var d;let{href:m,targetLocation:p,postCount:h=6,noPrefetch:g,children:f}=e,v=(0,l.useStyles)(u),x=(0,l.useStyles)(i.linkStyles),{params:{slug:y},hash:b}=p,C=b.slice(1),{tag:w,loading:k}=(0,o.useTagPreview)(y,C,g),{showPostCount:j,useTagName:S}=p.query,I=null!=(d=p.query.lens)?d:p.query.l,T="true"===j,N="true"===S?null==w?void 0:w.name:void 0,L=null!=I?I:y,R=(0,r.removeUrlParameters)(m,["showPostCount","useTagName"]),_=null==w?void 0:w.isRead,A=(0,s.hasWikiLenses)()&&(!w&&!g&&!k||(null==w?void 0:w.isPlaceholderPage));return(0,t.jsxs)(c.default,{tagSlug:L,hash:C,As:"span",previewPostCount:h,noPrefetch:g,isRedLink:A,children:[(0,t.jsx)(n.Link,{className:(0,a.default)(!T&&x.link,_&&"visited",A&&x.redLink),to:R,children:null!=N?N:f}),!!(T&&(null==w?void 0:w.postCount))&&(0,t.jsxs)("span",{className:v.count,children:["(",null==w?void 0:w.postCount,")"]})]})}},767599,565718,e=>{"use strict";e.s(["default",()=>f],767599);var t=e.i(843476),n=e.i(538794),o=e.i(100916),i=e.i(937636),r=e.i(161517),a=e.i(96009),s=e.i(77255),l=e.i(651605),d=e.i(733385),c=e.i(336787),u=e.i(78136);e.s(["parseRouteWithErrors",()=>g,"routePreviewComponentMapping",()=>h],565718);var m=e.i(166266),p=e.i(505930);let h={"/sequences/:_id":d.SequencePreview,"/s/:_id":d.SequencePreview,"/s/:sequenceId/p/:postId":d.PostLinkPreviewSequencePost,"/highlights/:slug":d.PostLinkPreviewSlug,"/w/:slug":p.TagHoverPreview,"/w/:slug/discussion":p.TagHoverPreview,"/hpmor/:slug":d.PostLinkPreviewSlug,"/codex/:slug":d.PostLinkPreviewSlug,"/rationality/:slug":d.PostLinkPreviewSlug,"/events/:_id/:slug?":d.PostLinkPreview,"/g/:groupId/p/:_id":d.PostLinkPreview,"/posts/:_id/:slug?":d.PostLinkPreview,"/posts/slug/:slug?":d.PostLinkPreviewSlug,"/posts/:_id/:slug/comment/:commentId?":d.PostCommentLinkPreviewGreaterWrong,["/".concat("lw","/:id/:slug?")]:d.PostLinkPreviewLegacy,["/".concat("lw","/:id/:slug/:commentId")]:d.CommentLinkPreviewLegacy,"/inbox/:conversationId":d.MessagePreview,"/inbox":d.MessagePreview},g=(e,t)=>(0,m.parseRoute)({location:(0,m.parsePath)(e),onError:e=>{},routePatterns:[...Object.keys(h).reverse(),...null!=t?t:[]]}),f=(0,n.registerComponent)("HoverPreviewLink",e=>{let{href:n,id:a,rel:m,noPrefetch:p,contentStyleType:f,className:v,children:x}=e,y=(0,l.getUrlClass)(),b=(0,i.useLocation)();if(!(n=n?n.trim():n))return(0,t.jsx)("a",{href:n,id:a,rel:m,className:v,children:x});if(n.startsWith("#")){if((0,s.locationHashIsFootnote)(n))return(0,t.jsx)(c.default,{href:n,id:a,rel:m,contentStyleType:f,children:x});else if((0,s.locationHashIsFootnoteBackreference)(n))return(0,t.jsx)("a",{href:n,id:a,rel:m,className:v,children:x})}try{let e=new y(b.url,(0,o.getSiteUrl)()),s=new y(n,e),l=s.pathname+s.search+s.hash,c=(0,i.classifyLink)(n);if(!l||"#"===l||""===l||l.endsWith(".png")||l.endsWith(".jpg")||l.endsWith(".jpeg")||l.endsWith(".gif")||"onsite"!==c&&"mirrorOfUs"!==c){if("metaculus.com"===s.host||"www.metaculus.com"===s.host)return(0,t.jsx)(d.MetaculusPreview,{href:n,id:a,className:v,children:x});if("manifold.markets"===s.host||"www.manifold.markets"===s.host)return(0,t.jsx)(d.ManifoldPreview,{href:n,id:a,className:v,children:x});if("fatebook.io"===s.host||"www.fatebook.io"===s.host)return(0,t.jsx)(d.FatebookPreview,{href:n,id:a,className:v,children:x});if("neuronpedia.org"===s.host||"www.neuronpedia.org"===s.host)return(0,t.jsx)(d.NeuronpediaPreview,{href:n,id:a,className:v,children:x});if("metaforecast.org"===s.host||"www.metaforecast.org"===s.host)return(0,t.jsx)(d.MetaforecastPreview,{href:n,id:a,className:v,children:x});if("ourworldindata.org"===s.host)return(0,t.jsx)(d.OWIDPreview,{href:n,id:a,className:v,children:x});if("arbital.com"===s.host||"www.arbital.com"===s.host)return(0,t.jsx)(d.ArbitalPreview,{href:n,id:a,className:v,children:x});if("estimaker.app"===s.host||"www.estimaker.app"===s.host)return(0,t.jsx)(d.EstimakerPreview,{href:n,id:a,className:v,children:x});if("viewpoints.xyz"===s.host||"www.viewpoints.xyz"===s.host)return(0,t.jsx)(d.ViewpointsPreview,{href:n,id:a,className:v,children:x});return(0,t.jsx)(d.DefaultPreview,{href:n,id:a,rel:m,className:v,children:x})}{let e=g(l),o="onsite"===c?e.url:n;if(e.routePattern){let i=h[e.routePattern],s=null==i?void 0:i.name;if(i)return(0,t.jsx)(r.AnalyticsContext,{pageElementContext:"linkPreview",href:o,hoverPreviewType:s,onsite:!0,children:(0,t.jsx)(u.NoSideItems,{children:(0,t.jsx)(i,{href:o,originalHref:n,targetLocation:e,id:null!=a?a:"",noPrefetch:p,className:v,children:x})})});return(0,t.jsx)(d.DefaultPreview,{href:n,id:a,rel:m,className:v,children:x})}}return(0,t.jsx)("a",{href:n,id:a,rel:m,className:v,children:x})}catch(e){return console.error(e,n),(0,t.jsx)("a",{href:n,id:a,rel:m,className:v,children:x})}},{hocs:[a.default]})},327319,778669,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(79732),i=e.i(429329);let r={unset:{settings:{type:"unset"},label:"(Choose a block type)"},todo:{settings:{type:"todo"},label:"Todo"},fixme:{settings:{type:"fixme"},label:"Fixme"},comment:{settings:{type:"comment"},label:"Comment"},knowsRequisite:{settings:{type:"knowsRequisite",inverted:!1,otherPage:""},label:"Knows Requisite"},wantsRequisite:{settings:{type:"wantsRequisite",inverted:!1,otherPage:""},label:"Wants Requisite"},ifPathBeforeOrAfter:{settings:{type:"ifPathBeforeOrAfter",inverted:!1,order:"after",otherPage:""},label:"If Before/After in Path"}};e.s(["conditionalVisibilityModes",0,r],778669);let a=(0,i.defineStyles)("ShowBlockVisibilityCondition",e=>({root:{border:e.palette.border.normal,borderRadius:4,padding:8,margin:8},condition:{marginBottom:8},conditionType:{fontWeight:"bold"},contents:{}})),s=e=>{let{options:n,children:i}=e,s=(0,o.useStyles)(a),l=r[null==n?void 0:n.type];return l?(0,t.jsxs)("div",{className:s.root,children:[(0,t.jsxs)("div",{className:s.condition,children:["inverted"in n&&n.inverted?"!":"","ifPathBeforeOrAfter"===n.type&&("before"===n.order?"If before ":"If after"),(0,t.jsx)("span",{className:s.conditionType,children:"ifPathBeforeOrAfter"!==n.type&&l.label}),"otherPage"in n?n.otherPage:""]}),(0,t.jsx)("div",{className:s.contents,children:i})]}):null},l=(0,i.defineStyles)("ConditionalVisibilityBlockDisplay",e=>({revealHiddenBlocks:{"& .conditionallyVisibleBlock.defaultHidden":{display:"block"}}})),d=(0,n.createContext)(!1);e.s(["RevealHiddenBlocks",0,e=>{let{children:n}=e,i=(0,o.useStyles)(l);return(0,t.jsx)(d.Provider,{value:!0,children:(0,t.jsx)("div",{className:i.revealHiddenBlocks,children:n})})},"default",0,e=>{let{options:o,children:i}=e,r=(0,n.useContext)(d),a=(e=>{let t=(e,t)=>!(e&&t)&&(e||t);switch(e.type){case"knowsRequisite":case"wantsRequisite":return t((e.otherPage,!1),e.inverted);case"ifPathBeforeOrAfter":return t((e.otherPage,e.order,!1),e.inverted);default:return!1}})(o);return r?(0,t.jsx)(s,{options:o,children:i}):a?o.inline?(0,t.jsx)("span",{children:i}):(0,t.jsx)("div",{children:i}):null}],327319)},873282,(e,t,n)=>{var o=e.r(653336);t.exports=function(e){return"function"==typeof e?e:o}},483165,(e,t,n)=>{var o=e.r(855803),i=e.r(873282),r=e.r(304653),a=Math.min;t.exports=function(e,t){if((e=r(e))<1||e>0x1fffffffffffff)return[];var n=0xffffffff,s=a(e,0xffffffff);t=i(t),e-=0xffffffff;for(var l=o(s,t);++n<e;)t(n);return l}},278180,e=>{"use strict";e.s(["default",()=>j]);var t=e.i(843476),n=e.i(271645),o=e.i(483165),i=e.i(576955),r=e.i(419530),a=e.i(514089),s=e.i(946271),l=e.i(530841),d=e.i(343794),c=e.i(2942),u=e.i(552275),m=e.i(725788),p=e.i(831195),h=e.i(788099),g=e.i(96009),f=e.i(538794),v=e.i(293958),x=e.i(695310),y=e.i(87828);e.i(813868);var b=e.i(122756),C=e.i(345955);let w=(0,b.gql)("\n  query ElicitBlockData($questionId: String) {\n    ElicitBlockData(questionId: $questionId) {\n      _id\n      title\n      notes\n      resolvesBy\n      resolution\n      predictions {\n        _id,\n        predictionId,\n        prediction,\n        createdAt,\n        notes,\n        sourceUrl,\n        sourceId,\n        binaryQuestionId\n        creator {\n          _id,\n          displayName,\n          sourceUserId\n          lwUser {\n            ...UsersMinimumInfo\n          }\n        }\n      }\n    }\n  }\n"),k=(0,b.gql)("\n  mutation ElicitPrediction($questionId:String, $prediction: Int) {\n    MakeElicitPrediction(questionId:$questionId, prediction: $prediction) {\n      _id\n      title\n      notes\n      resolvesBy\n      resolution\n      predictions {\n        _id,\n        predictionId,\n        prediction,\n        createdAt,\n        notes,\n        sourceUrl,\n        sourceId,\n        binaryQuestionId\n        creator {\n          _id,\n          displayName,\n          sourceUserId\n          lwUser {\n            ...UsersMinimumInfo\n          }\n        }\n      }\n    }\n  }\n"),j=(0,f.registerComponent)("ElicitBlock",e=>{var g,f;let{classes:b,questionId:j="IyWNjzc5P"}=e,S=(0,l.useCurrentUser)(),[I,T]=(0,n.useState)(!1),{openDialog:N}=(0,m.useDialog)(),{data:L,loading:R}=(0,s.useQuery)(w,{ssr:!0,variables:{questionId:j}}),[_]=(0,a.useMutation)(k),A=(null==L||null==(g=L.ElicitBlockData)?void 0:g.predictions)||[],M=(0,C.filterWhereFieldsNotNull)(A,"prediction"),P=(0,p.default)(M,e=>{let{prediction:t}=e;return t}),E=(0,i.default)(P,e=>{let{prediction:t}=e;return 10*Math.floor(t/10)}),F=(0,i.default)(P,e=>{let{prediction:t}=e;return Math.floor(t)}),B=S&&(0,h.default)(P,e=>{var t,n;return(null==e||null==(n=e.creator)||null==(t=n.lwUser)?void 0:t._id)===S._id}),[D,U]=(0,n.useState)(!1),H=(null==S?void 0:S.hideElicitPredictions)&&!B&&!D,W=((0,r.default)(Object.values(E),e=>e.length)||[]).length;return(0,t.jsxs)(y.default,{contentType:"comment",className:b.root,children:[(0,t.jsx)("div",{className:b.histogramRoot,children:(0,o.default)(10,e=>{var n,i;return(0,t.jsxs)("div",{className:(0,d.default)(b.histogramBucket,{[b.histogramBucketCurrentUser]:null==(n=E["".concat(10*e)])?void 0:n.some(e=>{let{creator:t}=e;return S&&(null==t?void 0:t.sourceUserId)===S._id})}),onMouseEnter:()=>{var t;return(null==(t=E["".concat(10*e)])?void 0:t.length)&&T(!0)},onMouseLeave:()=>T(!1),children:[(0,o.default)(10,n=>{var o,i,r,a;let s=10*e+n,l=null==(o=F["".concat(s)])?void 0:o.some(e=>{let{creator:t}=e;return S&&(null==t?void 0:t.sourceUserId)===S._id});return 0===s?null:(0,t.jsxs)("div",{className:(0,d.default)(b.histogramSlice,{[b.histogramSliceCurrentUser]:l}),"data-num-largebucket":(null==(i=E["".concat(10*e)])?void 0:i.length)||0,"data-num-smallbucket":(null==(r=F["".concat(s)])?void 0:r.length)||0,onClick:()=>{var e,n,o,i,r,a;if(S&&(null==L||null==(e=L.ElicitBlockData)?void 0:e._id)){let e=((null==L||null==(n=L.ElicitBlockData)?void 0:n.predictions)||[]).filter(e=>{var t;return(null==e||null==(t=e.creator)?void 0:t.sourceUserId)!==S._id}),t=l?e:[(i=null==L||null==(o=L.ElicitBlockData)?void 0:o._id,r=s,a=S,{__typename:"ElicitPrediction",_id:(0,c.randomId)(),predictionId:(0,c.randomId)(),prediction:r,createdAt:new Date().toISOString(),notes:"",sourceUrl:u.elicitSourceURL.get(),sourceId:u.elicitSourceId.get(),binaryQuestionId:i,creator:{__typename:"ElicitUser",_id:(0,c.randomId)(),displayName:a.displayName,sourceUserId:a._id,lwUser:a}}),...e];U(!0),_({variables:{questionId:j,prediction:l?null:s},optimisticResponse:{__typename:"Mutation",MakeElicitPrediction:{...null==L?void 0:L.ElicitBlockData,__typename:"ElicitBlockData",predictions:t}}})}else N({name:"LoginPopup",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(v.default,{onClose:n})}})},children:[(0,t.jsx)("div",{className:b.additionalVoteArea,style:{height:"".concat(1/(W+1)*100||0,"%")},children:(0,t.jsxs)("div",{className:(0,d.default)(b.sliceNumber,{[b.invertedSliceNumber]:s>94}),children:[s,"%"]})}),!H&&(0,t.jsx)("div",{className:b.sliceColoredArea,style:{height:"".concat((null==(a=E["".concat(10*e)])?void 0:a.length)/(W+1)*100||0,"%")}})]},s)}),!H&&E["".concat(10*e)]&&(0,t.jsx)("div",{className:b.usersInBucket,children:null==(i=E["".concat(10*e)])?void 0:i.map((n,o)=>{let{creator:i,prediction:r}=n;return(0,t.jsxs)("span",{className:b.name,children:[(null==i?void 0:i.lwUser)?(0,t.jsx)(x.default,{user:null==i?void 0:i.lwUser,tooltipPlacement:"bottom"}):null==i?void 0:i.displayName," (",r,"%)",o!==E["".concat(10*e)].length-1&&","]},null==i?void 0:i._id)})})]},e)})}),(0,t.jsxs)("div",{className:(0,d.default)(b.titleSection,{[b.hiddenTitleSection]:I}),children:[(0,t.jsx)("div",{className:b.startPercentage,children:"1%"}),(0,t.jsxs)("div",{className:b.title,children:[(null==L||null==(f=L.ElicitBlockData)?void 0:f.title)||(R?null:"Can't find Question Title on Elicit"),!R&&H&&(0,t.jsxs)("a",{onClick:()=>U(!0),children:[" ","(Reveal)"]})]}),(0,t.jsx)("div",{className:b.endPercentage,children:"99%"})]})]})},{styles:e=>({root:{position:"relative",paddingTop:12,marginBottom:0},histogramRoot:{height:50,display:"flex"},histogramBucket:{display:"flex",flexGrow:1,justifyContent:"flex-end","&:hover $sliceColoredArea":{backgroundColor:e.palette.panelBackground.darken15},"&:hover $usersInBucket":{display:"block"}},histogramSlice:{flexGrow:1,marginTop:"auto",width:"10%",height:"100%",cursor:"pointer",position:"relative",display:"flex",flexDirection:"column","&:hover":{"& $additionalVoteArea":{backgroundColor:e.palette.panelBackground.darken05},"& $sliceColoredArea":{backgroundColor:e.palette.panelBackground.darken20},"& $sliceNumber":{opacity:1}}},histogramBucketCurrentUser:{"& $sliceColoredArea":{backgroundColor:e.palette.primary.main},"&:hover $sliceColoredArea":{backgroundColor:e.palette.primary.main},"&:hover $histogramSliceCurrentUser $sliceColoredArea":{backgroundColor:e.palette.primary.dark},"& $sliceColoredArea:hover":{backgroundColor:e.palette.primary.dark},"&:hover $additionalVoteArea":{backgroundColor:"transparent",height:"0% !important"}},histogramSliceCurrentUser:{"& $sliceColoredArea":{backgroundColor:e.palette.primary.dark},"&:hover":{"& $additionalVoteArea":{backgroundColor:"transparent"},"& $sliceColoredArea":{backgroundColor:e.palette.primary.dark}}},sliceNumber:{opacity:0,whiteSpace:"nowrap",position:"absolute",top:-20},invertedSliceNumber:{right:0},sliceColoredArea:{backgroundColor:e.palette.panelBackground.darken10},additionalVoteArea:{marginTop:"auto",position:"relative"},titleSection:{textAlign:"center",width:"100%",color:e.palette.text.dim60,marginTop:4,paddingBottom:4,display:"flex",justifyContent:"space-between"},hiddenTitleSection:{opacity:0},startPercentage:{whiteSpace:"nowrap"},endPercentage:{whiteSpace:"nowrap"},title:{padding:"0px 10px"},usersInBucket:{position:"absolute",bottom:0,left:0,display:"none",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",color:e.palette.text.dim60,height:"calc(100% - ".concat(62,"px)"),paddingTop:4,zIndex:1},name:{marginRight:4}}),hocs:[g.default]})},271130,(e,t,n)=>{var o=Math.floor;t.exports=function(e,t){var n="";if(!e||t<1||t>0x1fffffffffffff)return n;do t%2&&(n+=e),(t=o(t/2))&&(e+=e);while(t)return n}},809179,(e,t,n)=>{var o=e.r(271130),i=e.r(170237),r=e.r(304653),a=e.r(702922);t.exports=function(e,t,n){return t=(n?i(e,t,n):void 0===t)?1:r(t),o(a(e),t)}},690118,e=>{"use strict";e.s(["ContentItemBody",()=>P],690118);var t=e.i(843476),n=e.i(271645),o=e.i(808794),i=e.i(480679),r=e.i(613074),a=e.i(378986);e.i(982538);var s=e.i(235848),l=e.i(480210),d=e.i(98058),c=e.i(767599),u=e.i(909817),m=e.i(327319),p=e.i(278180),h=e.i(773736),g=e.i(77255),f=e.i(937636),v=e.i(530841),x=e.i(79732),y=e.i(429329),b=e.i(725788),C=e.i(293958);let w=(0,y.defineStyles)("WrappedStrawPoll",e=>({loginRequired:{border:e.palette.border.faint,borderRadius:"4px",padding:"16px",position:"relative"},yellowBar:{backgroundColor:e.palette.panelBackground.strawpoll,height:"4px",position:"absolute",top:0,left:0,right:0},heading:{marginTop:"0px !important"},text:{marginBottom:0}})),k=e=>{let{children:n}=e,o=(0,v.useCurrentUser)(),{location:i}=(0,f.useLocation)(),{pathname:r}=i,a=(0,x.useStyles)(w),{openDialog:s}=(0,b.useDialog)();return o?(0,t.jsx)(t.Fragment,{children:n}):(0,t.jsxs)("div",{className:a.loginRequired,children:[(0,t.jsx)("div",{className:a.yellowBar}),(0,t.jsx)("h3",{className:a.heading,children:"This poll is hidden"}),(0,t.jsxs)("p",{className:a.text,children:["Please ",(0,t.jsx)("a",{href:"#",onClick:()=>{s({name:"LoginPopup",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(C.default,{onClose:n})}})},children:"log in"})," to vote in this poll."]})]})};var j=e.i(100916),S=e.i(161517),I=e.i(809179),T=e.i(424935),N=e.i(672898),L=e.i(558501),R=e.i(289078),_=e.i(770703);let A=(0,_.default)(()=>e.A(76725),{loadableGenerated:{modules:[724003]}}),M=(0,_.default)(()=>e.A(476925),{loadableGenerated:{modules:[100887]}}),P=e=>{let{onContentReady:d,nofollow:c,dangerouslySetInnerHTML:m,replacedSubstrings:p,className:h,ref:g,invertSubstitutionColors:f}=e,v=(0,n.useRef)(null),x=(0,R.useAbstractThemeOptions)(),y=c?(0,o.addNofollowToHTML)(m.__html):m.__html,b=(0,n.useMemo)(()=>{let e=i.parseDocument(y);return p&&p.length>0&&function(e,t,n){let o=function e(t){var n,o,i,a,s;switch(t.type){case r.ElementType.Text:let l=null!=(n=t.data)?n:"";return{textNodes:[{node:t,str:l}],separationAbove:0,separationBelow:0};case r.ElementType.Root:case r.ElementType.Tag:{let n=t.childNodes.map(t=>e(t)),l=t.type===r.ElementType.Tag?function(e){switch(e){case"p":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return 2;case"ul":case"ol":case"li":case"div":return 1;default:return 0}}(t.tagName.toLowerCase()):0,d=Math.max(l,null!=(o=null==(a=n[0])?void 0:a.separationAbove)?o:0),c=Math.max(l,null!=(i=null==(s=n[n.length-1])?void 0:s.separationBelow)?i:0),u=[];for(let e=0;e<n.length;e++){let t=n[e];if(e>0){let o=Math.max(t.separationAbove,n[e-1].separationBelow);o>0&&u.push({node:null,str:(0,I.default)("\n",o)})}u.push(...t.textNodes)}return{textNodes:u,separationAbove:d,separationBelow:c}}default:return{textNodes:[],separationAbove:0,separationBelow:0}}}(e).textNodes,i=[],l=0;for(let e of o)i.push({...e,offset:l}),l+=e.str.length;let d=i.map(e=>e.str).join(""),c=t.flatMap((e,t)=>{let n=e.replacedString.trim().replace(/\r/g,"");if("first"!==e.replace)return(function(e,t){let n=[],o=t.indexOf(e);for(;-1!==o;)n.push(o),o=t.indexOf(e,o+1);return n})(n,d).map(e=>({startOffset:e,endOffset:e+n.length,replacementIndex:t}));{let e=d.indexOf(n);return e<0?[]:[{startOffset:e,endOffset:e+n.length,replacementIndex:t}]}}),m=[],p=(0,u.default)(c.flatMap(e=>[e.startOffset,e.endOffset])).sort((e,t)=>e-t);for(let e of i){if(!e.node)continue;let t=p.filter(t=>t>e.offset&&t<e.offset+e.str.length).map(t=>t-e.offset);if(t.length>0){let n=function(e,t){let n=[],o=0;for(let l=0;l<t.length;l++){let d=function(e,t){let n=e.data;if(t>0&&t<n.length){let o=new s.Text(n.slice(0,t));a.DomUtils.prepend(e,o);let i=new s.Text(n.slice(t));return a.DomUtils.replaceElement(e,i),[o,i]}return null}(e,t[l]-o);if(d){var i,r;let[t,a]=d;n.push(t),e=a,o+=null!=(i=null==(r=t.data)?void 0:r.length)?i:0}}return[...n,e]}(e.node,t),o=0;for(let t of n){var h,g;m.push({node:t,offset:e.offset+o,substitutions:[]}),o+=null!=(h=null==(g=t.data)?void 0:g.length)?h:0}}else m.push({node:e.node,offset:e.offset,substitutions:[]})}for(let e=0;e<c.length;e++){let t=c[e],o=!0;for(let e of m)e.offset>=t.startOffset&&e.offset<t.endOffset&&(e.substitutions.push({substitutionIndex:t.replacementIndex,isSplitContinuation:!o,invertColors:n}),o=!1)}for(let e of m)if(e.substitutions.length>0){let t=new s.Element("span",{"data-replacements":JSON.stringify(e.substitutions)},[]);a.DomUtils.replaceElement(e.node,t),a.DomUtils.appendChild(t,e.node)}}(e,p,f),e},[y,p,f]);(0,n.useImperativeHandle)(g,()=>({containsNode:e=>{var t;return!!(null==(t=v.current)?void 0:t.contains(e))},getText:()=>{var e,t;return null!=(e=null==(t=v.current)?void 0:t.textContent)?e:""},getAnchorEl:()=>v.current})),(0,n.useEffect)(()=>{v.current&&(null==d||d(v.current))},[d]);let C={...(0,l.default)(e,["description","noHoverPreviewPrefetch","nofollow","contentStyleType","replacedSubstrings","idInsertions"]),themeName:x.name,bodyRef:v};return(0,t.jsx)("div",{className:h,ref:v,children:b.childNodes.map((e,n)=>(0,t.jsx)(E,{parsedHtml:e,passedThroughProps:C,root:!0},n))})},E=e=>{let{parsedHtml:i,passedThroughProps:a,root:s=!1}=e,{replacedSubstrings:l,themeName:u}=a,{captureEvent:f}=(0,S.useTracking)();switch(i.type){case r.ElementType.CDATA:case r.ElementType.Directive:case r.ElementType.Root:return null;case r.ElementType.Script:{let e=i.childNodes.map((e,t)=>e.type===r.ElementType.Text?e.data:"").join("");return(0,t.jsx)("script",{children:e})}case r.ElementType.Style:{let e=i.childNodes.map((e,t)=>e.type===r.ElementType.Text?e.data:"").join("");return(0,t.jsx)("style",{children:e})}case r.ElementType.Tag:{var v,x,y,b,C;let e=i.tagName.toLowerCase();("html"===e||"body"===e||"head"===e)&&(e="div");let r=function(e){let t={...e};if("style"in t&&(t.style=e.style.split(";").reduce((e,t)=>{let[n,o]=t.split(":");return n=null==n?void 0:n.trim(),o=null==o?void 0:o.trim(),n&&o&&(e[n.replace(/-([a-z])/g,(e,t)=>t.toUpperCase())]=o),e},{})),"onclick"in t)try{t.onClick=Function(t.onclick),delete t.onclick}catch(e){(0,T.captureException)("Error parsing onclick attribute in ContentItemBody.  Original function string: ".concat(t.onclick,".  Error: ").concat(e.message)),console.error("Error parsing onclick attribute",e)}if("onchange"in t)try{t.onChange=Function(t.onchange),delete t.onchange}catch(e){(0,T.captureException)("Error parsing onchange attribute in ContentItemBody.  Original function string: ".concat(t.onchange,".  Error: ").concat(e.message)),console.error("Error parsing onchange attribute",e)}for(let e of Object.keys(t))e in F&&(t[F[e]]=t[e],delete t[e]);return t}(i.attribs),w=r.id,S=null!=(v=null==(x=i.attribs.class)?void 0:x.split(" "))?v:[],I=i.childNodes.map((e,n)=>(0,t.jsx)(E,{parsedHtml:e,passedThroughProps:a},n));if(S.includes("footnotes")&&h.hasCollapsedFootnotes)return(0,t.jsx)(g.CollapsedFootnotes,{attributes:r,footnoteElements:I});if(r.style){let e=(b=r.style,"dark"===(C=u)||"auto"===C?Object.fromEntries(Object.entries(b).map(e=>{let[t,n]=e;if(!B[t])return[t,n];{let e=function(e){let t=e.trim().toLowerCase();if(!(0,N.getColorReplacementsCache)()[t]){let e=(0,L.parseColor)(t);if(e){let n=(0,L.invertColor)(e);(0,N.getColorReplacementsCache)()[t]=(0,L.colorToString)(n)}else(0,N.getColorReplacementsCache)()[t]="#000000"}return(0,N.getColorReplacementsCache)()[t]?(0,N.getColorReplacementsCache)()[t]:e}(n);return"auto"===C&&e!==n?[t,"light-dark(".concat(n,",").concat(e,")")]:[t,e]}})):b);r.style=e}if(r["data-replacements"]&&l){let e=JSON.parse(r["data-replacements"]);return[function(e,n,i){for(let r of n){let n=i[r.substitutionIndex],a=o.replacementComponentMap[n.componentName];e=(0,t.jsx)(a,{...n.props,isSplitContinuation:r.isSplitContinuation,invertColors:r.invertColors,children:e},"replacement")}return e}((0,t.jsx)(t.Fragment,{children:I}),e,l)]}let R=I;if(w&&(null==(y=a.idInsertions)?void 0:y[w])){let e=a.idInsertions[w];R=[(0,t.jsx)(n.default.Fragment,{children:e},"inserted"),...R]}if(S.includes("conditionallyVisibleBlock")){let e=r["data-visibility"];if(e){let n=null;try{n=JSON.parse(e),R=(0,t.jsx)(m.default,{options:n,children:R})}catch{console.error("Error parsing conditional visibility options",e)}}}if(S.includes("elicit-binary-prediction")){let e=r["data-elicit-id"];e&&(R=(0,t.jsx)(p.default,{questionId:e}))}if(S.includes("strawpoll-embed")&&(R=(0,t.jsx)(k,{children:R})),S.includes("ck-cta-button")){r["data-href"]&&(r.href=(0,j.validateUrl)(r["data-href"]));let e=r.onClick;r.onClick=t=>{f("ctaButtonClicked",{href:r["data-href"]}),null==e||e(t)}}if(S.includes("ck-poll")){let e=r["data-internal-id"];if(e)return(0,t.jsx)(M,{id:e,forumEventId:e})}if(r["data-internal-id"]&&(r.id?R=(0,t.jsx)("span",{id:r["data-internal-id"],children:R}):r.id=r["data-internal-id"]),"pre"===e&&S.includes("code-block"))return(0,t.jsx)(A,{attribs:r,classNames:S,children:R});if(s&&["p","div","table"].includes(e))return(0,t.jsx)(d.MaybeScrollableBlock,{TagName:e,attribs:r,bodyRef:a.bodyRef,children:R});if("a"===e)return(0,t.jsx)(c.default,{href:r.href,...a,...r,children:R});if(i.childNodes.length>0)return(0,t.jsx)(e,{...r,children:R});else return(0,t.jsx)(e,{...r})}case r.ElementType.Text:return i.data;case r.ElementType.Comment:return null}},F={srcset:"srcSet",class:"className",colspan:"colSpan",columnspan:"columnSpan",rowspan:"rowSpan",allowfullscreen:"allowFullScreen",for:"htmlFor"},B={background:!0,backgroundColor:!0,borderColor:!0,color:!0}},918889,e=>{"use strict";e.s(["default",()=>m]);var t=e.i(843476),n=e.i(271645),o=e.i(538794),i=e.i(159211),r=e.i(87828),a=e.i(343794),s=e.i(964344),l=e.i(690118);let d={post:"post",postHighlight:"post",comment:"comment",commentExceptPointerEvents:"comment",answer:"answer",tag:"tag",debateResponse:"debate response",llmChat:"llm chat",ultraFeed:"content",ultraFeedPost:"post"},c={fontSize:"16px !important"},u={fontSize:"14px !important",fontWeight:700},m=(0,o.registerComponent)("ContentExcerpt",e=>{let{contentHtml:o,moreLink:c,hideMoreLink:u,smallText:m,noLinkStyling:p,hideMultimedia:h,lines:g=3,alwaysExpandInPlace:f,contentType:v,className:x,classes:y}=e,[b,C]=(0,n.useState)(!1),w=(0,n.useCallback)(()=>C(!0),[]),k=o.length>120*g,j=f||o.length<1200,S=(0,s.truncate)(o,Math.floor(120*g),"characters","...",!1);return(0,t.jsxs)("div",{className:(0,a.default)(y.root,x),children:[(0,t.jsx)(r.default,{contentType:v,className:y.excerpt,children:(0,t.jsx)(l.ContentItemBody,{dangerouslySetInnerHTML:{__html:b?o:S},className:(0,a.default)({[y.contentNormalText]:!m,[y.contentSmallText]:m,[y.contentNoLinkStyling]:p,[y.contentHideMultimedia]:h})})}),!u&&(j?b?null:(0,t.jsx)("div",{onClick:w,className:y.continueReading,children:"Continue reading"}):(0,t.jsx)(i.Link,{to:c,className:y.continueReading,eventProps:{intent:"expandPost"},children:k?"Continue reading":"View ".concat(d[v])}))]})},{styles:e=>({root:{},excerpt:{position:"relative",fontSize:"1.1rem",lineHeight:"1.5em"},contentNormalText:{"& h1":c,"& h2":c,"& h3":c,"& h4":c,"& h5":c,"& h6":c},contentSmallText:{"& h1":u,"& h2":u,"& h3":u,"& h4":u,"& h5":u,"& h6":u,"& p":{fontSize:"13px !important"}},contentNoLinkStyling:{"& a":{color:"".concat(e.palette.text.normal," !important")}},contentHideMultimedia:{"& iframe, & img, & video":{display:"none"}},continueReading:{cursor:"pointer",display:"block",marginTop:12,color:e.palette.primary.main,fontFamily:e.palette.fonts.sansSerifStack,fontSize:14,fontWeight:500,"&:hover":{opacity:1,color:"".concat(e.palette.primary.light," !important")}}}),stylePriority:-1})},374892,e=>{"use strict";e.s(["default",()=>l]);var t=e.i(843476),n=e.i(182584),o=e.i(946271);e.i(813868);var i=e.i(122756),r=e.i(918889),a=e.i(239832);let s=(0,i.gql)("\n  query PostExcerpt($documentId: String, $hash: String) {\n    post(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...HighlightWithHash\n      }\n    }\n  }\n"),l=e=>{var i,l,d,c,u,m,p;let{post:h,useCustomHighlight:g=!0,hash:f,...v}=e,{loading:x,data:y}=(0,o.useQuery)(s,{variables:{documentId:null!=(i=null==h||null==(l=h.fmCrosspost)?void 0:l.foreignPostId)?i:null==h?void 0:h._id,hash:f},skip:!f&&!!h.contents,fetchPolicy:"cache-first"}),b=null==y||null==(d=y.post)?void 0:d.result;if(x&&f)return(0,t.jsx)(a.default,{});let C=null==(c=h.customHighlight)?void 0:c.html,w=(null==(u=h.contents)?void 0:u.htmlHighlight)||(null==(m=h.contents)?void 0:m.html),k=(null==b||null==(p=b.contents)?void 0:p.htmlHighlightStartingAtHash)||(g&&C?C:w);return k?(0,t.jsx)(r.default,{contentHtml:k,moreLink:(0,n.postGetPageUrl)(h),contentType:"postHighlight",...v}):null}},883340,e=>{"use strict";var t=e.i(843476),n=e.i(538794),o=e.i(898298),i=e.i(903780);let r=(0,n.registerComponent)("EventVicinity",e=>{let{post:n}=e,{eventHandlers:r,hover:a,anchorEl:s}=(0,o.useHover)();return n.googleLocation&&n.googleLocation.vicinity?(0,t.jsxs)("span",{...r,children:[(0,t.jsx)(i.default,{open:a,anchorEl:s,clickable:!1,placement:"top",tooltip:!0,children:n.location}),n.googleLocation.vicinity]}):(0,t.jsx)("span",{...r,children:n.location})},{});e.s(["default",0,r])},460872,291742,51160,236631,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(538794),i=e.i(862775),r=e.i(710232),a=e.i(598113),s=e.i(339213);let l=(0,s.default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("path",{d:"M14 17H4v2h10v-2zm6-8H4v2h16V9zM4 15h16v-2H4v2zM4 5v2h16V5H4z"}),(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"})]}),"Subject");var d=e.i(554302);let c=(0,s.default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"})]}),"Event");e.s(["default",0,c],291742);let u=(0,s.default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,t.jsx)("path",{d:"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"})]}),"QuestionAnswer");e.s(["default",0,u],51160);var m=e.i(552275);let p="/recommendations";e.s(["curatedUrl",0,p],236631);var h=e.i(935132),g=e.i(343794),f=e.i(358466),v=e.i(791434),x=e.i(716512),y=e.i(110601),b=e.i(782611);let C=()=>{let e=m.taggingNameIsSet.get()?m.taggingNameCapitalSetting.get():"Tag/Wiki",o=m.taggingNameIsSet.get()?m.taggingNameCapitalSetting.get():"Tag and wiki";return{LessWrong:{frontpage:{tooltipTitle:"Frontpage Post",tooltipBody:(0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("b",{children:"Frontpage Posts"})," are promoted by moderators based on:"]}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"Usefulness, novelty, relevance"}),(0,t.jsx)("li",{children:"Timeless content (minimizing reference to current events)"}),(0,t.jsx)("li",{children:"Aiming to explain, rather than persuade"})]})]}),linkTarget:"/posts/5conQhfa4rgb4SaWx/site-guide-personal-blogposts-vs-frontpage-posts",Icon:r.default},personal:{tooltipTitle:"Personal Blogpost",tooltipBody:(0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("div",{children:(0,t.jsx)("b",{children:"Personal Blogpost"})}),(0,t.jsx)("br",{}),(0,t.jsx)("div",{children:"Members can write whatever they want on their personal blog. Personal blogposts are a good fit for:"}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"Niche topics"}),(0,t.jsx)("li",{children:"Meta-discussion of LessWrong (site features, interpersonal community dynamics)"}),(0,t.jsx)("li",{children:"Topics that are difficult to discuss rationally"}),(0,t.jsx)("li",{children:"Personal ramblings"})]})]}),linkTarget:"/posts/5conQhfa4rgb4SaWx/site-guide-personal-blogposts-vs-frontpage-posts",Icon:i.default},curated:{tooltipTitle:"Curated Post",tooltipBody:(0,t.jsx)("div",{children:"The best 2-3 posts each week, selected by the moderation team. Curated posts are featured at the top of the front page and emailed to subscribers."}),linkTarget:p,Icon:a.default},event:{tooltipTitle:"Event",tooltipBody:(0,t.jsx)("div",{children:"An event post."}),linkTarget:"/community",Icon:c},shortform:{tooltipTitle:"Shortform",tooltipBody:(0,t.jsx)("div",{children:"Writing that is short in length, or written in a short amount of time. Off-the-cuff thoughts, brainstorming, early stage drafts, etc."}),linkTarget:"/shortform",Icon:l},tags:{tooltipTitle:"".concat(e," Edits and Discussion"),tooltipBody:(0,t.jsxs)("div",{children:[o," pages, which organize LessWrong posts and concepts in a more durable format."]}),Icon:d.default,linkTarget:(0,f.getAllTagsPath)()}},AlignmentForum:{frontpage:{tooltipTitle:"Frontpage Post",tooltipBody:(0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("div",{children:"Moderators promote posts to frontpage based on:"}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"Usefulness, novelty, relevance"}),(0,t.jsx)("li",{children:"Timeless content (minimizing reference to current events)"}),(0,t.jsx)("li",{children:"Aiming to explain, rather than persuade"})]})]}),linkTarget:null,Icon:r.default},personal:{tooltipTitle:"Personal Blog Post",tooltipBody:(0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("div",{children:"Members can write whatever they want on their personal blog. Personal blogposts are a good fit for:"}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"Niche topics"}),(0,t.jsx)("li",{children:"Meta-discussion of LessWrong (site features, interpersonal community dynamics)"}),(0,t.jsx)("li",{children:"Topics that are difficult to discuss rationally"}),(0,t.jsx)("li",{children:"Personal ramblings"})]})]}),linkTarget:null,Icon:i.default},curated:{tooltipTitle:"Curated Post",tooltipBody:(0,t.jsx)("div",{children:"The best posts, selected by the moderation team."}),linkTarget:p,Icon:a.default},shortform:{tooltipTitle:"Shortform",tooltipBody:(0,t.jsx)("div",{children:"Writing that is short in length, or written in a short amount of time. Off-the-cuff thoughts, brainstorming, early stage drafts, etc."}),linkTarget:"/shortform",Icon:l},tags:{tooltipTitle:"".concat(e," Edits and Discussion"),tooltipBody:(0,t.jsxs)("div",{children:[o," pages, which organize ",m.siteNameWithArticleSetting.get()," posts and concepts in a more durable format."]}),Icon:d.default,linkTarget:(0,f.getAllTagsPath)()}},EAForum:{frontpage:{tooltipTitle:"Frontpage Post",tooltipBody:(0,t.jsx)("div",{children:"Posts that are relevant to doing good effectively."}),linkTarget:"/about#Finding_content",Icon:r.default},personal:{tooltipTitle:"Personal Blog Post",tooltipBody:(0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("div",{children:"Users can write whatever they want on their personal blog. This category is a good fit for:"}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"topics that aren't closely related to EA"}),(0,t.jsx)("li",{children:"topics that are difficult to discuss rationally"}),(0,t.jsx)("li",{children:"topics of interest to a small fraction of the Forums readers (e.g. local events)"})]})]}),linkTarget:"/posts/5TAwep4tohN7SGp3P/the-frontpage-community-distinction",Icon:i.default},curated:{tooltipTitle:"Curated Post",tooltipBody:(0,t.jsx)("div",{children:"The best 2-3 posts each week, selected by the moderation team. Curated posts are featured at the top of the front page and emailed to subscribers."}),linkTarget:p,Icon:a.default},shortform:{tooltipTitle:"Quick take",tooltipBody:(0,t.jsx)("div",{children:"Writing that is brief, or written very quickly. Perfect for off-the-cuff thoughts, brainstorming, early stage drafts, etc."}),linkTarget:"/quicktakes",Icon:l},tags:{tooltipTitle:"".concat(e," Edits and Discussion"),tooltipBody:(0,t.jsxs)("div",{children:[o," pages, which organize posts and concepts in a more durable format."]}),Icon:d.default,linkTarget:(0,f.getAllTagsPath)()},subforumDiscussion:{Icon:u,linkTarget:null}},default:{frontpage:{tooltipTitle:"Frontpage Post",tooltipBody:(0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("b",{children:"Frontpage Posts"})," are promoted by moderators based on:"]}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"Usefulness, novelty, relevance"}),(0,t.jsx)("li",{children:"Timeless content (minimizing reference to current events)"}),(0,t.jsx)("li",{children:"Aiming to explain, rather than persuade"})]})]}),linkTarget:"/posts/5conQhfa4rgb4SaWx/site-guide-personal-blogposts-vs-frontpage-posts",Icon:r.default},personal:{tooltipTitle:"Personal Blogpost",tooltipBody:(0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("div",{children:(0,t.jsx)("b",{children:"Personal Blogpost"})}),(0,t.jsx)("br",{}),(0,t.jsx)("div",{children:"Members can write whatever they want on their personal blog. Personal blogposts are a good fit for:"}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"Niche topics"}),(0,t.jsx)("li",{children:"Meta-discussion of LessWrong (site features, interpersonal community dynamics)"}),(0,t.jsx)("li",{children:"Topics that are difficult to discuss rationally"}),(0,t.jsx)("li",{children:"Personal ramblings"})]})]}),linkTarget:"/posts/5conQhfa4rgb4SaWx/site-guide-personal-blogposts-vs-frontpage-posts",Icon:i.default},curated:{tooltipTitle:"Curated Post",tooltipBody:(0,t.jsx)("div",{children:"The best 2-3 posts each week, selected by the moderation team. Curated posts are featured at the top of the front page and emailed to subscribers."}),linkTarget:p,Icon:a.default},shortform:{tooltipTitle:"Shortform",tooltipBody:(0,t.jsx)("div",{children:"Writing that is short in length, or written in a short amount of time. Off-the-cuff thoughts, brainstorming, early stage drafts, etc."}),linkTarget:"/shortform",Icon:l},tags:{tooltipTitle:"".concat(e," Edits and Discussion"),tooltipBody:(0,t.jsxs)("div",{children:[o," pages, which organize ",m.forumTitleSetting.get()," posts and concepts in a more durable format."]}),Icon:d.default,linkTarget:(0,f.getAllTagsPath)()}}}},w=e=>{let{classes:n,className:o,children:i}=e;return(0,v.isFriendlyUI)()?(0,t.jsx)(t.Fragment,{children:i}):(0,t.jsx)(x.Typography,{variant:"body1",component:"span",className:(0,g.default)(n.root,o),children:i})},k=(0,o.registerComponent)("ContentType",e=>{let{classes:o,className:i,type:r,label:a}=e;if(!r)throw Error("ContentType requires type property");let s=(0,h.forumSelect)(C())[r];if(!s)throw Error("Content type ".concat(r," invalid for this forum type"));let l=(0,v.isFriendlyUI)()?(0,t.jsx)(b.default,{title:a,titleClassName:(0,g.default)(o.sectionTitle,i),noTopMargin:!0,noBottomPadding:!0}):(0,t.jsxs)("span",{children:[(0,t.jsx)(s.Icon,{className:o.icon}),a?" "+a:""]});return(0,t.jsx)(w,{className:i,classes:o,children:s.tooltipTitle?(0,t.jsx)(y.default,{title:(0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("div",{className:o.tooltipTitle,children:s.tooltipTitle}),s.tooltipBody]}),children:l}):l})},{styles:e=>({root:{textAlign:"left",display:"inline-block",color:e.palette.text.dim2,whiteSpace:"no-wrap",fontSize:e.typography.body2.fontSize,...e.isFriendlyUI&&{color:e.palette.grey[800],fontWeight:600}},icon:{fontSize:"1.3rem",color:e.palette.icon.dim600,position:"relative",top:3,marginRight:4,...e.isFriendlyUI&&{color:e.palette.grey[800]}},tooltipTitle:{marginBottom:8},sectionTitle:{fontSize:14}})});e.s(["default",0,k,"getContentTypes",0,C],460872)},489885,e=>{"use strict";var t=e.i(843476),n=e.i(538794);let o=e=>(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,t.jsx)("path",{d:"M10.5105 13.4672H5.49022C5.34824 13.4672 5.23303 13.3545 5.23303 13.2156C5.23303 13.0767 5.34824 12.964 5.49022 12.964H10.5105C10.6525 12.964 10.7677 13.0767 10.7677 13.2156C10.7676 13.3545 10.6524 13.4672 10.5105 13.4672Z"}),(0,t.jsx)("path",{d:"M9.94898 11.9977H6.0515C5.90952 11.9977 5.79431 11.885 5.79431 11.7461C5.79431 11.6072 5.90952 11.4945 6.0515 11.4945H9.94898C10.091 11.4945 10.2062 11.6072 10.2062 11.7461C10.2062 11.885 10.0915 11.9977 9.94898 11.9977Z"}),(0,t.jsx)("path",{d:"M9.33866 10.528H6.66319C6.52121 10.528 6.40601 10.4154 6.40601 10.2765C6.40601 10.1376 6.52121 10.0249 6.66319 10.0249H9.33866C9.48064 10.0249 9.59585 10.1376 9.59585 10.2765C9.59585 10.4154 9.48064 10.528 9.33875 10.528H9.33866Z"}),(0,t.jsx)("path",{d:"M10.5105 13.5179H5.49022C5.34824 13.5179 5.23303 13.3938 5.23303 13.2409C5.23303 13.0881 5.34824 12.964 5.49022 12.964H10.5105C10.6525 12.964 10.7677 13.0881 10.7677 13.2409C10.7676 13.3938 10.6524 13.5179 10.5105 13.5179Z"}),(0,t.jsx)("path",{d:"M9.94898 12.0484H6.0515C5.90952 12.0484 5.79431 11.9243 5.79431 11.7715C5.79431 11.6186 5.90952 11.4945 6.0515 11.4945H9.94898C10.091 11.4945 10.2062 11.6186 10.2062 11.7715C10.2062 11.9243 10.0915 12.0484 9.94898 12.0484Z"}),(0,t.jsx)("path",{d:"M9.33866 10.5787H6.66319C6.52121 10.5787 6.40601 10.4547 6.40601 10.3018C6.40601 10.1489 6.52121 10.0249 6.66319 10.0249H9.33866C9.48064 10.0249 9.59585 10.1489 9.59585 10.3018C9.59585 10.4547 9.48064 10.5787 9.33875 10.5787H9.33866Z"}),(0,t.jsx)("path",{d:"M10.5105 3.03611H5.49022C5.34824 3.03611 5.23303 2.92341 5.23303 2.78452C5.23303 2.64563 5.34824 2.53293 5.49022 2.53293H10.5105C10.6525 2.53293 10.7677 2.64563 10.7677 2.78452C10.7676 2.92341 10.6524 3.03611 10.5105 3.03611Z"}),(0,t.jsx)("path",{d:"M9.94898 4.50528H6.0515C5.90952 4.50528 5.79431 4.39259 5.79431 4.25369C5.79431 4.1148 5.90952 4.00211 6.0515 4.00211H9.94898C10.091 4.00211 10.2062 4.1148 10.2062 4.25369C10.2062 4.39259 10.0915 4.50528 9.94898 4.50528Z"}),(0,t.jsx)("path",{d:"M9.33866 5.97541H6.66319C6.52121 5.97541 6.40601 5.86271 6.40601 5.72382C6.40601 5.58493 6.52121 5.47223 6.66319 5.47223H9.33866C9.48064 5.47223 9.59585 5.58493 9.59585 5.72382C9.59585 5.86271 9.48064 5.97541 9.33875 5.97541H9.33866Z"}),(0,t.jsx)("path",{d:"M10.5105 3.08677H5.49022C5.34824 3.08677 5.23303 2.96273 5.23303 2.80985C5.23303 2.65697 5.34824 2.53293 5.49022 2.53293H10.5105C10.6525 2.53293 10.7677 2.65697 10.7677 2.80985C10.7676 2.96273 10.6524 3.08677 10.5105 3.08677Z"}),(0,t.jsx)("path",{d:"M9.94898 4.55595H6.0515C5.90952 4.55595 5.79431 4.43191 5.79431 4.27903C5.79431 4.12615 5.90952 4.00211 6.0515 4.00211H9.94898C10.091 4.00211 10.2062 4.12615 10.2062 4.27903C10.2062 4.43191 10.0915 4.55595 9.94898 4.55595Z"}),(0,t.jsx)("path",{d:"M9.33866 6.02608H6.66319C6.52121 6.02608 6.40601 5.90203 6.40601 5.74915C6.40601 5.59627 6.52121 5.47223 6.66319 5.47223H9.33866C9.48064 5.47223 9.59585 5.59627 9.59585 5.74915C9.59585 5.90203 9.48064 6.02608 9.33875 6.02608H9.33866Z"}),(0,t.jsx)("path",{d:"M4.33994 14C4.21492 14 4.10489 13.9099 4.08637 13.7851C3.55253 10.2588 5.57584 8.93103 7.88048 7.77637C8.00593 7.71396 8.16178 7.76231 8.2266 7.88604C8.29144 8.00926 8.24098 8.16121 8.1145 8.22463C5.90191 9.33297 4.11055 10.5109 4.5946 13.7116C4.61569 13.8489 4.519 13.9767 4.37805 13.9968C4.36565 13.9989 4.35231 14 4.33999 14L4.33994 14Z",stroke:"currentColor",strokeWidth:"0.1"}),(0,t.jsx)("path",{d:"M7.90302 8.29872C7.80943 8.29872 7.71989 8.24844 7.67416 8.16185C7.60933 8.03863 7.65978 7.88668 7.78627 7.82326C9.97163 6.72848 11.8931 5.48117 11.4102 2.28845C11.3891 2.15107 11.4858 2.0233 11.6268 2.00318C11.7656 1.98103 11.8978 2.07713 11.9184 2.21501C12.4512 5.73418 10.2849 7.13659 8.02045 8.27163C7.98291 8.29033 7.94278 8.29884 7.90317 8.29884L7.90302 8.29872Z",stroke:"currentColor",strokeWidth:"0.1"}),(0,t.jsx)("path",{d:"M6.83961 7.61201C6.79277 7.61201 6.74551 7.59997 6.7028 7.57377C5.24114 6.67868 3.62198 5.26036 4.08288 2.21512C4.10345 2.07775 4.23769 1.98165 4.37449 2.00329C4.51493 2.02342 4.61213 2.15119 4.59104 2.28856C4.17645 5.02955 5.56415 6.28232 6.97643 7.14718C7.09629 7.22063 7.13331 7.37611 7.05771 7.49386C7.00881 7.57034 6.92503 7.61212 6.83962 7.61212L6.83961 7.61201Z",stroke:"currentColor",strokeWidth:"0.1"}),(0,t.jsx)("path",{d:"M11.6644 14C11.652 14 11.6386 13.999 11.6263 13.997C11.4859 13.9768 11.3887 13.8491 11.4098 13.7117C11.8248 10.9711 10.4366 9.71794 9.02436 8.85308C8.9045 8.77963 8.86748 8.62415 8.94308 8.5064C9.01867 8.38865 9.1771 8.35344 9.29747 8.42689C10.7602 9.32248 12.3792 10.7412 11.9178 13.7855C11.8993 13.9099 11.7893 13.9999 11.6643 13.9999L11.6644 14Z",stroke:"currentColor",strokeWidth:"0.1"})]}),i=e=>(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,t.jsx)("path",{d:"M7.70242 7.6811C7.70242 7.84813 7.83465 7.98476 7.99629 7.98476C8.15792 7.98476 8.29015 7.84813 8.29015 7.6811V5.25156C8.29015 5.08452 8.15792 4.9479 7.99629 4.9479C7.83465 4.9479 7.70242 5.08453 7.70242 5.25156V7.6811ZM11.376 12.5401C11.3173 11.7809 10.7201 11.6367 10 11.5C9.95592 11.2115 9.90657 10.475 9.75958 10.2169V7.98482H11.229C12.1989 7.98482 12.9923 7.16492 12.9923 6.16272C12.9923 5.20608 12.2723 4.41658 11.3759 4.34063C11.3172 3.58142 10.7587 2.9741 10.0387 2.83736C9.90654 1.80477 9.0396 1 7.99624 1C6.95287 1 6.08592 1.80477 5.9537 2.85249C5.24839 2.97398 4.68997 3.58142 4.61647 4.34063C3.70544 4.41658 3.00003 5.20619 3.00003 6.16272C3.00003 7.16492 3.79348 7.98482 4.76334 7.98482H6.23279V10.2321C6.0858 10.475 6.04409 11.2116 6 11.5C5.2948 11.6216 4.68995 11.7809 4.61645 12.5401C3.70542 12.6161 3 13.4057 3 14.3622C3 14.5292 3.13223 14.6659 3.29386 14.6659C3.4555 14.6659 3.58773 14.5292 3.58773 14.3622C3.58773 13.6941 4.11673 13.1474 4.76331 13.1474H4.92496C5.01311 13.1474 5.0866 13.117 5.14533 13.0411C5.20407 12.9804 5.23349 12.8892 5.21883 12.7981V12.6766C5.21883 12.0844 5.67441 12.1044 6.2475 12.1044C6.40914 12.1044 6.54136 11.9678 6.54136 11.8008C6.54136 11.4971 6.62943 10.7179 6.79107 10.4749C6.82049 10.4294 6.83515 10.3686 6.83515 10.3079L6.83535 7.68114V7.43817C6.83535 6.73964 6.30635 6.16271 5.65977 6.16271C5.49812 6.16271 5.3659 6.29935 5.3659 6.46637C5.3659 6.6334 5.49813 6.77003 5.65977 6.77003C5.9684 6.77003 6.21819 7.0433 6.2475 7.37735L4.76338 7.37746C4.11679 7.37746 3.58779 6.83082 3.58779 6.16268C3.58779 5.49455 4.11679 4.94791 4.76338 4.94791H4.92502C5.01317 4.94791 5.08667 4.91751 5.1454 4.84157C5.20413 4.78088 5.23355 4.68968 5.21889 4.59859V4.47711C5.21889 3.88492 5.67439 3.41423 6.24748 3.41423C6.40913 3.41423 6.54134 3.2776 6.54134 3.11057C6.54134 2.27541 7.20257 1.59214 8.01079 1.59214C8.81902 1.59214 9.48025 2.27541 9.48025 3.11057C9.48025 3.2776 9.61247 3.41423 9.77411 3.41423C10.3472 3.41423 10.8027 3.88492 10.8027 4.47711V4.59859C10.788 4.68968 10.8174 4.76563 10.8762 4.84157C10.9349 4.90226 11.0084 4.94791 11.0966 4.94791H11.2289C11.8755 4.94791 12.4045 5.49455 12.4045 6.16268C12.4045 6.83082 11.8755 7.37746 11.2289 7.37746H9.75944C9.78886 7.0434 10.0387 6.77014 10.3472 6.77014C10.5088 6.77014 10.641 6.6335 10.641 6.46648C10.641 6.29945 10.5088 6.16282 10.3472 6.16282C9.70059 6.16282 9.17159 6.73985 9.17159 7.43827L9.17169 7.68114V10.3232C9.17169 10.3839 9.18635 10.4447 9.21576 10.4903C9.37741 10.7331 9.31453 11.4971 9.31453 11.8008C9.31453 11.9678 9.44676 12.1044 9.60839 12.1044C10.1815 12.1044 10.788 12.0997 10.788 12.6919V12.8134C10.7734 12.9044 10.8027 12.9804 10.8615 13.0563C10.9202 13.117 10.9937 13.1627 11.0819 13.1627H11.2289C11.8755 13.1627 12.4045 13.7093 12.4045 14.3774C12.4045 14.5445 12.5367 14.6811 12.6983 14.6811C12.86 14.6811 12.9922 14.5445 12.9922 14.3774C12.9922 13.4056 12.2724 12.616 11.376 12.5401Z"}),(0,t.jsx)("rect",{x:"4",y:"9.29999",width:"7.9",height:"0.666667",rx:"0.333333"}),(0,t.jsx)("rect",{x:"3",y:"14.3333",width:"10",height:"0.666667",rx:"0.2"})]}),r=e=>(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,t.jsx)("path",{d:"M13.25 10.4583C12.6805 10.4583 11.5 10.7754 10.9016 10.9473C10.8222 10.1104 9.74973 9.8141 8.64146 9.58898C8.1356 9.48644 7.75905 9.30502 7.39505 9.12925C6.94614 8.91277 6.52232 8.70827 5.95835 8.70827C5.31255 8.70827 4.724 8.84037 4.39188 8.93175C4.30408 8.62627 4.05501 8.38003 3.72412 8.31405L1.34863 7.83901C1.26376 7.82192 1.17432 7.84415 1.10653 7.89939C1.03932 7.95492 1 8.03753 1 8.12497V12.7916C1 12.9529 1.13046 13.0833 1.29168 13.0833H3.11914C3.47931 13.0833 3.78625 12.8542 3.91821 12.5326C4.57178 12.8441 7.59206 14.25 8.875 14.25C10.0063 14.25 12.3357 13.105 13.8766 12.3473C14.2783 12.1499 14.6104 11.9864 14.8257 11.8921C14.9316 11.8454 15 11.7406 15 11.625C15 10.938 14.2805 10.4583 13.25 10.4583ZM3.84148 9.21331L3.40797 12.2496C3.38746 12.3923 3.26327 12.5 3.11914 12.5H1.58332V8.48071L3.61018 8.88603C3.76172 8.91652 3.86368 9.06007 3.84148 9.21331ZM13.6191 11.8238C12.2172 12.5131 9.87078 13.6666 8.875 13.6666C7.81428 13.6666 5.02806 12.4245 4.04426 11.946C4.04317 11.9454 4.04194 11.9456 4.04084 11.9451L4.38404 9.54151C4.59655 9.47504 5.24586 9.29165 5.95832 9.29165C6.38899 9.29165 6.72111 9.45202 7.14209 9.6548C7.51979 9.8371 7.94816 10.0436 8.52522 10.1609C9.79271 10.4179 10.3333 10.6813 10.3333 11.0416C10.3333 11.1128 10.3117 11.1567 10.2564 11.198C10.0713 11.3367 9.34665 11.5697 6.6248 10.7619C6.46927 10.7169 6.30808 10.8044 6.26192 10.9587C6.21634 11.1131 6.30409 11.2755 6.45847 11.3213C7.8023 11.7195 8.82939 11.918 9.55742 11.918C10.0319 11.918 10.38 11.8337 10.605 11.6654C10.6244 11.6509 10.6386 11.6332 10.6562 11.6177C10.6745 11.6156 10.6926 11.6178 10.711 11.6121C11.2266 11.4535 12.6878 11.0416 13.25 11.0416C13.7257 11.0416 14.2264 11.1861 14.3734 11.4575C14.17 11.5532 13.9131 11.6797 13.6191 11.8238Z",fill:"currentColor"}),(0,t.jsx)("rect",{x:"6.7",y:"5.7",width:"6.6",height:"1.6",rx:"0.6",fill:"none",stroke:"currentColor",strokeWidth:"0.6"}),(0,t.jsx)("rect",{x:"4.7",y:"1.7",width:"10.6",height:"2.6",rx:"0.6",fill:"none",stroke:"currentColor",strokeWidth:"0.6"})]}),a=e=>(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,t.jsx)("path",{d:"M10.8261 14C10.0454 14 9.41306 13.3287 9.41306 12.5V11.6H4.04347V11H9.97824V12.5C9.97824 12.995 10.3597 13.4 10.8261 13.4V14Z"}),(0,t.jsx)("path",{d:"M12.2391 5.00003H11.6739V3.50007C11.6739 2.67126 12.3062 2 13.0869 2V2.60007C12.6207 2.60007 12.2391 3.00503 12.2391 3.50007V5.00003Z"}),(0,t.jsx)("path",{d:"M10.8261 14H2.91301C2.13235 14 1.5 13.3287 1.5 12.5V11H3.76083V3.50007C3.76083 2.67126 4.39318 2 5.17394 2H13.0869C13.8677 2 14.5 2.67126 14.5 3.50007V5.30006H12.2391V12.5C12.2391 13.3287 11.6067 14 10.8261 14ZM2.06518 11.6V12.5C2.06518 12.995 2.44676 13.4 2.91301 13.4H10.8261C11.2924 13.4 11.6739 12.995 11.6739 12.5V4.69999H13.9347V3.50007C13.9347 3.00503 13.5532 2.60007 13.0869 2.60007H5.17394C4.70759 2.60007 4.32611 3.00503 4.32611 3.50007V11.6H2.06518Z"})]}),s=e=>(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,t.jsx)("path",{d:"M14.8055 4.28529L12.9995 3.4377C12.7156 2.27114 11.8387 1.5 10.7728 1.5C9.39065 1.5 8.4616 2.56106 8.4616 4.14063C8.4616 5.18865 4.59044 9.33736 1.20953 10.7218C1.16115 10.7417 1.11799 10.773 1.0835 10.8131C1.04901 10.8532 1.02416 10.901 1.01093 10.9528C0.997698 11.0045 0.996463 11.0587 1.00732 11.111C1.01818 11.1633 1.04082 11.2123 1.07345 11.254L2.36449 12.9001C2.41639 12.9661 2.49033 13.0101 2.572 13.0234C2.65367 13.0368 2.73725 13.0185 2.80656 12.9722L4.57416 11.7899C5.44735 12.1271 6.37042 12.308 7.30322 12.3249L7.70489 13.8158H5.53322C5.44482 13.8158 5.36003 13.8518 5.29752 13.916C5.23501 13.9802 5.19989 14.0672 5.19989 14.1579C5.19989 14.2486 5.23501 14.3356 5.29752 14.3998C5.36003 14.464 5.44482 14.5 5.53322 14.5H12.0574C12.1458 14.5 12.2306 14.464 12.2931 14.3998C12.3556 14.3356 12.3907 14.2486 12.3907 14.1579C12.3907 14.0672 12.3556 13.9802 12.2931 13.916C12.2306 13.8518 12.1458 13.8158 12.0574 13.8158H10.3508L9.77909 11.7727C10.0901 11.6189 10.3857 11.4342 10.6616 11.2213C12.2652 9.97775 13.1701 7.80657 13.0594 5.50537L14.7723 4.92111C14.8357 4.89933 14.8913 4.85847 14.9318 4.80385C14.9724 4.74922 14.9959 4.68336 14.9995 4.61481C15.0031 4.54626 14.9865 4.47819 14.9519 4.41943C14.9173 4.36068 14.8663 4.31391 14.8055 4.28529ZM9.65719 13.8158H8.39602L7.98557 12.2924C8.38444 12.2496 8.77756 12.1622 9.15795 12.0318L9.65719 13.8158ZM12.6043 4.93943C12.5334 4.96377 12.4725 5.01185 12.4314 5.07594C12.3904 5.14004 12.3714 5.21644 12.3777 5.29289C12.5535 7.42838 11.7221 9.54117 10.2599 10.6754C8.8054 11.8036 6.86592 11.9466 4.65039 11.0893C4.60134 11.0702 4.54858 11.0633 4.49642 11.0691C4.44426 11.0749 4.39418 11.0933 4.35026 11.1227L2.69463 12.2299L1.86845 11.1762C2.81456 10.7121 3.71258 10.1511 4.54886 9.50183C5.1416 9.71908 5.76521 9.8345 6.39456 9.84343C7.16389 9.85559 7.91901 9.63013 8.56192 9.19631C9.5105 8.54585 9.98317 7.54397 10.0209 6.88842C10.0245 6.84303 10.0192 6.79735 10.0053 6.75409C9.99142 6.71083 9.96927 6.67084 9.94014 6.63648C9.91101 6.60212 9.87549 6.57407 9.83566 6.55398C9.79583 6.5339 9.75249 6.52218 9.70819 6.51951C9.66388 6.51684 9.61951 6.52328 9.57766 6.53844C9.53582 6.55361 9.49734 6.5772 9.4645 6.60783C9.43165 6.63846 9.4051 6.67551 9.38639 6.71681C9.36768 6.75811 9.3572 6.80283 9.35555 6.84835C9.3321 7.25859 9.00267 8.07144 8.19147 8.62735C7.61842 9.02046 6.64754 9.37008 5.20314 8.98529C7.3494 7.22468 9.1284 5.10568 9.1284 4.14063C9.1284 3.23826 9.5594 2.18422 10.773 2.18422C11.5744 2.18422 12.2059 2.7956 12.3824 3.74207C12.3923 3.7957 12.4146 3.8461 12.4475 3.88905C12.4803 3.932 12.5227 3.96623 12.5711 3.98889L13.758 4.54583L12.6043 4.93943Z"})}),l=e=>(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,t.jsx)("path",{d:"M7.15732 6.419C7.16798 6.419 7.17893 6.41846 7.18928 6.41764C7.35606 6.40205 7.4778 6.26725 7.46045 6.11713C7.44432 5.9774 7.31437 5.87213 7.15824 5.87213C7.14759 5.87213 7.13663 5.87268 7.12628 5.87377C7.04532 5.88116 6.97259 5.9167 6.92145 5.9733C6.87002 6.03018 6.84659 6.10127 6.85511 6.174C6.87121 6.31373 7.00116 6.419 7.15732 6.419Z"}),(0,t.jsx)("path",{d:"M14.7164 2.58434L14.4832 2.57007C14.5261 2.45613 14.5553 2.32083 14.5553 2.1635C14.5553 1.85561 14.3677 1.57463 14.0658 1.43022C13.9361 1.36818 13.8035 1.28703 13.6603 1.18208C13.4978 1.06294 13.2867 1 13.0499 1C12.5424 1 12.1295 1.3722 12.1295 1.82971C12.1295 1.89824 12.1388 1.96537 12.1565 2.03009C12.0587 2.05297 11.9623 2.07985 11.8679 2.11176C11.5691 2.21321 11.2882 2.36004 11.0334 2.54817C10.7011 2.79289 10.4025 3.10844 10.1459 3.48605C9.94538 3.78082 9.76612 4.1207 9.61242 4.49558C9.44777 4.90108 9.35312 5.25217 9.3026 5.47557C9.11573 5.52588 8.81503 5.60135 8.44251 5.67627C8.27877 5.70909 8.1753 5.85565 8.21182 6.00276C8.22703 6.06373 8.26538 6.11869 8.31986 6.15725C8.39108 6.20811 8.48634 6.22779 8.57551 6.20975C9.07227 6.10994 9.44184 6.01036 9.59334 5.96743C9.85785 6.00836 10.9131 6.21106 11.1218 6.85757C11.2381 7.21752 11.2351 7.75436 10.878 8.18147C10.5344 8.59249 9.93181 8.80977 9.13548 8.80977C7.81425 8.80977 6.59479 8.27219 5.51095 7.212C5.16098 6.86966 4.88229 6.52494 4.67658 6.24032C4.73845 6.25907 4.80087 6.2772 4.86399 6.29424C5.13334 6.36697 5.43617 6.41646 5.76395 6.44162C5.84917 6.44818 5.93256 6.42221 5.99525 6.3708C6.05186 6.32432 6.08656 6.26088 6.09295 6.19225C6.09995 6.11951 6.07499 6.04869 6.02234 5.99291C5.96999 5.93686 5.89665 5.90268 5.81569 5.89666C5.5296 5.87479 5.26817 5.83241 5.03899 5.77061C4.38495 5.59424 3.7793 5.30139 3.24487 5.043L3.23848 5.03971C2.97521 4.91284 2.72656 4.7928 2.49435 4.70147C2.28069 4.6189 2.04969 4.54233 1.80561 4.54069C1.63183 4.53905 1.46504 4.58772 1.33874 4.67687C1.21091 4.76601 1.11322 4.89698 1.04839 5.06624C1.01613 5.14964 1 5.23796 1 5.32901C1.00426 5.61202 1.13574 5.83596 1.2517 6.03365C1.2587 6.04541 1.28578 6.09108 1.29248 6.10229C1.34361 6.18705 1.3923 6.26744 1.42396 6.3317C1.46017 6.40252 1.47265 6.45611 1.47113 6.46814V6.4706C1.46687 6.4985 1.462 6.52857 1.45683 6.56029C1.43674 6.68498 1.41148 6.84002 1.41117 7.01064C1.41117 7.23048 1.4547 7.42353 1.54417 7.60099C1.62969 7.77216 1.76117 7.92829 1.93435 8.06501C1.93282 8.0929 1.93191 8.12161 1.93191 8.14977C1.93191 8.3554 1.97635 8.55282 2.06339 8.73712C2.14739 8.91485 2.31995 9.17215 2.666 9.38625C2.81695 9.48059 2.87539 9.55031 2.90978 9.60063C2.93961 9.64492 2.96121 9.6925 2.9813 9.75949C2.995 9.80242 3.00656 9.85355 3.01965 9.91289C3.06591 10.1191 3.12921 10.401 3.36082 10.7411C3.75982 11.335 4.26504 11.6249 4.61839 11.7632C4.98421 11.9071 5.31443 11.9462 5.52717 11.9535C5.66108 12.1958 5.84308 12.4118 6.06799 12.5953C6.06894 12.5961 6.07 12.5968 6.07095 12.5976L5.90246 13.6464L5.26196 13.8307C5.1019 13.8767 5.01367 14.0306 5.06496 14.1745C5.11624 14.3183 5.28752 14.3975 5.44764 14.3515L5.97225 14.2005L6.14222 14.7212C6.17789 14.8306 6.28527 14.9085 6.41169 14.917L7.1238 14.9646C7.13147 14.9651 7.13911 14.9653 7.14669 14.9653C7.30453 14.9653 7.43798 14.8558 7.44988 14.7122C7.46233 14.5615 7.33654 14.4304 7.16894 14.4192L6.66698 14.3857L6.48717 13.8348L6.62973 12.9476C6.8068 13.0325 6.99756 13.1045 7.2023 13.1619C7.36534 13.2072 7.50634 13.2347 7.61018 13.2513L8.17718 14.3249L7.68673 14.4661C7.52667 14.5121 7.43844 14.6661 7.48972 14.8099C7.53111 14.926 7.65072 15 7.77949 15C7.81023 15 7.84155 14.9958 7.87241 14.9869L8.63772 14.7667L10.036 14.8601C10.2035 14.8712 10.3496 14.7583 10.3621 14.6077C10.3746 14.4571 10.2488 14.3259 10.0812 14.3147L8.80033 14.2292L8.2011 13.0945L10.2832 11.7999C10.9299 11.6315 11.4991 11.3895 11.9748 11.0808C12.4167 10.7937 12.7825 10.4464 13.0616 10.0483C13.3188 9.68296 13.5105 9.26788 13.6313 8.8148C13.7375 8.41667 13.7914 7.98082 13.7914 7.51899C13.7914 7.06071 13.7388 6.57128 13.635 6.06433C13.5528 5.66211 13.4378 5.24512 13.2929 4.8243C13.1967 4.54512 13.0896 4.27114 12.9749 4.00974C13.1526 4.00235 13.4177 3.98021 13.6742 3.87685C13.8559 3.80275 14.0051 3.69091 14.1058 3.5531C14.1978 3.42819 14.2536 3.27488 14.2707 3.10524L14.6749 3.13001C14.682 3.13045 14.689 3.13064 14.6959 3.13064C14.8546 3.13064 14.9883 3.02012 14.9993 2.8758C15.0107 2.72508 14.8841 2.59462 14.7164 2.58434ZM12.7382 1.82971C12.7382 1.67375 12.878 1.54687 13.0499 1.54687C13.1463 1.54687 13.2222 1.5667 13.2755 1.6058C13.4498 1.73349 13.6147 1.83398 13.7798 1.91292C13.8827 1.96211 13.9465 2.05811 13.9465 2.16347C13.9465 2.1997 13.9439 2.23363 13.9392 2.26532C13.9392 2.26557 13.9392 2.26579 13.9393 2.26604C13.7337 2.08404 13.4535 1.97034 13.1465 1.95156C13.0689 1.94664 12.991 1.94417 12.9152 1.94417H12.9091C12.8613 1.94417 12.8138 1.9453 12.7664 1.94726C12.7479 1.91082 12.7382 1.87098 12.7382 1.82971ZM13.5871 3.24587C13.4983 3.36013 13.3432 3.42032 13.1553 3.44531C12.9773 3.46899 12.797 3.46825 12.6175 3.46708C12.4771 3.46615 12.3433 3.47495 12.2602 3.59327C12.1214 3.79107 12.3619 4.09923 12.445 4.29364C12.5608 4.5644 12.6642 4.83953 12.7557 5.11764C13.0403 5.98225 13.1842 6.79025 13.1827 7.51893C13.183 8.40514 12.9691 9.1579 12.5472 9.75591C12.0265 10.4917 11.2154 10.9924 10.068 11.2863C10.0355 11.2945 10.0059 11.3071 9.97795 11.3246L9.51138 11.6147C9.73675 11.2054 9.82054 10.8998 9.82769 10.8728C9.86655 10.7259 9.76551 10.5785 9.60198 10.5435C9.43846 10.5087 9.27435 10.5994 9.23549 10.7463C9.23229 10.7584 8.90877 11.9369 7.73652 12.716C7.60148 12.6955 7.33536 12.6435 7.05107 12.5258C6.82372 12.4323 6.62498 12.3148 6.46002 12.1761C6.25742 12.0058 6.10957 11.8107 6.00764 11.5796L5.67563 10.72C5.62051 10.5773 5.44706 10.5018 5.28832 10.5513C5.12954 10.6008 5.04548 10.7566 5.10056 10.8992L5.28606 11.3795C5.16223 11.3586 5.0165 11.323 4.86311 11.2623C4.46076 11.1026 4.13968 10.8393 3.88129 10.4578C3.70568 10.1943 3.66398 10.0119 3.61985 9.81855C3.61164 9.78355 3.60342 9.74719 3.59429 9.71C3.58641 9.67806 3.5774 9.64443 3.56677 9.60979C3.64816 9.61703 3.73307 9.62135 3.82072 9.62135C4.03167 9.62135 4.25792 9.59691 4.48557 9.5315C4.64566 9.48551 4.73395 9.33162 4.68276 9.18776C4.63153 9.04394 4.46025 8.96464 4.30016 9.01061C3.71898 9.17754 3.115 8.96973 2.99201 8.92316C2.82055 8.81168 2.69951 8.68043 2.62342 8.52219C2.57956 8.43032 2.55795 8.34112 2.548 8.26497C2.70635 8.28157 2.90981 8.29565 3.14538 8.29565C3.24371 8.29565 3.34764 8.29322 3.45614 8.28748C3.62393 8.27859 3.75197 8.14917 3.74208 7.99843C3.73219 7.84766 3.58781 7.73246 3.42035 7.74153C2.91946 7.76809 2.52855 7.71446 2.3856 7.69059C2.25129 7.59503 2.15911 7.49377 2.09842 7.3754C2.04516 7.26931 2.0202 7.15337 2.0199 7.01064C2.01972 6.92842 2.02888 6.84349 2.04093 6.75881C2.39336 6.90769 2.76251 6.96347 2.90001 6.96347C3.0681 6.96347 3.20436 6.84106 3.20436 6.69004C3.20436 6.53902 3.0681 6.4166 2.90001 6.4166C2.72398 6.4166 2.07632 6.25959 1.91414 5.9872C1.91392 5.98681 1.91365 5.98649 1.91344 5.98613C1.88599 5.93828 1.85765 5.89136 1.82971 5.84526C1.79258 5.78401 1.75758 5.72604 1.72654 5.66889C1.64893 5.52971 1.60693 5.40913 1.60876 5.32901C1.60876 5.29811 1.61363 5.27131 1.62367 5.24479C1.65654 5.1603 1.68971 5.12448 1.71163 5.10917C1.73171 5.09659 1.74815 5.08866 1.80567 5.08729C1.8988 5.08565 2.06619 5.12885 2.25093 5.20268C2.45606 5.2828 2.6968 5.39901 2.97588 5.53381C3.10462 5.59588 3.23823 5.66041 3.37793 5.72577C3.49069 5.77859 3.61456 5.83528 3.74692 5.89286C3.88649 6.14008 4.31952 6.85158 5.05035 7.56976C6.23995 8.73873 7.65261 9.35661 9.13554 9.35661C10.3929 9.35661 11.0418 8.89615 11.3648 8.50986C11.7824 8.01035 11.9101 7.33567 11.7065 6.70513C11.4439 5.89215 10.449 5.5795 9.92654 5.4695C10.0075 5.14759 10.1859 4.56388 10.5206 3.99951C10.7863 3.54971 11.101 3.19482 11.4559 2.94432C11.8217 2.68612 12.2728 2.52413 12.7376 2.49463C13.1206 2.47032 13.6682 2.54092 13.6682 2.98919C13.6677 3.09537 13.6385 3.17969 13.5871 3.24587Z"})]}),d=e=>(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,t.jsx)("path",{d:"M13.78 6.21733C13.7581 6.19099 13.7306 6.16981 13.6996 6.15529C13.6685 6.14078 13.6347 6.13328 13.6004 6.13333H8.70038V5.2H11.5004C11.5623 5.2 11.6216 5.17542 11.6654 5.13166C11.7091 5.0879 11.7337 5.02855 11.7337 4.96667V2.16667C11.7337 2.10478 11.7091 2.04543 11.6654 2.00168C11.6216 1.95792 11.5623 1.93333 11.5004 1.93333H8.70038V1.23333C8.70038 1.17145 8.6758 1.1121 8.63204 1.06834C8.58828 1.02458 8.52893 1 8.46705 1H7.53371C7.47183 1 7.41248 1.02458 7.36872 1.06834C7.32496 1.1121 7.30038 1.17145 7.30038 1.23333V1.93333H2.40038C2.3661 1.93328 2.33223 1.94078 2.30118 1.95529C2.27012 1.96981 2.24265 1.99099 2.22071 2.01733L1.05405 3.41733C1.01912 3.45926 1 3.5121 1 3.56667C1 3.62123 1.01912 3.67407 1.05405 3.716L2.22071 5.116C2.24265 5.14234 2.27012 5.16352 2.30118 5.17804C2.33223 5.19256 2.3661 5.20006 2.40038 5.2H7.30038V6.13333H4.50038C4.4385 6.13333 4.37915 6.15792 4.33539 6.20167C4.29163 6.24543 4.26705 6.30478 4.26705 6.36667V9.16667C4.26705 9.22855 4.29163 9.2879 4.33539 9.33166C4.37915 9.37542 4.4385 9.4 4.50038 9.4H7.30038V14.5333H3.53371C3.42326 14.5333 3.33371 14.6229 3.33371 14.7333V14.8C3.33371 14.9105 3.42326 15 3.53371 15H12.467C12.5775 15 12.667 14.9105 12.667 14.8V14.7333C12.667 14.6229 12.5775 14.5333 12.467 14.5333H8.70038V9.4H13.6004C13.6347 9.40006 13.6685 9.39256 13.6996 9.37804C13.7306 9.36352 13.7581 9.34234 13.78 9.316L14.9467 7.916C14.9816 7.87407 15.0008 7.82123 15.0008 7.76667C15.0008 7.7121 14.9816 7.65926 14.9467 7.61733L13.78 6.21733ZM7.76705 1.46667H8.23371V1.93333H7.76705V1.46667ZM1.53705 3.56667L2.51005 2.4H11.267V4.73333H2.51005L1.53705 3.56667ZM7.76705 5.2H8.23371V6.13333H7.76705V5.2ZM8.23371 14.5333H7.76705V9.4H8.23371V14.5333ZM13.4907 8.93333H4.73371V6.6H13.4907L14.4637 7.76667L13.4907 8.93333Z",stroke:"black",strokeWidth:"0.1"})}),c=e=>(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,t.jsx)("path",{d:"M7.34976 4C7.06035 4.001 6.77673 4.07302 6.52962 4.20823C6.28244 4.34336 6.13367 4.76969 6 5C5.00665 5.07345 4.16936 5.82813 4.27125 6.84787L4.27125 6.92766C4.1017 7.2359 3.93037 7.46144 3.93228 7.80522C3.93228 8.50626 4.2879 9.14989 4.86522 9.5073C4.83878 9.60881 4.86561 9.82546 4.86522 9.92969C4.86522 10.2383 5.46855 10.6362 6.19636 10.6362L6.2201 10.6362C6.2201 11.1094 6.62488 11.792 7.05654 11.9283C7.48828 12.0647 7.96694 12.0043 8.33993 11.7663C8.71292 11.5283 8.93385 11.1425 8.93224 10.7318L8.93224 5.42017C8.93161 5.04367 8.76467 4.68271 8.46803 4.41651C8.17138 4.15029 7.76926 4.00051 7.34976 4ZM6.19635 10.4202C5.60363 10.4202 5.11643 10.1641 5.11771 9.86719C5.11818 9.75648 5.08127 9.59288 5.11771 9.48709C5.13303 9.44071 5.1116 9.39085 5.06556 9.36577C4.51197 9.06151 4.16936 8.46263 4.16936 7.80518C4.16841 7.48555 4.33703 7.28424 4.5 7C4.5096 6.98326 4.51413 6.96452 4.51302 6.94572L4.51302 6.91487L4.51302 6.84784C4.51302 5.89041 5.18555 5.24039 6.08412 5.20848C6.12873 5.20698 6.16858 5.18312 6.18723 5.14679C6.35964 4.81098 6.64152 4.33158 7.04215 4.24532C7.44286 4.15912 7.86539 4.24254 8.18878 4.47164C8.51209 4.7008 8.70054 5.05036 8.69989 5.42017L8.69989 10.7318C8.70077 11.0824 8.50676 11.4104 8.18258 11.6062C7.8584 11.8019 7.44674 11.8397 7.08509 11.7069C6.72352 11.574 6.51045 10.8436 6.43225 10.5C6.42034 10.4463 6.36494 10.4095 6.30421 10.4149C6.26833 10.4184 6.23239 10.4202 6.19635 10.4202Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.3"}),(0,t.jsx)("path",{d:"M7.15895 6.10374C7.14814 6.13107 7.14468 6.1606 7.14884 6.18894C7.1551 6.22916 7.17627 6.26415 7.20776 6.28628C7.23917 6.30838 7.27832 6.3157 7.31658 6.30677C7.32602 6.31047 8.53449 6.01745 8.66305 4.84577C8.67092 4.80286 8.66169 4.75935 8.63754 4.72589C8.61342 4.69233 8.57658 4.67194 8.53604 4.66949C8.49558 4.66707 8.45492 4.68295 8.42411 4.71316C8.39321 4.74333 8.37508 4.78516 8.37379 4.8285C8.27344 5.76211 7.31418 5.99607 7.27339 6.00536L7.27335 6.00546C7.22278 6.01565 7.17945 6.05293 7.15895 6.10374Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.2"}),(0,t.jsx)("path",{d:"M6.37464 10.4996C6.35118 10.506 6.32632 10.5051 6.3029 10.4972C6.26968 10.4856 6.24169 10.4606 6.22505 10.4277C6.20843 10.3949 6.2046 10.3568 6.21428 10.3218C6.21175 10.3123 6.52696 9.20929 7.51295 9.25236C7.54924 9.25094 7.58504 9.26579 7.61157 9.29337C7.63819 9.32093 7.65307 9.35868 7.65275 9.39741C7.65241 9.43606 7.63678 9.47232 7.60975 9.49725C7.58275 9.52226 7.54676 9.53355 7.51049 9.52867C6.72497 9.49238 6.47361 10.3678 6.46348 10.4051L6.4634 10.4051C6.45193 10.4516 6.41827 10.4873 6.37464 10.4996Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.2"}),(0,t.jsx)("path",{d:"M6.83523 8.26275C6.85356 8.23581 6.8645 8.20472 6.86691 8.17308C6.86996 8.12809 6.85563 8.08513 6.82702 8.05358C6.79849 8.02209 6.75799 8.0047 6.71451 8.00508C6.70521 7.9988 5.32872 8.02296 4.90418 9.25851C4.88522 9.303 4.88457 9.35227 4.9025 9.39429C4.92036 9.43641 4.95517 9.46738 4.99836 9.47984C5.04146 9.49225 5.08924 9.48494 5.12987 9.45973C5.1706 9.43459 5.20038 9.39377 5.21235 9.34722C5.54836 8.36222 6.64133 8.34155 6.68765 8.34139L6.68771 8.3413C6.74481 8.34252 6.80069 8.31271 6.83523 8.26275Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.2"}),(0,t.jsx)("path",{d:"M2.23717 2.91055H3.36727C5.0497 2.91055 6.6188 2.2849 7.90473 1.08672L7.93013 1.06684H7.93025C8.02782 0.976951 8.17824 0.977856 8.27492 1.06876L8.30044 1.08582C9.58683 2.28389 11.1559 2.91054 12.8382 2.91054H13.9682C14.1079 2.91054 14.2053 3.03894 14.2053 3.17864V7.35385C14.2053 11.2738 12.0585 13.1061 8.582 14.7919L8.2092 14.9746L8.20909 14.9747C8.17543 14.9913 8.13828 15 8.10067 15C8.06273 15 8.02535 14.9913 7.99136 14.9747L7.62298 14.792C4.14624 13.1061 1.99995 11.2736 1.99995 7.35367V3.17846C1.99995 3.03877 2.09752 2.91037 2.2371 2.91037L2.23717 2.91055ZM2.50594 7.35405C2.50594 9.12795 2.95203 10.4865 3.92662 11.6296C4.74943 12.5947 5.91715 13.4044 7.84048 14.3371L8.10485 14.4663L8.37024 14.3371C10.2934 13.4045 11.4567 12.5948 12.2795 11.6296C13.2542 10.4865 13.6997 9.12795 13.6997 7.35405V3.41648H12.8385C11.0895 3.41648 9.45657 2.7834 8.10299 1.58305C6.74965 2.78329 5.11628 3.41648 3.3675 3.41648H2.50618L2.50594 7.35405Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.1"}),(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.94019 12.5452C8.96477 12.544 8.97646 12.5382 8.95333 12.527L8.94019 12.5206V12.5452ZM8.94019 9.30029H9.70542V10.249C9.70542 10.3795 9.82229 10.4817 9.95278 10.4817H10.5789C10.6188 10.6094 10.6883 10.726 10.7817 10.8218C10.934 10.974 11.1406 11.0594 11.3559 11.0594C11.5713 11.0593 11.7779 10.9737 11.9301 10.8214C12.0824 10.6691 12.1679 10.4625 12.1679 10.2472C12.1679 10.0318 12.0824 9.82528 11.9301 9.67296C11.7779 9.52064 11.5714 9.43499 11.3559 9.43499C11.1407 9.43488 10.934 9.52032 10.7817 9.67254C10.6884 9.76705 10.6189 9.88245 10.5789 10.0092H10.178V9.07478C10.178 8.9443 10.0833 8.82774 9.95278 8.82774H8.94019V9.30029ZM8.94019 8.2425L10.7086 8.26637C10.7848 8.51721 10.9773 8.71604 11.2256 8.80031C11.4739 8.88449 11.7476 8.84388 11.9607 8.69114C12.1738 8.5384 12.3002 8.29229 12.3002 8.03008C12.3002 7.76788 12.1738 7.52177 11.9607 7.36903C11.7476 7.21629 11.474 7.17568 11.2256 7.25986C10.9773 7.34414 10.7848 7.54296 10.7086 7.7938L8.94019 7.76972V8.2425ZM8.94019 7.23264H9.95286C10.0833 7.23264 10.1781 7.11608 10.1781 6.9856V6.05121H10.5791C10.6191 6.1779 10.6885 6.29329 10.7819 6.38792C10.9343 6.54055 11.1411 6.62642 11.357 6.62652C11.5727 6.62663 11.7796 6.54108 11.9323 6.38855C12.0849 6.23602 12.1706 6.02908 12.1706 5.81335C12.1706 5.59753 12.0849 5.39068 11.9323 5.23814C11.7796 5.08561 11.5727 4.99996 11.357 5.00006C11.1411 5.00017 10.9343 5.08603 10.7819 5.23866C10.6885 5.33444 10.619 5.451 10.5791 5.57864H9.95296C9.82248 5.57864 9.7056 5.68086 9.7056 5.81134V6.76006H8.94019V7.23264ZM11.6162 7.71586C11.4891 7.66322 11.3428 7.69233 11.2456 7.78959C11.1129 7.92247 11.1129 8.1377 11.2456 8.27061C11.3428 8.36786 11.4891 8.39698 11.6162 8.34434C11.7433 8.2917 11.8261 8.16765 11.8261 8.0301C11.8261 7.89254 11.7433 7.76849 11.6162 7.71586ZM11.4866 5.49712C11.3596 5.44448 11.2134 5.47359 11.116 5.57085C11.052 5.63456 11.0159 5.72108 11.0159 5.81137C11.0159 5.90166 11.0519 5.98826 11.1159 6.05187C11.2133 6.14923 11.3596 6.17834 11.4866 6.1256C11.6137 6.07296 11.6966 5.94902 11.6966 5.81136C11.6966 5.6738 11.6137 5.54975 11.4866 5.49712ZM11.4866 9.93432C11.3596 9.88169 11.2134 9.9108 11.116 10.0081C11.0521 10.0717 11.0159 10.1584 11.0159 10.2487C11.0159 10.339 11.052 10.4255 11.1159 10.4891C11.2133 10.5863 11.3596 10.6154 11.4866 10.5628C11.6137 10.5102 11.6966 10.3861 11.6966 10.2486C11.6966 10.111 11.6137 9.98696 11.4866 9.93432Z",fill:"currentColor"})]}),u=e=>(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,t.jsx)("path",{d:"M13.25 9.45833C12.6805 9.45833 11.5 9.77546 10.9016 9.94737C10.8222 9.1104 9.74973 8.81414 8.64146 8.58901C8.1356 8.48647 7.75905 8.30505 7.39505 8.12928C6.94614 7.9128 6.52232 7.7083 5.95835 7.7083C5.31255 7.7083 4.724 7.8404 4.39188 7.93178C4.30408 7.6263 4.05501 7.38007 3.72412 7.31408L1.34863 6.83904C1.26376 6.82195 1.17432 6.84418 1.10653 6.89942C1.03932 6.95495 1 7.03756 1 7.125V11.7917C1 11.9529 1.13046 12.0834 1.29168 12.0834H3.11914C3.47931 12.0834 3.78625 11.8542 3.91821 11.5326C4.57178 11.8442 7.59206 13.25 8.875 13.25C10.0063 13.25 12.3357 12.105 13.8766 11.3473C14.2783 11.1499 14.6104 10.9865 14.8257 10.8922C14.9316 10.8455 15 10.7406 15 10.625C15 9.93799 14.2805 9.45833 13.25 9.45833ZM3.84148 8.21334L3.40797 11.2496C3.38746 11.3924 3.26327 11.5 3.11914 11.5H1.58332V7.48074L3.61018 7.88606C3.76172 7.91655 3.86368 8.0601 3.84148 8.21334ZM13.6191 10.8238C12.2172 11.5131 9.87078 12.6667 8.875 12.6667C7.81428 12.6667 5.02806 11.4245 4.04426 10.946C4.04317 10.9455 4.04194 10.9457 4.04084 10.9452L4.38404 8.54155C4.59655 8.47507 5.24586 8.29168 5.95832 8.29168C6.38899 8.29168 6.72111 8.45205 7.14209 8.65483C7.51979 8.83713 7.94816 9.04363 8.52522 9.16096C9.79271 9.41789 10.3333 9.68134 10.3333 10.0417C10.3333 10.1129 10.3117 10.1567 10.2564 10.198C10.0713 10.3367 9.34665 10.5697 6.6248 9.76195C6.46927 9.71694 6.30808 9.80439 6.26192 9.95877C6.21634 10.1132 6.30409 10.2755 6.45847 10.3214C7.8023 10.7196 8.82939 10.9181 9.55742 10.9181C10.0319 10.9181 10.38 10.8338 10.605 10.6654C10.6244 10.651 10.6386 10.6333 10.6562 10.6177C10.6745 10.6157 10.6926 10.6178 10.711 10.6122C11.2266 10.4535 12.6878 10.0417 13.25 10.0417C13.7257 10.0417 14.2264 10.1861 14.3734 10.4575C14.17 10.5532 13.9131 10.6797 13.6191 10.8238Z"}),(0,t.jsx)("path",{d:"M10.1282 7.9154C10.1846 7.97181 10.2592 8 10.3333 8C10.4073 8 10.482 7.97181 10.5384 7.9154L12.7373 5.7373C13.0676 5.40661 13.2499 4.96741 13.2499 4.5C13.2499 3.53498 12.465 2.75 11.4999 2.75C11.0624 2.75 10.6517 2.91122 10.3333 3.2006C10.0149 2.91122 9.60413 2.75 9.16663 2.75C8.20161 2.75 7.41663 3.53498 7.41663 4.5C7.41663 4.96741 7.5989 5.40661 7.93047 5.73815L10.1282 7.9154ZM9.16663 3.33332C9.53519 3.33332 9.87472 3.50595 10.0992 3.80727C10.2097 3.95482 10.4569 3.95482 10.5674 3.80727C10.7919 3.50592 11.1314 3.33332 11.4999 3.33332C12.1431 3.33332 12.6666 3.85655 12.6666 4.5C12.6666 4.81161 12.5453 5.10441 12.326 5.324L10.3333 7.29789L8.34175 5.32488C8.1213 5.10441 7.99995 4.81161 7.99995 4.5C7.99995 3.85657 8.52347 3.33332 9.16663 3.33332Z"})]}),m=e=>(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,t.jsx)("path",{d:"M14.9803 4.70817L13.6921 1.19935C13.6628 1.11163 13.5457 0.936187 13.3114 1.02391L8.27543 3.01221C8.12908 3.07065 8.04124 3.2461 8.09976 3.39236V3.42164L4.44002 4.85444C4.29366 4.91289 4.20583 5.08833 4.26435 5.2346L4.29366 5.35159L2.56626 5.99491C2.24423 5.49786 1.74643 5.55631 1.54154 5.64403C1.13167 5.81947 0.897379 6.28734 1.04384 6.72595L1.83416 8.59705C2.15619 9.29882 2.80035 9.12338 2.88819 9.0941C3.09317 9.03566 3.53235 8.74322 3.44452 8.15845L5.17192 7.54441C5.17192 7.54441 5.23044 7.92456 5.58179 7.83684L5.78677 7.7784C5.87461 8.27545 6.19664 8.74332 6.63582 9.00648L4.08858 14.5913C4.03006 14.7374 4.08858 14.9129 4.23494 14.9714C4.26425 15.0007 4.49845 15.0592 4.61559 14.8253L7.19219 9.21115C7.54354 9.29887 7.83636 9.24042 7.9534 9.21115L10.53 14.8253C10.6764 15.0592 10.8813 15.0007 10.9107 14.9714C11.057 14.913 11.1156 14.7375 11.057 14.5913L8.50978 9.00648C9.0368 8.68488 9.38814 8.1 9.38814 7.48596C9.38814 7.19352 9.3003 6.90119 9.18316 6.6672L9.35883 6.60875C9.35883 6.63803 9.47597 6.90119 9.73948 6.81347L14.8048 5.08823C15.039 5.02978 15.0095 4.79589 14.9803 4.70817ZM2.71242 8.56788C2.56606 8.59715 2.4196 8.53861 2.39039 8.42171L1.6877 6.52113C1.62918 6.40414 1.71701 6.2287 1.83406 6.19952C2.00973 6.14108 2.12688 6.28724 2.15609 6.34569L2.85878 8.27555C2.88809 8.30472 2.88809 8.50934 2.71242 8.56788ZM3.23943 7.63213L2.82957 6.52103L4.52776 5.87772L4.93762 7.01808L3.23943 7.63213ZM7.57275 8.71405C6.89937 8.71405 6.37236 8.18773 6.37236 7.51523C6.37236 6.84274 6.89937 6.31642 7.57275 6.31642C8.24612 6.31642 8.77314 6.84274 8.77314 7.51523C8.77314 8.15845 8.21691 8.71405 7.57275 8.71405ZM8.77314 6.17015C8.45111 5.87771 8.01193 5.70227 7.57275 5.70227C6.69439 5.70227 5.96239 6.34559 5.81603 7.19352L5.69889 7.25197C5.61105 7.01808 5.05472 5.52683 4.9962 5.29284L8.33396 3.94776L9.09517 6.05306L8.77314 6.17015ZM9.76864 6.17015L8.77314 3.45081L13.2528 1.66713L14.3361 4.64963L9.76864 6.17015Z"})}),p=e=>(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,t.jsx)("path",{d:"M14 7.99997C14 7.74326 13.984 7.48655 13.9519 7.22995C13.5668 4.29412 11.0481 2 8 2C4.69519 2 2 4.69513 2 8C2 11.3048 4.69524 14 8 14C9.44379 14 10.7594 13.4866 11.8021 12.6363C11.8181 12.6363 11.8181 12.6203 11.8343 12.6203L11.8664 12.5882C13.1658 11.4812 14.0001 9.84481 14.0001 7.99995L14 7.99997ZM11.6898 11.8823L11.6417 11.7861C11.5776 11.6577 11.4973 11.4491 11.2246 11.401H11.1605C11.1605 11.3689 11.1445 11.3048 11.1445 11.1924C11.1445 10.8555 10.968 10.5828 10.8396 10.3903C10.7915 10.3262 10.7113 10.2138 10.7113 10.1817C10.8556 9.78064 11.4172 8.76992 11.6578 8.60955C11.7701 8.60955 11.8824 8.60955 12.0107 8.59354C12.2674 8.57754 12.5241 8.57754 12.7326 8.59354C13.0213 8.62566 13.1978 8.43307 13.3583 8.19247C13.2942 9.6524 12.6685 10.9518 11.6899 11.8823L11.6898 11.8823ZM11.9946 4.43847C11.8342 4.53471 11.7219 4.64706 11.6738 4.79142C11.6417 4.88765 11.6417 4.98389 11.6738 5.08013L11.6417 5.11225C11.4652 5.27272 11.1925 5.51332 11.2566 5.85027C11.1764 5.88239 11.0642 5.93051 10.9679 6.01074C10.8877 6.01074 10.7915 6.01074 10.631 6.05886C10.615 5.99474 10.5989 5.9145 10.5989 5.86639C10.5667 5.62579 10.5186 5.35296 10.3421 5.2086C10.3903 5.11236 10.5026 4.96801 10.647 4.87165C10.7272 4.82353 10.7753 4.79141 10.8235 4.77541C11.0321 4.66305 11.0962 4.61493 11.2085 4.45458C11.2566 4.37434 11.3369 4.16587 11.4171 3.84493C11.6096 4.0374 11.8022 4.22998 11.9946 4.43847ZM8.57753 2.67371C8.78612 2.68971 8.9786 2.73783 9.18719 2.76995C9.10695 2.99454 9.07483 3.26725 9.09095 3.49185C8.96259 3.50785 8.81823 3.49185 8.77012 3.45973C8.722 3.42761 8.706 3.39561 8.68988 3.39561C8.65777 3.34749 8.60965 3.29937 8.46529 3.15501C8.38505 3.05877 8.41717 2.91442 8.57764 2.6737L8.57753 2.67371ZM7.87162 2.64159C7.75927 2.91431 7.71115 3.26726 7.99998 3.58809L8.16045 3.74856C8.19257 3.81269 8.22457 3.8288 8.36904 3.94104C8.52951 4.0694 8.77011 4.13352 9.0107 4.13352C9.26741 4.13352 9.52412 4.0694 9.63636 3.98916C9.76472 3.89292 9.79684 3.73245 9.74872 3.60411C9.73272 3.45975 9.76472 3.07469 9.81284 2.96245C10.1658 3.09081 10.5188 3.25117 10.8396 3.45975C10.7755 3.74846 10.6952 4.0533 10.6631 4.11753C10.6631 4.13354 10.6471 4.13353 10.6471 4.13353C10.6311 4.14954 10.5669 4.18165 10.5027 4.21377C10.4546 4.24589 10.3904 4.27789 10.3103 4.32613C9.97331 4.5186 9.63646 4.96778 9.66861 5.33685C9.68461 5.49732 9.76485 5.62556 9.9092 5.70581C9.9252 5.76993 9.94132 5.89828 9.95732 5.97852C10.0054 6.26723 10.0536 6.57207 10.2943 6.71654C10.3584 6.74866 10.4386 6.76466 10.5029 6.76466C10.567 6.76466 10.6312 6.74866 10.7115 6.71654C10.8398 6.65242 10.9039 6.65242 10.9682 6.65242C11.0644 6.65242 11.2409 6.65242 11.4014 6.47594C11.4174 6.45994 11.4655 6.44383 11.4976 6.44383C11.6099 6.41171 11.8024 6.34759 11.8826 6.15511C11.9308 6.04276 11.9468 5.91452 11.8987 5.75405C11.9308 5.70593 12.027 5.62569 12.0751 5.57757C12.1554 5.51345 12.2195 5.43321 12.2837 5.36898C12.38 5.22462 12.3961 5.08027 12.3478 4.96791C12.3638 4.95191 12.396 4.95191 12.412 4.93579C12.8451 5.56146 13.15 6.29949 13.2943 7.0855C13.166 7.21385 13.0537 7.40632 12.9574 7.59892C12.9093 7.71128 12.813 7.87163 12.7488 7.93588C12.5242 7.91988 12.2515 7.91988 11.9948 7.93588C11.8664 7.93588 11.7381 7.95188 11.6258 7.95188C10.9199 7.95188 10.1339 9.9091 10.1178 9.94121C9.98942 10.262 10.1819 10.5348 10.3103 10.7273C10.4065 10.8717 10.5027 11.0161 10.5027 11.1605C10.5027 11.6899 10.6471 11.9145 11.0322 11.9948C11.0322 12.0108 11.0322 12.0108 11.0482 12.0269C11.0803 12.091 11.1123 12.1713 11.1765 12.2836C10.3744 12.8772 9.39576 13.2622 8.33691 13.3263C8.38503 12.9413 8.41715 12.2996 8.28879 11.9948C8.16043 11.6899 7.82361 11.6097 7.55076 11.5456C7.45453 11.5296 7.31017 11.4815 7.24592 11.4493C7.11757 10.952 6.41167 11.0643 5.73787 11.1606C5.54539 11.1927 5.24058 11.2409 5.17632 11.2247C5.01585 11.1766 4.80736 10.952 4.72712 10.7916C4.72712 10.6792 4.77524 10.3264 4.80736 10.1499C4.83947 10.0216 4.85548 9.92532 4.85548 9.84507C4.95172 9.78095 5.1763 9.70071 5.38489 9.70071C5.41701 9.74883 5.46513 9.86118 5.51325 9.9413C5.6256 10.1819 5.75384 10.4707 6.05867 10.6151C6.25115 10.7113 6.45974 10.6953 6.62023 10.583C7.05341 10.2622 6.90894 9.28355 6.89294 9.17119C6.84482 8.83424 6.92506 8.62577 7.0213 8.36905C7.0373 8.32093 7.06942 8.27281 7.08542 8.20858C7.24589 7.79149 7.11754 6.98936 7.0373 6.65243C7.08542 6.62031 7.16565 6.57219 7.21377 6.54007C7.40625 6.42772 7.63086 6.29948 7.7592 6.09088C8.03191 5.65769 7.64685 5.32085 7.45436 5.1604C7.39024 5.11228 7.31 5.03204 7.29389 5.01604C7.24577 4.87168 7.11741 4.67908 6.71635 4.59895C6.37939 4.53483 5.76985 4.56684 5.49712 4.90379C5.433 4.98403 5.36877 5.06427 5.14418 4.90379C4.77523 4.6632 3.94097 4.82356 3.45966 5.12839C4.39014 3.68459 6.01043 2.68986 7.87143 2.64173L7.87162 2.64159ZM2.64167 7.99988C2.64167 7.24587 2.80215 6.52395 3.09087 5.86619C3.17111 5.99455 3.34758 6.04267 3.47593 5.97855C3.54005 5.94643 3.58828 5.89831 3.6364 5.85019L3.70052 5.78607C3.97324 5.52936 4.64702 5.41711 4.79137 5.48123C5.44916 5.91441 5.85023 5.52935 6.0106 5.35287C6.09083 5.25663 6.55602 5.22451 6.71651 5.30475C6.78063 5.46522 6.9251 5.59346 7.05346 5.68981C7.10158 5.72192 7.16582 5.78604 7.19782 5.81816C7.1337 5.88228 7.00534 5.96252 6.89298 6.02675C6.65239 6.17111 6.28333 6.37969 6.39568 6.78076C6.49192 7.10159 6.57216 7.8075 6.49192 8.0321L6.4438 8.17646C6.33145 8.46517 6.18709 8.80213 6.28333 9.31555C6.33145 9.58827 6.31545 9.86098 6.28333 10.0053C6.21921 9.9251 6.17098 9.81286 6.12286 9.70049C6.0105 9.44378 5.83414 9.09084 5.44906 9.09084C5.01588 9.09084 4.26187 9.31543 4.26187 9.78062C4.26187 9.81274 4.22975 9.9731 4.21375 10.0693C4.11751 10.6148 4.08539 10.9036 4.16563 11.0801C4.27798 11.3047 4.59881 11.7539 5.04801 11.8662C5.22448 11.9143 5.46509 11.8822 5.86616 11.8181C6.10676 11.7859 6.52394 11.7218 6.68431 11.7378C6.81267 12.0427 7.16563 12.1229 7.42234 12.187C7.51858 12.203 7.67905 12.2511 7.72718 12.2833C7.7753 12.4276 7.7593 12.9249 7.71118 13.3421C4.88768 13.1978 2.64167 10.8555 2.64167 7.99988Z",fill:"currentColor"})}),h=e=>(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,t.jsx)("path",{d:"M9.75 12.1577C10.2359 12.2992 10.7497 12.375 11.2812 12.375C12.1438 12.375 12.9598 12.1753 13.6854 11.8196C13.6868 11.7861 13.6875 11.7525 13.6875 11.7188C13.6875 10.3898 12.6102 9.3125 11.2812 9.3125C10.454 9.3125 9.72434 9.72989 9.29125 10.3655M9.75 12.1577V12.1562C9.75 11.5071 9.58365 10.8967 9.29125 10.3655M9.75 12.1577C9.74999 12.1785 9.74981 12.1993 9.74946 12.22C8.66346 12.8739 7.39128 13.25 6.03125 13.25C4.67122 13.25 3.39904 12.8739 2.31304 12.22C2.31268 12.1988 2.3125 12.1775 2.3125 12.1562C2.3125 10.1024 3.97744 8.4375 6.03125 8.4375C7.43587 8.4375 8.6586 9.21625 9.29125 10.3655M8 5.03125C8 6.11856 7.11856 7 6.03125 7C4.94394 7 4.0625 6.11856 4.0625 5.03125C4.0625 3.94394 4.94394 3.0625 6.03125 3.0625C7.11856 3.0625 8 3.94394 8 5.03125ZM12.8125 6.34375C12.8125 7.18944 12.1269 7.875 11.2812 7.875C10.4356 7.875 9.75 7.18944 9.75 6.34375C9.75 5.49806 10.4356 4.8125 11.2812 4.8125C12.1269 4.8125 12.8125 5.49806 12.8125 6.34375Z",stroke:"currentColor",fill:"none",strokeWidth:"0.7",strokeLinecap:"round",strokeLinejoin:"round"})}),g=e=>(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.99876 1.16609L6.95986 1.14063C6.54083 0.880042 5.98417 0.990422 5.69981 1.39873L5.59176 1.55345L5.56449 1.59481C5.44261 1.79036 5.39827 2.02094 5.43963 2.24906C5.46988 2.41721 5.54704 2.5683 5.65703 2.69394L3.54908 5.71685L3.50694 5.70212C3.12603 5.57959 2.69396 5.7091 2.45394 6.05355L2.34627 6.208L2.32068 6.24665C2.05908 6.66389 2.17009 7.21902 2.57996 7.50298L5.66611 9.64092L5.71432 9.67219C5.86126 9.76138 6.02711 9.80765 6.19694 9.80765C6.25252 9.80765 6.30849 9.80261 6.36432 9.79253C6.60977 9.74846 6.82316 9.61196 6.96534 9.40775L7.07326 9.25329L7.10053 9.21193C7.22229 9.01638 7.26675 8.78567 7.22552 8.55754C7.19333 8.37957 7.11087 8.21942 6.99002 8.0903L7.47536 7.39455L13.1255 11.5954L13.1718 11.6257C13.3281 11.7212 13.5024 11.7675 13.6751 11.7675C13.981 11.7675 14.2823 11.6232 14.4698 11.3544L14.7549 10.9455L14.7832 10.9027C14.9092 10.7003 14.9552 10.4618 14.9124 10.2255C14.8667 9.97234 14.7248 9.75221 14.5058 9.60086L8.59227 5.79272L9.08926 5.08043L9.13772 5.09904C9.23557 5.13381 9.33806 5.1532 9.44276 5.1532C9.49795 5.1532 9.55404 5.14803 9.60975 5.13808C9.85533 5.09427 10.0687 4.95764 10.211 4.75343L10.3188 4.59897L10.3461 4.55761C10.468 4.36206 10.5123 4.13148 10.471 3.90335C10.4267 3.65857 10.2897 3.44594 10.0851 3.30402L6.99876 1.16609ZM7.76897 6.9736L8.29878 6.21373L14.22 10.0265L14.2518 10.0507C14.3332 10.1183 14.3876 10.2111 14.4066 10.3163C14.4279 10.4347 14.4017 10.5544 14.3328 10.653L14.0477 11.0619L14.0265 11.09C13.8791 11.2704 13.6141 11.3106 13.4261 11.1798L7.76897 6.9736ZM3.14569 6.17333C3.1709 6.16881 3.1961 6.16674 3.22104 6.16674C3.30583 6.16674 3.38842 6.19209 3.45938 6.24159L6.54576 8.37926L6.57523 8.40162C6.65072 8.46418 6.70151 8.55078 6.71909 8.64823C6.73912 8.75848 6.71469 8.86938 6.65072 8.96115L6.54292 9.1156L6.52043 9.14507C6.45748 9.22042 6.37088 9.2707 6.27304 9.28828C6.16305 9.30857 6.05137 9.28415 5.95935 9.22042L2.87297 7.08249L2.84557 7.06181C2.67897 6.92492 2.64277 6.68052 2.76815 6.5006L2.87581 6.34614L2.8983 6.31667C2.96125 6.24132 3.04798 6.19091 3.14569 6.17333ZM3.98879 5.98396L6.06135 3.01184L8.65335 4.80741L6.58093 7.7794L3.98879 5.98396ZM6.14405 1.66177C6.20687 1.58642 6.29347 1.53601 6.39157 1.51856C6.50208 1.49905 6.61311 1.52283 6.70513 1.58668L9.79138 3.72435L9.82085 3.74671C9.89659 3.80927 9.94726 3.89561 9.96484 3.99332C9.98461 4.10357 9.96019 4.21447 9.89646 4.30624L9.7888 4.46044L9.76631 4.49004C9.70323 4.56552 9.61663 4.61593 9.51853 4.63338C9.4075 4.65315 9.29699 4.62885 9.20497 4.56526L6.11872 2.42733L6.08925 2.40496C6.01351 2.34241 5.96284 2.25607 5.94526 2.15835C5.92549 2.0481 5.94991 1.93746 6.01364 1.84544L6.12156 1.69124L6.14405 1.66177Z",fill:"currentColor"}),(0,t.jsx)("path",{d:"M6.95986 1.14063L6.98725 1.09878L6.98626 1.09817L6.95986 1.14063ZM6.99876 1.16609L7.02725 1.12497L7.02615 1.12425L6.99876 1.16609ZM5.69981 1.39873L5.74081 1.42736L5.74085 1.42731L5.69981 1.39873ZM5.59176 1.55345L5.55075 1.52481L5.55002 1.52592L5.59176 1.55345ZM5.56449 1.59481L5.52273 1.56727L5.52206 1.56836L5.56449 1.59481ZM5.43963 2.24906L5.48884 2.24021L5.48883 2.24014L5.43963 2.24906ZM5.65703 2.69394L5.69805 2.72253L5.72043 2.69044L5.69465 2.661L5.65703 2.69394ZM3.54908 5.71685L3.53257 5.76405L3.56839 5.77657L3.59009 5.74545L3.54908 5.71685ZM3.50694 5.70212L3.52345 5.6549L3.52225 5.65452L3.50694 5.70212ZM2.45394 6.05355L2.49496 6.08214L2.49496 6.08213L2.45394 6.05355ZM2.34627 6.208L2.30524 6.1794L2.30458 6.1804L2.34627 6.208ZM2.32068 6.24665L2.27898 6.21904L2.27832 6.22009L2.32068 6.24665ZM2.57996 7.50298L2.55148 7.54408L2.55149 7.54408L2.57996 7.50298ZM5.66611 9.64092L5.63762 9.68204L5.63889 9.68286L5.66611 9.64092ZM5.71432 9.67219L5.68709 9.71416L5.68837 9.71494L5.71432 9.67219ZM6.36432 9.79253L6.35548 9.74332L6.35544 9.74333L6.36432 9.79253ZM6.96534 9.40775L6.92435 9.37911L6.9243 9.37918L6.96534 9.40775ZM7.07326 9.25329L7.11426 9.28194L7.115 9.28081L7.07326 9.25329ZM7.10053 9.21193L7.14229 9.23946L7.14298 9.23836L7.10053 9.21193ZM7.22552 8.55754L7.27472 8.54865L7.27472 8.54864L7.22552 8.55754ZM6.99002 8.0903L6.94902 8.06169L6.92585 8.0949L6.95352 8.12447L6.99002 8.0903ZM7.47536 7.39455L7.5052 7.35443L7.46384 7.32368L7.43436 7.36595L7.47536 7.39455ZM13.1255 11.5954L13.0956 11.6356L13.0982 11.6373L13.1255 11.5954ZM13.1718 11.6257L13.1444 11.6676L13.1457 11.6684L13.1718 11.6257ZM14.4698 11.3544L14.4287 11.3258L14.4287 11.3258L14.4698 11.3544ZM14.7549 10.9455L14.7959 10.9741L14.7966 10.9731L14.7549 10.9455ZM14.7832 10.9027L14.8249 10.9303L14.8256 10.9291L14.7832 10.9027ZM14.9124 10.2255L14.8632 10.2344L14.8632 10.2344L14.9124 10.2255ZM14.5058 9.60086L14.5343 9.55971L14.5329 9.55882L14.5058 9.60086ZM8.59227 5.79272L8.55126 5.76411L8.52157 5.80667L8.5652 5.83476L8.59227 5.79272ZM9.08926 5.08043L9.10718 5.03375L9.07064 5.01972L9.04825 5.05182L9.08926 5.08043ZM9.13772 5.09904L9.11979 5.14574L9.12098 5.14616L9.13772 5.09904ZM9.60975 5.13808L9.60097 5.08885L9.60096 5.08886L9.60975 5.13808ZM10.211 4.75343L10.17 4.72481L10.17 4.72484L10.211 4.75343ZM10.3188 4.59897L10.3598 4.62759L10.3606 4.62649L10.3188 4.59897ZM10.3461 4.55761L10.3879 4.58514L10.3885 4.58406L10.3461 4.55761ZM10.471 3.90335L10.4217 3.91224L10.4218 3.91227L10.471 3.90335ZM10.0851 3.30402L10.1136 3.26294L10.1136 3.26292L10.0851 3.30402ZM8.29878 6.21373L8.32585 6.17169L8.28533 6.1456L8.25776 6.18513L8.29878 6.21373ZM7.76897 6.9736L7.72795 6.945L7.70022 6.98479L7.73914 7.01372L7.76897 6.9736ZM14.22 10.0265L14.2503 9.98656L14.247 9.98445L14.22 10.0265ZM14.2518 10.0507L14.2837 10.0122L14.282 10.0109L14.2518 10.0507ZM14.4066 10.3163L14.4558 10.3074L14.4558 10.3074L14.4066 10.3163ZM14.3328 10.653L14.2918 10.6243L14.2918 10.6244L14.3328 10.653ZM14.0477 11.0619L14.0876 11.0921L14.0887 11.0905L14.0477 11.0619ZM14.0265 11.09L14.0652 11.1216L14.0664 11.1201L14.0265 11.09ZM13.4261 11.1798L13.3962 11.2199L13.3975 11.2208L13.4261 11.1798ZM3.14569 6.17333L3.13686 6.12412L3.13684 6.12412L3.14569 6.17333ZM3.45938 6.24159L3.43077 6.2826L3.43091 6.28269L3.45938 6.24159ZM6.54576 8.37926L6.57601 8.33939L6.57423 8.33816L6.54576 8.37926ZM6.57523 8.40162L6.60717 8.36309L6.60546 8.36179L6.57523 8.40162ZM6.71909 8.64823L6.66988 8.65711L6.66989 8.65717L6.71909 8.64823ZM6.65072 8.96115L6.69172 8.98976L6.69173 8.98974L6.65072 8.96115ZM6.54292 9.1156L6.5827 9.14597L6.58392 9.14422L6.54292 9.1156ZM6.52043 9.14507L6.55884 9.17716L6.56018 9.17541L6.52043 9.14507ZM6.27304 9.28828L6.2642 9.23907L6.26397 9.23911L6.27304 9.28828ZM5.95935 9.22042L5.93088 9.26153L5.93089 9.26153L5.95935 9.22042ZM2.87297 7.08249L2.84282 7.12243L2.8445 7.12359L2.87297 7.08249ZM2.84557 7.06181L2.8138 7.10047L2.81545 7.10172L2.84557 7.06181ZM2.76815 6.5006L2.72713 6.47201L2.72713 6.47201L2.76815 6.5006ZM2.87581 6.34614L2.83603 6.31578L2.8348 6.31755L2.87581 6.34614ZM2.8983 6.31667L2.85989 6.28459L2.85856 6.28634L2.8983 6.31667ZM6.06135 3.01184L6.08982 2.97074L6.04884 2.94235L6.02033 2.98324L6.06135 3.01184ZM3.98879 5.98396L3.94778 5.95536L3.91909 5.9965L3.96032 6.02506L3.98879 5.98396ZM8.65335 4.80741L8.69437 4.83601L8.72305 4.79487L8.68183 4.76631L8.65335 4.80741ZM6.58093 7.7794L6.55246 7.8205L6.59344 7.84888L6.62194 7.808L6.58093 7.7794ZM6.39157 1.51856L6.38287 1.46932L6.38281 1.46933L6.39157 1.51856ZM6.14405 1.66177L6.10561 1.62972L6.1043 1.63144L6.14405 1.66177ZM6.70513 1.58668L6.67663 1.62776L6.67666 1.62779L6.70513 1.58668ZM9.79138 3.72435L9.82163 3.68448L9.81985 3.68325L9.79138 3.72435ZM9.82085 3.74671L9.85271 3.70813L9.85107 3.70688L9.82085 3.74671ZM9.96484 3.99332L10.014 3.9845L10.014 3.98447L9.96484 3.99332ZM9.89646 4.30624L9.93746 4.33487L9.93753 4.33476L9.89646 4.30624ZM9.7888 4.46044L9.82864 4.49071L9.82979 4.48906L9.7888 4.46044ZM9.76631 4.49004L9.80471 4.52213L9.80612 4.52029L9.76631 4.49004ZM9.51853 4.63338L9.50977 4.58415L9.50976 4.58415L9.51853 4.63338ZM9.20497 4.56526L9.17649 4.60636L9.17654 4.6064L9.20497 4.56526ZM6.11872 2.42733L6.08847 2.46719L6.09025 2.46843L6.11872 2.42733ZM6.08925 2.40496L6.05738 2.44355L6.05903 2.4448L6.08925 2.40496ZM5.94526 2.15835L5.89605 2.16718L5.89605 2.16721L5.94526 2.15835ZM6.01364 1.84544L5.97267 1.81677L5.97253 1.81697L6.01364 1.84544ZM6.12156 1.69124L6.08178 1.66088L6.0806 1.66257L6.12156 1.69124ZM6.93248 1.18246L6.97138 1.20793L7.02615 1.12425L6.98724 1.09879L6.93248 1.18246ZM5.74085 1.42731C6.00984 1.04105 6.53679 0.936408 6.93345 1.18309L6.98626 1.09817C6.54487 0.823677 5.9585 0.939794 5.65878 1.37016L5.74085 1.42731ZM5.63275 1.58208L5.74081 1.42736L5.65882 1.3701L5.55077 1.52482L5.63275 1.58208ZM5.60623 1.62233L5.6335 1.58097L5.55002 1.52592L5.52275 1.56728L5.60623 1.62233ZM5.48883 2.24014C5.44969 2.02423 5.49161 1.80626 5.60692 1.62125L5.52206 1.56836C5.3936 1.77446 5.34686 2.01764 5.39044 2.25798L5.48883 2.24014ZM5.69465 2.661C5.59015 2.54164 5.51736 2.39872 5.48884 2.24021L5.39042 2.25791C5.4224 2.43569 5.50393 2.59497 5.61941 2.72687L5.69465 2.661ZM3.59009 5.74545L5.69805 2.72253L5.61602 2.66534L3.50806 5.68825L3.59009 5.74545ZM3.49044 5.74931L3.53257 5.76405L3.56558 5.66965L3.52345 5.65492L3.49044 5.74931ZM2.49496 6.08213C2.72184 5.75654 3.13065 5.6336 3.49163 5.74971L3.52225 5.65452C3.1214 5.52558 2.66607 5.66166 2.41292 6.02496L2.49496 6.08213ZM2.38729 6.2366L2.49496 6.08214L2.41292 6.02496L2.30525 6.17941L2.38729 6.2366ZM2.36237 6.27426L2.38796 6.23561L2.30458 6.1804L2.27899 6.21905L2.36237 6.27426ZM2.60843 7.46188C2.22059 7.19318 2.1156 6.66788 2.36304 6.27321L2.27832 6.22009C2.00256 6.65991 2.11959 7.24486 2.55148 7.54408L2.60843 7.46188ZM5.69458 9.59981L2.60843 7.46188L2.55149 7.54408L5.63763 9.68202L5.69458 9.59981ZM5.74153 9.63025L5.69332 9.59897L5.63889 9.68286L5.6871 9.71414L5.74153 9.63025ZM6.19694 9.75765C6.03629 9.75765 5.87941 9.71391 5.74026 9.62945L5.68837 9.71494C5.84311 9.80885 6.01792 9.85765 6.19694 9.85765V9.75765ZM6.35544 9.74333C6.30249 9.75289 6.24949 9.75765 6.19694 9.75765V9.85765C6.25555 9.85765 6.31449 9.85234 6.37321 9.84173L6.35544 9.74333ZM6.9243 9.37918C6.78973 9.57247 6.58795 9.70158 6.35548 9.74332L6.37316 9.84174C6.6316 9.79534 6.85659 9.65146 7.00637 9.43631L6.9243 9.37918ZM7.03228 9.22465L6.92435 9.37911L7.00632 9.43638L7.11425 9.28193L7.03228 9.22465ZM7.05879 9.18441L7.03152 9.22577L7.115 9.28081L7.14228 9.23945L7.05879 9.18441ZM7.17632 8.56643C7.21534 8.78235 7.17329 9.00047 7.05809 9.1855L7.14298 9.23836C7.27128 9.03228 7.31816 8.78899 7.27472 8.54865L7.17632 8.56643ZM6.95352 8.12447C7.06796 8.24674 7.14589 8.39817 7.17632 8.56644L7.27472 8.54864C7.24078 8.36096 7.15379 8.1921 7.02653 8.05613L6.95352 8.12447ZM7.43436 7.36595L6.94902 8.06169L7.03103 8.11891L7.51637 7.42316L7.43436 7.36595ZM13.1554 11.5553L7.5052 7.35443L7.44553 7.43468L13.0957 11.6356L13.1554 11.5553ZM13.1992 11.5838L13.1529 11.5536L13.0982 11.6373L13.1444 11.6675L13.1992 11.5838ZM13.6751 11.7175C13.5114 11.7175 13.3461 11.6736 13.1979 11.583L13.1457 11.6684C13.3101 11.7688 13.4935 11.8175 13.6751 11.8175V11.7175ZM14.4287 11.3258C14.2511 11.5806 13.9655 11.7175 13.6751 11.7175V11.8175C13.9966 11.8175 14.3136 11.6659 14.5108 11.383L14.4287 11.3258ZM14.7139 10.9169L14.4287 11.3258L14.5108 11.383L14.7959 10.9741L14.7139 10.9169ZM14.7415 10.8751L14.7132 10.9179L14.7966 10.9731L14.8249 10.9303L14.7415 10.8751ZM14.8632 10.2344C14.9038 10.4585 14.8602 10.6844 14.7407 10.8763L14.8256 10.9291C14.9582 10.7162 15.0066 10.4651 14.9616 10.2166L14.8632 10.2344ZM14.4774 9.64199C14.6856 9.78593 14.8199 9.99456 14.8632 10.2344L14.9616 10.2166C14.9135 9.95012 14.7639 9.71849 14.5342 9.55973L14.4774 9.64199ZM8.5652 5.83476L14.4787 9.6429L14.5329 9.55882L8.61934 5.75069L8.5652 5.83476ZM9.04825 5.05182L8.55126 5.76411L8.63327 5.82133L9.13026 5.10904L9.04825 5.05182ZM9.15565 5.05237L9.10718 5.03375L9.07133 5.12711L9.1198 5.14572L9.15565 5.05237ZM9.44276 5.1032C9.34428 5.1032 9.24745 5.08497 9.15446 5.05193L9.12098 5.14616C9.22369 5.18265 9.33184 5.2032 9.44276 5.2032V5.1032ZM9.60096 5.08886C9.548 5.09832 9.49485 5.1032 9.44276 5.1032V5.2032C9.50105 5.2032 9.56009 5.19774 9.61854 5.1873L9.60096 5.08886ZM10.17 4.72484C10.0353 4.91816 9.8335 5.04737 9.60097 5.08885L9.61853 5.1873C9.87716 5.14116 10.1022 4.99712 10.2521 4.78201L10.17 4.72484ZM10.2778 4.57035L10.17 4.72481L10.252 4.78204L10.3598 4.62758L10.2778 4.57035ZM10.3044 4.53009L10.2771 4.57145L10.3606 4.62649L10.3878 4.58513L10.3044 4.53009ZM10.4218 3.91227C10.4609 4.12819 10.419 4.34615 10.3037 4.53116L10.3885 4.58406C10.517 4.37796 10.5637 4.13478 10.5202 3.89443L10.4218 3.91227ZM10.0566 3.34511C10.2504 3.47949 10.3799 3.68055 10.4217 3.91224L10.5202 3.89447C10.4736 3.63659 10.3291 3.4124 10.1136 3.26294L10.0566 3.34511ZM6.97029 1.20719L10.0567 3.34513L10.1136 3.26292L7.02724 1.12499L6.97029 1.20719ZM8.25776 6.18513L7.72795 6.945L7.80998 7.0022L8.33979 6.24232L8.25776 6.18513ZM14.247 9.98445L8.32585 6.17169L8.27171 6.25577L14.1929 10.0685L14.247 9.98445ZM14.282 10.0109L14.2502 9.98668L14.1897 10.0663L14.2215 10.0905L14.282 10.0109ZM14.4558 10.3074C14.4347 10.1906 14.3742 10.0873 14.2837 10.0122L14.2198 10.0891C14.2922 10.1492 14.3405 10.2315 14.3574 10.3252L14.4558 10.3074ZM14.3738 10.6816C14.4503 10.5721 14.4795 10.4389 14.4558 10.3074L14.3574 10.3251C14.3764 10.4304 14.3531 10.5366 14.2918 10.6243L14.3738 10.6816ZM14.0887 11.0905L14.3738 10.6816L14.2918 10.6244L14.0066 11.0333L14.0887 11.0905ZM14.0664 11.1201L14.0876 11.0921L14.0078 11.0318L13.9866 11.0598L14.0664 11.1201ZM13.3975 11.2208C13.6078 11.3671 13.9019 11.3215 14.0652 11.1216L13.9877 11.0583C13.8563 11.2192 13.6205 11.2541 13.4546 11.1387L13.3975 11.2208ZM7.73914 7.01372L13.3962 11.2199L13.4559 11.1397L7.7988 6.93348L7.73914 7.01372ZM3.22104 6.11674C3.19333 6.11674 3.16516 6.11904 3.13686 6.12412L3.15453 6.22255C3.17663 6.21858 3.19886 6.21674 3.22104 6.21674V6.11674ZM3.48799 6.20058C3.40853 6.14515 3.31593 6.11674 3.22104 6.11674V6.21674C3.29574 6.21674 3.36832 6.23902 3.43077 6.2826L3.48799 6.20058ZM6.57423 8.33816L3.48785 6.20048L3.43091 6.28269L6.51729 8.42036L6.57423 8.33816ZM6.60546 8.36179L6.57599 8.33943L6.51554 8.41909L6.54501 8.44145L6.60546 8.36179ZM6.76829 8.63935C6.74862 8.53029 6.6917 8.4332 6.60714 8.36312L6.54333 8.44012C6.60974 8.49515 6.6544 8.57126 6.66988 8.65711L6.76829 8.63935ZM6.69173 8.98974C6.76328 8.88711 6.79071 8.76272 6.76828 8.63929L6.66989 8.65717C6.68753 8.75425 6.66611 8.85165 6.6097 8.93255L6.69173 8.98974ZM6.58392 9.14422L6.69172 8.98976L6.60971 8.93253L6.50192 9.08699L6.58392 9.14422ZM6.56018 9.17541L6.58267 9.14594L6.50318 9.08527L6.48068 9.11474L6.56018 9.17541ZM6.28188 9.33749C6.39119 9.31786 6.48827 9.26155 6.5588 9.17713L6.48206 9.11302C6.42669 9.17929 6.35058 9.22355 6.2642 9.23907L6.28188 9.33749ZM5.93089 9.26153C6.03373 9.33274 6.15889 9.36019 6.28211 9.33745L6.26397 9.23911C6.16721 9.25696 6.06902 9.23555 5.98781 9.17932L5.93089 9.26153ZM2.8445 7.12359L5.93088 9.26153L5.98782 9.17932L2.90144 7.04139L2.8445 7.12359ZM2.81545 7.10172L2.84285 7.1224L2.90309 7.04258L2.87569 7.0219L2.81545 7.10172ZM2.72713 6.47201C2.58669 6.67354 2.62728 6.94717 2.81383 7.10044L2.87731 7.02318C2.73065 6.90268 2.69886 6.68749 2.80917 6.52918L2.72713 6.47201ZM2.8348 6.31755L2.72713 6.47201L2.80917 6.52919L2.91683 6.37473L2.8348 6.31755ZM2.85856 6.28634L2.83607 6.31581L2.91556 6.37647L2.93805 6.34701L2.85856 6.28634ZM3.13684 6.12412C3.02764 6.14377 2.93044 6.20021 2.85993 6.28462L2.93668 6.34873C2.99206 6.28243 3.06831 6.23806 3.15454 6.22254L3.13684 6.12412ZM6.02033 2.98324L3.94778 5.95536L4.02981 6.01256L6.10236 3.04044L6.02033 2.98324ZM8.68183 4.76631L6.08982 2.97074L6.03287 3.05294L8.62488 4.84851L8.68183 4.76631ZM6.62194 7.808L8.69437 4.83601L8.61234 4.77881L6.53992 7.7508L6.62194 7.808ZM3.96032 6.02506L6.55246 7.8205L6.6094 7.7383L4.01726 5.94286L3.96032 6.02506ZM6.38281 1.46933C6.27316 1.48884 6.17604 1.54531 6.10565 1.62975L6.18245 1.69379C6.23769 1.62753 6.31377 1.58318 6.40032 1.56779L6.38281 1.46933ZM6.73364 1.5456C6.63061 1.47412 6.50618 1.44755 6.38287 1.46932L6.40026 1.5678C6.49798 1.55054 6.5956 1.57154 6.67663 1.62776L6.73364 1.5456ZM9.81985 3.68325L6.7336 1.54558L6.67666 1.62779L9.76291 3.76546L9.81985 3.68325ZM9.85107 3.70688L9.8216 3.68452L9.76116 3.76419L9.79062 3.78655L9.85107 3.70688ZM10.014 3.98447C9.99437 3.87513 9.93756 3.77826 9.85269 3.70816L9.78901 3.78527C9.85562 3.84028 9.90014 3.91609 9.91563 4.00218L10.014 3.98447ZM9.93753 4.33476C10.0088 4.23216 10.0362 4.10784 10.014 3.9845L9.91562 4.00215C9.93305 4.09931 9.9116 4.19678 9.85539 4.27772L9.93753 4.33476ZM9.82979 4.48906L9.93746 4.33487L9.85547 4.27762L9.7478 4.43181L9.82979 4.48906ZM9.80612 4.52029L9.82861 4.49069L9.74898 4.43019L9.72649 4.45979L9.80612 4.52029ZM9.52729 4.6826C9.63695 4.6631 9.73404 4.60662 9.80467 4.5221L9.72794 4.45798C9.67242 4.52442 9.59631 4.56876 9.50977 4.58415L9.52729 4.6826ZM9.17654 4.6064C9.27939 4.67747 9.40327 4.70469 9.5273 4.6826L9.50976 4.58415C9.41174 4.60161 9.31459 4.58024 9.23339 4.52413L9.17654 4.6064ZM6.09025 2.46843L9.17649 4.60636L9.23344 4.52416L6.14719 2.38622L6.09025 2.46843ZM6.05903 2.4448L6.0885 2.46716L6.14894 2.38749L6.11947 2.36513L6.05903 2.4448ZM5.89605 2.16721C5.91572 2.27655 5.97254 2.37342 6.05741 2.44352L6.12109 2.36641C6.05448 2.3114 6.00996 2.23558 5.99447 2.1495L5.89605 2.16721ZM5.97253 1.81697C5.90135 1.91977 5.87392 2.0438 5.89605 2.16718L5.99448 2.14953C5.97706 2.0524 5.99848 1.95515 6.05474 1.8739L5.97253 1.81697ZM6.0806 1.66257L5.97267 1.81677L6.0546 1.87411L6.16252 1.71991L6.0806 1.66257ZM6.1043 1.63144L6.08181 1.66091L6.16131 1.72157L6.1838 1.6921L6.1043 1.63144Z",fill:"currentColor"}),(0,t.jsx)("path",{d:"M8.8 12.4675H2.2C1.92386 12.4675 1.7 12.6913 1.7 12.9675V13.5675C1.7 13.8436 1.92386 14.0675 2.2 14.0675H8.8C9.07614 14.0675 9.3 13.8436 9.3 13.5675V12.9675C9.3 12.6913 9.07614 12.4675 8.8 12.4675Z",stroke:"currentColor",fill:"none",strokeWidth:"0.6"})]});var f=e.i(935132);let v=e=>{let{className:n}=e;return(0,t.jsxs)("svg",{width:"16px",height:"16px",viewBox:"0 0 18 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:n,children:[(0,t.jsx)("path",{d:"M7.23828 5.39596C7.23828 7.67189 8.78652 9.54086 9.00274 9.79192C9.21898 9.54088 10.7672 7.67176 10.7672 5.39596C10.7672 3.12002 9.21895 1.25106 9.00274 1C8.78649 1.25104 7.23828 3.12016 7.23828 5.39596Z",stroke:"currentColor"}),(0,t.jsx)("path",{d:"M9.00274 19.4755C9.21898 19.2245 10.7695 17.3554 10.7695 15.0796C10.7695 12.8036 9.21899 10.9346 9.00274 10.6836C8.78649 10.9346 7.23828 12.8037 7.23828 15.0796C7.23828 17.3555 8.78652 19.2245 9.00274 19.4755Z",stroke:"currentColor"}),(0,t.jsx)("path",{d:"M17.0002 5.61797C16.6746 5.55521 14.2826 5.14839 12.3112 6.28513C10.3398 7.42419 9.49598 9.70029 9.38672 10.0117C9.71224 10.0745 12.1066 10.4813 14.0756 9.34456C16.0471 8.2055 16.8909 5.9294 17.0002 5.61797Z",stroke:"currentColor"}),(0,t.jsx)("path",{d:"M17.0002 14.8529C16.8932 14.5391 16.047 12.2632 14.0756 11.1263C12.1066 9.98959 9.712 10.3941 9.38672 10.4569C9.496 10.7707 10.3422 13.0466 12.3112 14.1835C14.2827 15.3225 16.6749 14.9157 17.0002 14.8529Z",stroke:"currentColor"}),(0,t.jsx)("path",{d:"M1 14.852C1.32552 14.9147 3.71989 15.3215 5.68891 14.1825C7.66035 13.0457 8.50417 10.7696 8.61344 10.4559C8.28792 10.3955 5.89586 9.98863 3.92452 11.1254C1.95309 12.2644 1.10926 14.5405 1 14.852Z",stroke:"currentColor"}),(0,t.jsx)("path",{d:"M1 5.62168C1.10928 5.93315 1.95312 8.20911 3.92452 9.34826C5.89352 10.485 8.28815 10.0782 8.61344 10.0177C8.50416 9.70394 7.66031 7.428 5.68891 6.29115C3.71992 5.15209 1.32528 5.55893 1 5.62168Z",stroke:"currentColor"})]})};var x=e.i(343794);let y=()=>(0,f.forumSelect)({EAForum:{"biosecurity-and-pandemics":o,"existential-risk":i,"global-catastrophic-risk":i,"cause-prioritization":r,"moral-philosophy":a,philosophy:a,"wild-animal-welfare":s,"farmed-animal-welfare":l,"animal-welfare":s,"effective-altruism-groups":h,"building-effective-altruism":h,community:v,"career-choice":d,"taking-action":d,"ai-risk":c,"ai-safety":c,"global-health-and-development":p,policy:g,"effective-giving":u,"forecasting-and-estimation":m},default:{}}),b=(0,n.registerComponent)("CoreTagIcon",e=>{let{tag:n,fallbackNode:o,className:i,classes:r}=e,a=y()[n.slug];return a?(0,t.jsx)(a,{className:(0,x.default)(i,{[r.noFill]:a===v})}):o?(0,t.jsx)(t.Fragment,{children:o}):null},{styles:e=>({noFill:{fill:"none !important"}})});e.s(["default",0,b,"getCoreTagIconMap",0,y],489885)},645446,e=>{"use strict";e.s(["coreTagStyle",()=>f,"default",()=>x,"smallTagTextStyle",()=>g,"tagStyle",()=>h]);var t=e.i(843476),n=e.i(159211),o=e.i(161517),i=e.i(552275),r=e.i(343794),a=e.i(35693),s=e.i(530841),l=e.i(489885),d=e.i(791434),c=e.i(956277),u=e.i(79732),m=e.i(429329),p=e.i(813292);let h=e=>({marginRight:e.isFriendlyUI?3:void 0,padding:5,paddingLeft:6,paddingRight:6,marginBottom:e.isFriendlyUI?8:void 0,fontWeight:e.typography.body1.fontWeight,backgroundColor:e.palette.tag.background,border:e.palette.tag.border,color:e.palette.tag.text,borderRadius:3,...e.typography.commentStyle,cursor:"pointer",whiteSpace:e.isFriendlyUI?"nowrap":void 0}),g=e=>({fontSize:12,paddingTop:1,paddingBottom:2,fontWeight:e.typography.body1.fontWeight,marginBottom:0}),f=e=>({backgroundColor:e.palette.tag.coreTagBackground,border:e.palette.tag.coreTagBorder,color:e.palette.tag.coreTagText,"&:hover":{backgroundColor:e.palette.tag.coreTagBackgroundHover,borderColor:e.palette.tag.coreTagBackgroundHover}}),v=(0,m.defineStyles)("FooterTag",e=>({root:{display:"inline-block",cursor:"pointer",...e.typography.commentStyle,"&:hover":{opacity:1,backgroundColor:e.palette.tag.backgroundHover},"& a:hover":e.isFriendlyUI?{opacity:1}:{},...i.useExperimentalTagStyleSetting.get()&&e.isBookUI?{marginRight:4,padding:5,paddingLeft:8,paddingRight:7,marginBottom:8,borderRadius:4,boxShadow:e.palette.tag.boxShadow,color:e.palette.primary.main,fontSize:15}:h(e)},tooltip:{marginTop:e.isFriendlyUI?6:void 0},core:{...f(e)},coreIcon:{position:"relative",display:"inline-block",minWidth:20,margin:e.isFriendlyUI?"0 3px 0 6px":void 0,"& svg":{position:"absolute",top:-13,left:-4,width:20,height:18,fill:e.palette.tag.coreTagText}},score:{paddingLeft:5,color:e.palette.text.slightlyDim2},name:{display:"inline-block"},smallText:{...g(e)},robotIcon:{"& svg":{height:12,opacity:.7,marginLeft:4}},noBackground:{backgroundColor:"transparent",border:"none",paddingTop:3,paddingBottom:3}}),{stylePriority:-1}),x=e=>{let{tagRel:i,tag:m,hideScore:h=!1,hideIcon:g,smallText:f,PreviewWrapper:x,link:y=!0,highlightAsAutoApplied:b=!1,neverCoreStyling:C=!1,hideRelatedTags:w,className:k,noBackground:j=!1,hoverable:S}=e,I=(0,u.useStyles)(v),T=(0,s.useCurrentUser)();if(m.adminOnly&&!(null==T?void 0:T.isAdmin))return null;let N=!!(m.core&&!f&&(0,l.getCoreTagIconMap)()[m.slug]&&!g),L=(0,d.isFriendlyUI)()&&f&&m.shortName||m.name,R=(0,t.jsxs)(t.Fragment,{children:[N&&(0,t.jsx)("span",{className:I.coreIcon,children:(0,t.jsx)(l.default,{tag:m})}),(0,t.jsx)("span",{className:I.name,children:L}),!h&&i&&(0,t.jsx)("span",{className:I.score,children:i.baseScore})]}),_=(0,t.jsx)("span",{className:(0,r.default)(I.root,k,{[I.core]:!C&&m.core,[I.smallText]:f,[I.noBackground]:j}),children:y?(0,t.jsxs)(n.Link,{to:(0,a.tagGetUrl)(m),children:[R,b&&(0,t.jsx)("span",{className:I.robotIcon,children:(0,t.jsx)(p.default,{icon:"Robot"})})]}):R}),A=!0===S||"ifDescriptionPresent"===S&&m&&"description"in m?(0,t.jsx)(c.default,{tag:m,tagRel:i,PreviewWrapper:x,hideRelatedTags:w,popperClassName:I.tooltip,children:_}):_;return(0,t.jsx)(o.AnalyticsContext,{tagName:m.name,tagId:m._id,tagSlug:m.slug,pageElementContext:"tagItem",children:A})}},146332,e=>{"use strict";var t=e.i(673991),n=e.i(182584),o=e.i(552275);e.s(["shouldHideTagForVoting",0,(e,i,r)=>((e,i,r,a)=>{if(!e||!i)return{fail:!1};let s=(0,t.userGetGroups)(i);for(let t of e)if(s.includes(t))return{fail:!1};if(!r)return{fail:!0,reason:"Could not find post"};let l=i._id===(null==r?void 0:r.userId)||(0,n.userIsPostCoauthor)(i,r);if(e.includes("userOwns")&&l)return{fail:!1};if(e.includes("userOwnsOnlyUpvote")&&l)if(["smallUpvote","bigUpvote","neutral"].includes(a))return{fail:!1};else return{fail:!0,reason:"You cannot downvote the relevance of this ".concat(o.taggingNameSetting.get())};return{fail:!0,reason:"You do not have permission to apply or vote on this ".concat(o.taggingNameSetting.get())}})(null==i?void 0:i.canVoteOnRels,e,r,"smallUpvote").fail],146332)},923480,e=>{"use strict";e.s(["default",()=>p]);var t=e.i(843476),n=e.i(538794),o=e.i(898298),i=e.i(530841),r=e.i(146332),a=e.i(164783),s=e.i(946271);e.i(813868);var l=e.i(122756),d=e.i(374132),c=e.i(940755),u=e.i(239832);let m=(0,l.gql)("\n  query TagSearchHit($documentId: String) {\n    tag(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...TagPreviewFragment\n      }\n    }\n  }\n"),p=(0,n.registerComponent)("TagSearchHit",e=>{var n,l,p;let{hit:h,onClick:g,hidePostCount:f=!1,isVotingContext:v,classes:x}=e,{data:y}=(0,s.useQuery)(m,{variables:{documentId:h._id},fetchPolicy:"cache-first"}),b=null==y||null==(l=y.tag)?void 0:l.result,{eventHandlers:C,hover:w,anchorEl:k}=(0,o.useHover)(),j=(0,i.useCurrentUser)(),S=null!=(n=null==(p=(0,a.usePostsPageContext)())?void 0:p.fullPost)?n:null;return v&&(0,r.shouldHideTagForVoting)(j,null!=b?b:h,S)?null:(0,t.jsxs)("span",{...C,children:[(0,t.jsx)(d.default,{open:w,anchorEl:k,placement:"right-start",children:(0,t.jsxs)("div",{className:x.card,children:[!b&&(0,t.jsx)(u.default,{}),b&&(0,t.jsx)(c.default,{tag:b,postCount:3})]})}),(0,t.jsxs)("span",{className:x.root,onClick:e=>null==g?void 0:g(e),children:[h.name," ",!f&&(0,t.jsxs)("span",{className:x.postCount,children:["(",h.postCount||0,")"]})]})]})},{styles:e=>({root:{display:"block",padding:8,cursor:"pointer",...e.typography.commentStyle,color:e.palette.grey[900],"&:hover":{color:e.palette.lwTertiary.main}},card:{[e.breakpoints.down("xs")]:{display:"none"}},tagDescription:{marginBottom:12},postCount:{fontSize:".85em",color:e.palette.grey[500]}})})},164501,e=>{"use strict";e.s(["default",()=>j],164501);var t=e.i(843476),n=e.i(271645),o=e.i(538794),i=e.i(444098),r=e.i(530841),a=e.i(773736),s=e.i(161517),l=e.i(552275),d=e.i(791434),c=e.i(903780),u=e.i(730342),m=e.i(219331),p=e.i(696325),h=e.i(949353),g=e.i(757092),f=e.i(159211),v=e.i(35693),x=e.i(358466),y=e.i(923480),b=e.i(17662);let C=(0,o.registerComponent)("AddTagOrWikiPage",e=>{let{onTagSelected:o,isVotingContext:i,onlyTags:s,numSuggestions:d=6,showAllTagsAndCreateTags:c=!0,classes:C}=e,w=(0,r.useCurrentUser)(),[k,j]=n.default.useState(!1),S=n.default.useCallback(e=>{var t,n;j((null!=(t=null==(n=e.query)?void 0:n.length)?t:0)>0)},[]),I=(0,n.useRef)(null),T=n.default.useRef(null);return(n.default.useEffect(()=>{if(T.current){let e=T.current.getElementsByTagName("input")[0];setTimeout(()=>{e.focus()},0)}},[]),(0,g.isSearchEnabled)())?(0,t.jsxs)("div",{className:C.root,ref:T,children:[(0,t.jsxs)(u.InstantSearch,{indexName:(0,g.getSearchIndexName)("Tags"),searchClient:(0,g.getSearchClient)(),onSearchStateChange:S,children:[(0,t.jsx)(m.SearchBox,{inputRef:I,reset:null,focusShortcuts:[]}),(0,t.jsx)(h.Configure,{facetFilters:s?[["wikiOnly:false"]]:[],hitsPerPage:k?12:d}),(0,t.jsx)(p.Hits,{hitComponent:e=>{let{hit:n}=e;return(0,t.jsx)(y.default,{hit:n,onClick:e=>{o({tagId:n._id,tagName:n.name,tagSlug:n.slug}),e.stopPropagation()},isVotingContext:i})}})]}),c&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.default,{}),(0,t.jsxs)(f.Link,{target:"_blank",to:(0,x.getAllTagsPath)(),className:C.newTag,children:["All ",l.taggingNamePluralCapitalSetting.get()]}),(0,a.userCanCreateTags)(w)&&(0,v.tagUserHasSufficientKarma)(w,"new")&&(0,t.jsxs)(f.Link,{target:"_blank",to:(0,v.getTagCreateUrl)(),className:C.newTag,children:["Create ",l.taggingNameCapitalSetting.get()]})]})]}):(0,t.jsx)("div",{className:C.root,ref:T,children:(0,t.jsx)("input",{placeholder:"Tag ID",type:"text",onKeyPress:e=>{if(13===e.charCode){let t=e.target.value;o({tagId:t,tagName:"Tag",tagSlug:t}),e.preventDefault()}}})})},{styles:e=>({root:{"& .ais-SearchBox":{padding:8},"& .ais-SearchBox-input":{background:"transparent"},"& .ais-SearchBox-submit":{position:"absolute",right:11},"& .ais-SearchBox-submitIcon path":{fill:e.palette.grey[900]}},newTag:{display:"block",padding:8,cursor:"pointer",color:e.palette.grey[600],...e.typography.commentStyle}})});var w=e.i(105736),k=e.i(110601);let j=(0,o.registerComponent)("AddTagButton",e=>{let{onTagSelected:o,menuPlacement:u="bottom-start",isVotingContext:m,hasTooltip:p=!0,classes:h,children:g}=e,[f,v]=(0,n.useState)(!1),x=(0,n.useRef)(null),y=(0,r.useCurrentUser)(),{captureEvent:b}=(0,s.useTracking)();if(!(0,a.userCanUseTags)(y))return null;let j=(0,t.jsxs)("a",{onClick:()=>{v(!0),b("addTagClicked")},className:h.addTagButton,ref:x,children:[g||(0,t.jsxs)("span",{className:h.defaultButton,children:["+ ",(0,d.preferredHeadingCase)("Add ".concat(l.taggingNameCapitalSetting.get()))]}),(0,t.jsx)(c.default,{open:f,anchorEl:x.current,placement:u,allowOverflow:!0,children:(0,t.jsx)(w.default,{onClickAway:()=>v(!1),children:(0,t.jsx)(i.Paper,{children:(0,t.jsx)(C,{onlyTags:!0,onTagSelected:e=>{let{tagId:t,tagName:n}=e;v(!1),o({tagId:t,tagName:n})},isVotingContext:m})})})})]});return(0,d.isBookUI)()&&p?(0,t.jsx)(k.default,{title:"Add a tag",children:j}):j},{styles:e=>({addTagButton:{...e.typography.commentStyle,color:e.palette.grey[600],display:"inline-block",textAlign:"center","@media print":{display:"none"}},defaultButton:{paddingLeft:4}})})},18514,511055,580610,460678,e=>{"use strict";e.s(["default",()=>R],18514);var t,n,o,i=e.i(843476),r=e.i(271645),a=e.i(538794),s=e.i(645446),l=e.i(552275),d=e.i(343794),c=e.i(110601),u=e.i(147630),m=e.i(813292),p=e.i(79732),h=e.i(429329),g=e.i(299749);class f extends Error{is(e){return"CKEditorError"===e}static rethrowUnexpectedError(e,t){if(e.is&&e.is("CKEditorError"))throw e;throw new f("unexpected-error",t,void 0,e)}constructor(e,t,n,o){super(function(e,t,n){let o=new WeakSet,i=t?" ".concat(JSON.stringify(t,(e,t)=>{if("object"==typeof t&&null!==t){if(o.has(t))return"[object ".concat(t.constructor.name,"]");o.add(t)}return t})):"",r="\nRead more: ".concat("https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html","#error-").concat(e);return e+i+r+(n?"\nOriginal error: ".concat(n.name,": ").concat(n.message):"")}(e,n,o)),(0,g._)(this,"context",void 0),(0,g._)(this,"data",void 0),this.name="CKEditorError",this.context=t,this.data=n,o&&(this.stack=o.stack)}}let v=function(){try{return navigator.userAgent.toLowerCase()}catch{return""}}(),x={isMac:y(v),isWindows:v.indexOf("windows")>-1,isGecko:!!v.match(/gecko\/\d+/),isSafari:(t=v).indexOf(" applewebkit/")>-1&&-1===t.indexOf("chrome"),isiOS:!!(n=v).match(/iphone|ipad/i)||y(n)&&navigator.maxTouchPoints>0,isAndroid:v.indexOf("android")>-1,isBlink:(o=v).indexOf("chrome/")>-1&&0>o.indexOf("edge/"),get isMediaForcedColors(){return!!window.matchMedia&&window.matchMedia("(forced-colors: active)").matches},get isMotionReduced(){return!!window.matchMedia&&window.matchMedia("(prefers-reduced-motion)").matches},features:{isRegExpUnicodePropertySupported:function(){let e=!1;try{e=0==="".search(RegExp("[\\p{L}]","u"))}catch{}return e}()}};function y(e){return e.indexOf("macintosh")>-1}e.s(["env",0,x],511055);let b={ctrl:"",cmd:"",alt:"",shift:""},C={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},w={37:"",38:"",39:"",40:"",9:"",33:"Page Up",34:"Page Down"},k=function(){let e={pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let t=65;t<=90;t++)e[String.fromCharCode(t).toLowerCase()]=t;for(let t=48;t<=57;t++)e[t-48]=t;for(let t=112;t<=123;t++)e["f"+(t-111)]=t;return Object.assign(e,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),e}(),j=Object.fromEntries(Object.entries(k).map(e=>{let t,[n,o]=e;return t=o in w?w[o]:n.charAt(0).toUpperCase()+n.slice(1),[o,t]}));function S(e){let t;if("string"==typeof e){if(!(t=k[e.toLowerCase()]))throw new f("keyboard-unknown-key",null,{key:e})}else t=e.keyCode+(e.altKey?k.alt:0)+(e.ctrlKey?k.ctrl:0)+(e.shiftKey?k.shift:0)+(e.metaKey?k.cmd:0);return t}function I(e){return"string"==typeof e&&(e=e.split("+").map(e=>e.trim())),e.map(e=>"string"==typeof e?function(e){if(e.endsWith("!"))return S(e.slice(0,-1));let t=S(e);return(x.isMac||x.isiOS)&&t==k.ctrl?k.cmd:t}(e):e).reduce((e,t)=>t+e,0)}function T(e,t){let n=I(e);return Object.entries((t?"Mac"===t:x.isMac||x.isiOS)?b:C).reduce((e,t)=>{let[o,i]=t;return(n&k[o])!=0&&(n&=~k[o],e+=i),e},"")+(n?j[n]:"")}e.s(["getCode",()=>S,"getEnvKeystrokeText",()=>T,"parseKeystroke",()=>I],580610);let N=(0,h.defineStyles)("KeystrokeDisplay",e=>({root:{display:"flex",alignItems:"center",gap:4},keystrokeChar:{display:"flex",alignItems:"center",justifyContent:"center",minWidth:18,height:18,fontSize:10,color:e.palette.grey[600],fontFamily:e.typography.fontFamily,backgroundColor:e.palette.grey[100],borderRadius:3,border:"1px solid ".concat(e.palette.grey[300]),padding:"0 4px"},withMargin:{marginLeft:8},activeContext:{backgroundColor:e.palette.error.dark,borderColor:e.palette.error.dark,color:e.palette.error.contrastText}})),L=e=>{let{keystroke:t,withMargin:n=!1,activeContext:o=!1,splitBeforeTranslation:r=!1}=e,a=(0,p.useStyles)(N),s=r?t.split("+").map(e=>T(e)):T(t).split("");return(0,i.jsx)("span",{className:(0,d.default)(a.root,n&&a.withMargin),children:s.map(e=>(0,i.jsx)("span",{className:(0,d.default)(a.keystrokeChar,o&&a.activeContext),children:(0,i.jsx)("span",{children:e})},e))})};e.s(["default",0,L],460678);let R=(0,a.registerComponent)("TagsChecklist",e=>{let{onTagSelected:t=()=>{},onTagRemoved:n=()=>{},classes:o,selectedTagIds:a=[],tags:s,displaySelected:p="hide",tooltips:h=!0,truncate:g=!1,smallText:f=!1,shortNames:v=!1,keyboardShortcuts:x}=e,[y,b]=(0,r.useState)(!1),C=g&&!y,w="hide"===p?s.filter(e=>!a.includes(e._id)).map(e=>({tag:e,selected:!1})):s.map(e=>({tag:e,selected:a.includes(e._id)})),k=w.filter(e=>e.selected),j=w;if(C){let e=w.slice(0,5),t=k.filter(t=>!e.includes(t));j=t.length>0?t.concat(e):e}let S=C&&j.length<w.length,I=w.length-j.length,T=e=>{var t;let{tag:n}=e;return(f||v)&&null!=(t=n.shortName)?t:n.name};return(0,i.jsxs)(i.Fragment,{children:[null==j?void 0:j.map((e,r)=>{let s=null==x?void 0:x[e.tag._id];return e.selected?(0,i.jsxs)("div",{className:(0,d.default)(o.selectedTag,{[o.smallTag]:f,[o.finalTag]:r===j.length-1}),children:[T(e),s?(0,i.jsx)(L,{keystroke:s,withMargin:!0}):null,(0,i.jsx)("button",{className:o.removeTag,onClick:()=>{var t,o;return t=e.tag,n({tagId:t._id,tagName:t.name,parentTagId:null==(o=t.parentTag)?void 0:o._id},a)},children:(0,i.jsx)(m.default,{icon:"Close"})})]},e.tag._id):(0,i.jsx)(c.default,{disabled:!h,title:(0,i.jsxs)("div",{children:["Click to assign ",(0,i.jsx)("em",{children:e.tag.name})," ",l.taggingNameSetting.get(),!!e.tag.parentTag&&(0,i.jsxs)("span",{children:[". Its parent ",l.taggingNameSetting.get()," ",(0,i.jsx)("em",{children:e.tag.parentTag.name})," will also be assigned automatically"]})]}),hideOnTouchScreens:!0,children:(0,i.jsxs)("div",{className:(0,d.default)(o.tag,{[o.smallTag]:f,[o.finalTag]:r===j.length-1,[o.tagWithShortcut]:s}),onClick:()=>{var n,o;return n=e.tag,t({tagId:n._id,tagName:n.name,parentTagId:null==(o=n.parentTag)?void 0:o._id},a)},children:[T(e),s?(0,i.jsx)(L,{keystroke:s,withMargin:!0}):null]})},e.tag._id)}),S&&(0,i.jsx)(u.default,{message:"".concat(I," more"),loadMore:()=>b(!0),className:(0,d.default)(o.loadMore,{[o.smallLoadMore]:f})})]})},{styles:e=>({root:{marginBottom:8,display:"flex",flexWrap:"wrap"},checkbox:{padding:"0 8px 2px 0","& svg":{height:14,width:14}},tag:{...(0,s.tagStyle)(e),backgroundColor:"unset",color:e.palette.grey[500],border:e.palette.border.extraFaint,"&:hover":{border:e.palette.border.grey300,color:e.palette.grey[800]},...e.isFriendlyUI?{...(0,s.coreTagStyle)(e),opacity:.6}:{}},tagWithShortcut:{display:"inline-flex",alignItems:"baseline",position:"relative"},selectedTag:{display:"inline-flex",alignItems:"baseline",position:"relative",columnGap:4,...(0,s.tagStyle)(e),...e.isFriendlyUI?(0,s.coreTagStyle)(e):{},cursor:"default"},smallTag:{...(0,s.smallTagTextStyle)(e),"& .TagsChecklist-removeTag svg":{top:2}},finalTag:{marginRight:8},removeTag:{background:"transparent",color:"inherit",width:15,"&:hover":{opacity:.5},"& svg":{position:"absolute",top:7,right:6,width:13,height:13}},loadMore:{color:e.palette.grey[500],whiteSpace:"nowrap"},smallLoadMore:{fontSize:13,fontWeight:600},loadingSpinner:{display:"inline-block",marginLeft:8,"& svg":{width:14,height:14}}})})},516660,925829,e=>{"use strict";e.s(["default",()=>d],516660);var t=e.i(843476),n=e.i(538794),o=e.i(645446),i=e.i(18514),r=e.i(239832),a=e.i(946271);e.i(813868);let s=(0,e.i(122756).gql)("\n  query multiTagCoreTagsChecklistQuery($selector: TagSelector, $limit: Int, $enableTotal: Boolean) {\n    tags(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...TagFragment\n      }\n      totalCount\n    }\n  }\n");function l(e){return(0,a.useQuery)(s,{variables:{selector:{coreTags:{}},limit:100,enableTotal:!1},notifyOnNetworkStatusChange:!0,...e})}e.s(["useCoreTags",()=>l],925829);let d=(0,n.registerComponent)("CoreTagsChecklist",e=>{var n;let{onTagSelected:o,classes:a,existingTagIds:s=[]}=e,{data:d,loading:c}=l(),u=null==d||null==(n=d.tags)?void 0:n.results;return c?(0,t.jsx)(r.default,{}):u?(0,t.jsx)(i.default,{tags:u,onTagSelected:o,selectedTagIds:s}):null},{styles:e=>({root:{marginBottom:8,display:"flex",flexWrap:"wrap"},checkbox:{padding:"0 8px 2px 0","& svg":{height:14,width:14}},tag:{...(0,o.tagStyle)(e),backgroundColor:"unset",color:e.palette.grey[500],border:e.palette.border.extraFaint,"&:hover":{border:e.palette.border.grey300,color:e.palette.grey[800]}}})})},994034,e=>{"use strict";e.i(89458);var t=e.i(552275);e.i(710832),e.i(345955),e.i(973327),e.i(424935),e.s(["getMarketInfo",0,e=>{if("number"==typeof e.annualReviewMarketProbability&&"boolean"==typeof e.annualReviewMarketIsResolved&&"number"==typeof e.annualReviewMarketYear&&"string"==typeof e.annualReviewMarketUrl)return{probability:e.annualReviewMarketProbability,isResolved:e.annualReviewMarketIsResolved,year:e.annualReviewMarketYear,url:e.annualReviewMarketUrl}},"highlightMarket",0,e=>!!e&&!e.isResolved&&e.probability>t.highlightReviewWinnerThresholdSetting.get()])},823876,e=>{"use strict";e.s(["default",()=>D],823876);var t=e.i(843476),n=e.i(271645),o=e.i(514089),i=e.i(107799),r=e.i(946271);e.i(813868);var a=e.i(122756),s=e.i(530841),l=e.i(161517),d=e.i(460872),c=e.i(645446),u=e.i(343794),m=e.i(444098),p=e.i(159211),h=e.i(935132),g=e.i(144437),f=e.i(552275),v=e.i(283343),x=e.i(283593),y=e.i(35693),b=e.i(517794),C=e.i(87828),w=e.i(239832),k=e.i(164501),j=e.i(516660),S=e.i(994034),I=e.i(538794),T=e.i(898298),N=e.i(690118);let L=e=>({fontFamily:e.typography.fontFamily,width:"fit-content",display:"inline-block",padding:"5px",boxSizing:"border-box",paddingLeft:6,paddingRight:6,marginRight:e.isFriendlyUI?3:void 0,marginBottom:e.isFriendlyUI?8:void 0,fontWeight:e.typography.body1.fontWeight,...e.typography.commentStyle,cursor:"pointer",whiteSpace:e.isFriendlyUI?"nowrap":void 0}),R=(0,I.registerComponent)("PostsAnnualReviewMarketTag",e=>{let{annualReviewMarketInfo:o,classes:i}=e,{anchorEl:r,hover:a,eventHandlers:s}=(0,T.useHover)(),l=o.year,d=o.url,c=(0,n.useMemo)(()=>{let[,e]=d.match(/^https?:\/\/manifold\.markets\/(\w+\/[\w-]+)/)||[];return e},[d]),u=(0,S.highlightMarket)(o)?"expectedWinner":"expectedLoser",p='<p><a href="'.concat(d,'">Will this post make the top fifty of the ').concat(l+1,' Annual Review?</a><p>The <a href="https://www.lesswrong.com/bestoflesswrong">LessWrong Review</a> runs every year to select the posts that have most stood the test of time. This post is not yet eligible for review, but will be at the end of ').concat(l+1,'. The top fifty or so posts are featured prominently on the site throughout the year.</p><p>Hopefully, the review is better than karma at judging enduring value. If we have accurate prediction markets on the review results, maybe we can have better incentives on LessWrong today.</p>\n  <div data-manifold-id="').concat(c,'" class="manifold-preview">\n    <iframe style="height: 405px; width: 100%; border: none;" src="https://manifold.markets/embed/').concat(c,'"/>\n  </div>\n  ');return(0,t.jsx)("span",{children:(0,t.jsx)("div",{className:i[u],...s,children:(0,t.jsx)(b.default,{title:(0,t.jsx)(m.Card,{className:i.card,children:(0,t.jsx)(C.default,{contentType:"comment",children:(0,t.jsx)(N.ContentItemBody,{dangerouslySetInnerHTML:{__html:p}})})}),tooltip:!1,clickable:!0,children:(0,t.jsxs)("a",{href:d,className:i.preview,children:[o.year," Top Fifty: ",parseFloat((100*o.probability).toFixed(0)),"%"]})})})})},{styles:e=>({expectedWinner:{...L(e),color:e.palette.review.winner,border:"1px solid",borderColor:e.palette.review.winner,borderRadius:"4px"},expectedLoser:{...L(e),color:e.palette.tag.text},preview:{maxWidth:400},card:{padding:16,...e.isFriendlyUI?{paddingTop:12,width:x.FRIENDLY_HOVER_OVER_WIDTH}:{width:450,paddingTop:8}}})});var _=e.i(56075),A=e.i(813292),M=e.i(429329),P=e.i(79732);let E=(0,M.defineStyles)("FooterTagList",e=>({root:e.isFriendlyUI?{marginTop:8,marginBottom:8}:{display:"flex",gap:4,flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center"},alignRight:{justifyContent:"flex-end"},allowTruncate:{display:e.isFriendlyUI?"block":"inline-flex",maxHeight:33,overflow:"hidden"},overrideMargins:{marginTop:0,marginBottom:0},postTypeLink:{"&:hover":e.isFriendlyUI?{opacity:1}:{}},frontpageOrPersonal:{...(0,c.tagStyle)(e),backgroundColor:e.palette.tag.hollowTagBackground,...e.isFriendlyUI?{marginBottom:0,"&:hover":{opacity:1,backgroundColor:e.palette.tag.hollowTagBackgroundHover},"& a:hover":{opacity:1}}:{paddingTop:4.5,paddingBottom:4.5},border:e.palette.tag.hollowTagBorder,color:e.palette.text.dim3},neverCoreStyling:{color:e.palette.tag.text},noBackground:{"&&&":{backgroundColor:"transparent",border:"none"}},card:{padding:16,...e.isFriendlyUI?{paddingTop:12,width:x.FRIENDLY_HOVER_OVER_WIDTH}:{width:450,paddingTop:8}},smallText:{...(0,c.smallTagTextStyle)(e)},showAll:{fontFamily:e.palette.fonts.sansSerifStack,fontSize:14,fontWeight:600,color:e.palette.grey[500],cursor:"pointer",width:"fit-content"},altAddTagButton:{backgroundColor:e.palette.panelBackground.default,display:"inline-block",paddingLeft:8,paddingTop:4.5,paddingBottom:4.5,paddingRight:8,borderRadius:3,fontWeight:700,gap:4,cursor:"pointer",border:e.palette.tag.border}})),F=(0,M.defineStyles)("AutoClassifiedIcon",e=>({robotIcon:{marginLeft:4,height:12,opacity:.7,position:"relative",top:1}})),B=()=>{let e=(0,P.useStyles)(F);return(0,t.jsx)(b.default,{title:"This post was classified by our experimental auto-classifier (not an LLM). It will be reviewed by an admin within ~24 hours.",children:(0,t.jsx)(A.default,{icon:"Robot",className:e.robotIcon})})},D=e=>{var x,S;let{post:I,hideScore:T,hideAddTag:N,useAltAddTagButton:L,smallText:A=!1,showCoreTags:M,hidePostTypeTag:F,link:D=!0,highlightAutoApplied:U=!1,allowTruncate:H=!1,overrideMargins:W=!1,appendElement:O,annualReviewMarketInfo:V,align:z="left",noBackground:$=!1,neverCoreStyling:q=!1,tagRight:G=!0}=e,Z=(0,P.useStyles)(E),[Y,Q]=(0,n.useState)(!1),K=(0,n.useRef)(null),[X,J]=(0,n.useState)(!H),[ee,et]=(0,n.useState)(!1),en=(0,s.useCurrentUserId)(),{captureEvent:eo}=(0,l.useTracking)(),{flash:ei}=(0,g.useMessages)(),{data:er,loading:ea,refetch:es,networkStatus:el}=(0,r.useQuery)((0,a.gql)("\n    query multiTagRelFooterTagListQuery($selector: TagRelSelector, $limit: Int, $enableTotal: Boolean) {\n      tagRels(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n        results {\n          ...TagRelMinimumFragment\n        }\n        totalCount\n      }\n    }\n  "),{variables:{selector:{tagsOnPost:{postId:I._id}},limit:100,enableTotal:!1},fetchPolicy:"cache-and-network",ssr:(0,_.apolloSSRFlag)(!1),notifyOnNetworkStatusChange:!0}),ed=null==er||null==(x=er.tagRels)?void 0:x.results,ec=el===i.NetworkStatus.loading,eu=(0,n.useCallback)(()=>{if(!X&&K.current){let e=K.current;e.scrollHeight>e.clientHeight+10?et(!0):et(!1)}},[X,K,et]),em=(0,v.default)(ed);(0,n.useEffect)(eu,[X,ec,em,eu]),(0,n.useEffect)(()=>(window.addEventListener("resize",eu),()=>window.removeEventListener("resize",eu)),[]);let ep=(0,n.useCallback)(()=>{J(!0),et(!1)},[J,et]),eh=(ed?ed.map(e=>{var t;return null==(t=e.tag)?void 0:t._id}):I.tags.map(e=>e._id)).filter(Boolean);(0,l.useOnMountTracking)({eventType:"tagList",eventProps:{tagIds:eh},captureOnMount:e=>e.tagIds.length>0,skip:(0,h.isLWorAF)()||!eh.length||ea});let[eg]=(0,o.useMutation)((0,a.gql)("\n    mutation addOrUpvoteTag($tagId: String, $postId: String) {\n      addOrUpvoteTag(tagId: $tagId, postId: $postId) {\n        ...TagRelMinimumFragment\n      }\n    }\n  ")),ef=(0,n.useCallback)(async e=>{let{tagId:t,tagName:n}=e;try{Q(!0),await eg({variables:{tagId:t,postId:I._id}}),Q(!1),es(),eo("tagAddedToItem",{tagId:t,tagName:n})}catch(e){Q(!1),ei(e.message)}},[Q,eg,es,I._id,eo,ei]),ev=e=>{let{to:n,children:o,className:i}=e;return n?(0,t.jsx)(p.Link,{to:n,className:i,children:o}):(0,t.jsx)(t.Fragment,{children:o})},ex=(0,h.forumSelect)((0,d.getContentTypes)()),ey=(0,n.useCallback)(e=>{let{tooltipBody:n,label:o,neverCoreStyling:i,showAutoClassifiedIcon:r}=e;return(0,t.jsx)(b.default,{title:(0,t.jsx)(m.Card,{className:Z.card,children:(0,t.jsx)(C.default,{contentType:"comment",children:n})}),tooltip:!1,children:(0,t.jsxs)("div",{className:(0,u.default)(Z.frontpageOrPersonal,{[Z.smallText]:A,[Z.noBackground]:$,[Z.neverCoreStyling]:i}),children:[o,r&&(0,t.jsx)(B,{})]})})},[Z,A,$]),eb=!I.curatedDate&&!!I.reviewedByUserId&&I.reviewedByUserId===(null==(S=f.adminAccountSetting.get())?void 0:S._id),eC=I.curatedDate?(0,t.jsx)(ev,{to:ex.curated.linkTarget,className:Z.postTypeLink,children:(0,t.jsx)(ey,{label:"Curated",tooltipBody:ex.curated.tooltipBody,neverCoreStyling:q})}):I.frontpageDate?(0,t.jsx)(ev,{to:ex.frontpage.linkTarget,className:Z.postTypeLink,children:(0,t.jsx)(ey,{label:"Frontpage",tooltipBody:ex.frontpage.tooltipBody,neverCoreStyling:q,showAutoClassifiedIcon:eb})}):I.reviewedByUserId?(0,t.jsx)(ev,{to:ex.personal.linkTarget,className:Z.postTypeLink,children:(0,t.jsx)(ey,{label:"Personal Blog",tooltipBody:ex.personal.tooltipBody,neverCoreStyling:q,showAutoClassifiedIcon:eb})}):null,ew=ex.event&&I.isEvent?(0,t.jsx)(ev,{to:ex.event.linkTarget,className:Z.postTypeLink,children:(0,t.jsx)(ey,{label:"Event",tooltipBody:ex.event.tooltipBody,neverCoreStyling:q})}):null,ek=ed?(0,y.stableSortTags)(ed.filter(e=>!!(null==e?void 0:e.tag)).map(e=>({tag:e.tag,tagRel:e}))):I.tags.map(e=>({tag:e,tagRel:void 0})),ej=(0,t.jsx)(k.default,{onTagSelected:ef,isVotingContext:!0,menuPlacement:L?"bottom-end":void 0,children:L&&(0,t.jsx)("span",{className:(0,u.default)(Z.altAddTagButton,$&&Z.noBackground),children:"+"})}),eS=I.postedAt?new Date(I.postedAt).getFullYear():null,eI=new Date().getFullYear(),eT=(0,t.jsxs)(t.Fragment,{children:[!G&&en&&!N&&ej,M&&(0,t.jsx)(j.default,{existingTagIds:eh,onTagSelected:ef}),ek.map(e=>{let{tagRel:n,tag:o}=e;return o&&(0,t.jsx)(c.default,{tagRel:n,tag:o,hoverable:"ifDescriptionPresent",hideScore:T,smallText:A,highlightAsAutoApplied:U&&(null==n?void 0:n.autoApplied),link:D,noBackground:$,neverCoreStyling:q},o._id)}),!F&&eC,ew,(0,h.isLWorAF)()&&V&&eS&&eI-eS<2&&(0,t.jsx)(R,{annualReviewMarketInfo:V}),G&&en&&!N&&ej,Y&&(0,t.jsx)(w.default,{})]});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{ref:K,className:(0,u.default)(Z.root,{[Z.allowTruncate]:!X},{[Z.overrideMargins]:W,[Z.alignRight]:"right"===z}),children:[eT,O]}),ee&&(0,t.jsxs)("div",{className:Z.showAll,onClick:ep,children:["Show all ",f.taggingNamePluralSetting.get()]})]})}},229720,e=>{"use strict";var t=e.i(843476),n=e.i(271645);let o=(0,e.i(339213).default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18z"}),(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"})]}),"ModeComment");e.s(["default",0,o])},77766,e=>{"use strict";e.s(["usePostsUserAndCoauthors",0,e=>{var t,n,o,i;let r=!e.user||!!e.hideAuthor,a=e.question?null==(n=e.bestAnswer)?void 0:n.user:null==(o=e.lastPromotedComment)?void 0:o.user;return a===(null==(i=e.user)?void 0:i._id)&&(a=null),{isAnon:r,topCommentAuthor:a,authors:[e.user,...null!=(t=e.coauthors)?t:[]].filter(e=>!!e)}}])},755146,370659,e=>{"use strict";var t=e.i(843476),n=e.i(161517),o=e.i(538794),i=e.i(530841),r=e.i(540114),a=e.i(304706),s=e.i(343794),l=e.i(820010),d=e.i(558467);e.i(813868);var c=e.i(122756),u=e.i(110601),m=e.i(725788),p=e.i(293958);let h=(0,o.registerComponent)("FollowUserButton",e=>{let{user:o,styleVariant:h="default",classes:g}=e,{captureEvent:f}=(0,n.useTracking)(),v=(0,i.useCurrentUser)(),{openDialog:x}=(0,m.useDialog)(),{isSubscribed:y,onSubscribe:b,disabled:C}=(0,r.useNotifyMe)({document:o,overrideSubscriptionType:"newActivityForFeed",hideFlashes:!0}),w=async e=>{let t=null!=b?b:()=>Promise.resolve();return await t(e),await S({variables:{eventType:"newFollowSubscription"}})},[k,j]=(0,a.useOptimisticToggle)(null!=y&&y,w),[S]=(0,d.useMutationNoCache)((0,c.gql)("\n    mutation sendEventTriggeredDM($eventType: String!) {\n      sendEventTriggeredDM(eventType: $eventType)\n    }\n  ")),I="".concat((0,l.userGetDisplayName)(o),"'s content will appear in your feed");if(C)return null;let T="ultraFeed"===h?g.ultraFeedRoot:g.root,N="ultraFeed"===h?g.ultraFeedSubscribed:g.subscribed;return(0,t.jsx)("div",{className:(0,s.default)(T,{[N]:k}),onClick:e=>{v?(j(e),f("followUserButtonClick",{subcribedToUser:o._id,subscribed:!k})):x({name:"LoginPopup",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(p.default,{onClose:n})}})},children:(0,t.jsx)(u.default,{title:I,placement:"top",disabled:k,children:k?"Following":"Follow"})})},{styles:e=>({root:{...e.typography.commentStyle,color:e.palette.primary.main,cursor:"pointer"},subscribed:{color:"unset"},ultraFeedRoot:{...e.typography.commentStyle,display:"flex",alignItems:"center",justifyContent:"center",height:32,width:90,padding:"0 8px",borderRadius:4,fontSize:16,fontWeight:500,transition:"all 0.2s ease",cursor:"pointer",backgroundColor:e.palette.primary.main,color:e.palette.text.alwaysWhite,border:"none","&:hover":{opacity:.9}},ultraFeedSubscribed:{backgroundColor:e.palette.grey[200],color:e.palette.grey[500],"&:hover":{backgroundColor:e.palette.grey[300],color:e.palette.grey[900]}}})});e.s(["default",0,h],755146);var g=e.i(45663),f=e.i(557505),v=e.i(554302),x=e.i(813292),y=e.i(758623);let b=(0,o.registerComponent)("UserMetaInfo",e=>{let{user:n,hideAfKarma:o,hideWikiContribution:i,hideInfoOnSmallScreen:r,infoClassName:a,classes:l}=e,{createdAt:d,karma:c,afKarma:u,postCount:m,commentCount:p,tagRevisionCount:h}=n,b=(0,s.default)(a,l.info);return(0,t.jsxs)("div",{className:l.root,children:[0!==c&&(0,t.jsxs)("div",{className:b,children:[(0,t.jsx)(x.default,{icon:"Star",className:l.icon}),(0,t.jsx)("div",{children:c})]}),!o&&u>0&&(0,t.jsxs)("div",{className:b,children:[(0,t.jsx)("div",{className:l.omegaIcon,children:""}),(0,t.jsx)("div",{children:u})]}),m>0&&(0,t.jsxs)("div",{className:(0,s.default)(b,{[l.hideOnSmallScreen]:r}),children:[(0,t.jsx)(g.default,{className:l.icon}),m]}),p>0&&(0,t.jsxs)("div",{className:(0,s.default)(b,{[l.hideOnSmallScreen]:r}),children:[(0,t.jsx)(f.default,{className:l.icon}),p]}),!i&&!!h&&(0,t.jsxs)("div",{className:b,children:[(0,t.jsx)(v.default,{className:l.icon}),h]}),(0,t.jsx)("div",{className:b,children:(0,t.jsx)(y.default,{date:d})})]})},{styles:e=>({root:{display:"flex",alignItems:"center"},icon:{height:"1rem",width:"1rem",position:"relative"},omegaIcon:{fontWeight:600,marginTop:-4,height:"1rem",width:"1rem",position:"relative",fontFamily:'Palatino,"Palatino Linotype","Palatino LT STD","Book Antiqua",Georgia,serif'},info:{display:"flex",alignItems:"center",marginRight:8,fontSize:"1.1rem",textWrap:"nowrap",...e.typography.commentStyle},hideOnSmallScreen:{"@media (max-width: 500px)":{display:"none"}}})});e.s(["default",0,b],370659)},601268,e=>{"use strict";let t=["Very Short","Short","Medium","Long","Full"],n={lineClampNumberOfLines:0,commentCollapsedInitialWords:75,commentExpandedInitialWords:150,commentMaxWords:500,postInitialWords:150,postMaxWords:300},o={"Very Short":75,Short:150,Medium:500,Long:1e3,Full:1e5},i={"Very Short":50,Short:150,Medium:300,Long:600,Full:1e5},r={lineClampNumberOfLines:0,commentCollapsedInitialWords:30,commentExpandedInitialWords:75,commentMaxWords:300,postInitialWords:100,postMaxWords:300},a={"Very Short":30,Short:75,Medium:150,Long:300,Full:1e5},s={"Very Short":50,Short:100,Medium:300,Long:500,Full:1e5},l={recentComments:20,quicktakes:15,subscriptionsComments:15,"recombee-lesswrong-ultrafeed":30,"hacker-news":20,subscriptionsPosts:15,spotlights:5,bookmarks:1},d={commentDecayFactor:1.8,commentDecayBiasHours:2,quickTakeBoost:1.5,commentSubscribedAuthorMultiplier:2,threadScoreAggregation:"logSum",threadScoreFirstN:5},c={commentCoeff:5,voteCoeff:2,viewCoeff:1,onReadPostFactor:1.1,logImpactFactor:.5,minOverallMultiplier:.5,maxOverallMultiplier:20,repetitionDecayHours:1,repetitionPenaltyStrength:.5},u={subscribedBonusSetting:3,quicktakeBonus:5,timeDecayHalfLifeHours:12,postsMultiplier:1,threadsMultiplier:1};e.s(["DEFAULT_SETTINGS",0,{displaySettings:n,resolverSettings:{incognitoMode:!1,algorithm:void 0,sourceWeights:l,commentScoring:d,threadInterestModel:c,unifiedScoring:u,subscriptionsFeedSettings:{hideRead:!1}}},"DEFAULT_SOURCE_WEIGHTS",0,l,"SHOW_ALL_BREAKPOINT_VALUE",0,1e5,"ULTRA_FEED_SETTINGS_KEY",0,"ultraFeedSettings","getDefaultSettingsForDevice",0,e=>({displaySettings:"mobile"===e?r:n,resolverSettings:{incognitoMode:!1,algorithm:void 0,sourceWeights:l,commentScoring:{...d},threadInterestModel:{...c},unifiedScoring:{...u},subscriptionsFeedSettings:{hideRead:!1}}}),"getTruncationMapsForDevice",0,e=>"mobile"===e?{commentMap:a,postMap:s}:{commentMap:o,postMap:i},"getWordCountLevel",0,(e,n)=>{if(void 0===e||e<=0)return"Very Short";if(e>=1e5)return"Full";let o="Very Short",i=1/0;for(let r of t){let t=Math.abs(n[r]-e);t<i?(i=t,o=r):t===i&&n[r]>n[o]&&(o=r)}return o},"readCommentsInitialWords",0,30,"sourceWeightConfigs",0,[{key:"subscriptionsPosts",label:"Posts from Followed Users",description:"Recent posts from users you've subscribed to or followed."},{key:"subscriptionsComments",label:"Comments from Followed Users",description:"Recent comments from users you've subscribed to or followed."},{key:"quicktakes",label:"Quick Takes",description:"Lighweight mini-posts"},{key:"recentComments",label:"Recent Comments",description:"Recent comments, prioritized karma and previous engagement with the threads or posts they're on"},{key:"recombee-lesswrong-ultrafeed",label:"Personalized Post Recs",description:"Tailored for you based on your reading and voting history."},{key:"hacker-news",label:"Latest Posts",description:"Prioritized by karma and your personalized frontpage settings."},{key:"spotlights",label:"Featured Items",description:"Manually curated items highlighted by moderators or editors."},{key:"bookmarks",label:"Your Bookmarks",description:"We can throw in of your bookmarks to remind you about them."}],"truncationLevels",0,t])},81207,196886,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(530841),i=e.i(514089),r=e.i(161517);e.i(813868);let a=(0,e.i(122756).gql)("\n  mutation createUltraFeedEvent($data: CreateUltraFeedEventDataInput!) {\n    createUltraFeedEvent(data: $data) {\n      data {\n        _id\n      }\n    }\n  }\n");e.s(["UltraFeedEventCreateMutation",0,a],196886);let s=(0,n.createContext)(null),l={post:"Posts",comment:"Comments",spotlight:"Spotlights"};e.s(["MIN_VISIBLE_PX",0,100,"UltraFeedObserverProvider",0,e=>{let{children:d,incognitoMode:c}=e,u=(0,o.useCurrentUser)(),{captureEvent:m}=(0,r.useTracking)(),[p]=(0,i.useMutation)(a),h=(0,n.useRef)(null),g=(0,n.useRef)(new Map),f=(0,n.useRef)(new Map),v=(0,n.useRef)(new Set),x=(0,n.useRef)(new Set),y=(0,n.useCallback)((e,t)=>{c||!e||(p({variables:{data:{eventType:"viewed",documentId:e.documentId,collectionName:l[e.documentType],feedItemId:e.servedEventId,event:{durationMs:t}}}}),m("ultraFeedItemViewed",{documentId:e.documentId,collectionName:l[e.documentType],durationMs:t,feedItemId:e.servedEventId,feedCardIndex:e.feedCardIndex,feedCommentIndex:e.feedCommentIndex}))},[p,c,m]),b=(0,n.useCallback)(e=>{e.forEach(e=>{let t=e.target,n=f.current.get(t);if(!(!n||v.current.has(n.documentId))){if(e.isIntersecting){if(!g.current.has(t)){if(!n)return;let e=null;x.current.has(n.documentId)||(e=setTimeout(()=>{if(f.current.has(t)){y(n,1e3),x.current.add(n.documentId);let e=g.current.get(t);e&&(e.shortTimerId=null)}},1e3));let o=setTimeout(()=>{if(f.current.has(t)){var e;let n=f.current.get(t);if(!n)return;y(n,1e4);let o=n.documentId;v.current.add(o),null==(e=h.current)||e.unobserve(t),f.current.delete(t),g.current.delete(t)}},1e4);g.current.set(t,{shortTimerId:e,longTimerId:o})}}else if(g.current.has(t)){let e=g.current.get(t);e.shortTimerId&&clearTimeout(e.shortTimerId),e.longTimerId&&clearTimeout(e.longTimerId),g.current.delete(t)}}})},[y]);(0,n.useEffect)(()=>{let e=g.current,t=f.current,n=v.current,o=x.current;h.current=new IntersectionObserver(b,{root:null,rootMargin:"-".concat(100,"px 0px -").concat(100,"px 0px"),threshold:0});let i=h.current;return()=>{null==i||i.disconnect(),e.forEach(e=>{e.shortTimerId&&clearTimeout(e.shortTimerId),e.longTimerId&&clearTimeout(e.longTimerId)}),e.clear(),t.clear(),n.clear(),o.clear()}},[b]);let C=(0,n.useCallback)((e,t)=>{!h.current||v.current.has(t.documentId)||f.current.has(e)||(f.current.set(e,t),h.current.observe(e))},[]),w=(0,n.useCallback)(e=>{if(h.current&&f.current.has(e)){if(h.current.unobserve(e),g.current.has(e)){let t=g.current.get(e);t.shortTimerId&&clearTimeout(t.shortTimerId),t.longTimerId&&clearTimeout(t.longTimerId),g.current.delete(e)}f.current.delete(e)}},[]),k=(0,n.useCallback)(e=>{!u||c||(p({variables:{data:{userId:u._id,eventType:"expanded",documentId:e.documentId,collectionName:l[e.documentType],feedItemId:e.servedEventId,event:{expansionLevel:e.level,maxExpansionReached:e.maxLevelReached,wordCount:e.wordCount}}}}),m("ultraFeedItemExpanded",{documentId:e.documentId,collectionName:l[e.documentType],expansionLevel:e.level,feedItemId:e.servedEventId,feedCardIndex:e.feedCardIndex,feedCommentIndex:e.feedCommentIndex}))},[p,u,c,m]),j=(0,n.useMemo)(()=>({observe:C,unobserve:w,trackExpansion:k}),[C,w,k]);return(0,t.jsx)(s.Provider,{value:j,children:d})},"useUltraFeedObserver",0,()=>{let e=(0,n.useContext)(s);if(!e)throw Error("useUltraFeedObserver must be used within an UltraFeedObserverProvider");return e}],81207)},793631,e=>{"use strict";var t=e.i(843476),n=e.i(271645);let o=(0,n.createContext)(null);e.s(["OverflowNavObserverProvider",0,e=>{let{children:i}=e,r=(0,n.useRef)(new WeakMap),[a,s]=(0,n.useState)(null);(0,n.useEffect)(()=>("u">typeof IntersectionObserver&&s(new IntersectionObserver(e=>{e.forEach(e=>{let t=r.current.get(e.target);t&&("top"===t.kind?(t.pair.topIntersect=e.isIntersecting,e.isIntersecting&&(t.pair.topViewportPos=e.boundingClientRect.top)):(t.pair.bottomIntersect=e.isIntersecting,e.isIntersecting&&(t.pair.bottomViewportPos=e.boundingClientRect.top)),t.pair.update())})},{threshold:0})),()=>{null==a||a.disconnect()}),[]);let l=n.default.useMemo(()=>({observer:a,elementMap:r.current}),[a]);return(0,t.jsx)(o.Provider,{value:l,children:i})},"useOverflowNav",0,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,[i,r]=(0,n.useState)(!1),[a,s]=(0,n.useState)(!1),l=(0,n.useRef)(null),d=(0,n.useRef)(null),c=(0,n.useContext)(o);if(!c)throw Error("useOverflowNav must be used within an OverflowNavObserverProvider");let{observer:u,elementMap:m}=c,p=(0,n.useRef)({topIntersect:!1,bottomIntersect:!1,topViewportPos:0,bottomViewportPos:0,update:()=>{let n=e.current;if(!n)return;let o=p.current,i=n.getBoundingClientRect(),a=window.innerHeight,l=i.bottom>0&&i.top<a,d=n.offsetHeight>=a*t,c=d&&o.bottomIntersect&&!o.topIntersect&&l,u=d&&!o.topIntersect&&!o.bottomIntersect&&l;r(e=>{let t=c||u;return e!==t?t:e}),s(e=>e!==u?u:e)}});return(0,n.useEffect)(()=>{let t=e.current;if(!t||!u)return;let n=document.createElement("div"),o=document.createElement("div");[n,o].forEach(e=>{e.style.width="100%",e.style.height="1px",e.style.pointerEvents="none"}),t.prepend(n),t.append(o),l.current=n,d.current=o;let i=p.current;m.set(n,{pair:i,kind:"top"}),m.set(o,{pair:i,kind:"bottom"}),u.observe(n),u.observe(o);let r=null;return window.ResizeObserver&&(r=new ResizeObserver(()=>{p.current.update()})).observe(t),()=>{u.unobserve(n),u.unobserve(o),m.delete(n),m.delete(o),n.parentNode&&n.remove(),o.parentNode&&o.remove(),null==r||r.disconnect()}},[e,t,u,m]),{showUp:i,showDown:a,scrollToTop:()=>{if(l.current){let e=l.current.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:e,behavior:"smooth"})}},scrollToBottom:()=>{if(d.current){let e=d.current.getBoundingClientRect().bottom+window.pageYOffset+100-window.innerHeight;window.scrollTo({top:e,behavior:"smooth"})}}}}])},574589,e=>{"use strict";var t=e.i(843476),n=e.i(271645);let o=(0,e.i(339213).default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,t.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})]}),"MoreHoriz");e.s(["default",0,o])},138798,385193,539254,242763,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(182584),i=e.i(530841),r=e.i(791434),a=e.i(109665),s=e.i(514089);e.i(813868);var l=e.i(122756);let d=(0,l.gql)("\n  mutation updatePostMoveToDraftDropdownItem($selector: SelectorInput!, $data: UpdatePostDataInput!) {\n    updatePost(selector: $selector, data: $data) {\n      data {\n        ...PostsList\n      }\n    }\n  }\n");e.s(["default",0,e=>{let{post:l}=e,c=(0,i.useCurrentUser)(),[u]=(0,s.useMutation)(d),m=(0,n.useCallback)(()=>{u({variables:{selector:{_id:l._id},data:{draft:!0}}})},[u,l]);return!l.draft&&c&&(0,o.canUserEditPostMetadata)(c,l)?(0,t.jsx)(a.default,{title:(0,r.preferredHeadingCase)("Move to Draft"),onClick:m}):null}],138798);var c=e.i(946271),u=e.i(725788),m=e.i(161517),p=e.i(293958),h=e.i(384592);let g=(0,l.gql)("\n  query multiBookmarkuseBookmarkQuery($selector: BookmarkSelector, $limit: Int, $enableTotal: Boolean) {\n    bookmarks(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...BookmarksMinimumInfoFragment\n      }\n      totalCount\n    }\n  }\n"),f=(e,o,r)=>{var a;let d=(0,i.useCurrentUserId)(),{openDialog:f}=(0,u.useDialog)(),{captureEvent:v}=(0,m.useTracking)(),x="boolean"==typeof r,y=(0,l.gql)("\n    mutation SetIsBookmarkedMutation($input: SetIsBookmarkedInput!) {\n      setIsBookmarked(input: $input) {\n        data {\n          ...BookmarksMinimumInfoFragment\n        }\n      }\n    }\n  "),[b,C]=(0,n.useState)(null!=r&&r),{data:w,loading:k}=(0,c.useQuery)(g,{variables:{selector:{userDocumentBookmark:{documentId:e,collectionName:o,userId:d}},limit:1,enableTotal:!1},skip:!d||!o||x,fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),j=null==w||null==(a=w.bookmarks)?void 0:a.results;(0,n.useEffect)(()=>{x?C(null!=r&&r):C(!!(j&&j.length>0&&j[0].active))},[j,r,x]);let[S,{loading:I,error:T}]=(0,s.useMutation)(y,{onError:e=>{console.error("Error setting bookmark:",e)},update:(t,n,i)=>{var r,a,s,l,d,c;let u,m,p=null==i||null==(a=i.variables)||null==(r=a.input)?void 0:r.isBookmarked;"boolean"==typeof p&&(s=t,l=o,d=e,c=p,u=h.collectionNameToTypeName[l],(m=s.identify({__typename:u,_id:d}))&&s.modify({id:m,fields:{isBookmarked:()=>c}}))}}),N=(0,n.useCallback)(n=>{(n&&n.preventDefault(),d)?!o||I||(C(!b),v("bookmarkToggle",{documentId:e,collectionName:o,bookmarked:!b}),S({variables:{input:{documentId:e,collectionName:o,isBookmarked:!b}}}).catch(()=>{C(b)})):f({name:"LoginPopup",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(p.default,{onClose:n})}})},[d,e,o,b,I,f,S,v]),L=b?"Bookmark":"BookmarkBorder",R=b?"Saved":"Save",_=b?"Remove from saved items":"Save for later";return{isBookmarked:b,toggleBookmark:N,loading:k||I,icon:L,labelText:R,hoverText:_}};e.s(["useBookmark",0,f],385193),e.s(["default",0,e=>{let{documentId:n,collectionName:o,preventMenuClose:i=!1}=e,{icon:r,labelText:s,toggleBookmark:l}=f(n,o);return(0,t.jsx)(a.default,{title:s,onClick:e=>{i&&e.stopPropagation(),l(e)},icon:r})}],539254);var v=e.i(673991);e.i(552275);var x=e.i(935132);let y=(0,l.gql)("\n  mutation updatePostSuggestCuratedDropdownItem($selector: SelectorInput!, $data: UpdatePostDataInput!) {\n    updatePost(selector: $selector, data: $data) {\n      data {\n        ...PostsList\n      }\n    }\n  }\n");e.s(["default",0,e=>{var n;let{post:o}=e,l=(0,i.useCurrentUser)(),[d]=(0,s.useMutation)(y);if(!l||!(0,v.userCanDo)(l,"posts.moderate.all")&&!(0,v.userIsMemberOf)(l,"canSuggestCuration")||(0,x.isAF)())return null;if(!(null==o?void 0:o.frontpageDate))return(0,t.jsx)(a.default,{title:(0,r.preferredHeadingCase)("Suggest Curation"),sideMessage:"Must be frontpage",disabled:!0});if(o.curatedDate&&o.reviewForCuratedUserId)return null;let c=null==(n=o.suggestForCuratedUserIds)?void 0:n.includes(l._id),u=c?()=>{var e;let t=[...null!=(e=o.suggestForCuratedUserIds)?e:[]];t.includes(l._id)&&(t=t.filter(e=>e!==l._id)),d({variables:{selector:{_id:o._id},data:{suggestForCuratedUserIds:t}}})}:()=>{var e;let t=[...null!=(e=o.suggestForCuratedUserIds)?e:[]];t.includes(l._id)||t.push(l._id),d({variables:{selector:{_id:o._id},data:{suggestForCuratedUserIds:t}}})};return(0,t.jsx)(a.default,{title:(0,r.preferredHeadingCase)(c?"Unsuggest Curation":"Suggest Curation"),onClick:u})}],242763)},476539,e=>{"use strict";var t=e.i(843476),n=e.i(553736),o=e.i(530841);e.i(552275);var i=e.i(935132),r=e.i(109665),a=e.i(514089),s=e.i(122756),l=e.i(909817),d=e.i(693311);let c=(0,s.gql)("\n  mutation updatePostSuggestAlignmentPostDropdownItem($selector: SelectorInput!, $data: UpdatePostDataInput!) {\n    updatePost(selector: $selector, data: $data) {\n      data {\n        ...PostsList\n      }\n    }\n  }\n");e.s(["default",0,e=>{let{post:s}=e,u=(0,o.useCurrentUser)(),[m]=(0,a.useMutation)(c);return(0,i.isLWorAF)()&&u&&(0,n.userCanSuggestPostForAlignment)({currentUser:u,post:s})?s.suggestForAlignmentUserIds&&s.suggestForAlignmentUserIds.includes(u._id)?(0,t.jsx)(r.default,{title:" Unsuggest for Alignment",onClick:()=>void m({variables:{selector:{_id:s._id},data:{suggestForAlignmentUserIds:(0,d.default)(s.suggestForAlignmentUserIds,u._id)}}})}):(0,t.jsx)(r.default,{title:" Suggest for Alignment",onClick:()=>void m({variables:{selector:{_id:s._id},data:{suggestForAlignmentUserIds:(0,l.default)([...s.suggestForAlignmentUserIds,u._id])}}})}):null}])},659275,e=>{"use strict";var t=e.i(843476),n=e.i(79732);let o=(0,e.i(429329).defineStyles)("Alert",e=>({alert:{color:e.palette.error.main}}));e.s(["Alert",0,e=>{let{children:i}=e,r=(0,n.useStyles)(o);return(0,t.jsx)("div",{className:r.alert,children:i})}])},767026,(e,t,n)=>{t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},203037,(e,t,n)=>{"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},101507,(e,t,n)=>{var o,i=e.i(167225),r=/%[sdj%]/g;n.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}for(var n=1,o=arguments,i=o.length,a=String(e).replace(r,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(e){return"[Circular]"}default:return e}}),l=o[n];n<i;l=o[++n])g(l)||!b(l)?a+=" "+l:a+=" "+s(l);return a},n.deprecate=function(t,o){if(x(e.g.process))return function(){return n.deprecate(t,o).apply(this,arguments)};if(!0===i.default.noDeprecation)return t;var r=!1;return function(){if(!r){if(i.default.throwDeprecation)throw Error(o);i.default.traceDeprecation?console.trace(o):console.error(o),r=!0}return t.apply(this,arguments)}};var a={};function s(e,t){var o={seen:[],stylize:d};return arguments.length>=3&&(o.depth=arguments[2]),arguments.length>=4&&(o.colors=arguments[3]),h(t)?o.showHidden=t:t&&n._extend(o,t),x(o.showHidden)&&(o.showHidden=!1),x(o.depth)&&(o.depth=2),x(o.colors)&&(o.colors=!1),x(o.customInspect)&&(o.customInspect=!0),o.colors&&(o.stylize=l),c(o,e,o.depth)}function l(e,t){var n=s.styles[t];return n?"\x1b["+s.colors[n][0]+"m"+e+"\x1b["+s.colors[n][1]+"m":e}function d(e,t){return e}function c(e,t,o){if(e.customInspect&&t&&k(t.inspect)&&t.inspect!==n.inspect&&!(t.constructor&&t.constructor.prototype===t)){var i,r,a,s,l,d,b=t.inspect(o,e);return v(b)||(b=c(e,b,o)),b}var j=function(e,t){if(x(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return f(t)?e.stylize(""+t,"number"):h(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}(e,t);if(j)return j;var S=Object.keys(t),I=(l={},S.forEach(function(e,t){l[e]=!0}),l);if(e.showHidden&&(S=Object.getOwnPropertyNames(t)),w(t)&&(S.indexOf("message")>=0||S.indexOf("description")>=0))return u(t);if(0===S.length){if(k(t)){var N=t.name?": "+t.name:"";return e.stylize("[Function"+N+"]","special")}if(y(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(C(t))return e.stylize(Date.prototype.toString.call(t),"date");if(w(t))return u(t)}var L="",R=!1,_=["{","}"];if(p(t)&&(R=!0,_=["[","]"]),k(t)&&(L=" [Function"+(t.name?": "+t.name:"")+"]"),y(t)&&(L=" "+RegExp.prototype.toString.call(t)),C(t)&&(L=" "+Date.prototype.toUTCString.call(t)),w(t)&&(L=" "+u(t)),0===S.length&&(!R||0==t.length))return _[0]+L+_[1];if(o<0)if(y(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");else return e.stylize("[Object]","special");return e.seen.push(t),d=R?function(e,t,n,o,i){for(var r=[],a=0,s=t.length;a<s;++a)T(t,String(a))?r.push(m(e,t,n,o,String(a),!0)):r.push("");return i.forEach(function(i){i.match(/^\d+$/)||r.push(m(e,t,n,o,i,!0))}),r}(e,t,o,I,S):S.map(function(n){return m(e,t,o,I,n,R)}),e.seen.pop(),i=d,r=L,a=_,s=0,i.reduce(function(e,t){return s++,t.indexOf("\n")>=0&&s++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?a[0]+(""===r?"":r+"\n ")+" "+i.join(",\n  ")+" "+a[1]:a[0]+r+" "+i.join(", ")+" "+a[1]}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function m(e,t,n,o,i,r){var a,s,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),T(o,i)||(a="["+i+"]"),!s&&(0>e.seen.indexOf(l.value)?(s=g(n)?c(e,l.value,null):c(e,l.value,n-1)).indexOf("\n")>-1&&(s=r?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),x(a)){if(r&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function g(e){return null===e}function f(e){return"number"==typeof e}function v(e){return"string"==typeof e}function x(e){return void 0===e}function y(e){return b(e)&&"[object RegExp]"===j(e)}function b(e){return"object"==typeof e&&null!==e}function C(e){return b(e)&&"[object Date]"===j(e)}function w(e){return b(e)&&("[object Error]"===j(e)||e instanceof Error)}function k(e){return"function"==typeof e}function j(e){return Object.prototype.toString.call(e)}function S(e){return e<10?"0"+e.toString(10):e.toString(10)}n.debuglog=function(e){if(x(o)&&(o=i.default.env.NODE_DEBUG||""),!a[e=e.toUpperCase()])if(RegExp("\\b"+e+"\\b","i").test(o)){var t=i.default.pid;a[e]=function(){var o=n.format.apply(n,arguments);console.error("%s %d: %s",e,t,o)}}else a[e]=function(){};return a[e]},n.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=p,n.isBoolean=h,n.isNull=g,n.isNullOrUndefined=function(e){return null==e},n.isNumber=f,n.isString=v,n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=x,n.isRegExp=y,n.isObject=b,n.isDate=C,n.isError=w,n.isFunction=k,n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e.r(767026);var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.log=function(){var e,t;console.log("%s - %s",(t=[S((e=new Date).getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":"),[e.getDate(),I[e.getMonth()],t].join(" ")),n.format.apply(n,arguments))},n.inherits=e.r(203037),n._extend=function(e,t){if(!t||!b(t))return e;for(var n=Object.keys(t),o=n.length;o--;)e[n[o]]=t[n[o]];return e}},417176,e=>{"use strict";let t;var n=e.i(101507),o=e.i(552275);let i=[];var r=e.i(791434);let a=(t="intl",function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];if(o.databaseDebuggersSetting.get().includes(t)||o.instanceDebuggersSetting.get().includes(t)||i.includes(t)){let e=r;(null===n.default||void 0===n.default?void 0:n.default.inspect)&&(e=r.map(e=>"object"==typeof e?n.default.inspect(e,!1,null):e)),console.log("[".concat(t,"]"),...e)}});var s=e.i(100916);let l=(e,t)=>{let{id:n,defaultMessage:o}=e;return(e=>{let{id:t,values:n,defaultMessage:o,locale:i}=e,s={"forms.submit":"Submit","forms.cancel":"Cancel","forms.select_option":"-- select option --","forms.delete":"Delete","forms.delete_confirm":"Delete document?","forms.revert":"Revert","forms.confirm_discard":"Discard changes?","users.profile":"Profile","users.complete_profile":(0,r.preferredHeadingCase)("Complete Your Profile"),"users.profile_completed":"Profile completed.","users.edit_account":(0,r.preferredHeadingCase)("Account Settings"),"users.edit_success":"User {name} edited","users.log_in":(0,r.preferredHeadingCase)("Log In"),"users.sign_up":(0,r.preferredHeadingCase)("Sign Up"),"users.sign_up_log_in":(0,r.preferredHeadingCase)("Sign Up/Log In"),"users.log_out":(0,r.preferredHeadingCase)("Log Out"),"users.bio":"Bio","users.displayName":(0,r.preferredHeadingCase)("Display Name"),"users.email":"Email","users.twitterUsername":(0,r.preferredHeadingCase)("Twitter Username"),"users.website":"Website","users.groups":"Groups","users.avatar":"Avatar","users.notifications":"Notifications","users.notifications_users":(0,r.preferredHeadingCase)("New Users Notifications"),"users.notifications_posts":(0,r.preferredHeadingCase)("New Posts Notifications"),"users.newsletter_subscribeToNewsletter":"Subscribe to newsletter","users.users_admin":"Admin","users.admin":"Admin","users.isAdmin":"Admin","users.posts":"Posts","users.upvoted_posts":(0,r.preferredHeadingCase)("Upvoted Posts"),"users.please_log_in":"Please log in","users.please_sign_up_log_in":"Please sign up or log in","users.cannot_post":"Sorry, you do not have permission to post at this time","users.cannot_comment":"Sorry, you do not have permission to comment at this time","users.subscribe":"Subscribe to this user's posts","users.unsubscribe":"Unsubscribe from this user's posts","users.subscribed":"You have subscribed to this user's posts.","users.unsubscribed":"You have unsubscribed from this user's posts.","users.subscribers":"Subscribers","users.delete":"Delete user","users.delete_confirm":"Delete this user?","users.email_already_taken":"This email is already taken: {value}",settings:"Settings","settings.json_message":"Note: settings already provided in your <code>settings.json</code> file will be disabled.","settings.edit":(0,r.preferredHeadingCase)("Account Settings"),"settings.edited":"Settings edited (please reload).","settings.title":"Title","settings.siteUrl":"Site URL","settings.description":"Description","settings.siteImage":(0,r.preferredHeadingCase)("Site Image"),"settings.defaultEmail":(0,r.preferredHeadingCase)("Default Email"),"settings.scoreUpdate":(0,r.preferredHeadingCase)("Score Update"),"settings.postsPerPage":(0,r.preferredHeadingCase)("Posts Per Page"),"settings.twitterAccount":(0,r.preferredHeadingCase)("Twitter Account"),"settings.facebookPage":(0,r.preferredHeadingCase)("Facebook Page"),"settings.locale":"Locale","settings.requireViewInvite":(0,r.preferredHeadingCase)("Require View Invite"),"settings.requirePostInvite":(0,r.preferredHeadingCase)("Require Post Invite"),"settings.scoreUpdateInterval":(0,r.preferredHeadingCase)("Score Update Interval"),"app.loading":"Loading","app.404":"Sorry, we couldn't find what you were looking for.","app.missing_document":"Sorry, we couldn't find the document you were looking for.","app.powered_by":"Built with Vulcan.js","app.or":"Or","app.noPermission":"Sorry, you do not have the permission to do this at this time.","app.operation_not_allowed":'Sorry, you don\'t have the rights to perform the operation "{value}"',"app.document_not_found":"Document not found (id: {value})","app.disallowed_property_detected":"Disallowed property detected: {value}","app.something_bad_happened":"Something bad happened...","app.embedly_not_authorized":"Invalid Embedly API key provided in the settings file. To find your key, log into https://app.embed.ly -> API","cards.edit":"Edit","datatable.new":"New","datatable.edit":"Edit",admin:"Admin",notifications:"Notifications","errors.expectedType":"Expected a field {label} of type {dataType}, got {value} instead.","errors.required":"Field {label} is required.","errors.maxString":"Field {label} is limited to {max} characters.","errors.regEx":'Field "{label}" is invalid.',"posts.new_post":(0,r.preferredHeadingCase)("New Post"),"posts.edit":"Edit","posts.edit_success":"Post {title} edited.","posts.delete":"Delete","posts.delete_confirm":"Delete post {title}?","posts.delete_success":"Post {title} deleted.","posts.title":"Title","posts.url":"URL","posts.categories":"Categories","posts.status":"Status","posts.sticky":"Sticky","posts.load_more":(0,r.preferredHeadingCase)("Load More"),"posts.load_more_days":(0,r.preferredHeadingCase)("Load More Days"),"posts.no_more":"No more posts.","posts.no_results":"No posts to display.","posts.search":"Search","posts.view":"View","posts.top":"Top","posts.new":"New","posts.best":"Best","posts.pending":"Pending","posts.rejected":"Rejected","posts.scheduled":"Scheduled","posts.daily":"Daily","posts.clear_thumbnail":"Clear Thumbnail","posts.clear_thumbnail?":"Clear thumbnail?","posts.enter_thumbnail_url":"Enter URL","posts.created_message":"Post created.","posts.rate_limit_error":"Please wait {value} seconds before posting again.","posts.sign_up_or_log_in_first":"Please sign up or log in first.","posts.postedAt":"Posted at","posts.dateNotDefined":"Date not defined","posts.subscribe":"Subscribe","posts.unsubscribe":"Unsubscribe","posts.subscribed":"You have subscribed to {name} comments.","posts.unsubscribed":"You have unsubscribed from {name} comments.","posts.subscribed_posts":"Posts subscribed to","posts.link_already_posted":"This link has already been posted.","posts.max_per_day":"Sorry you cannot submit more than {value} posts per day.","posts.like":"Like","comments.comments":"Comments","comments.count":"{count, plural, =0 {No comments} one {# comment} other {# comments}}","comments.count_0":"No comments","comments.count_1":"1 comment","comments.count_2":"{count} comments","comments.new":"New Comment","comments.no_comments":"No comments to display.","comments.reply":"Reply","comments.edit":"Edit","comments.delete":"Delete","comments.delete_confirm":"Delete this comment?","comments.delete_success":"Comment deleted.","comments.please_log_in":"Please log in to comment.","comments.parentCommentId":"Parent Comment ID","comments.topLevelCommentId":"Top Level Comment ID","comments.rate_limit_error":"Please wait {value} seconds before commenting again.",categories:"Categories","categories.all":"All Categories","categories.edit":"Edit Category","categories.edit_success":"Category {name} edited.","categories.new":"New Category","categories.new_success":"Category {name} created.","categories.delete":"Delete Category","categories.name":"Name","categories.description":"Description","categories.order":"Order","categories.slug":"Slug","categories.image":"Image","categories.parentId":"Parent ID","categories.subscribe":"Subscribe to this category's posts","categories.unsubscribe":"Unsubscribe to this category's posts","categories.subscribed":"You have subscribed to {name} posts.","categories.unsubscribed":"You have unsubscribed from {name} posts.","categories.subscribed_categories":"Categories subscribed to","categories.delete_confirm":"Delete category {title}?","categories.delete_success":"Category {name} deleted.","categories.invalid":"Invalid category","admin.categories":"Categories (admin)","admin.users":"Users (admin)","posts.drafts":"My Drafts","posts.all_drafts":"All Drafts","Incorrect password":"Wrong password (If you've just come from LW 1.0 you'll need to reset your password, using the email address associated with your LW 1.0 account.)","User not found":"User not found (Use the intercom if you think that user should exist already)","User has no password set":"LW 1.0 account detected. Please reset your password with the link above","Email already exists.":"Email already exists. If you have an LW 1.0 account, please reset your password with the link above","moderation-easy-going":"Easy Going - I just delete obvious spam and trolling","moderation-norm-enforcing":"Norm Enforcing - I try to enforce particular rules","moderation-reign-of-terror":"Reign of Terror - I delete anything I judge to be annoying or counterproductive","short-moderation-easy-going":" Easy Going","short-moderation-norm-enforcing":" Norm Enforcing","short-moderation-reign-of-terror":" Reign of Terror","localgroups.subscribe":"Subscribe to group","localgroups.unsubscribe":"Unsubscribe from group","localgroups.subscribed":"Successfully subscribed to events & posts in this group","localgroups.unsubscribed":"Successfully unsubscribed from events & posts in this group","accounts.error_error_too_many_requests_please_slow_down_you_must_wait_8_seconds_before_trying_again":"Error, too many requests. Please slow down. You must wait 8 seconds before trying again.","accounts.error_legacy_account_wrong_password":"Wrong password","comments.author_has_banned_you":"This post's author has blocked you from commenting.","alignment.comments.please_log_in":"Please log in to comment. (Commenting is limited to AI Alignment Forum members. Non-members should comment on LessWrong.com)","alignment.remove_comment":"Comment and its children removed from AI Alignment Forum","alignment.move_comment":"Comment and its parents moved to AI Alignment Forum","alignment.suggest_comment":"Comment has been suggested for the AI Alignment Forum","alignment.unsuggest_comment":"You are no longer suggesting this comment for AI Alignment Forum","questions.comments.moved_to_answers":"Comment moved to the Answers section.","questions.comments.moved_to_comments":"Answer moved to the Comments section."}[t];return s||a('\x1b[32m>> INTL: No string found for id "'.concat(t,'" in locale "').concat(i,'".\x1b[0m')),s&&n&&Object.keys(n).forEach(e=>{var t,o;t=s,o=n[e],s=t.replace(RegExp("{".concat(e,"}"),"g"),o)}),s||o})({id:n,defaultMessage:o,values:t,locale:"en-US"})};e.s(["formatLabel",0,(e,t)=>{let{fieldName:n,collectionName:o}=e;if(!n)throw Error("fieldName option passed to formatLabel cannot be empty or undefined");let i="|*|*|",r=i;return(o&&(r=l({id:"".concat(o.toLowerCase(),".").concat(n),defaultMessage:i},t)),r===i&&(r=l({id:"global.".concat(n),defaultMessage:i},t))===i&&(r=l({id:n},t)),r)?r:(0,s.camelToSpaces)(n)},"formatMessage",0,l],417176)},953143,e=>{"use strict";var t=e.i(843476),n=e.i(417176);e.s(["default",0,e=>{let{id:o,values:i,defaultMessage:r="",html:a=!1,className:s=""}=e,l=(0,n.formatMessage)({id:o,defaultMessage:r},i),d="i18n-message ".concat(s);return a?(0,t.jsx)("span",{className:d,dangerouslySetInnerHTML:{__html:l}}):(0,t.jsx)("span",{className:d,children:l})}])},797191,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(343794),i=e.i(659275),r=e.i(953143),a=e.i(876023);let s=e=>{let{error:n,errorContext:o=""}=e;if(n instanceof a.CombinedGraphQLErrors)return(0,t.jsx)(t.Fragment,{children:n.errors.map((e,n)=>(0,t.jsx)(s,{error:e,errorContext:o},n))});if(function(e){try{return JSON.parse(e),!0}catch{return!1}}(n.message)){let e=JSON.parse(n.message);return Array.isArray(e)?(0,t.jsx)(t.Fragment,{children:e.map((e,n)=>(0,t.jsx)(s,{error:e,errorContext:o},n))}):(0,t.jsx)(s,{error:e,errorContext:o})}if(n.message)return(0,t.jsx)("li",{children:n.message});if(n.id){var i;return(0,t.jsx)("li",{children:(0,t.jsx)(r.default,{id:n.id,values:{errorContext:o,label:null==(i=n.properties)?void 0:i.name,...n.data,...n.properties},defaultMessage:JSON.stringify(n)})})}if(n.operationName)return(0,t.jsx)("li",{children:"Error submitting form: ".concat(n.operationName)});return(0,t.jsx)("li",{children:"Error submitting form"})};var l=e.i(79732),d=e.i(429329),c=e.i(96009),u=e.i(538794);let m=(0,d.defineStyles)("FormErrors",e=>({root:{...e.typography.errorStyle}})),p=(0,u.registerComponent)("FormErrors",e=>{let{errors:r}=e,a=(0,l.useStyles)(m),d=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(r.length>0){var e;null==(e=d.current)||e.scrollIntoView()}},[r.length]),(0,t.jsx)("div",{className:(0,o.default)(a.root,"form-errors"),ref:d,children:!!r.length&&(0,t.jsx)(i.Alert,{children:(0,t.jsx)("ul",{children:r.map((e,n)=>(0,t.jsx)(s,{error:e,errorContext:"form"},n))})})})},{hocs:[c.default]});function h(){let[e,o]=(0,n.useState)(),i=(0,n.useMemo)(()=>e?e.graphQLErrors?e.graphQLErrors:Array.isArray(e)?e:[e]:[],[e]);return{setCaughtError:o,displayedErrorComponent:(0,n.useMemo)(()=>(0,t.jsx)(p,{errors:i}),[i])}}e.s(["useFormErrors",()=>h],797191)},402781,177864,421516,e=>{"use strict";var t=e.i(843476),n=e.i(673991),o=e.i(530841),i=e.i(725788);e.i(793794);var r=e.i(527633),a=e.i(136541),s=e.i(741452),l=e.i(343794),d=e.i(79732),c=e.i(429329),u=e.i(546337),m=e.i(982751),p=e.i(797191),h=e.i(833851),g=e.i(514089);e.i(813868);var f=e.i(122756);let v=(0,f.gql)("\n  mutation createReportReportForm($data: CreateReportDataInput!) {\n    createReport(data: $data) {\n      data {\n        ...UnclaimedReportsList\n      }\n    }\n  }\n"),x=(0,c.defineStyles)("ReportsForm",e=>({fieldWrapper:{marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit},submitButton:(0,m.submitButtonStyles)(e)})),y=e=>{let{userId:n,postId:o,commentId:i,reportedUserId:c,onClose:m,onSubmit:f,title:y,link:b}=e,C=(0,d.useStyles)(x),[w]=(0,g.useMutation)(v),{setCaughtError:k,displayedErrorComponent:j}=(0,p.useFormErrors)(),S=(0,s.useForm)({defaultValues:{userId:n,postId:o,reportedUserId:c,commentId:i,link:b,description:""},onSubmit:async e=>{let{value:t}=e;try{var n;let{data:e}=await w({variables:{data:t}});if(!(null==e||null==(n=e.createReport)?void 0:n.data))throw Error("Failed to create report");e.createReport.data,null==f||f(),null==m||m()}catch(e){k(e)}}});return(0,t.jsx)(h.default,{title:y,open:!0,onClose:m,children:(0,t.jsx)(a.DialogContent,{children:(0,t.jsxs)("form",{className:"vulcan-form",onSubmit:e=>{e.preventDefault(),e.stopPropagation(),S.handleSubmit()},children:[j,(0,t.jsx)("div",{className:C.fieldWrapper,children:(0,t.jsx)(S.Field,{name:"description",children:e=>(0,t.jsx)(u.MuiTextField,{field:e,placeholder:"What are you reporting this comment for?",label:"Reason"})})}),(0,t.jsx)("div",{className:"form-submit",children:(0,t.jsx)(S.Subscribe,{selector:e=>[e.canSubmit,e.isSubmitting],children:e=>{let[n,o]=e;return(0,t.jsx)(r.default,{type:"submit",disabled:!n||o,className:(0,l.default)("primary-form-submit-button",C.submitButton),children:"Submit"})}})})]})})})};e.s(["default",0,y],177864);var b=e.i(109665);e.s(["default",0,e=>{let{post:r}=e,a=(0,o.useCurrentUser)(),{openDialog:s}=(0,i.useDialog)();return(0,n.userCanDo)(a,"reports.new")?(0,t.jsx)(b.default,{title:"Report",onClick:()=>{a&&s({name:"ReportForm",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(y,{onClose:n,postId:r._id,link:"/posts/"+r._id,userId:a._id})}})},icon:"Report"}):null}],402781);var C=e.i(271645),w=e.i(182584),k=e.i(791434);let j=(0,f.gql)("\n  mutation updatePostDeleteDraftDropdownItem($selector: SelectorInput!, $data: UpdatePostDataInput!) {\n    updatePost(selector: $selector, data: $data) {\n      data {\n        ...PostsList\n      }\n    }\n  }\n");e.s(["default",0,e=>{let{post:n}=e,i=(0,o.useCurrentUser)(),[r]=(0,g.useMutation)(j),a=(0,C.useCallback)(()=>{confirm("Are you sure you want to archive this draft?")&&r({variables:{selector:{_id:n._id},data:{deletedDraft:!0,draft:!0}}})},[n,r]);return i&&(0,w.postCanDelete)(i,n)?(0,t.jsx)(b.default,{title:(0,k.preferredHeadingCase)("Archive Draft"),onClick:a}):null}],421516)},946472,e=>{"use strict";var t=e.i(843476),n=e.i(271645);let o=(0,e.i(339213).default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,t.jsx)("circle",{cx:"6.18",cy:"17.82",r:"2.18"}),(0,t.jsx)("path",{d:"M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"})]}),"RssFeed");e.s(["default",0,o])},525514,516755,870175,438461,693103,1684,e=>{"use strict";e.s(["ResyncRssDropdownItem",()=>C],525514);var t=e.i(843476),n=e.i(271645),o=e.i(276320),i=e.i(514089),r=e.i(946271);e.i(813868);var a=e.i(122756),s=e.i(538794),l=e.i(725788),d=e.i(530841),c=e.i(182584),u=e.i(946472),m=e.i(328018),p=e.i(136541),h=e.i(109665),g=e.i(87828),f=e.i(690118),v=e.i(833851),x=e.i(239832);let y=(0,a.gql)("\n  mutation updatePostResyncRssDropdownItem($selector: SelectorInput!, $data: UpdatePostDataInput!) {\n    updatePost(selector: $selector, data: $data) {\n      data {\n        ...PostsEdit\n      }\n    }\n  }\n"),b=e=>{var s,l;let{onClose:d,post:c,classes:u}=e,h=(0,o.useApolloClient)(),{data:b,loading:C,error:w}=(0,r.useQuery)((0,a.gql)("\n    query getRssPostChanges($postId: String!) {\n      RssPostChanges(postId: $postId) {\n        isChanged\n        newHtml\n        htmlDiff\n      }\n    }\n  "),{variables:{postId:c._id}}),[k]=(0,i.useMutation)(y),[j,S]=(0,n.useState)(!1);return(0,t.jsxs)(v.default,{title:"RSS Resync",open:!0,onClose:d,children:[(0,t.jsxs)(p.DialogContent,{children:[(0,t.jsx)("h1",{children:"Resync Crosspost"}),(0,t.jsxs)("div",{className:u.changesPreview,children:[C&&(0,t.jsx)(x.default,{}),(null==b?void 0:b.RssPostChanges)&&!(null==(s=b.RssPostChanges)?void 0:s.isChanged)&&(0,t.jsx)("div",{children:"No changes were detected"}),(null==b?void 0:b.RssPostChanges)&&(null==(l=b.RssPostChanges)?void 0:l.isChanged)&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:u.diffExplanation,children:["The version this was auto-crossposted from has changed. Check the ",(0,t.jsx)("ins",{children:"insertions"})," and ",(0,t.jsx)("del",{children:"deletions"})," below and click Apply to copy the changes."]}),(0,t.jsx)(g.default,{contentType:"post",children:(0,t.jsx)(f.ContentItemBody,{dangerouslySetInnerHTML:{__html:b.RssPostChanges.htmlDiff}})})]}),w&&(0,t.jsx)("div",{children:w.message})]})]}),j&&(0,t.jsx)(x.default,{}),(0,t.jsx)(m.DialogActions,{children:(0,t.jsxs)("div",{className:u.buttons,children:[(0,t.jsx)("button",{className:u.button,onClick:function(){d()},children:"Cancel"}),(0,t.jsx)("button",{className:u.button,onClick:function(){(async()=>{S(!0),await k({variables:{selector:{_id:c._id},data:{contents:{originalContents:{type:"html",data:null==b?void 0:b.RssPostChanges.newHtml}}}}}),d(),S(!1),await h.resetStore()})()},disabled:C||!!w,children:"Apply"})]})})]})},C=(0,s.registerComponent)("ResyncRssDropdownItem",e=>{let{post:n,closeMenu:o,classes:i}=e,{openDialog:r}=(0,l.useDialog)(),a=(0,d.useCurrentUser)();return n.feedId&&(0,c.canUserEditPostMetadata)(a,n)?(0,t.jsx)(h.default,{title:"Resync RSS",onClick:function(){o(),r({name:"ResyncRssDialog",contents:e=>{let{onClose:o}=e;return(0,t.jsx)(b,{onClose:o,post:n,classes:i})}})},icon:()=>(0,t.jsx)(u.default,{})}):null},{styles:e=>({diffExplanation:{fontStyle:"italic",marginBottom:24},changesPreview:{minWidth:500,minHeight:500,"& ins":{background:e.palette.background.diffInserted,textDecoration:"none"},"& del":{background:e.palette.background.diffDeleted,textDecoration:"none"}},buttons:{margin:12},button:{marginRight:8,padding:"8px 14px 8px 14px"}})});var w=e.i(995669),k=e.i(791434);e.s(["default",0,e=>{let{post:n}=e,{postsRead:o,setPostRead:r}=(0,w.useItemsRead)(),[s]=(0,i.useMutation)((0,a.gql)("\n    mutation markAsReadOrUnread($postId: String, $isRead: Boolean) {\n      markAsReadOrUnread(postId: $postId, isRead: $isRead)\n    }\n  ")),l=n._id in o?o[n._id]:n.isRead;return(0,t.jsx)(h.default,{title:(0,k.preferredHeadingCase)(l?"Mark as Unread":"Mark as Read"),onClick:(e=>{s({variables:{postId:n._id,isRead:e}}),r(n._id,e)}).bind(null,!l)})}],516755);var j=e.i(773736),S=e.i(476331);let I=(0,a.gql)("\n  query PostSummaryDialog($documentId: String) {\n    post(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...PostWithGeneratedSummary\n      }\n    }\n  }\n"),T=(0,s.registerComponent)("PostSummaryDialog",e=>{var n;let{post:o,onClose:i}=e,{loading:a,data:s}=(0,r.useQuery)(I,{variables:{documentId:o._id}}),l=null==s||null==(n=s.post)?void 0:n.result;return(0,t.jsxs)(v.default,{open:!0,onClose:i,children:[(0,t.jsx)(S.DialogTitle,{children:o.title}),(0,t.jsxs)(p.DialogContent,{children:[a&&(0,t.jsx)(x.default,{}),l&&l.languageModelSummary]})]})});e.s(["default",0,e=>{let{post:n,closeMenu:o}=e,{openDialog:i}=(0,l.useDialog)(),r=(0,d.useCurrentUser)();return(0,j.userHasAutosummarize)(r)?(0,t.jsx)(h.default,{title:"Summarize",onClick:()=>{null==o||o(),i({name:"PostSummaryDialog",contents:e=>{let{onClose:o}=e;return(0,t.jsx)(T,{onClose:o,post:n})}})}}):null}],870175);var N=e.i(673991);let L=(0,a.gql)("\n  mutation updatePostMoveToFrontpageDropdownItem($selector: SelectorInput!, $data: UpdatePostDataInput!) {\n    updatePost(selector: $selector, data: $data) {\n      data {\n        ...PostsList\n      }\n    }\n  }\n");e.s(["default",0,e=>{let{post:n}=e,o=(0,d.useCurrentUser)(),[r]=(0,i.useMutation)(L);return(0,N.userCanDo)(o,"posts.edit.all")?n.frontpageDate?n.frontpageDate||n.meta||n.curatedDate?(0,t.jsx)(h.default,{title:(0,k.preferredHeadingCase)("Move to Personal Blog"),onClick:()=>{if(!o)throw Error("Cannot move to personal blog anonymously");r({variables:{selector:{_id:n._id},data:{draft:!1,meta:!1,frontpageDate:null,reviewedByUserId:o._id}}})}}):null:(0,t.jsx)(h.default,{title:(0,k.preferredHeadingCase)("Move to Frontpage"),afterIcon:n.submitToFrontpage?void 0:"Warning",onClick:()=>{if(!o)throw Error("Cannot move to frontpage anonymously");r({variables:{selector:{_id:n._id},data:{frontpageDate:new Date,meta:!1,draft:!1,reviewedByUserId:o._id}}})}}):null}],438461);var R=e.i(553736);e.i(552275);var _=e.i(935132);e.s(["default",0,e=>{let{post:n}=e,o=(0,d.useCurrentUser)(),{setAlignmentPostMutation:r}=(()=>{let[e]=(0,i.useMutation)((0,a.gql)("\n    mutation alignmentPost($postId: String, $af: Boolean) {\n      alignmentPost(postId: $postId, af: $af) {\n        ...PostsList\n      }\n    }\n  "));return{setAlignmentPostMutation:e}})();return(0,_.isLWorAF)()&&(0,R.userCanMakeAlignmentPost)(o,n)?n.af?(0,t.jsx)(h.default,{title:" Remove Alignment",onClick:()=>{r({variables:{postId:n._id,af:!1}})}}):(0,t.jsx)(h.default,{title:" Move to Alignment",onClick:()=>{r({variables:{postId:n._id,af:!0}})}}):null}],693103);let A=(0,a.gql)("\n  mutation updateUserShortformDropdownItem($selector: SelectorInput!, $data: UpdateUserDataInput!) {\n    updateUser(selector: $selector, data: $data) {\n      data {\n        ...UsersCurrent\n      }\n    }\n  }\n");e.s(["default",0,e=>{let{post:n}=e,o=(0,d.useCurrentUser)(),[r]=(0,i.useMutation)(A);if(n.shortform||!(0,N.userCanDo)(o,"posts.edit.all"))return null;let a=(0,k.preferredHeadingCase)("Quick Takes");return(0,t.jsx)(h.default,{title:(0,k.preferredHeadingCase)("Set as user's ".concat(a," Post")),onClick:()=>{r({variables:{selector:{_id:n.userId},data:{shortformFeedId:n._id}}})}})}],1684)},404839,852231,934517,319907,507858,792318,e=>{"use strict";e.s(["default",()=>m],404839);var t=e.i(843476),n=e.i(725788),o=e.i(552275),i=e.i(791434),r=e.i(476331),a=e.i(136541),s=e.i(161517),l=e.i(823876),d=e.i(833851);let c=e=>{let{post:n,onClose:o}=e;return(0,t.jsx)(d.default,{open:!0,onClose:o,fullWidth:!0,maxWidth:"sm",children:(0,t.jsxs)(s.AnalyticsContext,{pageSectionContext:"editTagsDialog",children:[(0,t.jsx)(r.DialogTitle,{children:n.title}),(0,t.jsx)(a.DialogContent,{children:(0,t.jsx)(l.default,{post:n})})]})})};var u=e.i(109665);let m=e=>{let{post:r,closeMenu:a}=e,{openDialog:s}=(0,n.useDialog)(),l=async()=>{null==a||a(),s({name:"EditTagsDialog",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(c,{onClose:n,post:r})}})};return(0,t.jsx)(u.default,{title:(0,i.preferredHeadingCase)("Edit ".concat(o.taggingNamePluralCapitalSetting.get())),onClick:l,icon:"Tag"})};var p=e.i(182584),h=e.i(673991),g=e.i(820010),f=e.i(530841),v=e.i(644169);e.s(["default",0,e=>{let{post:n}=e,o=(0,f.useCurrentUser)(),i=(0,p.canUserEditPostMetadata)(o,n),r=(0,h.userIsPodcaster)(o),a=(0,g.userIsSharedOn)(o,n);if(!i&&!r&&!a)return null;let s=i||r?"/editPost?".concat(v.default.stringify({postId:n._id,eventForm:n.isEvent})):"/collaborateOnPost?".concat(v.default.stringify({postId:n._id}));return(0,t.jsx)(u.default,{title:"Edit",to:s,icon:"Edit"})}],852231),e.s(["default",0,e=>{let{post:n}=e,o=(0,f.useCurrentUser)();if(!(0,p.canUserEditPostMetadata)(o,n)||!n.isEvent)return null;let r="/newPost?".concat(v.default.stringify({eventForm:n.isEvent,templateId:n._id}));return(0,t.jsx)(u.default,{title:(0,i.preferredHeadingCase)("Duplicate Event"),to:r,icon:"Edit"})}],934517);var x=e.i(935132);e.s(["default",0,e=>{let{post:n}=e,o=(0,f.useCurrentUser)(),i=(0,p.canUserEditPostMetadata)(o,n);if(!(0,x.isEAForum)()||!i)return null;let r="/postAnalytics?".concat(v.default.stringify({postId:n._id}));return(0,t.jsx)(u.default,{title:"Analytics",to:r,icon:"Analytics"})}],319907);var y=e.i(271645),b=e.i(514089);e.i(813868);var C=e.i(122756);let w=(0,C.gql)("\n  mutation updatePostExcludeFromRecommendationsDropdownItem($selector: SelectorInput!, $data: UpdatePostDataInput!) {\n    updatePost(selector: $selector, data: $data) {\n      data {\n        ...PostsList\n      }\n    }\n  }\n");e.s(["default",0,e=>{let{post:n}=e,o=(0,f.useCurrentUser)(),[r]=(0,b.useMutation)(w),a=(0,y.useCallback)(()=>{r({variables:{selector:{_id:n._id},data:{disableRecommendation:!n.disableRecommendation}}})},[n,r]);if(!(0,h.userCanDo)(o,"posts.edit.all"))return null;let s=n.disableRecommendation?"Include in Recommendations":"Exclude from Recommendations";return(0,t.jsx)(u.default,{title:(0,i.preferredHeadingCase)(s),onClick:a})}],507858);let k=(0,C.gql)("\n  mutation updateUserApproveNewUserDropdownItem($selector: SelectorInput!, $data: UpdateUserDataInput!) {\n    updateUser(selector: $selector, data: $data) {\n      data {\n        ...UsersCurrent\n      }\n    }\n  }\n");e.s(["default",0,e=>{let{post:n}=e,o=(0,f.useCurrentUser)(),[r]=(0,b.useMutation)(k);if(!n.authorIsUnreviewed||!(0,h.userCanDo)(o,"posts.edit.all"))return null;let a=async()=>{await r({variables:{selector:{_id:n.userId},data:{reviewedByUserId:null==o?void 0:o._id,sunshineFlagged:!1,reviewedAt:new Date,needsReview:!1,snoozedUntilContentCount:null}}})};return(0,t.jsx)(u.default,{title:(0,i.preferredHeadingCase)("Approve New User"),onClick:a})}],792318)},644971,e=>{"use strict";var t=e.i(843476),n=e.i(540114),o=e.i(109665);let i=e=>{let{document:i,subscribeMessage:r,unsubscribeMessage:a,subscriptionType:s,tooltip:l}=e,{loading:d,disabled:c,isSubscribed:u,onSubscribe:m}=(0,n.useNotifyMe)({document:i,overrideSubscriptionType:s});return c?null:(0,t.jsx)(o.default,{title:u?a:r,onClick:m,icon:u?"Bell":"BellBorder",tooltip:l})};e.s(["NotifyMeDropdownItem",0,e=>{var n;return e.document&&(null==(n=e.enabled)||n)?(0,t.jsx)(i,{...e}):null}])},495791,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(538794),i=e.i(540114),r=e.i(304706);e.i(720030);var a=e.i(275261),s=e.i(109665),l=e.i(104275);let d=e=>{let{document:o,title:d,subscriptionType:c,useCheckboxIcon:u,classes:m}=e,{isSubscribed:p,onSubscribe:h,disabled:g}=(0,i.useNotifyMe)({document:o,overrideSubscriptionType:c,hideFlashes:!0}),[f,v]=(0,r.useOptimisticToggle)(null!=p&&p,null!=h?h:()=>{}),x=(0,n.useCallback)(()=>u?(0,t.jsx)(a.default,{checked:f}):(0,t.jsx)(l.default,{value:f,className:m.toggle,smallVersion:!0}),[f,u,m.toggle]);return(0,t.jsx)(s.default,{title:d,onClick:v,afterIcon:x,disabled:g,menuItemClassName:u?m.menuItemCheckbox:void 0})},c=(0,o.registerComponent)("NotifyMeToggleDropdownItem",e=>{var n;return(null==(n=e.enabled)||n)&&e.document?(0,t.jsx)(d,{...e}):null},{styles:e=>({toggle:{marginLeft:12},menuItemCheckbox:{paddingRight:8}})});e.s(["default",0,c])},777792,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(791434),i=e.i(444098),r=e.i(644971),a=e.i(495791),s=e.i(110601),l=e.i(65189),d=e.i(109665),c=e.i(79732);let u=(0,e.i(429329).defineStyles)("CombinedSubscriptionsDropdownItem",e=>({dropdownWrapper:{padding:"0 14px 0 10px",transform:"translateX(2px) translateY(-6px)"}}));e.s(["CombinedSubscriptionsDropdownItem",0,e=>{let{notifyMeItems:m}=e,p=(0,c.useStyles)(u);return(0,o.isFriendlyUI)()?(0,t.jsx)(s.default,{title:(0,t.jsx)("div",{className:p.dropdownWrapper,children:(0,t.jsx)(i.Card,{children:(0,t.jsx)(l.default,{children:m.map(e=>(0,t.jsx)(a.default,{...e},e.subscriptionType))})})}),clickable:!0,tooltip:!1,inlineBlock:!1,placement:"right-start",children:(0,t.jsx)(d.default,{title:"Get notified",icon:"BellBorder",afterIcon:"ThickChevronRight"})}):(0,t.jsx)(t.Fragment,{children:m.map(e=>(0,n.createElement)(r.NotifyMeDropdownItem,{...e,key:e.subscriptionType}))})}])},17769,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(204597),i=e.i(820010),r=e.i(530841),a=e.i(182584),s=e.i(777792);e.s(["PostSubscriptionsDropdownItem",0,e=>{let{post:l}=e,d=(0,r.useCurrentUser)(),c=d&&(0,a.isDialogueParticipant)(d._id,l),u=l.collabEditorDialogue&&!c,m=(0,n.useMemo)(()=>(e=>{var t,n,r;let{post:a,currentUser:s,showSubscribeToDialogueButton:l}=e;return[{document:a.group,enabled:!!a.group,subscribeMessage:"Subscribe to ".concat(null==(t=a.group)?void 0:t.name),unsubscribeMessage:"Unsubscribe from ".concat(null==(n=a.group)?void 0:n.name),title:"New ".concat(null==(r=a.group)?void 0:r.name," events"),subscriptionType:o.subscriptionTypes.newEvents},{document:a,enabled:a.shortform&&a.userId!==(null==s?void 0:s._id),subscribeMessage:"Subscribe to ".concat(a.title),unsubscribeMessage:"Unsubscribe from ".concat(a.title),title:"New quick takes from ".concat((0,i.userGetDisplayName)(a.user)),subscriptionType:o.subscriptionTypes.newShortform},{document:a.user,enabled:!!a.user&&a.user._id!==(null==s?void 0:s._id),subscribeMessage:"Subscribe to posts by ".concat((0,i.userGetDisplayName)(a.user)),unsubscribeMessage:"Unsubscribe from posts by ".concat((0,i.userGetDisplayName)(a.user)),title:"New posts by ".concat((0,i.userGetDisplayName)(a.user)),subscriptionType:o.subscriptionTypes.newPosts},{document:a,enabled:!!a.collabEditorDialogue&&l,subscribeMessage:"Subscribe to dialogue",unsubscribeMessage:"Unsubscribe from dialogue",title:"New responses in this dialogue",subscriptionType:o.subscriptionTypes.newPublishedDialogueMessages,tooltip:"Notifies you when there is new activity in the dialogue"},{document:a,subscribeMessage:"Subscribe to comments on this post",unsubscribeMessage:"Unsubscribe from comments on this post",title:"New comments on this post",subscriptionType:o.subscriptionTypes.newComments}]})({post:l,currentUser:d,showSubscribeToDialogueButton:u}),[l,d,u]);return(0,t.jsx)(s.CombinedSubscriptionsDropdownItem,{notifyMeItems:m})}])},972745,(e,t,n)=>{t.exports=function(e){if("function"!=typeof e)throw TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},921121,(e,t,n)=>{var o=e.r(536100),i=e.r(136179),r=e.r(666305),a=e.r(45350),s=e.r(972745);t.exports=function(e,t){return(a(e)?o:i)(e,s(r(t,3)))}},853333,e=>{"use strict";var t=e.i(514089),n=e.i(530841),o=e.i(788099),i=e.i(921121);e.i(813868);var r=e.i(122756);e.s(["useSetIsHiddenMutation",0,()=>{let e=(0,n.useCurrentUser)(),[a]=(0,t.useMutation)((0,r.gql)("\n    mutation setIsHidden($postId: String!, $isHidden: Boolean!) {\n      setIsHidden(postId: $postId, isHidden: $isHidden) {\n        ...UsersCurrent\n      }\n    }\n  "));return{setIsHiddenMutation:async function(t){let n;if(!e)return;let{postId:r,isHidden:s}=t,l=(null==e?void 0:e.hiddenPostsMetadata)||[];return n=s?(0,o.default)(l,e=>e.postId===r)?l:[...l,{postId:r}]:(0,i.default)(l,e=>e.postId===r),await a({variables:t,optimisticResponse:{setIsHidden:{...e,hiddenPostsMetadata:n}}})}}}])},373400,774703,e=>{"use strict";e.s(["default",()=>g],373400);var t=e.i(843476),n=e.i(271645),o=e.i(530841),i=e.i(161517),r=e.i(763011),a=e.i(96009),s=e.i(725788),l=e.i(853333),d=e.i(552275),c=e.i(712434),u=e.i(182584),m=e.i(538794),p=e.i(293958),h=e.i(109665);let g=(0,m.registerComponent)("DislikeRecommendationDropdownItem",e=>{let{post:a}=e,m=(0,n.useContext)(r.IsRecommendationContext),g=(0,o.useCurrentUser)(),{openDialog:f}=(0,s.useDialog)(),{captureEvent:v}=(0,i.useTracking)(),{setIsHiddenMutation:x}=(0,l.useSetIsHiddenMutation)();return m?(0,t.jsx)(h.default,{title:"Dismiss recommendation",onClick:()=>{g?(g&&d.recombeeEnabledSetting.get()&&(0,u.isRecombeeRecommendablePost)(a)&&c.recombeeApi.createRating(a._id,g._id,"bigDownvote"),x({postId:a._id,isHidden:!0}),v("recommendationNotInterestedClicked",{postId:a._id,pageSubElementContext:"tripleDot"})):f({name:"LoginPopup",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(p.default,{onClose:n})}})},icon:"NotInterested"}):null},{styles:e=>({icon:{cursor:"pointer",color:e.palette.icon.dim3}}),hocs:[a.default]});e.s(["default",()=>v],774703);var f=e.i(710632);let v=(0,m.registerComponent)("HideFrontpagePostDropdownItem",e=>{var a;let{post:d}=e,c=(0,n.useContext)(r.AllowHidingFrontPagePostsContext),u=(0,n.useContext)(r.IsRecommendationContext),m=(0,o.useCurrentUser)(),{openDialog:g}=(0,s.useDialog)(),[v,x]=(0,n.useState)(null==(a=(0,f.default)((null==m?void 0:m.hiddenPostsMetadata)||[],"postId"))?void 0:a.includes(d._id)),{captureEvent:y}=(0,i.useTracking)(),{setIsHiddenMutation:b}=(0,l.useSetIsHiddenMutation)();return!c||u?null:(0,t.jsx)(h.default,{title:v?"Un-hide from frontpage":"Hide from frontpage",onClick:()=>{if(!m)return void g({name:"LoginPopup",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(p.default,{onClose:n})}});let e=!v;x(e),b({postId:d._id,isHidden:e}),y("hideToggle",{postId:d._id,hidden:e})},icon:v?"EyeOutline":"Eye"})},{styles:e=>({icon:{cursor:"pointer",color:e.palette.icon.dim3}}),hocs:[a.default]})},763011,431344,665540,e=>{"use strict";e.s(["AllowHidingFrontPagePostsContext",()=>Q,"IsRecommendationContext",()=>K,"default",()=>J],763011);var t=e.i(843476),n=e.i(271645),o=e.i(530841),i=e.i(552275),r=e.i(138798),a=e.i(539254),s=e.i(242763),l=e.i(476539),d=e.i(402781),c=e.i(421516),u=e.i(879809),m=e.i(525514),p=e.i(516755),h=e.i(870175),g=e.i(438461),f=e.i(693103),v=e.i(1684),x=e.i(65189),y=e.i(404839),b=e.i(852231),C=e.i(934517),w=e.i(319907),k=e.i(507858),j=e.i(792318),S=e.i(17769),I=e.i(373400),T=e.i(774703),N=e.i(725788),L=e.i(164783),R=e.i(673991),_=e.i(946271);e.i(813868);var A=e.i(122756),M=e.i(109665),P=e.i(833851),E=e.i(136541);function F(e,t){if(!e||0===t.length)return e;let n=t.filter(e=>e.score>0&&e.sentence&&e.sentence.trim().length>=3);if(0===n.length)return e;let o=new DOMParser().parseFromString('<div class="root">'.concat(e,"</div>"),"text/html"),i=n.map(e=>e.score),r=Math.min(...i),a=Math.max(...i)-r||1,s=e=>"hsl(".concat(120-(e-r)/a*120,", 100%, 85%)"),l=e=>e.replace(/^\s*[>*+-]\s+/,"").replace(/^\s*#+\s+/,"").replace(/^\s*\d+\.\s+/,"").replace(/[*_`~]/g,"").replace(/\s+/g," ").trim(),d=new Set,c=o.body.firstElementChild;n.forEach(e=>{let{sentence:t,score:n}=e,i=l(t);if(!i)return;let r=o.createTreeWalker(c,NodeFilter.SHOW_ELEMENT,{acceptNode(e){var t;return(null==(t=e.textContent)?void 0:t.trim())?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}}),a=r.nextNode();for(;a;){if(l(a.textContent||"")===i){a.style.backgroundColor=s(n),a.title="Score: ".concat(n.toFixed(2)),a.classList.add("llm-highlight"),d.add(t);break}a=r.nextNode()}});let u=n.filter(e=>!d.has(e.sentence));if(0===u.length)return c.innerHTML;let m=new Map;u.forEach(e=>{let{sentence:t,score:n}=e,i=o.createElement("span");i.className="llm-highlight",i.style.backgroundColor=s(n),i.title="Score: ".concat(n.toFixed(2)),m.set(t,i)});let p=e=>{let t=e.textContent||"";if(t.trim())for(let[n,i]of m){let r=t.indexOf(n);if(-1!==r){let a=t.slice(0,r),s=t.slice(r,r+n.length),l=t.slice(r+n.length);a&&e.parentNode.insertBefore(o.createTextNode(a),e);let d=i.cloneNode();if(d.textContent=s,e.parentNode.insertBefore(d,e),l){let t=o.createTextNode(l);e.parentNode.insertBefore(t,e),p(t)}e.parentNode.removeChild(e),m.delete(n);return}}},h=o.createTreeWalker(c,NodeFilter.SHOW_TEXT,null),g=h.nextNode(),f=[];for(;g;)f.push(g),g=h.nextNode();return f.forEach(p),c.innerHTML}let B=new Set(["1","2","3","4","5","6","7","8","9","10","11","12","the","a","an","and","or","but","in","on","at","to","for","of","is","are","was","were","be","been","being","have","has","had","do","does","did","will","would","could","should","may","might","must","shall","can","this","that","these","those","it","its","with","as","by","from"]),D=["p","li","h1","h2","h3","h4","h5","h6","blockquote","div","td","th","section"];function U(e){return e.filter(e=>!B.has(e)&&e.length>2)}function H(e,t){if(!e||0===t.length)return e;let n=t.filter(e=>e.score>0&&e.text&&e.text.trim().length>=3);if(0===n.length)return e;let o=new DOMParser().parseFromString('<div class="root">'.concat(e,"</div>"),"text/html"),i=o.body.firstElementChild,{text:r,textNodes:a}=function(e,t){let n=[],o=t.createTreeWalker(e,NodeFilter.SHOW_TEXT,null),i=0,r=[],a=o.nextNode();for(;a;){let e=a.textContent||"";if(e.length>0){if(i>0&&r.length>0){let t=r[r.length-1],n=t[t.length-1],o=e[0];/\s/.test(n)||/\s/.test(o)||(r.push(" "),i+=1)}n.push({node:a,element:a.parentElement,startPos:i,endPos:i+e.length}),r.push(e),i+=e.length}a=o.nextNode()}return{text:r.join(""),textNodes:n}}(i,o),s=function(e){let t,n=[],o=/[a-zA-Z0-9]+/g,i=0;for(;null!==(t=o.exec(e));)n.push({word:t[0].toLowerCase(),charPos:t.index,wordIndex:i++});return n}(r),l=0;for(let e of n){let t,n=e.text.toLowerCase().split(/[^a-z0-9]+/).filter(e=>e.length>0);if(n.length<5)continue;let o=U(n.slice(0,20)),i=U(n.slice(-20));if(o.length<3)continue;let u=Math.max(0,l-20),m=Math.floor(.7*o.length),p=function(e,t,n,o,i){if(0===t.length)return null;let r=null;for(let i=n;i<e.length;i++){if(e[i].word!==t[0])continue;let n=i,a=0,s=0,l=i;for(;n<e.length&&a<t.length&&!(n-l>40);)e[n].word===t[a]&&(s++,l=n,a++),n++;if(s>=o&&((!r||s>r.matchCount)&&(r={charPos:e[i].charPos,wordIndex:i,matchCount:s}),s>=.8*t.length))break}return r}(s,o,u,m,0);if(!p)continue;let h=n.length,g=p.wordIndex+Math.max(10,Math.floor(.5*h)),f=Math.max(3,Math.floor(.35*i.length)),v=function(e,t,n,o,i){var r,a;if(0===t.length)return null;let s=n,l=0,d=0,c=n,u=null!=(r=null==(a=e[n])?void 0:a.charPos)?r:0;for(;s<e.length&&l<t.length&&(!(d>0)||!(s-c>40));)e[s].word===t[l]&&(d++,c=s,u=e[s].charPos+e[s].word.length,l++),s++;return d>=o?{charPos:u,wordIndex:c,matchCount:d}:null}(s,i,g,f,0),x=p.charPos;if(v)t=v.charPos;else{var d,c;let e=Math.min(p.wordIndex+h,s.length-1);t=null!=(d=null==(c=s[e])?void 0:c.charPos)?d:r.length}for(let n of(l=p.wordIndex,t<=x&&(t=x+200),function(e,t,n){let o=new Set;for(let r of e){if(r.endPos<=t||r.startPos>=n)continue;let e=r.element;for(;e;){var i;let t=null==(i=e.tagName)?void 0:i.toLowerCase();if(D.includes(t)){o.add(e);break}e=e.parentElement}}return o}(a,x,t)))n.classList.contains("pangram-highlight")||(n.style.backgroundColor=function(e){let t=Math.pow(Math.max(0,Math.min(1,e)),.7);return"hsl(".concat(120-120*t,", 100%, 85%)")}(e.score),n.title="Pangram Score: ".concat(e.score.toFixed(2)),n.classList.add("pangram-highlight"))}return i.innerHTML}e.s(["highlightHtmlWithLlmDetectionScores",()=>F,"highlightHtmlWithPangramWindowScores",()=>H],431344);var W=e.i(514089),O=e.i(79732),V=e.i(429329),z=e.i(144437);let $=(0,V.defineStyles)("LLMScoreDialog",e=>({contentContainer:{"& img":{maxWidth:"100%",height:"auto"}},runCheckContainer:{display:"flex",flexDirection:"column",alignItems:"center",gap:16,padding:24},runCheckButton:{padding:"12px 24px",fontSize:16,fontWeight:500,backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,border:"none",borderRadius:e.borderRadius.default,cursor:"pointer",transition:"background-color 0.2s ease","&:hover":{backgroundColor:e.palette.primary.dark},"&:disabled":{opacity:.6,cursor:"not-allowed"}},description:{color:e.palette.text.dim,textAlign:"center",maxWidth:400}})),q=(0,A.gql)("\n  mutation RunLlmCheckForDocument($documentId: String!, $collectionName: ContentCollectionName!) {\n    runLlmCheckForDocument(documentId: $documentId, collectionName: $collectionName) {\n      ...AutomatedContentEvaluationsFragment\n    }\n  }\n"),G=function(e){var o,i,r;let{onClose:a,documentId:s,automatedContentEvaluations:l,contentHtml:d,contentType:c,onLlmCheckComplete:u}=e,m=(0,O.useStyles)($),{flash:p}=(0,z.useMessages)(),[h,g]=(0,n.useState)(l),[f,{loading:v}]=(0,W.useMutation)(q,{onCompleted:e=>{g(e.runLlmCheckForDocument),null==u||u()},onError:e=>{p({messageString:"Error running LLM check: ".concat(e.message)})}}),x=(0,n.useCallback)(()=>{s&&f({variables:{documentId:s,collectionName:"Post"===c?"Posts":"Comments"}})},[f,s,c]),y=!!s,b=null==h?void 0:h.pangramScore,C=null==h?void 0:h.pangramMaxScore,w=h?H(d,null!=(o=h.pangramWindowScores)?o:[]):"";return(0,t.jsx)(P.default,{open:!0,onClose:a,children:(0,t.jsx)(E.DialogContent,{children:h?(0,t.jsxs)("div",{className:m.contentContainer,children:[(0,t.jsxs)("p",{children:["LLM Score Average: ",null!=(i=null==b?void 0:b.toFixed(2))?i:"N/A",", Max: ",null!=(r=null==C?void 0:C.toFixed(2))?r:"N/A"]}),h.pangramPrediction&&(0,t.jsxs)("p",{children:["Prediction: ",(0,t.jsx)("strong",{children:h.pangramPrediction})]}),(0,t.jsxs)("p",{children:[c," with highlighted windows:"]}),(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:w}})]}):y?(0,t.jsxs)("div",{className:m.runCheckContainer,children:[(0,t.jsxs)("p",{className:m.description,children:["No LLM evaluation exists for this ",c.toLowerCase(),". Run the check to analyze the content for potential AI-generated text."]}),(0,t.jsx)("button",{className:m.runCheckButton,onClick:x,disabled:v,children:v?"Running LLM Check...":"Run LLM Check"})]}):(0,t.jsx)("div",{className:m.runCheckContainer,children:(0,t.jsxs)("p",{className:m.description,children:["No LLM evaluation exists for this ",c.toLowerCase(),"."]})})})})};e.s(["default",0,G],665540);let Z=(0,A.gql)("\n  query PostLLMScoreQuery($postId: String!) {\n    post(selector: { _id: $postId }) {\n      result {\n        _id\n        contents {\n          _id\n          html\n        }\n        automatedContentEvaluations {\n          ...AutomatedContentEvaluationsFragment\n        }\n      }\n    }\n  }\n"),Y=function(e){var n,i,r,a;let{post:s,closeMenu:l}=e,d=(0,o.useCurrentUser)(),{openDialog:c}=(0,N.useDialog)(),u=null!==(0,L.usePostsPageContext)(),m=(0,R.userIsAdminOrMod)(d),{data:p,loading:h,refetch:g}=(0,_.useQuery)(Z,{variables:{postId:s._id},skip:!u||!m,ssr:!1});if(!u||!m)return null;let f=null==p||null==(i=p.post)?void 0:i.result,v=null==f?void 0:f.automatedContentEvaluations,x=null!=(n=null==f||null==(r=f.contents)?void 0:r.html)?n:"",y="number"==typeof(null==v?void 0:v.pangramScore);if(h)return(0,t.jsx)(M.default,{title:"LLM Score...",icon:"Robot",disabled:!0});let b=y?"View LLM Score (".concat(null==(a=v.pangramScore)?void 0:a.toFixed(2),")"):"Run LLM Check";return(0,t.jsx)(M.default,{title:b,icon:"Robot",onClick:()=>{null==l||l(),c({name:"LLMScoreDialog",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(G,{onClose:n,documentId:s._id,automatedContentEvaluations:null!=v?v:null,contentHtml:x,contentType:"Post",onLlmCheckComplete:g})}})}})},Q=n.default.createContext(!1),K=n.default.createContext(!1),X=(0,V.defineStyles)("PostActions",e=>({root:{minWidth:e.isFriendlyUI?void 0:300,maxWidth:"calc(100vw - 100px)"}})),J=e=>{let{post:n,closeMenu:N,includeBookmark:L=!0}=e,R=(0,O.useStyles)(X),_=(0,o.useCurrentUser)();return n?(0,t.jsxs)(x.default,{className:R.root,children:[(0,t.jsx)(b.default,{post:n}),(0,t.jsx)(m.ResyncRssDropdownItem,{post:n,closeMenu:N}),(0,t.jsx)(C.default,{post:n}),(0,t.jsx)(w.default,{post:n}),(0,t.jsx)(S.PostSubscriptionsDropdownItem,{post:n}),L&&(0,t.jsx)(a.default,{documentId:n._id,collectionName:"Posts"}),(0,t.jsx)(u.default,{}),(0,t.jsx)(T.default,{post:n}),(0,t.jsx)(I.default,{post:n}),(0,t.jsx)(d.default,{post:n}),_&&(0,t.jsx)(y.default,{post:n,closeMenu:N}),(0,t.jsx)(h.default,{post:n,closeMenu:N}),_&&(0,t.jsx)(p.default,{post:n}),i.hasCuratedPostsSetting.get()&&(0,t.jsx)(s.default,{post:n}),(0,t.jsx)(r.default,{post:n}),(0,t.jsx)(c.default,{post:n}),(0,t.jsx)(g.default,{post:n}),(0,t.jsx)(v.default,{post:n}),(0,t.jsx)(k.default,{post:n}),(0,t.jsx)(j.default,{post:n}),(0,t.jsx)(l.default,{post:n}),(0,t.jsx)(f.default,{post:n}),(0,t.jsx)(Y,{post:n,closeMenu:N})]}):null}},671396,e=>{"use strict";e.s(["default",()=>h]);var t=e.i(843476),n=e.i(271645),o=e.i(574589),i=e.i(802056),r=e.i(161517),a=e.i(222393),s=e.i(343794),l=e.i(79732),d=e.i(429329),c=e.i(374132),u=e.i(763011),m=e.i(105736);let p=(0,d.defineStyles)("PostActionsButton",e=>({root:{cursor:"pointer","@media print":{display:"none"}},icon:{verticalAlign:"middle",color:e.isFriendlyUI?e.palette.grey[400]:void 0,cursor:"pointer"},popper:{position:"relative",zIndex:e.zIndexes.postItemMenu}})),h=e=>{let d,{post:h,vertical:g,popperGap:f,autoPlace:v,flip:x,includeBookmark:y=!0,onSeeLess:b,isSeeLessMode:C,className:w,iconClassName:k,ActionsComponent:j,postMetaInfo:S}=e,I=(0,l.useStyles)(p),T=(0,n.useRef)(null),[N,L]=(0,n.useState)(!1),{captureEvent:R}=(0,r.useTracking)(),_=(0,a.useIsAboveBreakpoint)("xl")||!v?"right-start":"left-start";if(f)switch(_){case"right-start":d={marginLeft:f};break;case"left-start":d={marginRight:f}}let A=e=>{R("tripleDotClick",{open:e,itemType:"post",postId:h._id}),L(e)},M=g?i.default:o.default,P=null!=j?j:u.default;return(0,t.jsxs)("div",{className:(0,s.default)(I.root,w),children:[(0,t.jsx)("div",{ref:T,children:(0,t.jsx)(M,{className:(0,s.default)(I.icon,k),onClick:e=>A(!N)})}),(0,t.jsx)(c.default,{open:N,anchorEl:T.current,placement:_,allowOverflow:!0,flip:x,style:d,children:(0,t.jsx)(m.default,{onClickAway:()=>A(!1),children:(0,t.jsx)(P,{post:h,closeMenu:()=>A(!1),includeBookmark:y,onSeeLess:b,isSeeLessMode:C,postMetaInfo:S})})})]})}},8404,e=>{"use strict";e.s(["default",()=>m]);var t=e.i(843476),n=e.i(271645),o=e.i(964344),i=e.i(343794),r=e.i(79732),a=e.i(429329),s=e.i(937636),l=e.i(87828),d=e.i(690118);let c=e=>({maxHeight:250,objectFit:"contain",display:"block",margin:"0 auto",[e.breakpoints.down("sm")]:{maxHeight:"none"}}),u=(0,a.defineStyles)("FeedContentBody",e=>({root:{position:"relative","& .read-more-suffix":{fontFamily:e.palette.fonts.sansSerifStack,color:e.palette.ultraFeed.dim,cursor:"pointer",display:"inline",marginLeft:0},"& .read-suffix-desktop":{[e.breakpoints.down("sm")]:{display:"none"}},"& .read-suffix-mobile":{display:"none",[e.breakpoints.down("sm")]:{display:"inline"}}},readActionButton:{display:"none",[e.breakpoints.down("sm")]:{display:"inline-block",position:"absolute",right:8,bottom:0,backgroundColor:e.palette.ultraFeed.readBackgroundMobile,paddingLeft:8,paddingRight:4,zIndex:2,fontSize:"inherit",fontFamily:e.palette.fonts.sansSerifStack,color:e.palette.ultraFeed.dim,cursor:"pointer"}},contentWrapper:{position:"relative"},fadeOverlay:{display:"none",[e.breakpoints.down("sm")]:{display:"block",position:"absolute",bottom:0,left:0,right:0,height:60,background:"linear-gradient(to bottom, transparent 0%, ".concat(e.palette.ultraFeed.readBackgroundMobile," 100%)"),pointerEvents:"none",zIndex:1,opacity:.8}},clickableContent:{cursor:"pointer"},maxHeight:{},lineClamp:{display:"-webkit-box !important","-webkit-box-orient":"vertical !important",overflow:"hidden !important",maxHeight:"none !important",paddingBottom:"0.1em !important","& blockquote:first-child":{margin:0,paddingTop:0,paddingBottom:2,marginBottom:".25em",display:"-webkit-box !important","-webkit-box-orient":"vertical !important",WebkitLineClamp:"1 !important",overflow:"hidden !important",textOverflow:"ellipsis","& strong, & b, & em, & i, & h1, & h2, & h3, & h4, & h5, & h6":{fontWeight:"normal !important",fontStyle:"normal !important",fontSize:"inherit !important"}},"& blockquote + p":{},"& blockquote + p > br:first-child":{display:"none !important"},"& p:last-child":{marginBottom:"0 !important"},"& img":c(e)},lineClamp1:{WebkitLineClamp:"1 !important"},lineClamp2:{WebkitLineClamp:"2 !important"},lineClamp3:{WebkitLineClamp:"3 !important"},lineClamp4:{WebkitLineClamp:"4 !important"},lineClamp5:{WebkitLineClamp:"5 !important"},lineClamp6:{WebkitLineClamp:"6 !important"},lineClamp8:{WebkitLineClamp:"8 !important"},lineClamp10:{WebkitLineClamp:"10 !important"},levelZero:{"& img":c(e)}})),m=e=>{let{html:a,initialWordCount:c,maxWordCount:m,continueReadingUrl:p,wordCount:h,onExpand:g,nofollow:f=!1,className:v,clampOverride:x,hideSuffix:y,resetSignal:b,serifStyle:C=!1,isRead:w=!1}=e,k=(0,r.useStyles)(u),j=(0,s.useNavigate)(),[S,I]=(0,n.useState)(!1),T=n.default.useRef(b);(0,n.useEffect)(()=>{T.current!==b&&void 0!==b&&I(!1),T.current=b},[b]);let N=S?m:c,L=(0,n.useCallback)(()=>{S||(I(!0),null==g||g(!0,null!=h?h:0))},[S,g,h]),{truncatedHtml:R,wasTruncated:_,actionText:A}=(()=>{let e=a,t=!1,n=0,i="",r=null;if(void 0===h)return{truncatedHtml:a,wasTruncated:!1,wordsLeft:0,suffix:"",actionText:null};{let{willTruncate:s,wordsRemaining:l}=(0,o.calculateTruncationStatus)(h,N,20);if(y)i="...";else if(s&&!S){let e=h>m&&p;w?(r=h>m?"(read again, ".concat(l," words )"):"(read again)",i=e?'<span class="read-suffix-mobile">...</span><span class="read-more-suffix read-suffix-desktop read-more-navigate">... '.concat(r,"</span>"):'<span class="read-suffix-mobile">...</span><span class="read-more-suffix read-suffix-desktop">... '.concat(r,"</span>")):i=e?'<span class="read-more-suffix read-more-navigate">... (read '.concat(l," more words )</span>"):'<span class="read-more-suffix">... (read more)</span>'}let d=(0,o.truncateWithGrace)(a,N,20,h,i);e=d.truncatedHtml,t=d.wasTruncated,n=d.wordsLeft}return{truncatedHtml:e,wasTruncated:t,wordsLeft:n,suffix:i,actionText:r}})(),M=(0,n.useCallback)(e=>{e.target.closest("a")||_&&!S&&void 0!==h&&(e.preventDefault(),h>m&&p?j(p):L())},[L,_,S,h,m,p,j]),P=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),h&&h>m&&p?j(p):L()},[h,m,p,j,L]);return(0,t.jsx)("div",{className:(0,i.default)(k.root,v),children:(0,t.jsx)(l.default,{contentType:C?"ultraFeedPost":"ultraFeed",children:(0,t.jsxs)("div",{className:k.contentWrapper,children:[(0,t.jsx)("div",{onClick:M,className:(0,i.default)({[k.clickableContent]:_&&!S}),children:(0,t.jsx)(d.ContentItemBody,{dangerouslySetInnerHTML:{__html:R},nofollow:f,className:(0,i.default)({[k.maxHeight]:!S&&_,[k.lineClamp]:!1,"":!1,[k.levelZero]:!S})})}),_&&!S&&w&&(0,t.jsx)("div",{className:k.fadeOverlay}),A&&_&&!S&&(0,t.jsx)("span",{className:k.readActionButton,onClick:P,children:A})]})})})}},91895,43582,855762,e=>{"use strict";var t=e.i(843476),n=e.i(271645);let o=(0,e.i(339213).default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0V0z"}),(0,t.jsx)("g",{children:(0,t.jsx)("path",{d:"M20 17.17L18.83 16H4V4h16v13.17zM20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4V4c0-1.1-.9-2-2-2z"})})]}),"ModeCommentOutlined");e.s(["default",0,o],91895),e.s(["DebateIconOutline",0,e=>(0,t.jsx)("svg",{width:"25",height:"24",viewBox:"0 0 25 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,t.jsx)("g",{transform:"matrix(1,0,0,1,-55.18847383,-74.639298541)",children:(0,t.jsxs)("g",{transform:"matrix(1,0,0,1,-29,-22)",children:[(0,t.jsx)("g",{children:(0,t.jsx)("path",{d:"M91.26263,114.256681C91.26263,114.256681 90.188474,114.256681 90.188474,114.256681 C90.188474,114.256681 89.26572,115.179436 89.26572,115.179436 C89.324019,116.228152 90.200005,117.068032 91.26263,117.068032 C91.26263,117.068032 105.26263,117.068032 105.26263,117.068032 C105.26263,117.068032 109.26263,121.068032 109.26263,121.068032 C109.26263,121.068032 109.26263,103.068032 109.26263,103.068032 C109.26263,101.968032 108.36263,101.068032 107.26263,101.068032 C107.26263,101.068032 106.188474,101.068032 106.188474,101.068032 C106.188474,101.068032 106.188474,103.068032 106.188474,103.068032 C106.188474,103.068032 107.26263,103.068032 107.26263,103.068032 C107.26263,103.068032 107.26263,116.238032 107.26263,116.238032 C107.26263,116.238032 106.09263,115.068032 106.09263,115.068032 C106.09263,115.068032 91.26263,115.068032 91.26263,115.068032 C91.26263,115.068032 91.26263,114.256681 91.26263,114.256681 L 91.26263,114.256681 Z"})}),(0,t.jsx)("g",{transform:"matrix(-1,0,0,1,163.68847383,17.119298541)",children:(0,t.jsx)("path",{d:"M77.5,94.69C77.5,94.69 76.33,93.52 76.33,93.52 C76.33,93.52 61.5,93.52 61.5,93.52 C61.5,93.52 61.5,81.52 61.5,81.52 C61.5,81.52 77.5,81.52 77.5,81.52 C77.5,81.52 77.5,94.69 77.5,94.69 C77.5,94.69 77.5,94.69 77.5,94.69 ZM77.5,79.52C77.5,79.52 61.5,79.52 61.5,79.52 C60.4,79.52 59.5,80.42 59.5,81.52 C59.5,81.52 59.5,93.52 59.5,93.52 C59.5,94.62 60.4,95.52 61.5,95.52 C61.5,95.52 75.5,95.52 75.5,95.52 C75.5,95.52 79.5,99.52 79.5,99.52 C79.5,99.52 79.5,81.52 79.5,81.52 C79.5,80.42 78.6,79.52 77.5,79.52 C77.5,79.52 77.5,79.52 77.5,79.52 Z"})})]})})})],43582);let i=new(e.i(345955)).TupleSet(["Posts","Comments"]);e.s(["bookmarkableCollectionNames",0,i],855762)},583864,e=>{"use strict";var t=e.i(843476),n=e.i(538794),o=e.i(96009),i=e.i(343794),r=e.i(791434),a=e.i(385193),s=e.i(110601),l=e.i(813292);let d=(0,n.registerComponent)("BookmarkButton",e=>{let{documentId:n,collectionName:o,initial:d,withText:c,placement:u="right",overrideTooltipText:m,className:p,classes:h}=e,{icon:g,labelText:f,hoverText:v,toggleBookmark:x}=(0,a.useBookmark)(n,o,d),y=c?"a":"span";return(0,t.jsx)(s.default,{title:null!=m?m:v,placement:c?"bottom":u,children:(0,t.jsxs)(y,{onClick:x,className:(0,i.default)({[h.container]:!c,[h.iconWithText]:c,[h.iconWithTextFriendlyUI]:c&&(0,r.isFriendlyUI)()}),children:[(0,t.jsx)(l.default,{icon:g,className:p})," ",c&&f]})})},{styles:e=>({container:{cursor:"pointer",color:e.palette.icon.dim3},iconWithText:{color:e.palette.text.dim3,display:"inline-block",marginRight:20,"@media print":{display:"none"},"& svg":{fontSize:"1.35em",transform:"translateY(6px)",marginLeft:-3,marginRight:-3}},iconWithTextFriendlyUI:{"& svg":{transform:"translateY(5px)",marginRight:-1}}}),hocs:[o.default]});e.s(["default",0,d])},918541,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(343794),i=e.i(79732),r=e.i(429329),a=e.i(405706),s=e.i(110601),l=e.i(759398),d=e.i(801659);let c=(0,r.defineStyles)("UltraFeedReactionsPalette",e=>({moreReactions:{},searchBox:{border:e.palette.border.faint,borderRadius:3,width:"100%",padding:4,background:e.palette.panelBackground.default,marginBottom:8,"&:focus":{border:e.palette.border.normal}},hoverBallotLabel:{marginLeft:10,marginRight:10,verticalAlign:"middle",display:"flex",alignItems:"center",justifyContent:"space-between",flexGrow:1,fontSize:13,whiteSpace:"pre-wrap"},paletteEntry:{cursor:"pointer",width:140,marginBottom:1,display:"flex",alignItems:"center","&:hover":{background:e.palette.panelBackground.darken04}},paletteIcon:{padding:3,margin:1},selected:{background:e.palette.panelBackground.darken10,borderRadius:6},selectedAnti:{background:e.palette.namesAttachedReactions.selectedAnti,borderRadius:6},reactionPaletteScrollRegion:{width:"100%",maxHeight:260,overflowY:"scroll",marginTop:8,display:"flex",flexWrap:"wrap",justifyContent:"space-around",rowGap:2},tooltipIcon:{marginRight:12,padding:8,"& img":{filter:"opacity(1)"}},tooltipLabel:{fontSize:15},primarySection:{marginBottom:8,display:"flex",flexWrap:"wrap"},iconSection:{borderBottom:e.palette.border.faint,paddingBottom:6,marginBottom:6,marginRight:7,display:"flex",flexWrap:"wrap"},bottomSection:{marginTop:8,display:"flex",flexWrap:"wrap"},tooltipRoot:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingRight:8},gridIconButton:{cursor:"pointer",padding:4,margin:2,"&:hover":{background:e.palette.panelBackground.darken04}}})),u=e=>{let{reaction:n}=e,o=(0,i.useStyles)(c);return(0,t.jsxs)("div",{className:o.tooltipRoot,children:[(0,t.jsx)("div",{className:o.tooltipIcon,children:(0,t.jsx)(a.default,{inverted:!0,react:n.name,size:40})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:o.tooltipLabel,children:n.label}),(0,t.jsx)(l.default,{reaction:n})]})]})},m=e=>{let{getCurrentUserReactionVote:n,toggleReaction:r,reaction:l,placement:d="left",size:m=18,quote:p}=e,h=n(l.name,p),g=(0,i.useStyles)(c);return(0,t.jsx)(s.default,{placement:d,title:(0,t.jsx)(u,{reaction:l}),children:(0,t.jsxs)("div",{className:g.paletteEntry,onClick:e=>r(l.name,p),children:[(0,t.jsx)("span",{className:(0,o.default)(g.paletteIcon,{[g.selected]:"created"===h||"seconded"===h,[g.selectedAnti]:"disagreed"===h}),children:(0,t.jsx)(a.default,{react:l.name,size:m})}),(0,t.jsx)("span",{className:g.hoverBallotLabel,children:l.label})]},l.name)},l.name)};e.s(["default",0,e=>{let{getCurrentUserReactionVote:o,toggleReaction:r}=e,a=(0,i.useStyles)(c),[s,l]=(0,n.useState)(""),u=(0,d.getCuratedActiveReactions)(s);return(0,t.jsxs)("div",{className:a.moreReactions,children:[(0,t.jsx)("input",{type:"text",className:a.searchBox,value:s,placeholder:"Search reactions",onChange:e=>{l(e.currentTarget.value)}}),(0,t.jsx)("div",{className:a.reactionPaletteScrollRegion,children:u.map((e,n)=>(0,t.jsx)(m,{getCurrentUserReactionVote:o,toggleReaction:r,reaction:e,placement:n%2==0?"left":"right",size:18,quote:null},n))})]})}])},831170,e=>{"use strict";e.s(["default",()=>N],831170);var t=e.i(843476),n=e.i(271645),o=e.i(79732),i=e.i(429329),r=e.i(343794),a=e.i(397891),s=e.i(530841),l=e.i(405706),d=e.i(918541),c=e.i(703577),u=e.i(197643),m=e.i(903780),p=e.i(105736),h=e.i(527156),g=e.i(656003),f=e.i(409560),v=e.i(110601),x=e.i(20282),y=e.i(410285);let b=(0,i.defineStyles)("DetailedReactionOverview",e=>({root:{fontFamily:e.typography.commentStyle.fontFamily,maxWidth:450,maxHeight:400,overflowY:"auto"},itemRowContainer:{padding:"6px 0",borderBottom:"1px solid ".concat(e.palette.border.faint),"&:last-child":{borderBottom:"none"}},itemRow:{display:"flex",alignItems:"center",justifyContent:"space-between"},iconAndLabel:{display:"flex",alignItems:"center",flexGrow:1,marginRight:8,minWidth:0,paddingLeft:4},iconAndLabelTextWrapper:{display:"flex",flexDirection:"column",overflow:"hidden",marginLeft:8},labelText:{fontWeight:"bold",display:"-webkit-box","-webkit-line-clamp":2,"-webkit-box-orient":"vertical",overflow:"hidden",textOverflow:"ellipsis",color:e.palette.text.primary},quoteTextDisplay:{fontSize:"0.9em",color:e.palette.text.primary,display:"-webkit-box","-webkit-line-clamp":2,"-webkit-box-orient":"vertical",overflow:"hidden",textOverflow:"ellipsis"},voteButtonsWrapper:{flexShrink:0},usersWhoReactedList:{fontSize:"12px",color:e.palette.grey[500],paddingLeft:30,marginTop:4}})),C=e=>{let{voteProps:i}=e,r=(0,o.useStyles)(b),{getCurrentUserReactionVote:s,setCurrentUserReaction:d}=(0,u.useNamesAttachedReactionsVoting)(i),c=(0,a.getNormalizedReactionsListFromVoteProps)(i),m=(0,n.useMemo)(()=>{var e;let n=null!=(e=null==c?void 0:c.reacts)?e:{},o=Object.fromEntries(h.namesAttachedReactions.filter(e=>!e.deprecated).map(e=>[e.name,e]));return Object.entries(n).flatMap(e=>{let[n,i]=e,r=o[n];if(!r||!i)return[];let a=[],d=i.filter(e=>!e.quotes||0===e.quotes.length);return d.length>0&&a.push({id:n,reactionName:n,reactionLabel:r.label,iconComponent:(0,t.jsx)(l.default,{react:n}),quote:null,netCount:(0,g.default)(d,e=>"disagreed"===e.reactType?-1:1),currentUserVote:s(n,null),reactions:d}),[...a,...Object.entries(i.filter(e=>e.quotes&&e.quotes.length>0).reduce((e,t)=>{let n=t.quotes[0];return e[n]||(e[n]=[]),e[n].push(t),e},{})).map(e=>{let[o,i]=e;return{id:"".concat(n,"-").concat((0,x.slugify)(o)),reactionName:n,reactionLabel:r.label,iconComponent:(0,t.jsx)(l.default,{react:n}),quote:o,netCount:(0,g.default)(i,e=>"disagreed"===e.reactType?-1:1),currentUserVote:s(n,o),reactions:i}})]})},[c,s]);return(0,t.jsxs)("div",{className:r.root,children:[0===m.length&&(0,t.jsx)("p",{children:"No reactions yet."}),m.map(e=>(0,t.jsxs)("div",{className:r.itemRowContainer,children:[(0,t.jsxs)("div",{className:r.itemRow,children:[(0,t.jsxs)("div",{className:r.iconAndLabel,children:[e.iconComponent,(0,t.jsx)("div",{className:r.iconAndLabelTextWrapper,children:e.quote?(0,t.jsx)(v.default,{title:"".concat(e.reactionLabel,' on: "').concat(e.quote,'"'),placement:"top-start",children:(0,t.jsx)("span",{className:r.quoteTextDisplay,children:e.quote})}):(0,t.jsx)(v.default,{title:e.reactionLabel,placement:"top-start",children:(0,t.jsx)("span",{className:r.labelText,children:e.reactionLabel})})})]}),(0,t.jsx)("div",{className:r.voteButtonsWrapper,children:(0,t.jsx)(f.default,{reactionName:e.reactionName,quote:e.quote,netReactionCount:e.netCount,currentUserReaction:e.currentUserVote,setCurrentUserReaction:(t,n)=>d(t,n,e.quote)})})]}),e.reactions&&e.reactions.length>0&&(0,t.jsx)("div",{className:r.usersWhoReactedList,children:(0,t.jsx)(y.default,{reactions:e.reactions})})]},e.id))]})};var w=e.i(444098),k=e.i(657298),j=e.i(517794);let S=(0,i.defineStyles)("CondensedFooterReactions",e=>({root:{display:"flex",alignItems:"center"},reactionIconDisplay:{marginRight:"4px",display:"flex",alignItems:"center"},reactionIconContainer:{display:"flex",alignItems:"center",position:"relative"},reactionIconWrapper:{width:24,height:24,borderRadius:"50%",backgroundColor:e.palette.grey[200],border:"2px solid ".concat(e.palette.background.paper),display:"flex",alignItems:"center",justifyContent:"center",position:"relative",zIndex:2,"& > *":{transform:"scale(0.9)",[e.breakpoints.down("sm")]:{transform:"scale(0.9)"}},[e.breakpoints.down("sm")]:{width:26,height:26}},ellipsisIconWrapper:{width:24,height:24,borderRadius:"50%",backgroundColor:e.palette.grey[200],border:"2px solid ".concat(e.palette.background.paper),display:"flex",alignItems:"center",justifyContent:"center",position:"relative",marginLeft:-8,zIndex:1,fontSize:8,color:e.palette.ultraFeed.dim,fontWeight:600,[e.breakpoints.down("sm")]:{width:26,height:26}},reactsAndCount:{top:1,display:"flex",alignItems:"center",cursor:"pointer",fontSize:e.typography.body2.fontSize,color:e.palette.ultraFeed.dim,lineHeight:"1",padding:"2px 6px",borderRadius:e.shape.borderRadius,transition:"background-color 0.2s ease-in-out","&:hover":{opacity:1}},reactsAndCountActive:{backgroundColor:e.palette.grey[200]},overviewPopperCard:{padding:0,fontFamily:e.typography.commentStyle.fontFamily,borderRadius:2,width:374,[e.breakpoints.down("sm")]:{width:304}},desktopPopupContentWrapper:{padding:12},overviewButton:{opacity:.35,cursor:"pointer",height:18,width:18},addReactionButton:{opacity:.4,position:"relative",top:1,color:e.palette.ultraFeed.dim,display:"flex",alignItems:"center",cursor:"pointer",padding:"2px 4px",borderRadius:e.shape.borderRadius,transition:"background-color 0.2s ease-in-out","&:hover":{opacity:1},"& svg":{height:20,width:20},[e.breakpoints.down("sm")]:{top:1,opacity:1}},addReactionButtonActive:{backgroundColor:e.palette.grey[200],opacity:1},hiddenOnMobile:{[e.breakpoints.down("sm")]:{display:"none"}},hiddenOnDesktop:{[e.breakpoints.up("md")]:{display:"none"}},addReactionDesktopExtra:{marginLeft:16},mobileTabContent:{padding:12},tabsContainer:{display:"flex",borderBottom:"1px solid ".concat(e.palette.border.faint),marginBottom:0},tabButton:{flexGrow:1,textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",padding:"8px 12px",cursor:"pointer",fontSize:14,fontWeight:500,color:e.palette.text.secondary,borderBottom:"2px solid transparent",transition:"color 0.2s ease-in-out, border-color 0.2s ease-in-out","&:hover":{color:e.palette.text.primary},"& svg":{height:20,width:20}},tabButtonActive:{color:e.palette.primary.main,fontWeight:600,borderBottomColor:e.palette.primary.main},disabledButton:{opacity:.5,cursor:"not-allowed"},paletteDisabledText:{padding:2*e.spacing.unit,textAlign:"center",color:e.palette.text.secondary}})),I=e=>{let{classes:o,voteProps:i,topIcon:a,totalReactionCount:s,toggleReactionMain:l,getCurrentUserReactionVoteMain:d,allowReactions:u}=e,h=(0,n.useRef)(null),[g,f]=(0,n.useState)(!1),v=(0,t.jsx)(w.Card,{className:o.overviewPopperCard,children:(0,t.jsx)("div",{className:o.desktopPopupContentWrapper,children:(0,t.jsx)(C,{voteProps:i})})});return(0,t.jsxs)("div",{className:o.root,children:[s>0&&(0,t.jsx)(j.default,{title:v,clickable:!0,placement:"top-end",tooltip:!1,hideOnTouchScreens:!0,children:(0,t.jsxs)("span",{className:(0,r.default)(o.reactsAndCount),children:[a,s]})}),u&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{ref:h,children:(0,t.jsx)("span",{className:(0,r.default)(o.addReactionButton,o.addReactionDesktopExtra,{[o.addReactionButtonActive]:g}),onClick:()=>f(e=>!e),children:(0,t.jsx)(k.AddReactionIcon,{})})}),h.current&&g&&(0,t.jsx)(m.default,{open:g,anchorEl:h.current,placement:"bottom-end",allowOverflow:!0,distance:4,children:(0,t.jsx)(p.default,{onClickAway:()=>f(!1),children:(0,t.jsx)(w.Card,{className:o.overviewPopperCard,children:(0,t.jsx)("div",{className:o.desktopPopupContentWrapper,children:(0,t.jsx)(c.default,{quote:null,getCurrentUserReactionVote:d,toggleReaction:(e,t)=>{l(e,t),f(!1)}})})})})})]})]})},T=e=>{let{classes:o,voteProps:i,topIcon:a,totalReactionCount:s,toggleReactionMain:l,getCurrentUserReactionVoteMain:c,allowReactions:u}=e,h=(0,n.useRef)(null),[g,f]=(0,n.useState)(!1),[v,x]=(0,n.useState)("overview"),[y,b]=(0,n.useState)(!1);if(!u&&0===s)return(0,t.jsx)("div",{className:o.root,ref:h,children:(0,t.jsx)(j.default,{title:"Reacting not enabled on this document, e.g. posts",placement:"top",tooltip:!0,children:(0,t.jsx)("span",{className:(0,r.default)(o.addReactionButton,o.disabledButton),children:(0,t.jsx)(k.AddReactionIcon,{})})})});let S=e=>{y||(g?v===e?f(!1):x(e):(x(e),f(!0)))},I=[{value:"overview",label:"".concat(s>0?s:""," Reacts")},{value:"palette",label:(0,t.jsx)(k.AddReactionIcon,{})}];return(0,t.jsxs)("div",{ref:h,className:o.root,children:[s>0&&(0,t.jsxs)("span",{className:(0,r.default)(o.reactsAndCount,{[o.reactsAndCountActive]:g&&"overview"===v}),onClick:()=>S("overview"),children:[a,s]}),0===s&&u&&(0,t.jsx)("span",{className:(0,r.default)(o.addReactionButton,{[o.addReactionButtonActive]:g&&"palette"===v}),onClick:()=>S("palette"),children:(0,t.jsx)(k.AddReactionIcon,{})}),h.current&&g&&(0,t.jsx)(m.default,{open:g,anchorEl:h.current,placement:"bottom-end",allowOverflow:!0,distance:4,children:(0,t.jsx)(p.default,{onClickAway:()=>{f(!1),b(!0),setTimeout(()=>b(!1),50)},children:(0,t.jsxs)(w.Card,{className:o.overviewPopperCard,children:[(0,t.jsx)("div",{className:o.tabsContainer,children:I.map(e=>(0,t.jsx)("div",{className:(0,r.default)(o.tabButton,{[o.tabButtonActive]:v===e.value}),onClick:()=>S(e.value),children:e.label},e.value))}),(0,t.jsxs)("div",{className:o.mobileTabContent,children:["overview"===v&&s>0&&(0,t.jsx)(C,{voteProps:i}),"palette"===v&&!u&&(0,t.jsx)("div",{className:o.paletteDisabledText,children:"To leave inline reacts, open the full post"}),"palette"===v&&u&&(0,t.jsx)(d.default,{getCurrentUserReactionVote:c,toggleReaction:(e,t)=>{l(e,t),f(!1)}})]})]})})})]})},N=e=>{var n;let{voteProps:i,allowReactions:d,className:c}=e,m=(0,o.useStyles)(S),p=(0,s.useCurrentUser)(),{getCurrentUserReactionVote:h,toggleReaction:g}=(0,u.useNamesAttachedReactionsVoting)(i),f=(0,a.getNormalizedReactionsListFromVoteProps)(i),v=((null==f?void 0:f.reacts)?(0,a.reactionsListToDisplayedNumbers)(f.reacts,null==p?void 0:p._id):[]).sort((e,t)=>t.numberShown-e.numberShown),x=v.reduce((e,t)=>e+t.numberShown,0),y=v.length>0&&x>0?(0,t.jsxs)("div",{className:m.reactionIconContainer,children:[(0,t.jsx)("div",{className:m.reactionIconWrapper,children:(0,t.jsx)(l.default,{react:null==(n=v[0])?void 0:n.react})}),v.length>1&&(0,t.jsx)("div",{className:m.ellipsisIconWrapper,children:""})]}):null,b={allowReactions:d,voteProps:i,classes:m,topIcon:y,totalReactionCount:x,currentUser:p,toggleReactionMain:g,getCurrentUserReactionVoteMain:h};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:(0,r.default)(c,m.hiddenOnMobile),children:(0,t.jsx)(I,{...b})}),(0,t.jsx)("div",{className:(0,r.default)(c,m.hiddenOnDesktop),children:(0,t.jsx)(T,{...b})})]})}},727880,e=>{"use strict";e.s(["getCommentsNewFormPadding",0,e=>e.isFriendlyUI?12:10])},156778,e=>{"use strict";var t=e.i(791434);e.s(["debateEditorPlaceholder",0,"Enter your first dialogue comment here, add other participants as co-authors, then save this as a draft.\n\nOther participants will be able to participate by leaving comments on the draft, which will automatically be converted into dialogue responses.","getCommentEditorPlaceholder",0,()=>(0,t.isFriendlyUI)()?"Write a new comment...":"Text goes here! See lesswrong.com/editor for info about everything the editor can do.","getDefaultEditorPlaceholder",0,()=>(0,t.isFriendlyUI)()?"Highlight text to format it. Type @ to mention a user, post, or topic.":"Text goes here! See lesswrong.com/editor for info about everything the editor can do.\n\nlesswrong.com/editor covers formatting, draft-sharing, co-authoring, LaTeX, footnotes, tagging users and posts, spoiler tags, Markdown, tables, crossposting, and more.","linkpostEditorPlaceholder",0,"Share an excerpt, a summary, or a note about why you like the post.\n\nYou can paste the whole post if you have permission from the author, or add them as co-author in the Options below.\n","questionEditorPlaceholder",0,"Kick off a discussion or solicit answers to something youre confused about."])},318194,e=>{"use strict";var t=e.i(843476),n=e.i(271645);let o=(0,n.createContext)(null);e.s(["AppendToEditorContext",0,o,"AppendToEditorProvider",0,e=>{let{children:i}=e,[r,a]=(0,n.useState)(()=>()=>{}),s=(0,n.useCallback)(e=>{a(()=>e)},[]),l=(0,n.useMemo)(()=>({appendToEditor:r,registerAppendToEditor:s}),[r,s]);return(0,t.jsx)(o.Provider,{value:l,children:i})},"useAppendToEditor",0,()=>{let e=(0,n.useContext)(o);if(!e)throw Error("useAppendToEditor must be used within an AppendToEditorProvider");return e}])},240956,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(174080);let i=(0,n.createContext)(null);e.s(["CKEditorPortalProvider",0,e=>{let{children:r}=e,[a,s]=(0,n.useState)([]),l=(0,n.useCallback)((e,t)=>{s(n=>[...n,{location:e,content:t}])},[]),d=(0,n.useMemo)(()=>({createPortal:l}),[l]);return(0,t.jsxs)(i.Provider,{value:d,children:[r,a.map(e=>(0,o.createPortal)(e.content,e.location))]})},"CkEditorPortalContext",0,i])},695062,e=>{"use strict";var t=e.i(271645);e.s(["useEffectOnce",0,e=>{(0,t.useEffect)(e,[])}])},783086,606492,104369,971185,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(538794),i=e.i(678070),r=e.i(963489);e.i(813868);var a=e.i(122756);function s(e){let{onCompleted:t}=e,[n,{loading:o,error:s,data:l}]=(0,r.useLazyQuery)((0,a.gql)("\n    query ConvertDocument($document: JSON, $targetFormat: String) {\n      convertDocument(document: $document, targetFormat: $targetFormat)\n    }\n  "));return{convertDocument:async(e,o)=>{let{data:r}=await n({variables:{document:(0,i.serializeEditorContents)(e),targetFormat:o}}),a=(null==r?void 0:r.convertDocument)&&(0,i.deserializeEditorContents)(r.convertDocument);a?t(a):console.error("Error converting document")},loading:o,error:s}}var l=e.i(239832),d=e.i(716512);let c=(0,o.registerComponent)("LastEditedInWarning",e=>{let{autoConvert:o,initialType:r,currentType:a,defaultType:c,value:u,setValue:m,classes:p}=e,{convertDocument:h,loading:g,error:f}=s({onCompleted:e=>{m({contents:e,autosave:!1})}});return(0,n.useEffect)(()=>{o&&setTimeout(()=>{h(u,"ckEditorMarkup")},0)},[o]),(0,t.jsxs)("div",{children:[g&&(0,t.jsx)(l.default,{}),(0,t.jsxs)(d.Typography,{variant:"body2",className:p.lastEditedWarning,children:["This document was last saved in ",(0,i.getEditorTypeToDisplayMap)()[r].name," format."," ",o?(0,t.jsx)(t.Fragment,{children:"Converting..."}):(0,t.jsxs)(t.Fragment,{children:["Showing the ",(0,i.getEditorTypeToDisplayMap)()[a].name," editor."]}),!o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("a",{className:p.clickHereColor,onClick:()=>{h(u,"ckEditorMarkup")},children:"Click here"})," ","to switch to the ",(0,i.getEditorTypeToDisplayMap)().ckEditorMarkup.name," editor (the default editor)."]})]}),(0,t.jsx)("br",{})]})},{styles:e=>({lastEditedWarning:{color:e.palette.error.main},clickHereColor:{color:e.palette.primary.main}})});e.s(["default",0,c],783086);var u=e.i(530841),m=e.i(558736),p=e.i(791434),h=e.i(813292),g=e.i(79732),f=e.i(429329),v=e.i(695062);let x=(0,f.defineStyles)("LocalStorageCheck",e=>({root:{display:"flex",justifyContent:"space-between",alignItems:"center",columnGap:e.isFriendlyUI?8:10,fontFamily:e.typography.commentStyle.fontFamily,color:e.palette.text.primaryAlert,fontSize:14,lineHeight:"18px",fontWeight:"500",padding:"10px 8px",borderRadius:4,backgroundColor:e.palette.background.primaryTranslucent,marginBottom:8,"& a":{"&:hover":{color:e.palette.primary.dark,opacity:1}}},restoreLink:{color:e.palette.text.primaryAlert,whiteSpace:"nowrap",paddingLeft:6,paddingRight:2,fontWeight:e.isFriendlyUI?600:void 0},restoreBody:{maxHeight:"1.5em",lineHeight:"1.5em",fontSize:"1.1rem",overflow:"hidden",...e.isFriendlyUI?{color:e.palette.text.primaryAlert,fontWeight:500,opacity:.75}:{color:e.palette.grey[500],padding:"0 4px"}},closeIcon:{fontSize:16,cursor:"pointer",marginLeft:"auto","&:hover":{color:e.palette.primary.dark}}})),y=e=>"object"==typeof e,b=(e,t)=>{for(let n of(null==e?void 0:e.isAdmin)?i.adminEditors:i.nonAdminEditors){let e=t(n).get();if(e){if(y(e))return{savedDocument:e};return{savedDocument:{type:n,value:e}}}}return null},C=e=>{var n,o,r,a;let{onRestore:s,onRestoreNewPostLegacy:l,restorableDocument:d,newPostRestorableDocument:c,clearRestorableState:u}=e,f=(0,g.useStyles)(x),v=d?(0,m.htmlToTextDefault)(null!=(n=null==(r=(0,i.deserializeEditorContents)(d))?void 0:r.value)?n:""):null,y=c?(0,m.htmlToTextDefault)(null!=(o=null==(a=(0,i.deserializeEditorContents)(c))?void 0:a.value)?o:""):null;return(0,t.jsxs)("div",{className:f.root,children:[(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:f.restoreLink,onClick:()=>{u();let e=d?(0,i.deserializeEditorContents)(d):null,t=c?(0,i.deserializeEditorContents)(c):null;e?s(e):t?l(t):console.error("Error restoring from localStorage")},children:(0,p.preferredHeadingCase)("Restore Autosave")})}),(0,t.jsxs)("div",{className:f.restoreBody,children:[" ",v||y," "]}),(0,t.jsx)(h.default,{icon:"Close",className:f.closeIcon,onClick:()=>u()})]})};e.s(["default",0,e=>{var o,i,r,a;let{getLocalStorageHandlers:s,getNewPostLocalStorageHandlers:l}=e,[d,c]=(0,n.useState)(null),m=(0,u.useCurrentUser)();(0,v.useEffectOnce)(()=>{let e=b(m,s),t=b(m,l);(e||t)&&c({restorableState:e,newPostRestorableState:t})});let p=null!=(o=null==d||null==(r=d.restorableState)?void 0:r.savedDocument)?o:null,h=null!=(i=null==d||null==(a=d.newPostRestorableState)?void 0:a.savedDocument)?i:null;return p||h?(0,t.jsx)(C,{...e,restorableDocument:p,newPostRestorableDocument:h,clearRestorableState:()=>c(null)}):null}],606492),e.i(115004);var w=e.i(717888),k=e.i(372593);let j=(0,o.registerComponent)("EditorTypeSelect",e=>{let{value:n,setValue:o,isCollaborative:r,classes:a}=e,d=(0,u.useCurrentUser)(),{convertDocument:c,loading:m,error:p}=s({onCompleted:e=>{o({contents:e,autosave:!1})}});if(!(null==d?void 0:d.markDownPostEditor)&&!(null==d?void 0:d.isAdmin))return null;let h=(null==d?void 0:d.isAdmin)?i.adminEditors:i.nonAdminEditors;return(0,t.jsxs)(t.Fragment,{children:[m&&(0,t.jsx)(l.default,{}),(0,t.jsx)(w.default,{className:a.select,disableUnderline:!0,value:n.type,onChange:e=>{let t=e.target.value;(!r||"ckEditorMarkup"===t||window.confirm("Switching to a different editor type will disable collaborative editing and reset the sharing settings on this post to private."))&&c(n,t)},children:h.map((e,n)=>(0,t.jsxs)(k.MenuItem,{value:e,children:[(0,i.getEditorTypeToDisplayMap)()[e].name," ",(0,i.getEditorTypeToDisplayMap)()[e].postfix]},n))})]})},{styles:e=>({select:{}})});e.s(["default",0,j],104369),e.i(552275);var S=e.i(935132),I=e.i(343794),T=e.i(161517);let N="1670px",L="1535px",R=(0,o.registerComponent)("PostsEditBotTips",e=>{let{handleDismiss:n,postId:o,className:i,nodeRef:r,classes:a}=e,{captureEvent:s}=(0,T.useTracking)();return(0,S.isEAForum)()?(0,t.jsx)("aside",{className:a.root,ref:r,children:(0,t.jsxs)("div",{className:(0,I.default)(i,a.card),children:[(0,t.jsxs)("div",{className:a.headingRow,children:[(0,t.jsx)("h2",{className:a.heading,children:"A tip for constructive criticism"}),(0,t.jsx)("button",{type:"button",className:a.close,onClick:n,children:(0,t.jsx)(h.default,{icon:"Close",className:a.closeIcon})})]}),(0,t.jsxs)("div",{className:a.textRow,children:["Our bot tagged this as potential criticism of someone's work. Have you considered running it past them first? If not, ",(0,t.jsx)("a",{href:"https://forum.effectivealtruism.org/posts/kjcMZEzksusCHfHiF/productive-criticism-running-a-draft-past-the-people-you-re",target:"_blank",rel:"noopener noreferrer",onClick:()=>s("criticismTipsLinkClicked",{postId:o}),className:a.link,children:"here's why you might do it and how"}),"."]})]})}):null},{styles:e=>({root:{position:"absolute",right:-345,top:-100,height:"120%",["@media (max-width: ".concat(N,")")]:{right:-275},["@media (max-width: ".concat(L,")")]:{position:"static",marginTop:16}},card:{position:"sticky",top:90,width:311,background:e.palette.background.primaryTranslucent,color:e.palette.text.primaryAlert,fontFamily:e.typography.fontFamily,padding:16,borderRadius:e.borderRadius.default,transition:"opacity 0.4s ease",opacity:0,["@media (max-width: ".concat(N,")")]:{width:242,padding:12},["@media (max-width: ".concat(L,")")]:{position:"static",width:"100%"}},headingRow:{display:"flex",justifyContent:"space-between",columnGap:8},heading:{fontWeight:"700",fontSize:16,lineHeight:"21px",margin:0,["@media (max-width: ".concat(N,")")]:{fontSize:13,lineHeight:"20px"},["@media (max-width: ".concat(L,")")]:{fontSize:14}},close:{alignSelf:"flex-start",background:"none",color:e.palette.text.primaryAlert,padding:0,"&:hover":{color:e.palette.primary.dark}},closeIcon:{fontSize:16},textRow:{fontWeight:"500",fontSize:14,lineHeight:"21px",marginTop:12,["@media (max-width: ".concat(N,")")]:{fontSize:13,lineHeight:"20px"}},link:{textDecoration:"underline","&:hover":{color:e.palette.primary.dark,opacity:1,textDecoration:"underline"}}}),stylePriority:-1});e.s(["default",0,R],971185)},683311,189593,316525,e=>{"use strict";e.s(["EditorFormComponent",()=>eo,"useEditorFormCallbacks",()=>et],683311);var t=e.i(843476),n=e.i(271645),o=e.i(156778),i=e.i(130697),r=e.i(773736),a=e.i(530841),s=e.i(678070),l=e.i(963489),d=e.i(514089);e.i(813868);var c=e.i(122756);e.i(552275);var u=e.i(935132),m=e.i(585642),p=e.i(161517),h=e.i(182584),g=e.i(420616),f=e.i(318194),v=e.i(898892),x=e.i(68880),y=e.i(144437),b=e.i(84377),C=e.i(338552),w=e.i(600723),k=e.i(240956),j=e.i(79732),S=e.i(429329),I=e.i(783086),T=e.i(606492),N=e.i(104369),L=e.i(971185),R=e.i(163929);e.s(["default",()=>J],316525);var _=e.i(538794),A=e.i(725788),M=e.i(343794),P=e.i(656702),E=e.i(253592),F=e.i(946271),B=e.i(791434),D=e.i(238488),U=e.i(937636),H=e.i(81500),W=e.i(833851),O=e.i(239832),V=e.i(690118),z=e.i(758623),$=e.i(147630);let q=(0,S.defineStyles)("ChangeMetricsDisplay",e=>({root:{fontFamily:e.typography.fontFamily},charsAdded:{color:e.palette.text.charsAdded},charsRemoved:{color:e.palette.text.charsRemoved}}),{stylePriority:-1}),G=e=>{let{changeMetrics:n,showCharacters:o,className:i}=e,{added:r,removed:a}=n,s=o?" characters":"",l=(0,j.useStyles)(q);return(0,t.jsxs)("span",{className:(0,M.default)(l.root,i),children:[r>0&&a>0&&(0,t.jsxs)(t.Fragment,{children:["(",(0,t.jsxs)("span",{className:l.charsAdded,children:["+",r]}),"/",(0,t.jsxs)("span",{className:l.charsRemoved,children:["-",a]}),s,")"]}),r>0&&0===a&&(0,t.jsxs)("span",{className:l.charsAdded,children:["(+",r,s,")"]}),0===r&&a>0&&(0,t.jsxs)("span",{className:l.charsRemoved,children:["(-",a,s,")"]})]})};e.s(["default",0,G],189593);var Z=e.i(110601),Y=e.i(846552);let Q=(0,c.gql)("\n  query multiRevisionPostVersionHistoryQuery($selector: RevisionSelector, $limit: Int, $enableTotal: Boolean) {\n    revisions(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...RevisionMetadataWithChangeMetrics\n      }\n      totalCount\n    }\n  }\n"),K=(0,c.gql)("\n  query PostVersionHistory($documentId: String) {\n    revision(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...RevisionDisplay\n        ...RevisionMetadata\n      }\n    }\n  }\n"),X=e=>{var o,i,r;let{post:s,postId:l,onClose:u,classes:m}=e,g=(0,a.useCurrentUser)(),{captureEvent:f}=(0,p.useTracking)(),v=(0,U.useLocation)(),x=(0,U.useNavigate)(),y=(0,h.isCollaborative)(s,"contents"),{query:b}=v,C=b.version,[w,k]=(0,n.useState)(null),[j,S]=(0,n.useState)(!1),[I]=(0,d.useMutation)((0,c.gql)("\n    mutation revertPostToRevision($postId: String!, $revisionId: String!) {\n      revertPostToRevision(postId: $postId, revisionId: $revisionId) {\n        ...PostsEdit\n      }\n    }\n  ")),T=(0,h.canUserEditPostMetadata)(g,s),{data:N,loadMoreProps:L}=(0,Y.useQueryWithLoadMore)(Q,{variables:{selector:{revisionsOnDocument:{documentId:l,fieldName:"contents"}},limit:10,enableTotal:!1},fetchPolicy:"cache-and-network"}),R=null==N||null==(i=N.revisions)?void 0:i.results;(0,n.useEffect)(()=>{var e,t;R&&R.length>0&&k(null!=(e=C&&(null==(t=R.find(e=>e.version===C))?void 0:t._id))?e:R[0]._id)},[C,R]);let _=(0,n.useCallback)(async()=>{w&&(f("restoreVersionClicked",{postId:l,revisionId:w}),S(!0),await I({variables:{postId:l,revisionId:w}}),window.location.reload())},[f,l,I,w]),A=(0,n.useCallback)(async e=>{if(f("loadVersionClicked",{postId:l,revisionId:w}),v.pathname.startsWith("/editPost")){let t=new URLSearchParams(b);t.set("version",e);let n=t.toString();x({...v.location,search:"?".concat(n)})}else{var t;x((0,h.postGetEditUrl)(l,!1,null!=(t=s.linkSharingKey)?t:void 0,e))}u()},[f,v.location,v.pathname,x,u,s.linkSharingKey,l,b,w]);(0,D.useOnNavigate)(()=>{u()});let{loading:P,data:E}=(0,F.useQuery)(K,{variables:{documentId:w||""},skip:!w,fetchPolicy:"cache-first"}),B=null==E||null==(r=E.revision)?void 0:r.result;return(0,t.jsx)(W.default,{open:!0,maxWidth:!1,onClose:u,children:(0,t.jsxs)("div",{className:m.root,children:[(0,t.jsxs)("div",{className:m.leftColumn,children:[R&&R.map(e=>(0,t.jsxs)("div",{className:(0,M.default)(m.revisionRow,{[m.selectedRevision]:e._id===w}),onClick:()=>k(e._id),children:[(0,t.jsx)(Z.default,{title:e._id===s.contents_latest?"This version is currently live":void 0,placement:"top",popperClassName:m.tooltip,children:(0,t.jsx)("span",{className:(0,M.default)(m.versionNumber,{[m.liveRevision]:e._id===s.contents_latest}),children:e.version})}),(0,t.jsx)(G,{changeMetrics:e.changeMetrics}),(0,t.jsx)("span",{className:m.editedAt,children:(0,t.jsx)(z.default,{date:e.editedAt})})]},e._id)),(0,t.jsx)("div",{className:m.loadMore,children:(0,t.jsx)($.default,{...L})})]}),(0,t.jsxs)("div",{className:m.selectedRevisionDisplay,children:[P&&(0,t.jsx)(O.default,{}),B&&(0,t.jsxs)(t.Fragment,{children:[T&&(0,t.jsxs)("div",{className:m.header,children:[(0,t.jsxs)("div",{className:m.titleRow,children:[(0,t.jsxs)("div",{className:m.versionTitle,children:["v",B.version,B._id===s.contents_latest?" (Live version)":""]}),!y&&(0,t.jsx)(Z.default,{title:"Load this version into the editor (you will then need to publish it to update the live post)",placement:"top",popperClassName:m.tooltip,children:(0,t.jsx)(H.default,{variant:"outlined",className:m.button,onClick:()=>A(B.version),children:"Load into editor"})}),(0,t.jsx)(Z.default,{title:"Update the live post to use this version",placement:"top",popperClassName:m.tooltip,children:(0,t.jsx)(H.default,{variant:"contained",className:m.button,onClick:_,children:j?(0,t.jsx)(O.default,{}):"Restore"})})]}),(0,t.jsx)("div",{className:m.commitMessage,children:B.commitMessage})]}),(0,t.jsx)(V.ContentItemBody,{dangerouslySetInnerHTML:{__html:null!=(o=B.html)?o:""},description:"PostVersionHistory revision"})]})]})]})})},J=(0,_.registerComponent)("PostVersionHistoryButton",e=>{let{post:n,postId:o,classes:i}=e,{openDialog:r}=(0,A.useDialog)(),{captureEvent:a}=(0,p.useTracking)();return(0,t.jsx)(H.default,{onClick:()=>{a("versionHistoryButtonClicked",{postId:o}),r({name:"PostVersionHistory",contents:e=>{let{onClose:r}=e;return(0,t.jsx)(X,{onClose:r,post:n,postId:o,classes:i})}})},variant:"outlined",className:i.versionHistoryButton,children:(0,B.preferredHeadingCase)("Version History")})},{styles:e=>({root:{maxWidth:P.CENTRAL_COLUMN_WIDTH+160+64,display:"flex",padding:24,justifyContent:"space-between",gap:"32px"},leftColumn:{...(0,E.commentBodyStyles)(e)},revisionRow:{padding:12,cursor:"pointer",whiteSpace:"nowrap"},selectedRevision:{background:e.palette.grey[200]},liveRevision:{fontWeight:700},versionNumber:{color:e.palette.grey[900],marginRight:8},editedAt:{color:e.palette.grey[600],marginLeft:8},selectedRevisionDisplay:{width:P.CENTRAL_COLUMN_WIDTH,...(0,E.postBodyStyles)(e)},header:{borderBottom:"1px solid ".concat(e.palette.grey[200]),marginBottom:12},titleRow:{display:"flex",justifyContent:"flex-end",gap:"16px",alignItems:"center",padding:"12px 0",flexWrap:"wrap"},commitMessage:{fontStyle:"italic",fontSize:12,lineHeight:"16px",marginBottom:6},versionHistoryButton:{color:e.palette.grey[680],padding:"8px 12px",border:"none","&:hover":{backgroundColor:e.palette.panelBackground.darken08,border:"none"}},button:{whiteSpace:"nowrap"},loadMore:{paddingLeft:12},versionTitle:{fontFamily:e.palette.fonts.sansSerifStack,marginRight:"auto",fontWeight:600,fontSize:20},tooltip:{marginBottom:4}})}),ee=(0,S.defineStyles)("EditorFormComponent",s.styles);function et(){let e=(0,n.useRef)(null),t=(0,n.useRef)(null);return{onSubmitCallback:e,onSuccessCallback:t,addOnSubmitCallback:t=>(e.current=t,()=>{e.current=null}),addOnSuccessCallback:e=>(t.current=e,()=>{t.current=null})}}function en(e){let{field:S,commentEditor:R,commentStyles:_,commentMinimalistStyle:A,collectionName:M,hideControls:P,formType:E,editorHintText:F,maxHeight:B,document:D,name:U,fieldName:H,hintText:W,placeholder:O,label:V,formVariant:z,revisionsHaveCommitMessages:$,hasToc:q,setFieldEditorType:G,addOnSubmitCallback:Z,addOnSuccessCallback:Y,getLocalStorageId:Q}=e,K=(0,j.useStyles)(ee),{flash:X}=(0,y.useMessages)(),et=(0,a.useCurrentUser)(),en=(0,n.useRef)(null),eo=(0,n.useRef)({hasUnsavedData:!1}),ei="Posts"===M&&(0,h.isCollaborative)(D,H),er=(0,n.useContext)(f.AppendToEditorContext),ea=null==er?void 0:er.registerAppendToEditor;(0,n.useEffect)(()=>{if(ea)return en.current&&ea(e=>{var t,n;let o=null==(n=en.current)||null==(t=n.state)?void 0:t.ckEditorReference;if(o){let t=o.getData()||"",n=t.trim()?"<p><br></p>":"";o.data.set(t+n+e)}}),()=>{ea(()=>{})}},[ea]);let{captureEvent:es}=(0,p.useTracking)(),el=null!=Q?Q:function(e,t){let{_id:n,conversationId:o}=e;if(n&&t)return{id:"".concat(n).concat(t),verify:!0};if(n)return{id:n,verify:!0};if(o)return{id:o,verify:!0};if(t)return{id:"".concat(M,"_new_").concat(t),verify:!0};throw Error("Can't get storage ID for this document: ".concat(e))},ed=(0,n.useCallback)(e=>(0,i.getLSHandlers)(el,D,U,(0,i.getLSKeyPrefix)(e)),[D,el,U]),ec=(0,n.useCallback)(e=>"edit"!==E||D.contents_latest||"Untitled Draft"!==D.title?{get:()=>null,set:()=>{},reset:()=>{}}:(0,i.getLSHandlers)((e,t)=>el({_id:null},t),D,U,(0,i.getLSKeyPrefix)(e)),[D,U,el,E]),[eu,em]=(0,n.useState)(()=>(0,s.getInitialEditorContents)(S.state.value,D,H,et)),ep=(0,n.useRef)(eu),[eh]=(0,n.useState)(eu.type),[eg,ef]=(0,n.useState)(E),ev=(0,n.useContext)(g.DynamicTableOfContentsContext),{setAutosaveEditorState:ex}=(0,n.useContext)(g.AutosaveEditorStateContext),ey=(0,s.getUserDefaultEditor)(et),eb=eu.type||ey,eC="new"!==eg&&("html"===eb||"draftJS"===eb),[ew,ek]=(0,n.useState)(!1),[ej,eS]=(0,n.useState)(!!(null==et?void 0:et.criticismTipsDismissed)),eI=(0,n.useRef)(null),eT=(0,b.useUpdateCurrentUser)(),eN=()=>{eS(!0),es("criticismTipsDismissed",{postId:D._id}),eT({criticismTipsDismissed:!0})},[eL]=(0,l.useLazyQuery)((0,c.gql)("\n    query getPostIsCriticism($args: JSON) {\n      PostIsCriticism(args: $args)\n    }\n    "),{}),[eR]=(0,C.useCookiesWithConsent)([w.HIDE_NEW_POST_HOW_TO_GUIDE_COOKIE]),e_=(0,n.useCallback)(e=>{var t;let n="new"===eg&&"true"!==eR[w.HIDE_NEW_POST_HOW_TO_GUIDE_COOKIE];!(0,u.isEAForum)()||"Posts"!==M||n||D.isEvent||D.debate||D.shortform||D.url||ej||eL({variables:{args:{_id:D._id,title:null!=(t=D.title)?t:"",contentType:e.type,body:e.value}}})},[M,eg,eR,D._id,D.isEvent,D.debate,D.shortform,D.url,D.title,ej,eL]),eA=(0,x.useDebouncedCallback)(e_,{rateLimitMs:12e5,callOnLeadingEdge:!0,onUnmount:"cancelPending",allowExplicitCallAfterUnmount:!1}),eM=(0,x.useDebouncedCallback)(e_,{rateLimitMs:12e4,callOnLeadingEdge:!0,onUnmount:"cancelPending",allowExplicitCallAfterUnmount:!1});(0,n.useEffect)(()=>{var e;(null==eu||null==(e=eu.value)?void 0:e.length)>300&&eA(eu)},[]);let eP=(0,n.useCallback)(e=>{var t;let n=e.value===(null==D||null==(t=D[H])?void 0:t.ckEditorMarkup);if((0,s.isBlank)(e)||n)ed(eb).reset(),eo.current.hasUnsavedData=!1;else{let t=(0,s.serializeEditorContents)(e);ed(e.type).set(t)&&(eo.current.hasUnsavedData=!1)}},[ed,eb,D,H]),[eE]=(0,d.useMutation)((0,c.gql)("\n    mutation autosaveRevision($postId: String!, $contents: AutosaveContentType!) {\n      autosaveRevision(postId: $postId, contents: $contents) {\n        ...RevisionEdit\n      }\n    }\n  ")),eF=(0,n.useCallback)(async e=>{(0,r.userHasPostAutosave)(et)&&"Posts"===M&&"contents"===H&&!(0,v.default)(ep.current,e)&&(ep.current=e,await eE({variables:{postId:D._id,contents:e}}))},[et,M,H,D._id,eE]),eB=(0,x.useDebouncedCallback)(async e=>{if(!(en.current&&(0,s.shouldSubmitContents)(en.current)))return;let t={...D[H]||{},...await en.current.submitData()};S.handleChange(t)},{rateLimitMs:3e3,callOnLeadingEdge:!0,onUnmount:"cancelPending",allowExplicitCallAfterUnmount:!1}),eD=(0,x.useDebouncedCallback)(eP,{rateLimitMs:3e3,callOnLeadingEdge:!1,onUnmount:"cancelPending",allowExplicitCallAfterUnmount:!1}),eU=(0,x.useDebouncedCallback)(eF,{rateLimitMs:3e5,callOnLeadingEdge:!1,onUnmount:"cancelPending",allowExplicitCallAfterUnmount:!1}),eH=(0,x.useStabilizedCallback)(e=>{var t,n,o;let{contents:i,autosave:r}=e;ev&&q&&ev.setToc(e.contents),em(i),ei||(0,s.isBlank)(i)||(eo.current.hasUnsavedData=!0),null==G||G(null==i?void 0:i.type),eB({}),r&&(eD(i),ei||eU(i)),(null==i||null==(t=i.value)?void 0:t.length)>300&&(i.value.length-(null!=(n=null==eu||null==(o=eu.value)?void 0:o.length)?n:0)>300?eM(i):eA(i))}),eW=(0,n.useRef)({generated:!1});(0,n.useEffect)(()=>{ev&&eu&&!eW.current.generated&&q&&(ev.setToc(eu),eW.current.generated=!0)},[eu,ev,q]),(0,n.useEffect)(()=>{let e=e=>{var t;if(null==eo||null==(t=eo.current)?void 0:t.hasUnsavedData)return e.preventDefault(),e.returnValue="Are you sure you want to close?",e.returnValue};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[H,eo]);let eO=(0,n.useCallback)(e=>{ei?X("Restoring from local storage is not supported in the collaborative editor. Use the Version History button to restore old versions."):eH({contents:e,autosave:!1})},[eH,X,ei]),eV=(0,n.useCallback)(e=>{ei?X("Restoring from local storage is not supported in the collaborative editor. Use the Version History button to restore old versions."):(eH({contents:e,autosave:!1}),ec(eb).reset())},[eH,X,ei,eb,ec]);(0,n.useEffect)(()=>{if(en.current){let e=Z(async()=>{if(en.current&&(0,s.shouldSubmitContents)(en.current)){let e=await en.current.submitData();S.setValue(e)}}),t=Y((e,t)=>(ed(eb).reset(),!en.current||(null==t?void 0:t.redirectToEditor)||(null==t?void 0:t.noReload)||ei||(0===eu.value.length&&eH({contents:{type:eh,value:"dummy value to trigger onChange handler"},autosave:!1}),eH({contents:(0,s.getBlankEditorContents)(eh),autosave:!1})),e));return()=>{e(),t()}}},[!!en.current,H,eh,Y,Z]);let ez=$&&et&&(0,r.userCanCreateCommitMessages)(et)&&("Tags"!==M||"edit"===eg),e$="Posts"===M&&(e=>{let{question:t,postCategory:n}=e,i=t?"question":n;return e.debate?o.debateEditorPlaceholder:"question"===i?o.questionEditorPlaceholder:"linkpost"===i?o.linkpostEditorPlaceholder:(0,o.getDefaultEditorPlaceholder)()})(D)||F||W||O;return((0,n.useEffect)(()=>(ei||"Posts"!==M||"contents"!==H||ex(e=>()=>new Promise((e,t)=>{if(en.current&&(0,s.shouldSubmitContents)(en.current)){var n;null==(n=en.current)||n.submitData().then(e=>{let{originalContents:{type:t,data:n}}=e;return{type:t,value:n}}).then(eF).then(e).catch(t)}})),()=>{ex(null)}),[ei,M,H,eF,ex]),D)?(0,t.jsxs)("div",{className:K.root,children:[eC&&(0,t.jsx)(I.default,{autoConvert:"draftJS"===eu.type,initialType:eh,currentType:eu.type,defaultType:ey,value:eu,setValue:eH}),!ei&&(0,t.jsx)(T.default,{getLocalStorageHandlers:ed,onRestore:eO,onRestoreNewPostLegacy:eV,getNewPostLocalStorageHandlers:ec}),(0,t.jsx)(k.CKEditorPortalProvider,{children:(0,s.isValidEditorType)(eu.type)&&(0,t.jsx)(s.Editor,{ref:en,_classes:K,currentUser:et,label:V,formVariant:z,formType:eg,documentId:D._id,collectionName:M,fieldName:H,formProps:{maxHeight:B,commentMinimalistStyle:A},isCollaborative:ei,accessLevel:D.myEditorAccess,value:eu,onChange:eH,placeholder:e$,commentStyles:_,answerStyles:D.answer,questionStyles:D.question,commentEditor:R,hideControls:P,maxHeight:B,hasCommitMessages:null!=ez?ez:void 0,document:D})}),!P&&"grey"!==z&&(0,t.jsx)(N.default,{value:eu,setValue:eH,isCollaborative:ei}),!P&&"Posts"===M&&"contents"===H&&!!D._id&&(0,t.jsx)(J,{post:D,postId:D._id}),(0,t.jsx)(m.default,{in:ew&&!ej,timeout:0,mountOnEnter:!0,unmountOnExit:!0,appear:!0,nodeRef:eI,children:e=>(0,t.jsx)(L.default,{handleDismiss:eN,postId:D._id,nodeRef:eI,className:K["".concat(e,"BotTips")]})})]}):null}function eo(e){let{field:n,formType:o,...i}=e;return"object"!=typeof n.state.value&&"edit"===o?null:(0,t.jsx)(R.default,{children:(0,t.jsx)(en,{field:n,formType:o,...i})})}},615081,e=>{"use strict";var t=e.i(843476);e.i(248944);var n=e.i(921104),o=e.i(343794),i=e.i(79732);let r=(0,e.i(429329).defineStyles)("EditCommentTitle",e=>({root:{...e.typography.display3,...e.typography.headerStyle,width:"100%",resize:"none",textAlign:"left",marginTop:0,borderBottom:e.palette.border.normal,"&:focused":{borderBottom:e.palette.border.normal},"& textarea":{overflowY:"hidden"},fontSize:"2rem"}}));e.s(["EditCommentTitle",0,e=>{var a;let{field:s,placeholder:l}=e,d=(0,i.useStyles)(r);return(0,t.jsx)(n.default,{className:(0,o.default)(d.root),placeholder:l,value:null!=(a=s.state.value)?a:void 0,onChange:e=>s.handleChange(e.target.value),disableUnderline:!0,multiline:!0})}])},688167,e=>{"use strict";var t=e.i(271645),n=e.i(959294),o=e.i(552275),i=e.i(946271);e.i(813868);let r=(0,e.i(122756).gql)("\n  query multiTaguseQuickTakesTagsQuery($selector: TagSelector, $limit: Int, $enableTotal: Boolean) {\n    tags(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...TagPreviewFragment\n      }\n      totalCount\n    }\n  }\n"),a="frontpage",s={_id:a,name:"Frontpage",shortName:null};e.s(["useQuickTakesTags",0,function(){var e;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[d,c]=(0,t.useState)(!0),[u,m]=(0,t.useState)(l),{currentForumEvent:p}=(0,n.useCurrentAndRecentForumEvents)(),{data:h,loading:g}=(0,i.useQuery)(r,{variables:{selector:{coreAndSubforumTags:{}},limit:100,enableTotal:!1},skip:!o.quickTakesTagsEnabledSetting.get(),notifyOnNetworkStatusChange:!0}),f=null==h||null==(e=h.tags)?void 0:e.results,v=[s,...(null==p?void 0:p.tag)?[p.tag]:[],...null!=f?f:[]],x=(0,t.useCallback)((e,t)=>{e.tagId===a?c(!0):m(Array.from(new Set([...t.filter(e=>e!==a),e.tagId,e.parentTagId])).filter(e=>null!=e))},[]),y=(0,t.useCallback)((e,t)=>{e.tagId===a?c(!1):m(t.filter(t=>t!==e.tagId&&t!==a))},[]);return g?{loading:g}:{loading:!1,frontpage:d,selectedTagIds:u,tags:null!=v?v:[],frontpageTagId:a,onTagSelected:x,onTagRemoved:y}}])},402317,e=>{"use strict";e.s(["FormComponentQuickTakesTags",()=>d]);var t=e.i(843476),n=e.i(271645),o=e.i(79732),i=e.i(429329),r=e.i(688167),a=e.i(18514),s=e.i(239832);let l=(0,i.defineStyles)("FormComponentQuickTakesTags",e=>({tagContainer:{display:"flex",flexWrap:"wrap",rowGap:"4px",alignItems:"center",marginTop:16,marginLeft:8},tagLabel:{fontWeight:600,fontSize:13,marginRight:8}})),d=e=>{var i;let{field:d}=e,c=(0,o.useStyles)(l),{loading:u,frontpage:m,selectedTagIds:p,tags:h,frontpageTagId:g,onTagSelected:f,onTagRemoved:v}=(0,r.useQuickTakesTags)(null!=(i=d.state.value)?i:[]);return(0,n.useEffect)(()=>{d.handleChange(null!=p?p:null)},[d,p]),(0,t.jsxs)("div",{className:c.tagContainer,children:[(0,t.jsx)("span",{className:c.tagLabel,children:"Set topic"}),u?(0,t.jsx)(s.default,{}):(0,t.jsx)(a.default,{tags:h,displaySelected:"highlight",selectedTagIds:[...m?[g]:[],...p],onTagSelected:f,onTagRemoved:v,tooltips:!1,truncate:!0,smallText:!0})]})}},422847,982384,627490,e=>{"use strict";var t=e.i(271645);function n(e){let n=(0,t.useRef)(null);return(0,t.useEffect)(()=>{let t=t=>{(t.ctrlKey||t.metaKey)&&13===t.keyCode&&(t.stopPropagation(),t.preventDefault(),e())},o=n.current;return null==o||o.addEventListener("keydown",t),()=>null==o?void 0:o.removeEventListener("keydown",t)},[e]),n}e.s(["useFormSubmitOnCmdEnter",()=>n],422847);var o=e.i(843476);e.s(["default",0,e=>{let{children:n}=e;return(0,o.jsx)(t.default.Fragment,{children:n})}],982384);let i=(0,e.i(538794).registerComponent)("FormGroupQuickTakes",e=>{let{children:t,classes:n}=e;return(0,o.jsx)("div",{className:n.root,children:t})},{styles:e=>({root:{display:"contents","& .input-relevantTagIds":{order:100}}})});e.s(["default",0,i],627490)},774135,e=>{"use strict";var t=e.i(843476);e.i(720030);var n=e.i(275261),o=e.i(343794),i=e.i(79732),r=e.i(429329);e.i(266523);var a=e.i(155726),s=e.i(716512);let l=(0,r.defineStyles)("FormComponentCheckbox",e=>({root:{marginRight:3*e.spacing.unit,marginLeft:0,marginTop:5,display:"flex",alignItems:"center"},size:{width:36,height:0},inline:{display:"inline",cursor:"pointer"}}));e.s(["default",0,e=>{let{field:r,label:d,disabled:c=!1,className:u}=e,m=(0,i.useStyles)(l),p="checkbox-".concat(r.name),h=(0,t.jsx)(n.default,{id:p,className:m.size,checked:!!r.state.value,onChange:(e,t)=>r.handleChange(t),onBlur:r.handleBlur,disabled:c,disableRipple:!0}),g=d&&(0,t.jsx)(s.Typography,{htmlFor:p,className:m.inline,variant:"body2",component:"label",children:d});return(0,t.jsx)(a.default,{className:(0,o.default)(m.root,u),control:h,label:g})}])},823567,710007,113765,e=>{"use strict";e.s(["CommentForm",()=>el],823567);var t=e.i(843476);e.i(793794);var n=e.i(527633),o=e.i(791434),i=e.i(741452),r=e.i(343794),a=e.i(271645),s=e.i(79732),l=e.i(429329),d=e.i(508107),c=e.i(683311),u=e.i(546337),m=e.i(156778),p=e.i(823963),h=e.i(520408),g=e.i(615081),f=e.i(402317),v=e.i(566721),x=e.i(673991),y=e.i(552275),b=e.i(935132),C=e.i(530841),w=e.i(162927),k=e.i(725788),j=e.i(727880),S=e.i(797191),I=e.i(422847),T=e.i(293958),N=e.i(239832),L=e.i(846361),R=e.i(982384),_=e.i(627490),A=e.i(774135),M=e.i(944045),P=e.i(514089);e.i(813868);var E=e.i(122756),F=e.i(773736),B=e.i(538794),D=e.i(161517),U=e.i(813292),H=e.i(903780),W=e.i(105736),O=e.i(65189),V=e.i(109665),z=e.i(444098);let $=(0,B.registerComponent)("CommentsSubmitDropdown",e=>{let{handleSubmit:i,classes:r}=e,{captureEvent:s}=(0,D.useTracking)(),l=(0,C.useCurrentUser)(),{openDialog:d}=(0,k.useDialog)(),[c,u]=(0,a.useState)(!1),m=(0,a.useRef)(null),p=(0,a.useCallback)(e=>{s("menuToggled",{openAfter:e,pageElementContext:"CommentsSubmitDropdown"}),u(e)},[s,u]);return(0,t.jsxs)(D.AnalyticsContext,{pageElementContext:"CommentsSubmitDropdown",children:[(0,t.jsxs)("div",{ref:m,className:r.buttonWrapper,children:[(0,t.jsx)("div",{className:r.divider}),(0,t.jsx)(n.default,{variant:(0,o.isFriendlyUI)()?"contained":void 0,color:(0,o.isFriendlyUI)()?"primary":void 0,className:r.button,onClick:()=>p(!c),children:(0,t.jsx)(U.default,{className:r.dropdownIcon,icon:"ThickChevronDown"})})]}),(0,t.jsx)(H.default,{open:c,anchorEl:m.current,placement:"bottom-end",className:r.popper,children:(0,t.jsx)(W.default,{onClickAway:()=>p(!1),children:(0,t.jsx)(z.Paper,{children:(0,t.jsx)(O.default,{className:r.dropdownMenu,children:(0,t.jsx)(V.default,{title:(0,o.preferredHeadingCase)("Save As Draft"),menuItemClassName:r.dropdownItem,onClick:()=>{l?(i({draft:!0}),p(!1)):d({name:"LoginPopup",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(T.default,{onClose:n})}})}})})})})})]})},{styles:e=>({buttonWrapper:{...e.isFriendlyUI?{backgroundColor:e.palette.primary.main}:{},borderTopRightRadius:e.borderRadius.default,borderBottomRightRadius:e.borderRadius.default,display:"flex"},divider:{opacity:.9,flex:1,marginTop:"auto",marginBottom:"auto",height:"calc(100% - 12px)",...e.isFriendlyUI?{width:1,backgroundColor:e.palette.text.alwaysWhite}:{}},button:{borderRadius:e.borderRadius.default,borderTopLeftRadius:0,borderBottomLeftRadius:0,padding:"6px 2px",minWidth:0,boxShadow:"none",...!e.isFriendlyUI?{color:e.palette.lwTertiary.main,"&:hover":{opacity:.5}}:{}},dropdownIcon:{transform:"translateY(1px)"},popper:{marginTop:6},dropdownMenu:{...!e.isFriendlyUI&&{backgroundColor:e.palette.dropdown.background,borderRadius:e.borderRadius.small}},dropdownItem:{...!e.isFriendlyUI&&{padding:"4px 8px"}}})});var q=e.i(181832),G=e.i(84377),Z=e.i(110601),Y=e.i(104275);let Q=(0,l.defineStyles)("AutoEmailSubscribeCheckbox",e=>({root:{display:"flex",alignItems:"center"},switchWrapper:{cursor:"pointer",...e.typography.commentStyle,...e.typography.body2,lineHeight:"18px",display:"flex",alignItems:"center","& .ToggleSwitch-root":{width:"26px !important",height:"16px !important",minWidth:"26px !important"},"& .ToggleSwitch-switchOn":{left:-4}},switch:{marginRight:8,opacity:.75,"& .ToggleSwitch-handle":{width:12,height:12}},label:{...e.typography.commentStyle,color:e.palette.lwTertiary.main},disabled:{opacity:.7,filter:"grayscale(100%)"},hideOnMobile:{[e.breakpoints.down("xs")]:{display:"none"}}})),K=()=>{let e=(0,C.useCurrentUser)(),n=(0,G.useUpdateCurrentUser)(),{openDialog:o}=(0,k.useDialog)(),i=null==e?void 0:e.notificationRepliesToMyComments,r=!!(null==i?void 0:i.email.enabled),l=(0,s.useStyles)(Q),d=(0,a.useCallback)(async()=>{if(!e)return void o({name:"LoginPopup",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(T.default,{onClose:n})}});let a={...i,email:{...null==i?void 0:i.email,enabled:!r}};await n({notificationRepliesToMyComments:a},{optimisticResponse:{updateUser:{__typename:"UserOutput",data:{__typename:"User",...e,notificationRepliesToMyComments:a}}}})},[e,i,n,o,r]);if(!(0,a.useRef)(r).current)return null;let c=(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"If enabled, you'll get an email whenever someone replies to any of your comments."}),(0,t.jsx)("p",{children:(0,t.jsx)("em",{children:"(Applies to all replies to all comments you make.)"})})]}),u=(0,t.jsxs)("span",{children:["Email me replies ",(0,t.jsx)("span",{className:l.hideOnMobile,children:"to all my comments"})]}),m=(0,t.jsxs)("span",{className:l.switchWrapper,onClick:d,children:[(0,t.jsx)(Y.default,{className:l.switch,value:r}),(0,t.jsx)("span",{className:l.label,children:u})]});return(0,t.jsx)("span",{className:r?l.root:l.disabled,children:(0,t.jsx)(Z.default,{title:c,placement:"bottom-start",inlineBlock:!1,children:m})})},X=(0,E.gql)("\n  query PostsEditFormPost($documentId: String, $version: String) {\n    post(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...PostsEditQueryFragment\n      }\n    }\n  }\n"),J=(0,E.gql)("\n  query multiCommentPostsPageQuery($selector: CommentSelector, $limit: Int, $enableTotal: Boolean) {\n    comments(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...CommentsList\n      }\n      totalCount\n    }\n  }\n"),ee=(0,E.gql)("\n  query postCommentsThreadQuery($selector: CommentSelector, $limit: Int, $enableTotal: Boolean) {\n    comments(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...CommentsList\n      }\n      totalCount\n    }\n  }\n");e.s(["CommentsListMultiQuery",0,J,"PostsEditFormQuery",0,X,"postCommentsThreadQuery",0,ee],710007);let et=(0,E.gql)("\n  query DraftCommentsQuery($selector: CommentSelector, $limit: Int, $enableTotal: Boolean) {\n    comments(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...DraftComments\n      }\n      totalCount\n    }\n  }\n"),en=(0,E.gql)("\n  query multiCommentRecentCommentsQuery($selector: CommentSelector, $limit: Int, $enableTotal: Boolean) {\n    comments(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...CommentsListWithParentMetadata\n      }\n      totalCount\n    }\n  }\n");e.s(["CommentsListWithParentMetadataMultiQuery",0,en,"DraftCommentsQuery",0,et],113765);let eo=(0,E.gql)("\n  mutation updateCommentCommentForm($selector: SelectorInput!, $data: UpdateCommentDataInput!) {\n    updateComment(selector: $selector, data: $data) {\n      data {\n        ...CommentsList\n      }\n    }\n  }\n"),ei=(0,E.gql)("\n  mutation createCommentCommentForm($data: CreateCommentDataInput!) {\n    createComment(data: $data) {\n      data {\n        ...CommentsList\n      }\n    }\n  }\n"),er=(0,l.defineStyles)("CommentForm",e=>({fieldWrapper:{marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit,...(0,q.isIfAnyoneBuildsItFrontPage)({background:e.palette.editor.bannerAdBackground,color:e.palette.text.bannerAdOverlay})}})),ea=(0,l.defineStyles)("CommentSubmit",e=>({submit:{display:"flex",justifyContent:"end",alignItems:"center"},submitQuickTakes:{padding:(0,j.getCommentsNewFormPadding)(e),borderBottomLeftRadius:e.borderRadius.quickTakesEntry,borderBottomRightRadius:e.borderRadius.quickTakesEntry},submitQuickTakesNewForm:{background:e.palette.grey[100]},submitQuickTakesButtonAtBottom:e.isFriendlyUI?{marginTop:20,padding:20,borderTop:"1px solid ".concat(e.palette.grey[300])}:{},formButton:e.isFriendlyUI?{fontSize:14,textTransform:"none",padding:"6px 12px",borderRadius:6,boxShadow:"none",marginLeft:8}:{fontSize:"16px",color:e.palette.lwTertiary.main,marginLeft:"5px","&:hover":{opacity:.5}},cancelButton:{color:e.isFriendlyUI?void 0:e.palette.grey[400]},submitButton:e.isFriendlyUI?{backgroundColor:e.palette.buttons.alwaysPrimary,color:e.palette.text.alwaysWhite,"&:disabled":{backgroundColor:e.palette.buttons.alwaysPrimary,color:e.palette.text.alwaysWhite,opacity:.5}}:{padding:"8px"},submitMinimalist:{height:"fit-content",marginTop:"auto",marginBottom:4},formButtonMinimalist:{padding:"2px",fontSize:"16px",minWidth:28,minHeight:28,marginLeft:"5px","&:hover":{opacity:.8,backgroundColor:e.palette.lwTertiary.main},backgroundColor:e.palette.lwTertiary.main,color:e.palette.background.pageActiveAreaBackground,overflowX:"hidden"},submitSegmented:{borderTopRightRadius:0,borderBottomRightRadius:0},submitWrapper:{display:"flex"},autoEmailSubscribe:{marginRight:"auto",marginLeft:4}}),{stylePriority:1}),es=e=>{let{isMinimalist:i=!1,formDisabledDueToRateLimit:a=!1,isQuickTake:l=!1,disableSubmitDropdown:d=!1,showCancelButton:c=!1,quickTakesSubmitButtonAtBottom:u,loading:m=!1,submitLabel:p="Submit",handleSubmit:h,cancelLabel:g="Cancel",cancelCallback:f,formCanSubmit:v,formIsSubmitting:x,formType:y}=e,b=(0,s.useStyles)(ea),j=(0,C.useCurrentUser)(),{openDialog:S}=(0,k.useDialog)(),I=i?b.formButtonMinimalist:b.formButton,L=(0,o.isFriendlyUI)()&&!i?{variant:"contained"}:{},R=(0,o.isFriendlyUI)()&&!i?{variant:"contained",color:"primary"}:{};(a||m||!v||x)&&(R.disabled=!0);let _=(0,F.hasDraftComments)()&&!d;return(0,t.jsxs)("div",{className:(0,r.default)(b.submit,{[b.submitMinimalist]:i,[b.submitQuickTakes]:l&&!(u&&(0,o.isFriendlyUI)()),[b.submitQuickTakesNewForm]:l&&"new"===y,[b.submitQuickTakesButtonAtBottom]:l&&u}),children:[(0,t.jsx)("div",{className:b.autoEmailSubscribe,children:(0,t.jsx)(K,{})}),c&&!i&&(0,t.jsx)(n.default,{onClick:f,className:(0,r.default)(I,b.cancelButton),...L,children:g}),(0,t.jsxs)("div",{className:b.submitWrapper,children:[(0,t.jsx)(n.default,{type:"submit",id:"new-comment-submit",className:(0,r.default)(I,b.submitButton,{[b.submitSegmented]:_}),onClick:e=>{j||(S({name:"LoginPopup",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(T.default,{onClose:n})}}),e.preventDefault())},...R,children:x||m?(0,t.jsx)(N.default,{}):i?(0,t.jsx)(w.default,{}):p}),_&&(0,t.jsx)($,{handleSubmit:h})]})]})},el=e=>{var n,o,l;let{initialData:w,prefilledProps:k,alignmentForumPost:j,hideAlignmentForumCheckbox:T,quickTakesFormGroup:N,formClassName:E,editorHintText:F,commentMinimalistStyle:B,maxHeight:U,submitLabel:H,cancelLabel:W,commentSubmitProps:O,interactionType:V,disableSubmitDropdown:z,onSubmit:$,onSuccess:q,onCancel:G,onError:Z}=e,{captureEvent:Y}=(0,D.useTracking)(),Q=(0,s.useStyles)(er),K=(0,C.useCurrentUser)(),X=w?"edit":"new",ea=!T&&!(0,b.isAF)()&&j&&((0,x.userIsMemberOf)(K,"alignmentForum")||(0,x.userIsAdmin)(K)),el=N?_.default:R.default,{onSubmitCallback:ed,onSuccessCallback:ec,addOnSubmitCallback:eu,addOnSuccessCallback:em}=(0,c.useEditorFormCallbacks)(),[ep]=(0,P.useMutation)(ei,{refetchQueries:[ee,J,et,en]}),[eh]=(0,P.useMutation)(eo),{setCaughtError:eg,displayedErrorComponent:ef}=(0,S.useFormErrors)(),ev=(0,i.useForm)({defaultValues:{...(0,M.withDateFields)(w,["repliesBlockedUntil","afDate","postedAt","lastEditedAt","lastSubthreadActivity"]),..."new"===X?k:{}},onSubmitMeta:{draft:!1},onSubmit:async e=>{var t,n,o,i;let{formApi:r,meta:a}=e;await (null==(t=ed.current)?void 0:t.call(ed)),null==$||$();let{draft:s}=a;try{let e;if("new"===X){let{af:t,...n}=r.state.values,i=ea||(0,b.isAF)()?{...n,af:t}:n,{data:a}=await ep({variables:{data:{...i,draft:s}}});if(!(null==a||null==(o=a.createComment)?void 0:o.data))throw Error("Failed to create comment");e=a.createComment.data}else{let t=(0,d.getUpdatedFieldValues)(r,["contents"]),{data:n}=await eh({variables:{selector:{_id:null==w?void 0:w._id},data:{...t,draft:s}}});if(!(null==n||null==(i=n.updateComment)?void 0:i.data))throw Error("Failed to update comment");e=n.updateComment.data}null==(n=ec.current)||n.call(ec,e),q(e),eg(void 0),r.reset()}catch(e){null==Z||Z(),eg(e)}}}),ex=(0,I.useFormSubmitOnCmdEnter)(()=>ev.handleSubmit()),ey=(0,a.useCallback)(e=>{var t,n,o;Y("commentFormFocusChanged",{focus:e,formType:X,editingCommentId:null==(t=ev.state.values)?void 0:t._id,editingCommentPostId:null==(n=ev.state.values)?void 0:n.postId,draft:null==(o=ev.state.values)?void 0:o.draft})},[Y,X,null==(n=ev.state.values)?void 0:n._id,null==(o=ev.state.values)?void 0:o.postId,null==(l=ev.state.values)?void 0:l.draft]);if("edit"===X&&!w)return(0,t.jsx)(L.default,{});let eb=(0,b.isLWorAF)()&&"edit"===X&&((0,x.userIsMemberOf)(K,"alignmentForumAdmins")||(0,x.userIsAdmin)(K)),eC=(0,t.jsx)(ev.Subscribe,{selector:e=>[e.canSubmit,e.isSubmitting],children:e=>{var n,o;let[i,r]=e,a=("new"===X&&"reply"===V||"edit"===X)&&!B;return(0,t.jsx)(es,{...O,isMinimalist:null!=B&&B,isQuickTake:null!=(n=null!=(o=null==O?void 0:O.isQuickTake)?o:ev.state.values.shortform)&&n,disableSubmitDropdown:z,showCancelButton:a,submitLabel:H,handleSubmit:ev.handleSubmit,cancelLabel:W,cancelCallback:G,formCanSubmit:i,formIsSubmitting:r,formType:X})}});return(0,t.jsxs)("form",{className:(0,r.default)("vulcan-form",E),ref:ex,onSubmit:e=>{e.preventDefault(),e.stopPropagation(),ev.handleSubmit({draft:!1})},onFocus:()=>ey(!0),onBlur:()=>ey(!1),children:[ef,(0,t.jsxs)(el,{footer:(0,t.jsx)(t.Fragment,{}),heading:(0,t.jsx)(t.Fragment,{}),collapsed:!1,hasErrors:!1,children:[(0,v.commentAllowTitle)(ev.state.values)&&(0,t.jsx)("div",{className:Q.fieldWrapper,children:(0,t.jsx)(ev.Field,{name:"title",children:e=>(0,t.jsx)(g.EditCommentTitle,{field:e,placeholder:"Title (optional)"})})}),(0,t.jsx)("div",{className:(0,r.default)("form-input","form-component-EditorFormComponent",Q.fieldWrapper),children:(0,t.jsx)(ev.Field,{name:"contents",children:e=>(0,t.jsx)(c.EditorFormComponent,{field:e,name:"contents",formType:X,document:ev.state.values,addOnSubmitCallback:eu,addOnSuccessCallback:em,getLocalStorageId:e=>e._id?{id:e._id,verify:!0}:e.parentCommentId?{id:"parent:"+e.parentCommentId,verify:!1}:{id:"post:"+e.postId,verify:!1},hintText:(0,m.getCommentEditorPlaceholder)(),fieldName:"contents",collectionName:"Comments",commentEditor:!0,commentStyles:!0,hideControls:!1,editorHintText:F,commentMinimalistStyle:B,maxHeight:U})})}),"edit"===X&&(0,x.userIsAdminOrMod)(K)&&(0,t.jsx)("div",{className:Q.fieldWrapper,children:(0,t.jsx)(ev.Field,{name:"promoted",children:e=>(0,t.jsx)(A.default,{field:e,label:"Pinned"})})}),y.quickTakesTagsEnabledSetting.get()&&ev.state.values.shortform&&(0,t.jsx)("div",{className:(0,r.default)("form-input","input-relevantTagIds",Q.fieldWrapper),children:(0,t.jsx)(ev.Field,{name:"relevantTagIds",children:e=>(0,t.jsx)(f.FormComponentQuickTakesTags,{field:e})})}),ea&&(0,t.jsx)("div",{className:Q.fieldWrapper,children:(0,t.jsx)(ev.Field,{name:"af",children:e=>(0,t.jsx)(A.default,{field:e,label:"AI Alignment Forum"})})})]}),(0,x.userIsAdminOrMod)(K)&&"edit"===X&&(0,t.jsxs)(h.LegacyFormGroupLayout,{label:"Moderator Options",startCollapsed:!0,children:[(0,t.jsx)("div",{className:Q.fieldWrapper,children:(0,t.jsx)(ev.Field,{name:"repliesBlockedUntil",children:e=>(0,t.jsx)(p.FormComponentDatePicker,{field:e,label:"Replies blocked until"})})}),(0,x.userIsAdmin)(K)&&(0,t.jsx)("div",{className:Q.fieldWrapper,children:(0,t.jsx)(ev.Field,{name:"hideAuthor",children:e=>(0,t.jsx)(A.default,{field:e,label:"Hide author"})})})]}),eb&&(0,t.jsx)(h.LegacyFormGroupLayout,{label:"Alignment Options",startCollapsed:!0,children:(0,t.jsx)("div",{className:Q.fieldWrapper,children:(0,t.jsx)(ev.Field,{name:"reviewForAlignmentUserId",children:e=>(0,t.jsx)(u.MuiTextField,{field:e,label:"AF Review UserId"})})})}),eC]})}},819131,784943,984752,e=>{"use strict";e.s(["default",()=>ek],819131);var t=e.i(843476),n=e.i(271645),o=e.i(343794),i=e.i(530841),r=e.i(96009),a=e.i(725788),s=e.i(552275),l=e.i(935132),d=e.i(673991),c=e.i(820010),u=e.i(144437),m=e.i(851364),p=e.i(566721),h=e.i(70796),g=e.i(166540),f=e.i(161517),v=e.i(791434),x=e.i(538794),y=e.i(727880),b=e.i(823567);e.i(793794);var C=e.i(527633),w=e.i(594891),k=e.i(84377),j=e.i(946271);e.i(813868);var S=e.i(122756),I=e.i(328018),T=e.i(833851),N=e.i(690118),L=e.i(87828),R=e.i(239832);let _=(0,S.gql)("\n  query NewUserGuidelinesDialog($documentId: String) {\n    comment(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...CommentsList\n      }\n    }\n  }\n"),A=(0,x.registerComponent)("NewUserGuidelinesDialog",e=>{var n;let{classes:o,onClose:i,post:r,user:a}=e,d=(0,k.useUpdateCurrentUser)(),{recordEvent:c}=(0,w.useNewEvents)(),u=s.firstCommentAcknowledgeMessageCommentIdSetting.get(),{loading:m,data:p}=(0,j.useQuery)(_,{variables:{documentId:u},skip:!u}),h=null==p||null==(n=p.comment)?void 0:n.result,{html:g=""}=(null==h?void 0:h.contents)||{};return(0,t.jsx)(f.AnalyticsContext,{pageSectionContext:"firstCommentAcknowledgeDialog",children:(0,t.jsxs)(T.default,{open:!0,children:[(0,t.jsxs)(L.default,{contentType:"post",className:o.moderationGuidelines,children:[m&&(0,t.jsx)(R.default,{}),g&&(0,t.jsx)(N.ContentItemBody,{dangerouslySetInnerHTML:{__html:g}}),!g&&!m&&(0,t.jsx)("div",{className:o.moderationGuidelines,children:(0,t.jsx)("em",{children:"A moderator will need to review your account before your posts will appear publicly."})})]}),(0,t.jsxs)(I.DialogActions,{children:[(0,l.isLW)()&&(0,t.jsx)(C.default,{children:"This was your father's rock"}),(0,t.jsx)(C.default,{onClick:()=>{d({acknowledgedNewUserGuidelines:!0}),c("acknowledged-new-user-guidelines",!1,{userId:a._id,important:!1,intercom:!0,documentId:r._id}),i()},children:"I have read and understood"})]})]})})},{styles:e=>({moderationGuidelines:{...e.typography.body2,padding:30,fontFamily:e.typography.postStyle.fontFamily,"& a":{color:e.palette.primary.main}}})});var M=e.i(598720),P=e.i(758495);let E="\n  <p>Commenting guidelines:</p>\n  <ul>\n    <li>Aim to explain, not persuade</li>\n    <li>Try to be clear, on-topic, and kind</li>\n    <li>Approach disagreements with curiosity</li>\n  </ul>\n";var F=e.i(35693),B=e.i(900174),D=e.i(136541),U=e.i(476331),H=e.i(741452),W=e.i(683311),O=e.i(508107),V=e.i(156778),z=e.i(546337),$=e.i(197139),q=e.i(372593);let G=e=>{let{field:n,defaultValue:o,options:i,label:r,hideClear:a}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(z.MuiTextField,{select:!0,field:n,label:r,defaultValue:o,children:i.map(e=>(0,t.jsx)(q.MenuItem,{value:e.value,children:e.label},e.value))}),!a&&(0,t.jsx)($.ClearInput,{clearField:()=>n.handleChange(null)})]})};e.s(["FormComponentSelect",0,G],784943);var Z=e.i(422046),Y=e.i(79732),Q=e.i(429329),K=e.i(797191),X=e.i(716512),J=e.i(514089);let ee=(0,S.gql)("\n  mutation updatePostModerationGuidelinesEditForm($selector: SelectorInput!, $data: UpdatePostDataInput!) {\n    updatePost(selector: $selector, data: $data) {\n      data {\n        ...PostsPage\n      }\n    }\n  }\n"),et=(0,S.gql)("\n  mutation updateTagModerationGuidelinesEditForm($selector: SelectorInput!, $data: UpdateTagDataInput!) {\n    updateTag(selector: $selector, data: $data) {\n      data {\n        ...TagWithFlagsFragment\n      }\n    }\n  }\n"),en=(0,S.gql)("\n  query PostsEditQuery($documentId: String!, $version: String) {\n    post(selector:  { documentId: $documentId }) {\n      result {\n        ...PostsEditQueryFragment\n      }\n    }\n  }\n"),eo=(0,S.gql)("\n  query TagEditQuery($documentId: String!) {\n    tag(selector: { documentId: $documentId }) {\n      result {\n        ...TagEditFragment\n      }\n    }\n  }\n"),ei=(0,Q.defineStyles)("ModerationGuidelinesEditForm",e=>({formButton:{paddingBottom:"2px",fontSize:"16px",marginLeft:"5px","&:hover":{background:e.palette.buttons.hoverGrayHighlight}},submitButton:{color:e.palette.secondary.main,float:"right"},fieldWrapper:{marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit}})),er=e=>{let{documentType:n,initialData:i,onSuccess:r}=e,a=(0,Y.useStyles)(ei),s="post"===n,{onSubmitCallback:l,onSuccessCallback:d,addOnSubmitCallback:c,addOnSuccessCallback:u}=(0,W.useEditorFormCallbacks)(),[m]=(0,J.useMutation)(s?ee:et),{setCaughtError:p,displayedErrorComponent:h}=(0,K.useFormErrors)(),g=(0,H.useForm)({defaultValues:{...i},onSubmit:async e=>{var t,n,o;let{formApi:a}=e;await (null==(t=l.current)?void 0:t.call(l));try{let e,t=(0,O.getUpdatedFieldValues)(a,["moderationGuidelines"]),{data:s}=await m({variables:{selector:{_id:null==i?void 0:i._id},data:t}});if(!(null==s||null==(n=s.updatePost)?void 0:n.data))throw Error("Failed to update post");e=s.updatePost.data,null==(o=d.current)||o.call(d,e),null==r||r()}catch(e){p(e)}}});return(0,t.jsxs)("form",{className:"vulcan-form",onSubmit:e=>{e.preventDefault(),e.stopPropagation(),g.handleSubmit()},children:[h,(0,t.jsx)("div",{className:(0,o.default)("form-component-EditorFormComponent",a.fieldWrapper),children:(0,t.jsx)(g.Field,{name:"moderationGuidelines",children:e=>(0,t.jsx)(W.EditorFormComponent,{field:e,name:"moderationGuidelines",formType:"edit",document:g.state.values,addOnSubmitCallback:c,addOnSuccessCallback:u,hintText:(0,V.getDefaultEditorPlaceholder)(),fieldName:"moderationGuidelines",collectionName:"Posts",commentEditor:!0,commentStyles:!0,hideControls:!1})})}),s&&(0,t.jsx)("div",{className:a.fieldWrapper,children:(0,t.jsx)(g.Field,{name:"moderationStyle",children:e=>(0,t.jsx)(G,{field:e,options:Z.MODERATION_GUIDELINES_OPTIONS,label:"Style"})})}),(0,t.jsx)(g.Subscribe,{selector:e=>[e.canSubmit,e.isSubmitting],children:e=>{let[n,i]=e;return(0,t.jsx)("div",{className:"form-submit",children:(0,t.jsx)(C.default,{type:"submit",className:(0,o.default)("primary-form-submit-button",a.formButton,a.submitButton),disabled:!n||i,children:"Submit"})})}})]})},ea=e=>{var n,o;let{commentType:i="post",documentId:r,onClose:a}=e,s="post"===i,{data:l}=(0,j.useQuery)(en,{variables:{documentId:r,version:"draft"},skip:!s}),{data:d}=(0,j.useQuery)(eo,{variables:{documentId:r},skip:s}),c=s?null==l||null==(n=l.post)?void 0:n.result:null==d||null==(o=d.tag)?void 0:o.result;return(0,t.jsxs)(T.default,{open:!0,onClose:a,children:[(0,t.jsx)(U.DialogTitle,{children:"Moderation Guidelines Edit Form"}),(0,t.jsxs)(D.DialogContent,{children:[(0,t.jsxs)(X.Typography,{variant:"body2",children:["Edit the moderation guidelines specific to this ",i,":"]}),!c&&(0,t.jsx)(R.default,{}),c&&(0,t.jsx)(er,{documentType:i,initialData:c,onSuccess:a})]})]})},es=(0,S.gql)("\n  query PostsModerationGuidelines($documentId: String) {\n    PostsModerationGuidelines: post(selector: { documentId: $documentId }) {\n      result {\n        ...PostsModerationGuidelines\n      }\n      __typename\n    }\n  }\n"),el=(0,S.gql)("\n  query TagModerationGuidelines($documentId: String) {\n    TagModerationGuidelines: tag(selector: { documentId: $documentId }) {\n      result {\n        ...TagFragment\n      }\n      __typename\n    }\n  }\n"),ed=e=>(0,M.truncatise)(e,{TruncateLength:300,TruncateBy:"characters",Suffix:"... <a>(".concat((0,v.preferredHeadingCase)("Read More"),")</a>"),Strict:!1}),ec={"norm-enforcing":"Norm Enforcing - I try to enforce particular rules","reign-of-terror":"Reign of Terror - I delete anything I judge to be counterproductive","easy-going":"Easy Going - I just delete obvious spam and trolling."},eu=(0,x.registerComponent)("ModerationGuidelinesBox",e=>{var o,r;let{classes:s,commentType:d="post",documentId:u}=e,{recordEvent:m}=(0,w.useNewEvents)(),p=(0,i.useCurrentUser)(),{openDialog:h}=(0,a.useDialog)(),[g,f]=(0,n.useState)(!1),v="post"===d,{data:x,loading:y}=(0,j.useQuery)(es,{variables:{documentId:u},skip:!u||!v,fetchPolicy:"cache-first"}),{data:b,loading:C}=(0,j.useQuery)(el,{variables:{documentId:u},skip:!u||v,fetchPolicy:"cache-first"}),k=v?null==x||null==(o=x.PostsModerationGuidelines)?void 0:o.result:null==b||null==(r=b.TagModerationGuidelines)?void 0:r.result;if(!k||y||C)return null;let{combinedGuidelines:S,truncatedGuidelines:I}=v&&k?((e,t)=>{var n;let o=e.moderationStyle||(null==(n=e.user)?void 0:n.moderationStyle)||"",i=t[o],{html:r=""}=e.moderationGuidelines||{},a="".concat(e.user?"<p><em>".concat(e.user.displayName+"'s commenting guidelines",'</em></p><p class="').concat(i,'">').concat(ec[o]||"","</p>"):"","\n  ").concat(r||""),s="\n    ".concat(r||o?a:"","\n    ").concat(r&&e.frontpageDate?"<hr/>":"","\n    ").concat(e.frontpageDate?(0,l.isEAForum)()?E:"\n  <p><em>Frontpage comment guidelines:</em></p>\n  <ul>\n    <li>Aim to explain, not persuade</li>\n    <li>Try to offer concrete models and predictions</li>\n    <li>If you disagree, try getting curious about what your partner is thinking</li>\n    <li>Don't be afraid to say 'oops' and change your mind</li>\n  </ul>":r||o?"":(0,l.isEAForum)()?E:"\n<p><em>Default comment guidelines:</em></p>\n<ul>\n  <li>Aim to explain, not persuade</li>\n  <li>Try to offer concrete models and predictions</li>\n  <li>If you disagree, try getting curious about what your partner is thinking</li>\n  <li>Don't be afraid to say 'oops' and change your mind</li>\n</ul>","\n  "),d=ed(s);return{combinedGuidelines:s,truncatedGuidelines:d}})(k,s):(e=>{let{html:t}=e.moderationGuidelines||{},n=null!=t?t:"",o=ed(n);return{combinedGuidelines:n,truncatedGuidelines:o}})(k),T=g?S:I,N=S.trim().length!==I.trim().length;return(0,t.jsxs)("div",{className:s.root,onClick:N?e=>{e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||0!==e.button||(f(!g),p&&m("toggled-user-moderation-guidelines",!1,{userId:p._id,important:!1,intercom:!0,documentId:null==k?void 0:k.userId,commentType:d,targetState:!g}))}:void 0,children:[!!(v&&k?(0,c.userCanModeratePost)(p,k):(0,F.userCanModerateSubforum)(p,k))&&(0,t.jsx)("span",{onClick:e=>{e.preventDefault(),e.stopPropagation(),h({name:"ModerationGuidelinesEditForm",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(ea,{onClose:n,commentType:d,documentId:u})}})},children:(0,t.jsx)(B.TooltipSpan,{title:"Edit moderation guidelines",className:s.editButtonWrapper,children:(0,t.jsx)(P.default,{className:s.editButton})})}),(0,t.jsxs)(L.default,{contentType:"comment",className:s.moderationGuidelines,children:[(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:T}}),g&&N&&(0,t.jsx)("a",{className:s.collapse,children:"(Click to Collapse)"})]})]})},{styles:e=>({root:{padding:2*e.spacing.unit,position:"relative"},assistance:{color:e.palette.text.normal},"easy-going":{color:e.palette.text.moderationGuidelinesEasygoing},"norm-enforcing":{color:e.palette.text.moderationGuidelinesNormEnforcing},"reign-of-terror":{color:e.palette.text.moderationGuidelinesReignOfTerror},editButtonWrapper:{cursor:"pointer",position:"absolute",right:16},editButton:{height:"0.8em"},collapse:{display:"flex",justifyContent:"flex-end",fontSize:14,marginBottom:4},moderationGuidelines:{fontSize:"1.1rem","& p, & ul":{marginTop:".6em",marginBottom:".6em"},"& li":{marginTop:".4em",marginBottom:".4em"}}}),hocs:[r.default]});var em=e.i(159211);let ep=(0,Q.defineStyles)("RecaptchaWarning",e=>({warningText:{margin:10,padding:20,border:e.palette.border.slightlyIntense,...e.typography.body2},link:{color:e.palette.primary.light}})),eh=()=>{let e=(0,Y.useStyles)(ep);return(0,l.isLWorAF)()?(0,t.jsxs)("div",{className:e.warningText,children:["You've been flagged by our spam detection system. Please message an admin via Intercom (the chat bubble in the bottom right corner) or send a private message to admin",(0,t.jsx)(em.Link,{className:e.link,to:"/users/habryka4",children:" habryka"})," to activate posting- and commenting-privileges on your account."]}):(0,t.jsxs)("div",{className:e.warningText,children:["You've been flagged by our spam detection system. Please"," ",(0,t.jsx)(em.Link,{className:e.link,to:"/contact",children:"contact us"})," to activate posting and commenting privileges on your account."]})},eg=e=>{let{currentUser:n,children:o}=e;return(null==n?void 0:n.spamRiskScore)&&!(n.spamRiskScore>c.spamRiskScoreThreshold)?(0,t.jsx)(eh,{}):(0,t.jsxs)(t.Fragment,{children:[" ",o," "]})},ef=(0,S.gql)("\n  query NewCommentModerationWarning($documentId: String) {\n    comment(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...CommentsList\n      }\n    }\n  }\n"),ev=(0,x.registerComponent)("NewCommentModerationWarning",e=>{var n;let{classes:o}=e,i=s.commentModerationWarningCommentIdSetting.get(),{loading:r,data:a}=(0,j.useQuery)(ef,{variables:{documentId:i},skip:!i}),l=null==a||null==(n=a.comment)?void 0:n.result,{html:d=""}=(null==l?void 0:l.contents)||{};return(0,t.jsx)("div",{className:o.root,children:(0,t.jsxs)(L.default,{contentType:"comment",children:[r&&(0,t.jsx)(R.default,{}),d&&(0,t.jsx)(N.ContentItemBody,{dangerouslySetInnerHTML:{__html:d}}),!d&&!r&&(0,t.jsx)("div",{children:(0,t.jsx)("em",{children:"A moderator will need to review your account before your comments will appear publicly."})})]})})},{styles:e=>({root:{borderBottom:e.palette.border.commentBorder,padding:12,paddingRight:28}})});e.s(["default",()=>eb],984752);let ex=(0,e.i(339213).default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,t.jsx)("path",{d:"M22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12.5 8H11v6l4.75 2.85.75-1.23-4-2.37V8zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})]}),"Alarm");var ey=e.i(334378);let eb=(0,x.registerComponent)("RateLimitWarning",e=>{let{contentType:n,lastRateLimitExpiry:o,rateLimitMessage:i,classes:r}=e,a=()=>{let e=(0,g.default)(o),t=(0,g.default)(),n=e.diff(t,"seconds"),i=e.diff(t,"minutes"),r=e.diff(t,"hours"),a=e.diff(t,"days"),s=e.diff(t,"weeks");return n<60?"".concat(n," second").concat(n>1?"s":""):i<60?"".concat(i," minute").concat(i>1?"s":""):r<24?"".concat(r," hour").concat(r>1?"s":""):a<7?"".concat(a," day").concat(a>1?"s":""):"".concat(s," week").concat(s>1?"s":"")},s="<p>You can submit again in ".concat(a(),".</p> ").concat(null!=i?i:"");return((0,v.isFriendlyUI)()&&(s="Please wait ".concat(a()," before ").concat("comment"===n?"commenting":"posting"," again. ").concat(null!=i?i:"")),(0,v.isFriendlyUI)())?(0,t.jsx)(ey.default,{message:s}):(0,t.jsxs)(L.default,{contentType:"comment",className:r.lwBanner,children:[(0,t.jsx)(ex,{className:r.icon}),(0,t.jsx)(N.ContentItemBody,{dangerouslySetInnerHTML:{__html:s}})]})},{styles:e=>({lwBanner:{padding:12,backgroundColor:e.palette.background.warningTranslucent,display:"flex",alignItems:"center","& p":{marginBottom:6}},icon:{marginLeft:8,marginRight:16,height:24,color:e.palette.grey[500]}})});var eC=e.i(937636);let ew=(0,S.gql)("\n  query CommentsNewForm($documentId: String, $postId: String) {\n    user(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...UsersCurrentCommentRateLimit\n      }\n    }\n  }\n"),ek=(0,x.registerComponent)("CommentsNewForm",e=>{var r,x;let{prefilledProps:y={},post:C,tag:w,tagCommentType:k="DISCUSSION",parentComment:S,successCallback:I,interactionType:T,cancelCallback:N,removeFields:L,formProps:R,enableGuidelines:_=!0,padding:M=!0,formStyle:P="default",overrideHintText:E,quickTakesSubmitButtonAtBottom:F,isAnswer:B,cancelLabel:D,hideAlignmentForumCheckbox:U,className:H,classes:W}=e,O=(0,i.useCurrentUser)(),{captureEvent:V}=(0,f.useTracking)({eventProps:{postId:null==C?void 0:C._id,tagId:null==w?void 0:w._id,tagCommentType:k}}),z=(0,n.useRef)(Date.now()),{refetch:$,data:q}=(0,j.useQuery)(ew,{variables:{documentId:null==O?void 0:O._id,postId:null==C?void 0:C._id},skip:!O,fetchPolicy:"cache-and-network",ssr:!1}),G=null==q||null==(x=q.user)?void 0:x.result,Z=null==G?void 0:G.rateLimitNextAbleToComment,Y=null!=(r=Z&&new Date(Z.nextEligible))?r:null,Q=Z?Z.rateLimitMessage:null,K=!!Y&&(0,h.isInFuture)((0,g.default)(Y).subtract(1,"minutes").toDate()),{flash:X}=(0,u.useMessages)(),J=!!(y={...y,af:(0,p.commentDefaultToAlignment)(O,C,S)}).shortform,ee="minimalist"===P,[et,en]=(0,n.useState)(!1),[eo,ei]=(0,n.useState)(!1),[er,ea]=(0,n.useState)(0),{openDialog:es}=(0,a.useDialog)(),el=(0,m.useAfNonMemberSuccessHandling)(),{pathname:ed}=(0,eC.useLocation)();C&&(y={...y,postId:C._id}),w&&(y={...y,tagId:w._id,tagCommentType:k}),S&&(y={...y,parentCommentId:S._id}),y={...y,answer:!!B};let ec=s.hideUnreviewedAuthorCommentsSettings.get(),em=ec&&new Date(ec)<new Date&&O&&!O.isReviewed,ep=(0,n.useMemo)(()=>({...ee?{commentMinimalistStyle:!0,editorHintText:"Reply..."}:{},...E?{editorHintText:E}:{}}),[ee,E]),eh=(0,n.useMemo)(()=>B?{editorHintText:(0,v.isFriendlyUI)()&&B?"Write a new answer...":void 0}:{},[B]),ef=(null==C?void 0:C._id)||(null==w?void 0:w._id);(0,n.useEffect)(()=>{if(K&&Z){let e=setTimeout(()=>{ea(e=>e+1)},new Date(Z).getTime()-new Date().getTime());return()=>clearTimeout(e)}},[Z,K]);let ex=(0,n.useMemo)(()=>({formClassName:J?W.quickTakesForm:"",...ep,...R,...eh}),[J,W.quickTakesForm,ep,R,eh]),ey=(0,n.useMemo)(()=>({formDisabledDueToRateLimit:K,isQuickTake:J,quickTakesSubmitButtonAtBottom:F,loading:eo}),[K,J,F,eo]);return!O||(0,d.userCanDo)(O,"posts.moderate.all")||(0,c.userIsAllowedToComment)(O,y,null==C?void 0:C.user,!!S)?(0,t.jsx)("div",{className:(0,o.default)(H,ee?W.rootMinimalist:W.root,{[W.loadingRoot]:eo,[W.rootQuickTakes]:J,[W.quickTakesSubmitButtonAtBottom]:J&&F}),onFocus:()=>{setTimeout(()=>{let e={user:O,post:C};(e=>{let{user:t,post:n}=e;return!!t&&(0,c.requireNewUserGuidelinesAck)(t)&&!!n})(e)&&es({name:"NewUserGuidelinesDialog",contents:n=>{let{onClose:o}=n;return(0,t.jsx)(A,{onClose:o,...e})}}),(0,l.isLWorAF)()&&en(!0)},0)},children:(0,t.jsxs)(eg,{currentUser:O,children:[(0,t.jsxs)("div",{className:M?(0,o.default)({[W.form]:!ee&&!(J&&F),[W.formMinimalist]:ee}):void 0,children:[K&&(0,t.jsx)(eb,{contentType:"comment",lastRateLimitExpiry:Y,rateLimitMessage:Q}),(0,t.jsx)("div",{onFocus:e=>{(0,m.afNonMemberDisplayInitialPopup)(O,es),e.preventDefault()},children:(0,t.jsx)(b.CommentForm,{prefilledProps:y,commentSubmitProps:ey,disableSubmitDropdown:B||(null==C?void 0:C.question)||y.tagId,interactionType:T,alignmentForumPost:null==C?void 0:C.af,hideAlignmentForumCheckbox:U,quickTakesFormGroup:J&&!(F&&(0,v.isFriendlyUI)()),formClassName:ex.formClassName,editorHintText:ex.editorHintText,commentMinimalistStyle:ex.commentMinimalistStyle,maxHeight:ex.maxHeight,submitLabel:B?(0,v.isFriendlyUI)()?"Add answer":"Submit":(0,v.isFriendlyUI)()?J?"Publish":"Comment":"Submit",cancelLabel:D,onSuccess:e=>{el(e),e.deleted&&e.deletedReason&&X(e.deletedReason),e.draft&&e.shortform&&"/"===ed&&X("Quick take saved as draft, visit your profile to edit it."),I&&I(e),ei(!1),V("wrappedSuccessCallbackFinished",{timeElapsed:Date.now()-z.current,commentId:e._id}),$()},onCancel:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];N&&N(...t),ei(!1)},onSubmit:()=>{ei(!0),z.current=Date.now(),V("wrappedSubmitCallbackStarted")},onError:()=>{ei(!1)}})})]}),ef&&_&&et&&(0,t.jsxs)("div",{className:W.moderationGuidelinesWrapper,children:[em&&(0,t.jsx)("div",{className:W.modNote,children:(0,t.jsx)(ev,{})}),(0,t.jsx)(eu,{documentId:ef,commentType:(null==C?void 0:C._id)?"post":"subforum"})]})]})}):(0,t.jsx)("span",{children:"Sorry, you do not have permission to comment at this time."})},{styles:e=>({root:e.isFriendlyUI?{"& .form-component-EditorFormComponent":{marginTop:0}}:{},rootMinimalist:{"& .form-input":{width:"100%",margin:0,marginTop:4},"& form":{display:"flex",flexDirection:"row"}},rootQuickTakes:{"& .form-component-EditorFormComponent":{background:e.palette.grey[100],padding:(0,y.getCommentsNewFormPadding)(e),borderTopLeftRadius:e.borderRadius.quickTakesEntry,borderTopRightRadius:e.borderRadius.quickTakesEntry}},quickTakesSubmitButtonAtBottom:e.isFriendlyUI?{"& .form-component-EditorFormComponent":{background:"transparent",borderRadius:e.borderRadius.quickTakesEntry},"& .form-input":{padding:"0 20px"}}:{},loadingRoot:{opacity:.5},form:{padding:(0,y.getCommentsNewFormPadding)(e)},formMinimalist:{padding:"12px 10px 8px 10px"},quickTakesForm:{display:"flex",flexDirection:"column"},rateLimitNote:{paddingTop:"4px",color:e.palette.text.dim2},modNote:{paddingTop:"4px",color:e.palette.text.dim2},moderationGuidelinesWrapper:{backgroundColor:e.palette.panelBackground.newCommentFormModerationGuidelines}}),hocs:[r.default]})},30446,818009,e=>{"use strict";e.s(["default",()=>d],30446);var t=e.i(843476),n=e.i(79732),o=e.i(429329),i=e.i(159211),r=e.i(819131),a=e.i(566721),s=e.i(182584);let l=(0,o.defineStyles)("UltraFeedReplyEditor",e=>({replyEditorContainer:{marginBottom:12,paddingRight:16,background:e.palette.grey[100],borderRadius:e.borderRadius.small,[e.breakpoints.down("sm")]:{paddingRight:0}},cannotReplyMessage:{padding:16,marginTop:8,marginBottom:8,background:e.palette.grey[100],borderRadius:e.borderRadius.small,color:e.palette.text.dim,fontSize:14,fontFamily:e.palette.fonts.sansSerifStack,fontStyle:"italic"},viewAllCommentsButton:{cursor:"pointer",color:e.palette.primary.main,fontFamily:e.palette.fonts.sansSerifStack,fontSize:14,marginBottom:8,"&:hover":{color:e.palette.text.primary,opacity:.3},[e.breakpoints.down("sm")]:{fontSize:17,paddingTop:4,paddingBottom:4}}})),d=e=>{let{document:o,collectionName:d,cannotReplyReason:c,onReplySubmit:u,onReplyCancel:m}=e,p=(0,n.useStyles)(l),h="Comments"===d?o.post:o;if(!h)return null;let g="Comments"===d?o:void 0,f="Comments"===d?(0,a.commentGetPageUrlFromIds)({postId:h._id,postSlug:h.slug,commentId:o._id}):(0,s.postGetCommentsUrl)(h);return(0,t.jsxs)(t.Fragment,{children:[c?(0,t.jsx)("div",{className:p.cannotReplyMessage,children:c}):(0,t.jsx)("div",{className:p.replyEditorContainer,children:(0,t.jsx)(r.default,{post:h,parentComment:g,hideAlignmentForumCheckbox:!0,successCallback:e=>{e&&h&&u({...e,post:h})},cancelCallback:m,interactionType:"Comments"===d?"reply":"comment",enableGuidelines:!1,formStyle:"default",overrideHintText:"Text goes here! Visit lesswrong.com/editor for more info about the editor..."})}),f&&(0,t.jsx)(i.Link,{to:f,className:p.viewAllCommentsButton,children:"Click to view all comments"})]})};function c(e){let t=2*e.subscribedBonusSetting,n=2*e.subscribedBonusSetting,o=e.timeDecayHalfLifeHours;return{startingValue:1,posts:{typeMultiplier:e.postsMultiplier,subscribedBonus:t,timeDecayBias:12,timeDecayScale:o,timeDecayExponent:.25,karmaSuperlinearExponent:1.2,karmaDivisor:20,karmaMaxBonus:20,topicAffinityMaxBonus:15},threads:{typeMultiplier:e.threadsMultiplier,timeDecayBias:12,timeDecayScale:o,timeDecayExponent:.25,subscribedCommentBonus:n,karmaMaxBonus:20,engagementParticipationBonus:20,engagementVotingBonus:10,engagementViewingBonus:5,repliesToYouBonus:20,yourPostBonus:20,quicktakeBonus:e.quicktakeBonus,readPostContextBonus:3,repetitionPenaltyStrength:.8,repetitionDecayHours:6},maxScore:100}}e.s(["DEFAULT_RANKING_CONFIG",0,{startingValue:1,posts:{typeMultiplier:1,subscribedBonus:6,timeDecayBias:12,timeDecayScale:12,timeDecayExponent:.25,karmaSuperlinearExponent:1.2,karmaDivisor:20,karmaMaxBonus:20,topicAffinityMaxBonus:15},threads:{typeMultiplier:1,timeDecayBias:12,timeDecayScale:12,timeDecayExponent:.25,subscribedCommentBonus:6,karmaMaxBonus:20,engagementParticipationBonus:20,engagementVotingBonus:10,engagementViewingBonus:5,repliesToYouBonus:20,yourPostBonus:20,quicktakeBonus:5,readPostContextBonus:3,repetitionPenaltyStrength:.8,repetitionDecayHours:6},maxScore:100},"buildRankingConfigFromSettings",()=>c],818009)},858352,(e,t,n)=>{var o=e.r(674548),i=e.r(25172);t.exports=function(e,t,n){(void 0===n||i(e[t],n))&&(void 0!==n||t in e)||o(e,t,n)}},484305,(e,t,n)=>{t.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},837153,(e,t,n)=>{var o=e.r(372351),i=e.r(689695);t.exports=function(e){return o(e,i(e))}},720346,(e,t,n)=>{var o=e.r(858352),i=e.r(622781),r=e.r(514712),a=e.r(776736),s=e.r(992433),l=e.r(473250),d=e.r(45350),c=e.r(791072),u=e.r(356956),m=e.r(771223),p=e.r(12447),h=e.r(101320),g=e.r(3023),f=e.r(484305),v=e.r(837153);t.exports=function(e,t,n,x,y,b,C){var w=f(e,n),k=f(t,n),j=C.get(k);if(j)return void o(e,n,j);var S=b?b(w,k,n+"",e,t,C):void 0,I=void 0===S;if(I){var T=d(k),N=!T&&u(k),L=!T&&!N&&g(k);S=k,T||N||L?d(w)?S=w:c(w)?S=a(w):N?(I=!1,S=i(k,!0)):L?(I=!1,S=r(k,!0)):S=[]:h(k)||l(k)?(S=w,l(w)?S=v(w):(!p(w)||m(w))&&(S=s(k))):I=!1}I&&(C.set(k,S),y(S,k,x,b,C),C.delete(k)),o(e,n,S)}},153201,(e,t,n)=>{var o=e.r(901551),i=e.r(858352),r=e.r(98728),a=e.r(720346),s=e.r(12447),l=e.r(689695),d=e.r(484305);t.exports=function e(t,n,c,u,m){t!==n&&r(n,function(r,l){if(m||(m=new o),s(r))a(t,n,l,c,e,u,m);else{var p=u?u(d(t,l),r,l+"",t,n,m):void 0;void 0===p&&(p=r),i(t,l,p)}},l)}},483495,(e,t,n)=>{var o=e.r(395059),i=e.r(170237);t.exports=function(e){return o(function(t,n){var o=-1,r=n.length,a=r>1?n[r-1]:void 0,s=r>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(r--,a):void 0,s&&i(n[0],n[1],s)&&(a=r<3?void 0:a,r=1),t=Object(t);++o<r;){var l=n[o];l&&e(t,l,o,a)}return t})}},411595,(e,t,n)=>{var o=e.r(153201);t.exports=e.r(483495)(function(e,t,n){o(e,t,n)})},271944,(e,t,n)=>{var o=e.r(64324);t.exports=function(e){return o(e,5)}},995994,e=>{"use strict";var t=e.i(271645),n=e.i(130697),o=e.i(161517),i=e.i(601268),r=e.i(186947),a=e.i(411595),s=e.i(271944);let l=e=>{let t=(0,n.getBrowserLocalStorage)();t&&t.setItem(i.ULTRA_FEED_SETTINGS_KEY,JSON.stringify(e))};e.s(["useUltraFeedSettings",0,()=>{let{captureEvent:e}=(0,o.useTracking)(),d=(0,t.useMemo)(()=>(0,r.isMobile)()?"mobile":"desktop",[]),c=(0,t.useMemo)(()=>(0,i.getDefaultSettingsForDevice)(d),[d]),[u,m]=(0,t.useState)(c);(0,t.useEffect)(()=>{let e=(()=>{let e=(0,n.getBrowserLocalStorage)();if(!e)return null;let t=e.getItem(i.ULTRA_FEED_SETTINGS_KEY);if(!t)return null;try{let e=JSON.parse(t);return(0,a.default)((0,s.default)(i.DEFAULT_SETTINGS),e)}catch{return null}})();e&&m(e)},[]);let p=(0,t.useCallback)(t=>{m(n=>{let o={...n,...t};return l(o),e("ultraFeedSettingsUpdated",{changedSettings:Object.keys(t),deviceKind:d,next:o}),o})},[e,d]),h=(0,t.useCallback)(()=>{let t=(0,i.getDefaultSettingsForDevice)(d);m(t),l(t),e("ultraFeedSettingsReset",{deviceKind:d,defaultSettings:t})},[d,e]),g=(0,t.useMemo)(()=>(0,i.getTruncationMapsForDevice)(d),[d]);return{settings:u,updateSettings:p,resetSettings:h,deviceKind:d,truncationMaps:g}}])},12152,914682,e=>{"use strict";var t=e.i(843476),n=e.i(343794),o=e.i(79732),i=e.i(429329),r=e.i(110601),a=e.i(818009),s=e.i(995994);let l=(0,i.defineStyles)("ScoreBreakdownContent",e=>({tooltipContent:{padding:"12px 16px",maxWidth:400},totalScore:{fontSize:16,fontWeight:600,marginBottom:12,color:e.palette.text.primary},section:{marginBottom:12},termRow:{display:"flex",justifyContent:"space-between",fontSize:13,marginBottom:4,color:e.palette.text.secondary,"&:hover":{backgroundColor:e.palette.greyAlpha(.05)}},termName:{marginRight:16,whiteSpace:"nowrap"},termValue:{fontWeight:500},positiveValue:{color:e.palette.primary.main},negativeValue:{color:e.palette.error.main},zeroValue:{opacity:.5,color:e.palette.text.primary},multiplier:{fontSize:13,fontStyle:"italic",color:e.palette.text.secondary},multiplierPenalty:{color:e.palette.error.main},multiplierNoPenalty:{opacity:.5},sourcesSection:{marginBottom:12,paddingBottom:12,borderBottom:e.palette.border.slightlyFaint,fontSize:16,lineHeight:1.5},sourcesTitle:{display:"inline",fontSize:16,fontStyle:"italic",color:e.palette.text.secondary,marginRight:4},sourceTag:{display:"inline",fontSize:16,fontStyle:"italic",color:e.palette.text.primary},sourceSeparator:{display:"inline",fontSize:16,fontStyle:"normal",color:e.palette.text.primary,marginRight:4},alterBonusesButton:{marginTop:12,padding:"6px 12px",fontSize:12,fontFamily:e.palette.fonts.sansSerifStack,fontWeight:500,backgroundColor:e.palette.primary.main,color:e.palette.background.paper,border:"none",borderRadius:4,cursor:"pointer",display:"block",width:"auto",marginLeft:"auto",marginRight:"auto",minWidth:120,"&:hover":{backgroundColor:e.palette.primary.dark}},alterBonusesDialogWrapper:{zIndex:e.zIndexes.lwPopperTooltip+1}})),d=e=>{var t;return(null==e||null==(t=e.resolverSettings)?void 0:t.unifiedScoring)?(0,a.buildRankingConfigFromSettings)(e.resolverSettings.unifiedScoring):a.DEFAULT_RANKING_CONFIG},c={subscriptionsPosts:"you follow the author",subscriptionsComments:"comments by authors you follow","recombee-lesswrong-ultrafeed":"personalized AI-recommendation based on your reads and votes","hacker-news":"recently published post",bookmarks:"you bookmarked this",quicktakes:"recent Quick Take",recentComments:"recent comments",spotlights:"LessWrong featured item"},u={"recombee-lesswrong-ultrafeed":"LessWrong uses Recombee, trained on your reads and votes",bookmarks:"Bookmarks are inserted periodically into your feed to remind you about them, you can turn this off in the settings"},m=e=>{var i;let{name:a,value:s,explanations:d}=e,c=(0,o.useStyles)(l),u=0===s,m=.01>Math.abs(s)?c.zeroValue:s>0?c.positiveValue:c.negativeValue,p=u?c.zeroValue:"",h=null!=(i=d[a])?i:"",g=(0,t.jsxs)("div",{className:(0,n.default)(c.termRow,p),children:[(0,t.jsx)("span",{className:c.termName,children:a}),(0,t.jsxs)("span",{className:(0,n.default)(c.termValue,m),children:[s>0?"+":"",s.toFixed(2)]})]});return h?(0,t.jsx)(r.default,{title:h,placement:"left",inlineBlock:!1,As:"div",children:g}):g},p=e=>{let{label:i,value:a,tooltip:s}=e,d=(0,o.useStyles)(l),c=.01>Math.abs(a-1);return(0,t.jsx)(r.default,{title:s,placement:"left",inlineBlock:!1,As:"div",children:(0,t.jsxs)("div",{className:(0,n.default)(d.multiplier,{[d.multiplierPenalty]:a<1,[d.multiplierNoPenalty]:c}),children:[i,": ",a.toFixed(2)]})})},h=e=>{let{sources:n,metaInfo:i,itemType:a}=e,s=(0,o.useStyles)(l);return n&&0!==n.length?(0,t.jsxs)("div",{className:s.sourcesSection,children:[(0,t.jsx)("span",{className:s.sourcesTitle,children:"Shown to you because"}),n.map((e,o)=>{let l=c[e];"recentComments"===e&&"commentThread"===a&&(null==i?void 0:i.isParentPostRead)&&(l="Recent comments on a post you read");let d=u[e],m=(0,t.jsx)("span",{className:s.sourceTag,children:l}),p=o===n.length-1;return d?(0,t.jsxs)("span",{children:[(0,t.jsx)(r.default,{title:d,placement:"top",children:m}),!p&&(0,t.jsx)("span",{className:s.sourceSeparator,children:","})]},e):(0,t.jsxs)("span",{children:[m,!p&&(0,t.jsx)("span",{className:s.sourceSeparator,children:","})]},e)})]}):null},g=e=>{let{total:n,terms:i,multipliers:r,explanations:a}=e,s=(0,o.useStyles)(l),{nonZero:d,zero:c}={nonZero:i.filter(e=>Math.abs(e.value)>=.01),zero:i.filter(e=>.01>Math.abs(e.value)).sort((e,t)=>Math.abs(t.value)-Math.abs(e.value))};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:s.totalScore,children:["Total Score: ",n.toFixed(2)]}),(0,t.jsxs)("div",{className:s.section,children:[d.map(e=>{let{name:n,value:o}=e;return(0,t.jsx)(m,{name:n,value:o,explanations:a},n)}),(0,t.jsx)(m,{name:"Base Value",value:1,explanations:a},"base"),c.map(e=>{let{name:n,value:o}=e;return(0,t.jsx)(m,{name:n,value:o,explanations:a},n)})]}),r.map(e=>(0,t.jsx)(p,{label:e.label,value:e.value,tooltip:e.tooltip},e.label))]})};e.s(["PostScoreBreakdownContent",0,e=>{var n,o,i;let r,a,l,c,{breakdown:u,sources:m,metaInfo:p}=e,{settings:f}=(0,s.useUltraFeedSettings)(),{terms:v,typeMultiplier:x,total:y}=u,b=(null==m?void 0:m.includes("recombee-lesswrong-ultrafeed"))||(null==m?void 0:m.includes("subscriptionsPosts")),C=[{name:"Subscribed Author",value:v.subscribedBonus},{name:b?"Karma Bonus (timeless)":"Karma Bonus (time-decaying)",value:v.karmaBonus},{name:"Topic Affinity",value:v.topicAffinityBonus}],w=[{label:"Type Multiplier",value:x,tooltip:.01>Math.abs(x-1)?"No type multiplier applied (1.0)":"Posts are multiplied by ".concat(x," to adjust their relative priority vs threads")}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h,{sources:m,metaInfo:p,itemType:"post"}),(0,t.jsx)(g,{total:y,terms:C,multipliers:w,explanations:(r=d(f).posts,a=null!=(n=null==f||null==(i=f.resolverSettings)||null==(o=i.unifiedScoring)?void 0:o.subscribedBonusSetting)?n:3,l=r.timeDecayBias,c=r.timeDecayScale,{"Subscribed Author":"Bonus for posts from authors you follow. Formula: subscribedBonusSetting  2 = ".concat(a,"  2 = ").concat(r.subscribedBonus,". Configurable in settings (0-5, gives 0-10 bonus)"),"Karma Bonus (time-decaying)":"Decay: min(karma  ".concat(c,"^0.25 / (ageHrs + ").concat(l,")^0.25, ").concat(r.karmaMaxBonus,"). Age 0: 100%, 1day: 78%, 3days: 67%, 1week: 56%. All items start with base 1 point."),"Karma Bonus (timeless)":"No time decay: min(karma^".concat(r.karmaSuperlinearExponent," / ").concat(r.karmaDivisor,", ").concat(r.karmaMaxBonus,"). Used for personalized recommendations and author subscriptions. All items start with base 1 point."),"Topic Affinity":"Bonus for posts on topics you read often (0-".concat(r.topicAffinityMaxBonus,", TODO)"),"Base Value":"All items start with a base value of 1 point before any bonuses are applied"})})]})},"ThreadScoreBreakdownContent",0,e=>{var n,o,i;let r,a,l,c,u,m,{breakdown:p,sources:f,metaInfo:v}=e,{settings:x}=(0,s.useUltraFeedSettings)(),{terms:y,repetitionPenaltyMultiplier:b,typeMultiplier:C,total:w}=p,k=[{name:"Subscribed Comments",value:y.unreadSubscribedCommentBonus},{name:"Prior Engagement",value:y.engagementContinuationBonus},{name:"Replies to You",value:y.repliesToYouBonus},{name:"Your Post",value:y.yourPostActivityBonus},{name:"Karma Bonus (time-decaying)",value:y.overallKarmaBonus},{name:"Topic Affinity",value:y.topicAffinityBonus},{name:"Quicktake",value:y.quicktakeBonus},{name:"Read Post Context",value:y.readPostContextBonus}],j=[{label:"Repetition Penalty",value:b,tooltip:.01>Math.abs(b-1)?"No penalty is applied to this thread for having been shown recently":"This item has been penalized since the same thread was already shown recently"},{label:"Type Multiplier",value:C,tooltip:.01>Math.abs(C-1)?"No type multiplier applied (1.0)":"Threads are multiplied by ".concat(C," to adjust their relative priority")}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h,{sources:f,metaInfo:v,itemType:"commentThread"}),(0,t.jsx)(g,{total:w,terms:k,multipliers:j,explanations:(a=(r=d(x)).threads,l=r.posts,c=null!=(n=null==x||null==(i=x.resolverSettings)||null==(o=i.unifiedScoring)?void 0:o.subscribedBonusSetting)?n:3,u=a.timeDecayBias,m=a.timeDecayScale,{"Subscribed Comments":"Flat bonus per unread comment from authors you follow: subscribedBonusSetting  2 = ".concat(c,"  2 = ").concat(a.subscribedCommentBonus," per comment. Applies in addition to karma bonus. Configurable in settings (0-5, gives 0-10 per comment)"),"Prior Engagement":"+".concat(a.engagementParticipationBonus," if commented, else +").concat(a.engagementVotingBonus," if voted, else +").concat(a.engagementViewingBonus," if viewed"),"Replies to You":"Someone replied to your comment (+".concat(a.repliesToYouBonus,", TODO)"),"Your Post":"New comments on a post you wrote (+".concat(a.yourPostBonus,", TODO)"),"Karma Bonus (time-decaying)":"Decay: min(sum(karma  ".concat(m,"^0.25 / (ageHrs + ").concat(u,")^0.25), ").concat(a.karmaMaxBonus,") for ALL unread comments. Age 0: 100%, 1day: 78%, 3days: 67%, 1week: 56%. All items start with base 1 point."),"Topic Affinity":"Bonus for threads on topics you read often (0-".concat(l.topicAffinityMaxBonus,") TODO"),Quicktake:"Top-level comment is an unread quicktake (+".concat(a.quicktakeBonus,")"),"Read Post Context":"You've read the post, so you have context (+".concat(a.readPostContextBonus,")"),"Base Value":"All items start with a base value of 1 point before any bonuses are applied"})})]})},"scoreBreakdownStyles",0,l],12152);var f=e.i(271645);let v=(0,f.createContext)(void 0);e.s(["UltraFeedContextProvider",0,e=>{let{children:n,openInNewTab:o=!1,feedType:i="ultraFeed"}=e,[r,a]=(0,f.useState)(!1),s=(0,f.useMemo)(()=>({openInNewTab:o,feedType:i,showScoreBreakdown:r,setShowScoreBreakdown:a}),[o,i,r]);return(0,t.jsx)(v.Provider,{value:s,children:n})},"useUltraFeedContext",0,()=>{let e=(0,f.useContext)(v);return null!=e?e:{openInNewTab:!1,feedType:"ultraFeed",showScoreBreakdown:!1,setShowScoreBreakdown:()=>{}}}],914682)},954752,383171,e=>{"use strict";var t=e.i(299749),n=e.i(843476),o=e.i(271645),i=e.i(131060),r=e.i(343794);e.i(83697);var a=e.i(331724),s=e.i(921518);function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return Math.min(Math.max(e,t),n)}var d=e.i(79732),c=e.i(429329),u=e.i(289078);let m=(0,c.defineStyles)("MuiSlider",e=>{let t={duration:e.transitions.duration.shortest,easing:e.transitions.easing.easeOut},n=e.transitions.create(["width","height","left","right","top","box-shadow"],t),o=e.transitions.create(["width","height","box-shadow"],t),i={primary:e.palette.primary.main,disabled:e.palette.grey[400]};return{root:{position:"relative",width:"100%",padding:"16px 8px",cursor:"pointer",WebkitTapHighlightColor:"transparent","&$disabled":{cursor:"no-drop"},"&$vertical":{height:"100%",padding:"8px 16px"}},container:{position:"relative","&$vertical":{height:"100%"}},track:{position:"absolute",transform:"translate(0, -50%)",top:"50%",height:2,backgroundColor:i.primary,"&$activated":{transition:"none"},"&$disabled":{backgroundColor:i.disabled},"&$vertical":{transform:"translate(-50%, 0)",left:"50%",top:"initial",width:2}},trackBefore:{zIndex:1,left:0,transition:n},trackAfter:{right:0,opacity:.24,transition:n,"&$vertical":{bottom:0}},thumb:{position:"absolute",zIndex:2,transform:"translate(-50%, -50%)",width:12,height:12,borderRadius:"50%",transition:n,backgroundColor:i.primary,"&$focused":{boxShadow:"0px 0px 0px 9px ".concat((0,s.fade)(i.primary,.16))},"&$activated":{width:17,height:17,transition:o},"&$disabled":{cursor:"no-drop",width:9,height:9,backgroundColor:i.disabled},"&$jumped":{width:17,height:17}},thumbIconWrapper:{backgroundColor:"transparent"},thumbIcon:{height:"inherit",width:"inherit"},disabled:{},jumped:{},focused:{},activated:{},vertical:{}}},{stylePriority:-10});function p(t,n,o,i){let{width:r,height:a}=t.getBoundingClientRect(),{top:s,left:d}=function(t){let{pageYOffset:n,pageXOffset:o}=e.g,{left:i,top:r}=t.getBoundingClientRect();return{top:r+n,left:i+o}}(t),{x:c,y:u}=n.changedTouches&&n.changedTouches[0]?{x:n.changedTouches[0].pageX,y:n.changedTouches[0].pageY}:{x:n.pageX,y:n.pageY},m=o?u-s:c-d,p=(o?a:r)/100;return i&&!o?100-l(m/p):l(m/p)}function h(e){e.preventDefault()}class g extends o.default.Component{componentDidMount(){if(this.containerRef.current){var e;null==(e=this.containerRef.current)||e.addEventListener("touchstart",h,{passive:!1})}}componentWillUnmount(){var e;null==(e=this.containerRef.current)||e.removeEventListener("touchstart",h),document.body.removeEventListener("mousemove",this.handleMouseMove),document.body.removeEventListener("mouseup",this.handleMouseUp),clearTimeout(this.jumpAnimationTimeoutId)}static getDerivedStateFromProps(e,t){return e.disabled?{currentState:"disabled"}:e.disabled||"disabled"!==t.currentState?null:{currentState:"normal"}}emitChange(e,t,n){let{step:o,value:i,onChange:r,disabled:a}=this.props,s=t;if(!a){if(o)s=Math.round(t/o)*o;else s=Number(t.toFixed(3));"function"==typeof r&&s!==i&&(r(e,s),"function"==typeof n&&n())}}calculateTrackAfterStyles(e){let{currentState:t}=this.state;switch(t){case"activated":return"calc(100% - ".concat(0===e?7:5,"px)");case"disabled":return"calc(".concat(100-e,"% - 6px)");default:return"calc(100% - 5px)"}}calculateTrackBeforeStyles(e){let{currentState:t}=this.state;return"disabled"===t?"calc(".concat(e,"% - 6px)"):"".concat(e,"%")}playJumpAnimation(){this.setState({currentState:"jumped"},()=>{clearTimeout(this.jumpAnimationTimeoutId),this.jumpAnimationTimeoutId=setTimeout(()=>{this.setState({currentState:"normal"})},this.props.theme.transitions.duration.complex)})}isReverted(){return"rtl"===this.props.theme.direction}render(){let{currentState:e}=this.state,{className:t,classes:o,disabled:i,max:s=100,min:d=0,onChange:c,onDragEnd:u,onDragStart:m,step:p,theme:h,value:g=0,vertical:f,...v}=this.props,x=l((g-d)*100/(s-d)),y={[o.disabled]:i,[o.jumped]:!i&&"jumped"===e,[o.focused]:!i&&"focused"===e,[o.activated]:!i&&"activated"===e},b=(0,r.default)(o.root,{[o.vertical]:f,[o.disabled]:i},t),C=(0,r.default)(o.container,{[o.vertical]:f}),w=(0,r.default)(o.track,o.trackBefore,y,{[o.vertical]:f}),k=(0,r.default)(o.track,o.trackAfter,y,{[o.vertical]:f}),j=f?"height":"width",S="ltr"===h.direction?"left":"right",I=f?"top":S,T={[j]:this.calculateTrackBeforeStyles(x)},N={[j]:this.calculateTrackAfterStyles(x)},L=(0,r.default)(o.thumb,y);return(0,n.jsx)("div",{role:"slider",className:b,"aria-valuenow":g,"aria-valuemin":d,"aria-valuemax":s,"aria-orientation":f?"vertical":"horizontal",onClick:this.handleClick,onMouseDown:this.handleMouseDown,onTouchStartCapture:this.handleTouchStart,onTouchMove:this.handleMouseMove,ref:this.containerRef,...v,children:(0,n.jsxs)("div",{className:C,children:[(0,n.jsx)("div",{className:w,style:T}),(0,n.jsx)(a.default,{className:L,disableRipple:!0,style:{[I]:"".concat(x,"%")},onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onTouchStartCapture:this.handleTouchStart,onTouchMove:this.handleMouseMove,onFocusVisible:this.handleFocus}),(0,n.jsx)("div",{className:k,style:N})]})})}constructor(...e){super(...e),(0,t._)(this,"containerRef",o.default.createRef()),(0,t._)(this,"state",{currentState:"initial"}),(0,t._)(this,"jumpAnimationTimeoutId",-1),(0,t._)(this,"handleKeyDown",e=>{let t,{min:n=0,max:o=100,value:r=0}=this.props,a=Math.abs((o-n)/100),s=this.props.step||a;switch((0,i.default)(e)){case"home":t=n;break;case"end":t=o;break;case"page up":t=r+10*a;break;case"page down":t=r-10*a;break;case"right":case"up":t=r+s;break;case"left":case"down":t=r-s;break;default:return}e.preventDefault(),t=l(t,n,o),this.emitChange(e,t)}),(0,t._)(this,"handleFocus",()=>{this.setState({currentState:"focused"})}),(0,t._)(this,"handleBlur",()=>{this.setState({currentState:"normal"})}),(0,t._)(this,"handleClick",e=>{let{min:t=0,max:n=100,vertical:o}=this.props,i=(n-t)*p(this.containerRef.current,e,!!o,this.isReverted())/100+t;this.emitChange(e,i,()=>{this.playJumpAnimation()})}),(0,t._)(this,"handleTouchStart",e=>{e.preventDefault(),this.setState({currentState:"activated"}),document.body.addEventListener("touchend",this.handleMouseUp),"function"==typeof this.props.onDragStart&&this.props.onDragStart(e)}),(0,t._)(this,"handleMouseDown",e=>{e.preventDefault(),this.setState({currentState:"activated"}),document.body.addEventListener("mousemove",this.handleMouseMove),document.body.addEventListener("mouseup",this.handleMouseUp),"function"==typeof this.props.onDragStart&&this.props.onDragStart(e)}),(0,t._)(this,"handleMouseUp",e=>{this.setState({currentState:"normal"}),document.body.removeEventListener("mousemove",this.handleMouseMove),document.body.removeEventListener("mouseup",this.handleMouseUp),document.body.removeEventListener("touchend",this.handleMouseUp),"function"==typeof this.props.onDragEnd&&this.props.onDragEnd(e)}),(0,t._)(this,"handleMouseMove",e=>{let{min:t=0,max:n=100,vertical:o}=this.props,i=(n-t)*p(this.containerRef.current,e,!!o,this.isReverted())/100+t;this.emitChange(e,i)})}}let f=(0,d.withStyles)(m,(0,u.withTheme)(g));e.s(["default",0,f],383171),e.s([],954752)},642222,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(343794),i=e.i(79732),r=e.i(429329),a=e.i(601268);e.i(954752);var s=e.i(383171);e.i(720030);var l=e.i(275261),d=e.i(110601),c=e.i(813292),u=e.i(673991);let m=(0,r.defineStyles)("UltraFeedSettingsComponents",e=>({settingGroup:{backgroundColor:e.palette.background.paper,width:"100%",padding:16,border:e.palette.border.grey300,borderRadius:4,paddingLeft:32,paddingRight:32,paddingTop:24,paddingBottom:24,[e.breakpoints.down("sm")]:{paddingLeft:16,paddingRight:16,paddingTop:16,paddingBottom:16}},groupTitle:{fontSize:"1.3rem",fontWeight:600,marginBottom:8,fontFamily:"inherit"},groupDescription:{marginBottom:16,color:e.palette.text.dim,fontSize:"1.1rem",fontFamily:"inherit","& ul":{paddingInlineStart:"30px"}},formulaDescription:{fontSize:"0.9rem",fontWeight:600,lineHeight:"2.5","& code":{fontSize:"0.8rem",fontWeight:600,backgroundColor:e.palette.grey[200],padding:"4px 8px",borderRadius:4}},sourceWeightItem:{marginBottom:16},sourceWeightContainer:{display:"flex",alignItems:"center",gap:16},sourceWeightLabel:{fontSize:"1.15rem",width:160,flexShrink:0},sourceWeightDescription:{fontSize:"1.1rem",color:e.palette.text.dim,marginTop:4,"& ul":{paddingInlineStart:"30px"},"& code":{fontSize:"0.8rem",fontWeight:600,backgroundColor:e.palette.grey[200],padding:"4px 4px",borderRadius:4}},sourceWeightSlider:{width:"100%",flexGrow:1},sourceWeightInput:{marginLeft:12,width:80,padding:6,border:e.palette.border.grey400,borderRadius:4,color:e.palette.text.primary,background:e.palette.background.default,textAlign:"right"},threadAggSelect:{minWidth:"150px",marginLeft:"auto"},algorithmSelect:{marginLeft:"auto",width:"fit-content",padding:6,border:e.palette.border.grey400,borderRadius:4,fontSize:"1.1rem",fontFamily:"inherit",cursor:"pointer",backgroundColor:e.palette.background.default,color:e.palette.text.primary},lineClampLabel:{fontSize:"1.1rem",width:70,fontWeight:600,flexShrink:0},invalidInput:{borderColor:e.palette.error.main},disabledInput:{opacity:.5,pointerEvents:"none",backgroundColor:e.palette.grey[100]},errorMessage:{color:e.palette.error.main,fontSize:"1.1rem",marginTop:4,textAlign:"right"},errorMessageCenteredText:{textAlign:"center",width:"100%"},customWarningMessage:{fontSize:"1.1rem",color:e.palette.warning.main},checkboxContainer:{display:"flex",alignItems:"center",marginBottom:8},checkboxInput:{marginRight:8,padding:4},checkboxLabel:{cursor:"pointer",fontSize:"1.15rem",flexGrow:1},collapsibleHeader:{display:"flex",alignItems:"center",cursor:"pointer",marginBottom:0},collapsibleHeaderExpanded:{marginBottom:16},collapsibleTitle:{fontSize:"1.3rem",fontWeight:600,marginRight:8},collapsibleIcon:{verticalAlign:"middle",transform:"translateY(2px)",fontSize:18,transition:"transform 0.2s ease-in-out",color:e.palette.grey[700],"&:hover":{color:e.palette.grey[900]}},collapsibleIconExpanded:{transform:"translateY(2px) rotate(90deg)"},preLineDescription:{whiteSpace:"pre-line"},truncationSection:{marginBottom:20},truncationSectionTitle:{fontSize:"1.2rem",fontWeight:600,marginBottom:12,fontFamily:"inherit"},truncationItem:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},truncationLabel:{fontSize:"1.1rem",flexShrink:0},truncationOptionSelect:{padding:"4px 8px",fontSize:"1.1rem",fontFamily:"inherit",cursor:"pointer",border:e.palette.border.grey400,borderRadius:4,backgroundColor:e.palette.background.default,color:e.palette.text.primary,minWidth:120,textAlign:"center"}})),p=e=>{let{title:r,children:a,defaultOpen:s=!1,className:l}=e,u=(0,i.useStyles)(m),[p,h]=n.default.useState(s);return(0,t.jsxs)("div",{className:l,children:[(0,t.jsxs)("div",{className:(0,o.default)(u.collapsibleHeader,{[u.collapsibleHeaderExpanded]:p}),onClick:()=>{h(!p)},children:[(0,t.jsx)("div",{className:(0,o.default)(u.collapsibleTitle),children:r}),(0,t.jsx)(d.default,{title:p?"Collapse":"Expand",hideOnTouchScreens:!0,children:(0,t.jsx)(c.default,{icon:"ThickChevronRight",className:(0,o.default)(u.collapsibleIcon,{[u.collapsibleIconExpanded]:p})})})]}),p&&(0,t.jsx)(t.Fragment,{children:a})]})},h=e=>{let{field:n,value:o,onChange:r,label:s,maps:l}=e,d=(0,i.useStyles)(m),c=n.startsWith("post")?e=>((e,t)=>{if("Full"===e)return"".concat(e," (no limit)");let n=t[e];return"number"==typeof n?"".concat(e," (").concat(n," words)"):e})(e,l.postMap):e=>((e,t)=>{if("Full"===e)return"".concat(e," (no limit)");let n=t[e];return"number"==typeof n?"".concat(e," (").concat(n," words)"):e})(e,l.commentMap);return(0,t.jsxs)("div",{className:d.truncationItem,children:[(0,t.jsx)("label",{className:d.truncationLabel,children:s}),(0,t.jsx)("select",{className:d.truncationOptionSelect,value:o,onChange:e=>r(n,e.target.value),children:a.truncationLevels.map(e=>(0,t.jsx)("option",{value:e,children:c(e)},e))})]})},g=e=>{let{field:n,value:r,onChange:a,label:s,error:l,disabled:d,min:c=10,max:u,step:p=50,placeholder:h="unset"}=e,g=(0,i.useStyles)(m);return(0,t.jsxs)("div",{className:g.truncationItem,children:[(0,t.jsx)("label",{className:g.truncationLabel,children:s}),(0,t.jsx)("input",{type:"number",className:(0,o.default)(g.sourceWeightInput,{[g.invalidInput]:!!l,[g.disabledInput]:d}),value:""===r?"":r,onChange:e=>a(n,e.target.value),min:c,max:u,step:p,placeholder:h,disabled:d}),l&&(0,t.jsx)("p",{className:g.errorMessage,children:l})]})};(0,r.defineStyles)("SettingsButtonGroup",e=>({buttonRow:{display:"flex",justifyContent:"flex-end",gap:12,alignItems:"center",marginTop:12},unsavedChangesIndicator:{fontFamily:e.palette.fonts.sansSerifStack,color:e.palette.warning.main,fontSize:16,fontStyle:"italic"},buttonGroup:{display:"flex",gap:8},button:{padding:"8px 16px",fontSize:"1.1rem",fontFamily:e.palette.fonts.sansSerifStack,borderRadius:4,cursor:"pointer",border:"none",fontWeight:500},cancelButton:{backgroundColor:e.palette.grey[300],color:e.palette.text.primary,"&:hover":{backgroundColor:e.palette.grey[400]}},saveButton:{backgroundColor:e.palette.primary.main,color:e.palette.background.paper,"&:hover":{backgroundColor:e.palette.primary.dark}},buttonDisabled:{opacity:.5,cursor:"not-allowed"}})),e.s(["AdvancedTruncationSettings",0,e=>{let{values:n,errors:o,onLineClampChange:r,onWordCountChange:a,defaultOpen:s=!0}=e,l=(0,i.useStyles)(m);return(0,t.jsxs)(p,{title:"Advanced Truncation",defaultOpen:s,className:l.settingGroup,children:[(0,t.jsx)("p",{className:l.groupDescription,children:'If text is longer than max word in-place, "read more" triggers a popup.'}),(0,t.jsxs)("div",{className:l.truncationSection,children:[(0,t.jsx)("h4",{className:l.truncationSectionTitle,children:"Posts"}),(0,t.jsx)(g,{field:"postInitialWords",value:n.postInitialWords,onChange:a,label:"Initial words",error:o.postInitialWords}),(0,t.jsx)(g,{field:"postMaxWords",value:n.postMaxWords,onChange:a,label:"Max words in-place",error:o.postMaxWords})]}),(0,t.jsxs)("div",{className:l.truncationSection,children:[(0,t.jsx)("h4",{className:l.truncationSectionTitle,children:"Comments"}),(0,t.jsx)("p",{className:l.groupDescription,children:"Some comments are deemphasized and will be truncated to a shorter length."}),(0,t.jsx)(g,{field:"commentCollapsedInitialWords",value:n.commentCollapsedInitialWords,onChange:a,label:"Initial (deemphasized)",error:o.commentCollapsedInitialWords}),(0,t.jsx)(g,{field:"commentExpandedInitialWords",value:n.commentExpandedInitialWords,onChange:a,label:"Initial (emphasized)",error:o.commentExpandedInitialWords}),(0,t.jsx)(g,{field:"commentMaxWords",value:n.commentMaxWords,onChange:a,label:"Max words in-place",error:o.commentMaxWords})]})]})},"ExploreExploitBiasSettings",0,e=>{let{currentLogImpactFactor:n,onExploreBiasChange:r,defaultOpen:a=!0}=e,l=(0,i.useStyles)(m),d=Math.max(0,Math.min(2,"number"==typeof n?2-n:1.5));return(0,t.jsxs)(p,{title:"Explore-Exploit Bias",defaultOpen:a,className:l.settingGroup,children:[(0,t.jsx)("p",{className:(0,o.default)(l.groupDescription,l.preLineDescription),children:"Choose how much the feed prioritizes content based on your past engagement versus popular or new content."}),(0,t.jsxs)("div",{className:l.sourceWeightItem,children:[(0,t.jsxs)("div",{className:l.sourceWeightContainer,children:[(0,t.jsx)("label",{className:l.sourceWeightLabel,children:"Explore Bias"}),(0,t.jsx)(s.default,{className:l.sourceWeightSlider,value:d,onChange:(e,t)=>r(t),min:0,max:2,step:.5}),(0,t.jsx)("input",{type:"number",className:(0,o.default)(l.sourceWeightInput),value:d,onChange:e=>{let t=parseFloat(e.target.value);isNaN(t)||r(Math.max(0,Math.min(2,t)))},min:0,max:2,step:.5})]}),(0,t.jsxs)("div",{className:l.sourceWeightDescription,children:[(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"Left: Strongly prefer content related to what you've read, upvoted, commented on, or from authors you follow."}),(0,t.jsx)("li",{children:"Right: Indifferent to your past interactions, recommend what generally seems good."})]}),(0,t.jsxs)("p",{children:["This adjusts ",(0,t.jsx)("code",{children:"Log Impact Factor"})," and ",(0,t.jsx)("code",{children:"Subscribed Author Boost"})," located in Advanced Settings and ",(0,t.jsx)("code",{children:"Subscribed Author"})," proportion in Source Weights."]})]})]})]})},"MiscSettings",0,e=>{var n;let{formValues:o,onBooleanChange:r,onAlgorithmChange:a,defaultOpen:s=!0,currentUser:d}=e,c=(0,i.useStyles)(m),h=(0,u.userIsAdminOrMod)(d);return(0,t.jsxs)(p,{title:"Misc",defaultOpen:s,className:c.settingGroup,children:[(0,t.jsxs)("div",{className:c.checkboxContainer,children:[(0,t.jsx)(l.default,{id:"incognitoModeCheckbox",className:c.checkboxInput,checked:o.incognitoMode,onChange:e=>r("incognitoMode",e.target.checked),color:"primary"}),(0,t.jsx)("label",{htmlFor:"incognitoModeCheckbox",className:c.checkboxLabel,children:"Incognito Mode"})]}),(0,t.jsx)("p",{className:c.groupDescription,children:"When enabled, the feed algorithm does not log viewing behavior (votes and comments will still influence it). This does not disable standard LessWrong analytics separate from the feed."}),h&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:c.sourceWeightItem,children:(0,t.jsxs)("div",{className:c.sourceWeightContainer,children:[(0,t.jsx)("label",{className:c.sourceWeightLabel,children:"Algorithm"}),(0,t.jsxs)("select",{className:c.algorithmSelect,value:null!=(n=o.algorithm)?n:"",onChange:e=>{let t=e.target.value;""===t?a(void 0):("scoring"===t||"sampling"===t)&&a(t)},children:[(0,t.jsx)("option",{value:"",children:"Default (Admins: Scoring, Others: Sampling)"}),(0,t.jsx)("option",{value:"scoring",children:"Unified Scoring"}),(0,t.jsx)("option",{value:"sampling",children:"Legacy Sampling"})]})]})})})]})},"MultipliersSettings",0,e=>{var n;let r,l,d,{formValues:c,errors:u,onFieldChange:h,defaultOpen:g}=e,f=(0,i.useStyles)(m),v=e=>t=>h(e,t),x=a.DEFAULT_SETTINGS.resolverSettings.commentScoring,y=[{key:"quickTakeBoost",label:"Quick Take Boost",description:"Multiplier applied to the score of Quick Takes comments.",min:.5,max:3,step:.01,defaultVal:x.quickTakeBoost},{key:"commentSubscribedAuthorMultiplier",label:"Subscribed Boost",description:"Multiplier for comments by authors you subscribe to or follow. Default: ".concat(x.commentSubscribedAuthorMultiplier),min:1,max:5,step:.1,defaultVal:x.commentSubscribedAuthorMultiplier},{key:"commentDecayFactor",label:"Decay Factor",description:"Controls how quickly comments lose score over time. Higher values mean faster decay. Default: ".concat(x.commentDecayFactor),min:1,max:2.5,step:.1,defaultVal:x.commentDecayFactor},{key:"commentDecayBiasHours",label:"Decay Bias (hours)",description:"Hours to add to comment age for decay calculation. Higher values give newer comments a boost. Default: ".concat(x.commentDecayBiasHours),min:0,max:8,step:.5,defaultVal:x.commentDecayBiasHours},{key:"threadScoreFirstN",label:"Thread First N",description:"Number of top comments to consider when calculating thread score. Default: ".concat(x.threadScoreFirstN),min:1,max:20,step:1,defaultVal:x.threadScoreFirstN}],b={key:"threadScoreAggregation",label:"Thread Agg.",description:"How to aggregate comment scores into a thread score. Default: ".concat(x.threadScoreAggregation),options:[{value:"sum",label:"Sum"},{value:"max",label:"Max"},{value:"logSum",label:"Log Sum"},{value:"avg",label:"Average"}],defaultVal:x.threadScoreAggregation};return(0,t.jsxs)(p,{title:"Comment Scoring",defaultOpen:g,className:f.settingGroup,children:[(0,t.jsx)("div",{className:f.groupDescription,children:(0,t.jsxs)("p",{className:f.formulaDescription,children:[(0,t.jsx)("code",{children:"timeDecayedKarma = ((karma + 1) / (ageHours + commentDecayBiasHours)^(commentDecayFactor))"}),(0,t.jsx)("br",{}),(0,t.jsx)("code",{children:"individualCommentScore = timeDecayedKarma * quickTakeBoost * subscribedMultiplier * (0 if seen already)"}),(0,t.jsx)("br",{}),(0,t.jsx)("code",{children:"baseThreadScore = aggregateMethod(firstN(individualCommentScore))"})]})}),y.map(e=>{var n;let i=c[e.key],r=null==u||null==(n=u[e.key])?void 0:n._errors[0],a="number"==typeof i?i:e.defaultVal,l=v(e.key);return(0,t.jsxs)("div",{className:f.sourceWeightItem,children:[(0,t.jsxs)("div",{className:f.sourceWeightContainer,children:[(0,t.jsx)("label",{className:f.sourceWeightLabel,children:e.label}),(0,t.jsx)(s.default,{className:f.sourceWeightSlider,value:a,onChange:(e,t)=>l(t),min:e.min,max:e.max,step:e.step}),(0,t.jsx)("input",{type:"number",className:(0,o.default)(f.sourceWeightInput,{[f.invalidInput]:!!r}),value:i,onChange:e=>l(e.target.value),min:e.min,max:e.max,step:e.step})]}),(0,t.jsx)("p",{className:f.sourceWeightDescription,children:e.description}),r&&(0,t.jsx)("p",{className:f.errorMessage,children:r})]},e.key)}),(r=c[b.key],l=null==u||null==(n=u[b.key])?void 0:n._errors[0],d=v(b.key),(0,t.jsxs)("div",{className:f.sourceWeightItem,children:[(0,t.jsxs)("div",{className:f.sourceWeightContainer,children:[(0,t.jsx)("label",{className:f.sourceWeightLabel,children:b.label}),(0,t.jsx)("select",{className:(0,o.default)(f.sourceWeightInput,f.threadAggSelect,{[f.invalidInput]:!!l}),value:r,onChange:e=>d(e.target.value),children:b.options.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsx)("p",{className:f.sourceWeightDescription,children:b.description}),l&&(0,t.jsx)("p",{className:f.errorMessage,children:l})]},b.key))]})},"SourceWeightsSettings",0,e=>{let{weights:n,errors:r,onChange:l,defaultOpen:d=!0}=e,c=(0,i.useStyles)(m);return(0,t.jsxs)(p,{title:"Source Weights",defaultOpen:d,className:c.settingGroup,children:[(0,t.jsx)("p",{className:c.groupDescription,children:"Adjust the relative frequency of different content types in your feed. Higher numbers mean more frequent items. Uses weighted sampling."}),a.sourceWeightConfigs.map(e=>{let{key:i,label:a,description:d}=e,u=n[i],m=r[i],p="number"==typeof u?u:0;return(0,t.jsxs)("div",{className:c.sourceWeightItem,children:[(0,t.jsxs)("div",{className:c.sourceWeightContainer,children:[(0,t.jsx)("label",{className:c.sourceWeightLabel,children:a}),(0,t.jsx)(s.default,{className:c.sourceWeightSlider,value:p,onChange:(e,t)=>l(i,t),min:0,max:100,step:5}),(0,t.jsx)("input",{type:"number",className:(0,o.default)(c.sourceWeightInput,{[c.invalidInput]:!!m}),value:u,onChange:e=>l(i,e.target.value),min:0,max:100,step:5})]}),(0,t.jsx)("p",{className:c.sourceWeightDescription,children:d}),m&&(0,t.jsx)("p",{className:c.errorMessage,children:m})]},i)})]})},"ThreadInterestTuningSettings",0,e=>{let{formValues:n,errors:r,onFieldChange:l,defaultOpen:d}=e,c=(0,i.useStyles)(m),u=a.DEFAULT_SETTINGS.resolverSettings.threadInterestModel,h=[{key:"commentCoeff",label:"Comment Coefficient",description:"How much each comment you have in a thread contributes to further activity in that thread being shown.",min:0,max:10,step:.5,defaultVal:u.commentCoeff},{key:"voteCoeff",label:"Vote Coefficient",description:"How much each vote you have in a thread contributes to further activity in that thread being shown.",min:0,max:5,step:.25,defaultVal:u.voteCoeff},{key:"viewCoeff",label:"View Coefficient",description:"How much viewing (and especially expanding) an item contributes to further activity in a thread being shown.",min:0,max:2,step:.25,defaultVal:u.viewCoeff},{key:"onReadPostFactor",label:"Read Post Factor",description:"Multiplier if the thread is on a post a user has read.",min:.5,max:2,step:.5,defaultVal:u.onReadPostFactor},{key:"logImpactFactor",label:"Log Impact Factor",description:"Scales the effect of the combined log-of-factors on the final multiplier (Multiplier = 1 + LogOfFactors * Impact).",min:0,max:3,step:.5,defaultVal:u.logImpactFactor},{key:"minOverallMultiplier",label:"Min Overall Multiplier",description:"The minimum final multiplier applied to the thread's base score (e.g., 0.5 for max 50% reduction).",min:.1,max:1,step:.05,defaultVal:u.minOverallMultiplier},{key:"maxOverallMultiplier",label:"Max Overall Multiplier",description:"The maximum final multiplier applied to the thread's base score (e.g., 20 for max 20 boost).",min:1,max:20,step:.5,defaultVal:u.maxOverallMultiplier},{key:"repetitionDecayHours",label:"Repetition Decay Hours",description:"Hours added to time-since-serving for hyperbolic decay calculation. Higher values mean slower penalty decay.",min:.5,max:8,step:.5,defaultVal:u.repetitionDecayHours},{key:"repetitionPenaltyStrength",label:"Repetition Penalty Strength",description:"How much to penalize a thread each time it's recently shown (0 = no penalty, 0.5 = 50% penalty per recent showing).",min:0,max:.5,step:.05,defaultVal:u.repetitionPenaltyStrength}];return(0,t.jsxs)(p,{title:"Comment Thread Scoring",defaultOpen:d,className:c.settingGroup,children:[(0,t.jsxs)("div",{className:c.groupDescription,children:[(0,t.jsxs)("p",{className:c.formulaDescription,children:[(0,t.jsx)("code",{children:"engagementFactor = (1+commentCoeff*numComments) * (1+voteCoeff*voteScore) * (1+viewCoeff*viewScore) * onReadPostFactor"}),(0,t.jsx)("br",{}),(0,t.jsx)("code",{children:"repetitionPenalty = (1 - repetitionPenaltyStrength / (1 + hoursAgo/repetitionDecayHours))"}),(0,t.jsx)("br",{}),(0,t.jsx)("code",{children:"threadMultiplier = (1 + log(engagementFactor) * logImpactFactor) * repetitionPenalty"}),(0,t.jsx)("br",{}),(0,t.jsx)("code",{children:"clampedThreadMultiplier = clamped(threadMultiplier, minOverallMultiplier, maxOverallMultiplier)"}),(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),(0,t.jsx)("code",{children:"overallThreadScore = baseThreadScore * clampedThreadMultiplier"})]}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"See Comment Scoring section for calculation of baseThreadScore"}),(0,t.jsx)("li",{children:"voteScore: smallUpvotes = 1 vote unit, bigUpovtes = 5"}),(0,t.jsx)("li",{children:"viewScore: itemOnViewport = 1 view unit, itemExpanded = 3 view units"}),(0,t.jsx)("li",{children:"onReadPostFactor applies if thread is on a post user has read, otherwise 1.0"}),(0,t.jsx)("li",{children:"repetitionPenalty applies exponentially decaying penalty for each recent showing of the thread"})]})]}),h.map(e=>{var i;let a=n[e.key],d=null==r||null==(i=r[e.key])?void 0:i._errors[0],u="number"==typeof a?a:e.defaultVal;return(0,t.jsxs)("div",{className:c.sourceWeightItem,children:[(0,t.jsxs)("div",{className:c.sourceWeightContainer,children:[(0,t.jsx)("label",{className:c.sourceWeightLabel,children:e.label}),(0,t.jsx)(s.default,{className:c.sourceWeightSlider,value:u,onChange:(t,n)=>l(e.key,n),min:e.min,max:e.max,step:e.step}),(0,t.jsx)("input",{type:"number",className:(0,o.default)(c.sourceWeightInput,{[c.invalidInput]:!!d}),value:a,onChange:t=>l(e.key,t.target.value),min:e.min,max:e.max,step:e.step})]}),(0,t.jsxs)("p",{id:"".concat(e.key,"-label"),className:c.sourceWeightDescription,children:[e.description," Default: ",e.defaultVal]}),d&&(0,t.jsx)("p",{id:"".concat(e.key,"-error"),className:c.errorMessage,children:d})]},e.key)})]})},"TruncationGridSettings",0,e=>{let{levels:n,onChange:o,originalSettings:r,defaultOpen:a=!0,postBreakpointError:s,commentBreakpointError:l,maps:d}=e,c=(0,i.useStyles)(m),u=((e,t)=>{let n=t.commentMap,o=t.postMap,i=new Set(Object.values(n)),r=new Set(Object.values(o)),{displaySettings:a}=e;return!(i.has(a.commentCollapsedInitialWords)&&i.has(a.commentExpandedInitialWords)&&i.has(a.commentMaxWords)&&r.has(a.postInitialWords)&&r.has(a.postMaxWords))})(r,d);return(0,t.jsxs)(p,{title:"Content Display Length",defaultOpen:a,className:c.settingGroup,children:[(0,t.jsx)("div",{className:c.groupDescription,children:(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:'If text is longer than max word in-place, "read more" triggers a popup.'}),(0,t.jsx)("li",{children:"Some comments are deemphasized and will be truncated to a lower level."})]})}),u&&(0,t.jsx)("p",{className:c.customWarningMessage,children:"Note: Some settings were customized in the Advanced view. Saving from the Simple view will overwrite them."}),(0,t.jsxs)("div",{className:c.truncationSection,children:[(0,t.jsx)("h4",{className:c.truncationSectionTitle,children:"Posts"}),(0,t.jsx)(h,{field:"postInitialLevel",value:n.postInitialLevel,onChange:o,label:"Initial words to display",maps:d}),(0,t.jsx)(h,{field:"postMaxLevel",value:n.postMaxLevel,onChange:o,label:"Max words in-place",maps:d}),s&&(0,t.jsx)("p",{className:c.errorMessage,children:s})]}),(0,t.jsxs)("div",{className:c.truncationSection,children:[(0,t.jsx)("h4",{className:c.truncationSectionTitle,children:"Comments"}),(0,t.jsx)(h,{field:"commentCollapsedInitialLevel",value:n.commentCollapsedInitialLevel,onChange:o,label:"Initial (deemphasized)",maps:d}),(0,t.jsx)(h,{field:"commentExpandedInitialLevel",value:n.commentExpandedInitialLevel,onChange:o,label:"Initial (emphasized)",maps:d}),(0,t.jsx)(h,{field:"commentMaxLevel",value:n.commentMaxLevel,onChange:o,label:"Max words in-place",maps:d}),l&&(0,t.jsx)("p",{className:c.errorMessage,children:l})]})]})},"UnifiedScoringSettings",0,e=>{let{formValues:n,errors:r,onFieldChange:l,defaultOpen:d=!0,className:c}=e,u=(0,i.useStyles)(m),h=a.DEFAULT_SETTINGS.resolverSettings.unifiedScoring,g=[{key:"postsMultiplier",label:"Posts Multiplier",description:"Multiplier applied to final post scores. Increase to see more posts, decrease to see fewer. Default: ".concat(h.postsMultiplier),min:.1,max:10,step:.1},{key:"threadsMultiplier",label:"Threads Multiplier",description:"Multiplier applied to final thread scores. Increase to see more threads, decrease to see fewer. Default: ".concat(h.threadsMultiplier),min:.1,max:10,step:.1},{key:"quicktakeBonus",label:"Quick Take Bonus",description:"Bonus score for Quick Take threads. Default: ".concat(h.quicktakeBonus),min:0,max:50,step:1},{key:"subscribedBonusSetting",label:"Subscribed Bonus",description:"Scale: 0 (None) to 5 (Very Strong). Applies to both posts and comments.",min:0,max:5,step:1},{key:"timeDecayHalfLifeHours",label:"Time Decay Scale",description:"Controls time decay rate (applies to posts and comments). Higher = slower decay. Formula: scale^0.25 / (ageHrs + 12)^0.25. At ".concat(h.timeDecayHalfLifeHours,"hrs: 1day old = 78%, 1week old = 56%. Default: ").concat(h.timeDecayHalfLifeHours," hours"),min:1,max:48,step:1}];return(0,t.jsxs)(p,{title:"Unified Scoring Settings",defaultOpen:d,className:null!=c?c:u.settingGroup,children:[(0,t.jsx)("div",{className:u.groupDescription,children:(0,t.jsx)("p",{children:"Adjust scoring parameters for the unified scoring algorithm."})}),g.map(e=>{var i;let a=n[e.key],d=null==r||null==(i=r[e.key])?void 0:i._errors[0],c=h[e.key],m="number"==typeof a?a:c;return(0,t.jsxs)("div",{className:u.sourceWeightItem,children:[(0,t.jsxs)("div",{className:u.sourceWeightContainer,children:[(0,t.jsx)("label",{className:u.sourceWeightLabel,children:e.label}),(0,t.jsx)(s.default,{className:u.sourceWeightSlider,value:m,onChange:(t,n)=>l(e.key,n),min:e.min,max:e.max,step:e.step}),(0,t.jsx)("input",{type:"number",className:(0,o.default)(u.sourceWeightInput,{[u.invalidInput]:!!d}),value:a,onChange:t=>l(e.key,t.target.value),min:e.min,max:e.max,step:e.step})]}),(0,t.jsx)("p",{className:u.sourceWeightDescription,children:e.description}),d&&(0,t.jsx)("p",{className:u.errorMessage,children:d})]},e.key)})]})}])},839594,e=>{"use strict";var t=e.i(50270),n=e.i(601268);let o=["hacker-news","recombee-lesswrong-ultrafeed","bookmarks","subscriptionsPosts","quicktakes","recentComments","subscriptionsComments","bookmarks","spotlights"].reduce((e,n)=>(e[n]=t.z.number().min(0,{message:"Weight must be non-negative"}),e),{}),i=t.z.object(o),r=t.z.object({lineClampNumberOfLines:t.z.number().int().min(0,"Line clamp must be 0 or greater").default(n.DEFAULT_SETTINGS.displaySettings.lineClampNumberOfLines),postInitialWords:t.z.number().int().min(0,"Initial words must be 0 or greater").default(n.DEFAULT_SETTINGS.displaySettings.postInitialWords),postMaxWords:t.z.number().int().min(0,"Max words must be 0 or greater").default(n.DEFAULT_SETTINGS.displaySettings.postMaxWords),commentCollapsedInitialWords:t.z.number().int().min(0,"Collapsed words must be 0 or greater").default(n.DEFAULT_SETTINGS.displaySettings.commentCollapsedInitialWords),commentExpandedInitialWords:t.z.number().int().min(0,"Expanded words must be 0 or greater").default(n.DEFAULT_SETTINGS.displaySettings.commentExpandedInitialWords),commentMaxWords:t.z.number().int().min(0,"Max words must be 0 or greater").default(n.DEFAULT_SETTINGS.displaySettings.commentMaxWords)}).refine(e=>e.postInitialWords<=e.postMaxWords,{message:"Initial words must be less than or equal to max words",path:["postInitialWords"]}).refine(e=>e.commentCollapsedInitialWords<=e.commentExpandedInitialWords,{message:"Collapsed words must be less than or equal to expanded words",path:["commentCollapsedInitialWords"]}).refine(e=>e.commentExpandedInitialWords<=e.commentMaxWords,{message:"Expanded words must be less than or equal to max words",path:["commentExpandedInitialWords"]}),a=t.z.object({commentDecayFactor:t.z.number().positive({message:"Must be a positive number"}),commentDecayBiasHours:t.z.number().min(0,{message:"Must be non-negative"}),quickTakeBoost:t.z.number().min(.5,{message:"Value must be between 0.5 and 3.0"}).max(3,{message:"Value must be between 0.5 and 3.0"}),commentSubscribedAuthorMultiplier:t.z.number().min(1,{message:"Value must be between 1 and 10"}).max(10,{message:"Value must be between 1 and 10"}),threadScoreAggregation:t.z.enum(["sum","max","logSum","avg"]),threadScoreFirstN:t.z.number().int().positive({message:"Must be a positive integer"})}),s=t.z.object({commentCoeff:t.z.number().min(0,{message:"Must be non-negative"}),voteCoeff:t.z.number().min(0,{message:"Must be non-negative"}),viewCoeff:t.z.number().min(0,{message:"Must be non-negative"}),onReadPostFactor:t.z.number().min(0,{message:"Must be non-negative"}),logImpactFactor:t.z.number(),minOverallMultiplier:t.z.number().min(0,{message:"Must be non-negative"}),maxOverallMultiplier:t.z.number().min(0,{message:"Must be non-negative"}),repetitionDecayHours:t.z.number().min(0,{message:"Must be non-negative"}),repetitionPenaltyStrength:t.z.number().min(0,{message:"Must be non-negative"})}).refine(e=>e.minOverallMultiplier<=e.maxOverallMultiplier,{message:"Min overall multiplier must be less than or equal to max overall multiplier",path:["minOverallMultiplier"]}),l=t.z.object({hideRead:t.z.boolean()}),d=t.z.object({subscribedBonusSetting:t.z.number().int().min(0,{message:"Must be between 0 and 5"}).max(5,{message:"Must be between 0 and 5"}),quicktakeBonus:t.z.number().min(0,{message:"Must be non-negative"}).max(50,{message:"Must be at most 50"}),timeDecayHalfLifeHours:t.z.number().min(1,{message:"Must be at least 1 hour"}).max(48,{message:"Must be at most 48 hours"}),postsMultiplier:t.z.number().min(.1,{message:"Must be between 0.1 and 100"}).max(100,{message:"Must be between 0.1 and 100"}),threadsMultiplier:t.z.number().min(.1,{message:"Must be between 0.1 and 100"}).max(100,{message:"Must be between 0.1 and 100"})}),c=t.z.object({incognitoMode:t.z.boolean(),algorithm:t.z.enum(["scoring","sampling"]).default("sampling"),sourceWeights:i.default(n.DEFAULT_SETTINGS.resolverSettings.sourceWeights),commentScoring:a.default(n.DEFAULT_SETTINGS.resolverSettings.commentScoring),threadInterestModel:s.default(n.DEFAULT_SETTINGS.resolverSettings.threadInterestModel),unifiedScoring:d.default(n.DEFAULT_SETTINGS.resolverSettings.unifiedScoring),subscriptionsFeedSettings:l.default(n.DEFAULT_SETTINGS.resolverSettings.subscriptionsFeedSettings)}),u=t.z.object({displaySettings:r.default(n.DEFAULT_SETTINGS.displaySettings),resolverSettings:c}).partial();e.s(["ultraFeedSettingsSchema",0,u,"unifiedScoringSchema",()=>d],839594)},622435,(e,t,n)=>{var o=e.r(153201);t.exports=e.r(483495)(function(e,t,n,i){o(e,t,n,i)})},953985,11746,465186,924905,374655,e=>{"use strict";e.s(["default",()=>K],953985);var t=e.i(843476),n=e.i(79732),o=e.i(429329),i=e.i(159211),r=e.i(343794),a=e.i(91895),s=e.i(43582),l=e.i(224931),d=e.i(692436),c=e.i(530841),u=e.i(855762),m=e.i(583864),p=e.i(334445),h=e.i(266640),g=e.i(182584),f=e.i(566721),v=e.i(514089),x=e.i(831170),y=e.i(110601),b=e.i(161517),C=e.i(30446),w=e.i(196886),k=e.i(271645),j=e.i(813292),S=e.i(12152),I=e.i(914682),T=e.i(833851),N=e.i(136541),L=e.i(328018),R=e.i(642222),_=e.i(601268),A=e.i(839594),M=e.i(144437),P=e.i(995994),E=e.i(622435),F=e.i(271944),B=e.i(898892);let D=(e,t)=>{if(""===e)return t;if("number"==typeof e)return e;let n=parseFloat(e);return isNaN(n)?t:n},U=(e,t)=>null!=t?t:e,H=e=>{let t=String(e).trim();if(""===t)return"";let n=parseFloat(t);return isNaN(n)?"":n};e.s(["customNullishCoalesceProperties",0,U,"parseNumericInputAsZeroOrNumber",0,D,"processIntegerFieldInput",0,e=>{let t=String(e).trim();if(""===t)return"";let n=parseInt(t,10);return!isNaN(n)&&Number.isInteger(Number(t))?n:""},"processNumericFieldInput",0,H],11746);let W=(0,o.defineStyles)("AlterBonusesDialog",e=>({dialogContent:{minWidth:500,maxWidth:700,[e.breakpoints.down("sm")]:{minWidth:"auto"}},compactSettingGroup:{backgroundColor:e.palette.background.paper,width:"100%",padding:"16px 16px 0 16px",borderRadius:4},button:{padding:"8px 16px",fontSize:"1.1rem",fontFamily:e.palette.fonts.sansSerifStack,borderRadius:4,cursor:"pointer",border:"none",fontWeight:500},cancelButton:{backgroundColor:e.palette.grey[300],color:e.palette.text.primary,"&:hover":{backgroundColor:e.palette.grey[400]}},saveButton:{backgroundColor:e.palette.primary.main,color:e.palette.background.paper,"&:hover":{backgroundColor:e.palette.primary.dark}},buttonDisabled:{opacity:.5,cursor:"not-allowed"},actionsContent:{paddingRight:16,paddingBottom:16,display:"flex",width:"100%",justifyContent:"flex-end",gap:12,alignItems:"center"},unsavedChangesIndicator:{fontFamily:e.palette.fonts.sansSerifStack,color:e.palette.warning.main,fontSize:16,fontStyle:"italic"},buttonGroup:{display:"flex",gap:8}})),O=e=>{let{open:o,onClose:i,className:a}=e,s=(0,n.useStyles)(W),{settings:l,updateSettings:d}=(0,P.useUltraFeedSettings)(),{flash:c}=(0,M.useMessages)(),u=_.DEFAULT_SETTINGS.resolverSettings.unifiedScoring,m=(0,k.useMemo)(()=>{var e;return(0,E.default)((0,F.default)(u),null==l||null==(e=l.resolverSettings)?void 0:e.unifiedScoring,U)},[l,u]),[p,h]=(0,k.useState)(m),[g,f]=(0,k.useState)(null);(0,k.useEffect)(()=>{o&&(h(m),f(null))},[o,m]);let v=(0,k.useCallback)((e,t)=>{let n=H(t);h(t=>({...t,[e]:n})),f(null)},[]),x=(0,k.useCallback)(async()=>{let e={subscribedBonusSetting:D(p.subscribedBonusSetting,u.subscribedBonusSetting),quicktakeBonus:D(p.quicktakeBonus,u.quicktakeBonus),timeDecayHalfLifeHours:D(p.timeDecayHalfLifeHours,u.timeDecayHalfLifeHours),postsMultiplier:D(p.postsMultiplier,u.postsMultiplier),threadsMultiplier:D(p.threadsMultiplier,u.threadsMultiplier)},t=A.unifiedScoringSchema.safeParse(e);t.success?(d({resolverSettings:{...l.resolverSettings,unifiedScoring:e}}),c({messageString:"Scoring bonuses updated successfully"}),i()):f(t.error.format())},[p,u,l,d,c,i]),y=null!==g,b=(0,k.useMemo)(()=>!(0,B.default)(p,m),[p,m]);return(0,t.jsxs)(T.default,{open:o,onClose:i,maxWidth:"md",className:a,children:[(0,t.jsx)(N.DialogContent,{className:s.dialogContent,children:(0,t.jsx)(R.UnifiedScoringSettings,{formValues:p,errors:g,onFieldChange:v,defaultOpen:!0,className:s.compactSettingGroup})}),(0,t.jsx)(L.DialogActions,{disableActionSpacing:!0,children:(0,t.jsxs)("div",{className:s.actionsContent,children:[(0,t.jsx)("div",{className:s.unsavedChangesIndicator,children:b&&"you have unsaved changes"}),(0,t.jsxs)("div",{className:s.buttonGroup,children:[(0,t.jsx)("button",{className:(0,r.default)(s.button,s.cancelButton),onClick:i,children:"Cancel"}),(0,t.jsx)("button",{className:(0,r.default)(s.button,s.saveButton,{[s.buttonDisabled]:y}),onClick:x,disabled:y,children:"Save"})]})]})})]})},V=(0,o.defineStyles)("UltraFeedScoreBreakdown",e=>({container:{display:"inline-flex",alignItems:"center"},score:{fontSize:14,fontWeight:500,color:e.palette.text.secondary,marginLeft:8,marginRight:4},icon:{cursor:"pointer",color:e.palette.grey[400],fontSize:18,marginLeft:8,verticalAlign:"middle",position:"relative",bottom:1},tooltip:{backgroundColor:e.palette.background.paper,borderRadius:3,boxShadow:e.palette.boxShadow.lwCard},headerText:{fontSize:16,marginBottom:12,color:e.palette.text.primary,fontStyle:"italic"},constraints:{fontSize:12,color:e.palette.primary.main,marginTop:8,fontStyle:"italic"}})),z=e=>{let{children:o,headerText:i,constraints:r,onAlterBonuses:a}=e,s=(0,n.useStyles)(V),l=(0,n.useStyles)(S.scoreBreakdownStyles);return(0,t.jsxs)("div",{className:l.tooltipContent,children:[i&&(0,t.jsx)("div",{className:s.headerText,children:i}),o,r.length>0&&(0,t.jsxs)("div",{className:s.constraints,children:[i?"Thread constraints":"Constraints",": ",r.join(", ")]}),(0,t.jsx)("button",{className:l.alterBonusesButton,onClick:e=>{e.stopPropagation(),a()},children:"Alter Bonuses"})]})},$=e=>{let{metadata:o,sources:i,commentMetaInfo:r,postMetaInfo:a}=e,s=(0,n.useStyles)(V),l=(0,n.useStyles)(S.scoreBreakdownStyles),{showScoreBreakdown:d,setShowScoreBreakdown:c}=(0,I.useUltraFeedContext)(),[u,m]=(0,k.useState)(!1),p="commentThread"===o.rankedItemType?(0,t.jsx)(z,{constraints:o.selectionConstraints,onAlterBonuses:()=>m(!0),children:(0,t.jsx)(S.ThreadScoreBreakdownContent,{breakdown:o.scoreBreakdown,sources:i,metaInfo:r})}):(0,t.jsx)(z,{constraints:o.selectionConstraints,onAlterBonuses:()=>m(!0),children:(0,t.jsx)(S.PostScoreBreakdownContent,{breakdown:o.scoreBreakdown,sources:i,metaInfo:a})});return(0,t.jsxs)("span",{className:s.container,children:[(0,t.jsx)(y.default,{title:p,placement:"top",popperClassName:s.tooltip,clickable:!0,children:(0,t.jsxs)("span",{children:[d&&(0,t.jsx)("span",{className:s.score,children:o.scoreBreakdown.total.toFixed(2)}),(0,t.jsx)(j.default,{icon:"Insights",className:s.icon,onClick:e=>{e.stopPropagation(),c(!d)}})]})}),(0,t.jsx)(O,{open:u,onClose:()=>m(!1),className:l.alterBonusesDialogWrapper})]})};var q=e.i(673991);let G=(0,o.defineStyles)("UltraFeedItemFooter",e=>({root:{marginLeft:-6,position:"relative",display:"flex",flexWrap:"wrap",alignItems:"center",minHeight:28,opacity:"1 !important",fontFamily:e.palette.fonts.sansSerifStack,fontSize:e.typography.body2.fontSize,lineHeight:1,"& > *:not(:last-child)":{marginRight:16},"& > *:nth-last-child(2)":{marginRight:0},"& a:hover, & a:active":{textDecoration:"none",color:"".concat(e.palette.linkHover.dim," !important")},[e.breakpoints.down("sm")]:{justifyContent:"space-between",...e.typography.ultraFeedMobileStyle,"& > *:not(:last-child)":{marginRight:"unset"}}},commentCount:{position:"relative",bottom:1,color:"".concat(e.palette.ultraFeed.dim," !important"),display:"inline-flex",alignItems:"center",verticalAlign:"middle",height:24,"& svg":{position:"relative",height:18,top:2,[e.breakpoints.down("sm")]:{top:1,height:20,width:20}},[e.breakpoints.down("sm")]:{top:0,opacity:.95}},showAllCommentsWrapper:{display:"inline-flex",alignItems:"center","& svg":{[e.breakpoints.down("sm")]:{height:20,width:20}}},showAllComments:{position:"relative",bottom:0,padding:2,color:"".concat(e.palette.ultraFeed.dim," !important"),display:"inline-flex",alignItems:"center",borderRadius:4,cursor:"pointer",transition:"background-color 0.2s ease",height:24,"& svg":{position:"relative",height:15,top:0,[e.breakpoints.down("sm")]:{height:18,width:18}},"&:hover":{color:e.palette.grey[1e3]}},showAllCommentsCount:{marginLeft:2,[e.breakpoints.down("sm")]:{fontSize:17,marginLeft:6}},commentCountClickable:{cursor:"pointer","&:hover":{color:e.palette.grey[1e3]}},commentCountDisabled:{cursor:"not-allowed",opacity:.4,"&:hover":{color:"".concat(e.palette.ultraFeed.dim," !important")}},commentCountActive:{opacity:1,"& svg":{opacity:1}},commentCountInner:{display:"inline-flex",alignItems:"center",borderRadius:4,padding:"2px 4px",transition:"background-color 0.2s ease","&:hover":{backgroundColor:e.palette.panelBackground.hoverHighlightGrey}},commentCountInnerActive:{backgroundColor:e.palette.panelBackground.hoverHighlightGrey},commentCountText:{marginLeft:4,display:"none"},reactionIcon:{marginRight:6},reactionCount:{position:"relative",bottom:2},condensedFooterReactions:{marginLeft:"auto",[e.breakpoints.down("sm")]:{marginLeft:"unset"}},hidden:{visibility:"hidden"},bookmarksAndScore:{display:"flex",alignItems:"center",gap:8,[e.breakpoints.down("sm")]:{display:"none"}},bookmarkButtonContainer:{},scoreBreakdownContainer:{},bookmarkButton:{position:"relative",top:1,opacity:.7,display:"inline-flex",alignItems:"center","& svg":{color:"".concat(e.palette.ultraFeed.dim," !important"),height:20,[e.breakpoints.down("sm")]:{height:22}}},bookmarkButtonHighlighted:{color:"".concat(e.palette.primary.main," !important"),"& svg":{color:"".concat(e.palette.primary.main," !important")}},overallVoteButtons:{position:"relative",bottom:1,color:"".concat(e.palette.ultraFeed.dim," !important"),display:"inline-flex",alignItems:"center",verticalAlign:"middle",height:24,"& .VoteArrowIconSolid-root":{},[e.breakpoints.down("sm")]:{bottom:0}},agreementButtons:{position:"relative",bottom:1,color:"".concat(e.palette.ultraFeed.dim," !important"),display:"inline-flex",alignItems:"center",verticalAlign:"middle",height:24,marginLeft:-8,[e.breakpoints.down("sm")]:{bottom:0}},footerVoteScoreOverride:{fontSize:"".concat(e.typography.body2.fontSize,"px !important"),margin:"0 7px !important",lineHeight:"24px !important",verticalAlign:"middle !important",[e.breakpoints.down("sm")]:{fontSize:"17px !important",margin:"0 7px !important",lineHeight:"24px !important"}},hideSecondaryScoreOnMobile:{[e.breakpoints.down("sm")]:{display:"none !important"}},footerAgreementScoreOverride:{fontSize:"".concat(e.typography.body2.fontSize,"px !important"),margin:"0 7px !important",lineHeight:"24px !important",verticalAlign:"middle !important",[e.breakpoints.down("sm")]:{fontSize:"17px !important",margin:"0 7px !important",lineHeight:"24px !important"}}})),Z=e=>{let o,{commentCount:l,commentsUrl:d,showVoteButtons:f,voteProps:C,hideKarma:k,bookmarkProps:j,collectionName:S,metaInfo:I,className:T,document:N,replyConfig:L,cannotReplyReason:R,hideReacts:_=!1,isFirstCommentInThread:A}=e,M=(0,n.useStyles)(G),P=(0,c.useCurrentUser)(),{captureEvent:E}=(0,b.useTracking)(),{isReplying:F,onReplyClick:B,onReplyCancel:D}=L,U=null==I?void 0:I.rankingMetadata,H=(0,q.userIsAdmin)(P)&&U&&("Posts"===S||!!A),[W]=(0,v.useMutation)(w.UltraFeedEventCreateMutation),O=e=>{P&&C.document&&W({variables:{data:{userId:P._id,eventType:"interacted",documentId:C.document._id,collectionName:C.collectionName,feedItemId:null==I?void 0:I.servedEventId,event:{interactionType:e}}}})};o=R||(F?"Close reply":"Comments"===S?"Reply":"Comment");let V=(0,t.jsx)("div",{onClick:()=>{R||(F?(E("ultraFeedCommentIconClicked",{action:"closeReply"}),D()):(E("ultraFeedCommentIconClicked",{action:"openReply"}),O("commentsClicked"),B()))},className:(0,r.default)(M.commentCount,{[M.commentCountClickable]:!R,[M.commentCountDisabled]:R,[M.commentCountActive]:F}),children:(0,t.jsx)(y.default,{title:o,disabledOnMobile:!0,children:(0,t.jsxs)("span",{className:(0,r.default)(M.commentCountInner,{[M.commentCountInnerActive]:F}),children:[(0,t.jsx)(a.default,{}),null!=l&&l?(0,t.jsx)("span",{className:M.commentCountText,children:l}):null]})})}),z="Posts"===S?"Show all comments":"Show thread",Z=d?(0,t.jsx)("div",{className:M.showAllCommentsWrapper,children:(0,t.jsx)(y.default,{title:z,disabledOnMobile:!0,children:(0,t.jsxs)(i.Link,{to:d,className:M.showAllComments,children:[(0,t.jsx)(s.DebateIconOutline,{}),(null!=l?l:0)>0&&(0,t.jsx)("span",{className:M.showAllCommentsCount,children:l})]})})}):null,Y=C.document.votingSystem||(0,g.getDefaultVotingSystem)();return(0,t.jsx)(b.AnalyticsContext,{pageElementContext:"ultraFeedFooter",documentId:N._id,collectionName:S,children:(0,t.jsxs)("div",{className:(0,r.default)(M.root,T),children:[V,Z,f&&C.document&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:M.overallVoteButtons,children:(0,t.jsx)(p.default,{document:C.document,hideKarma:k,voteProps:C,verticalArrows:!0,largeArrows:!0,voteScoreClassName:M.footerVoteScoreOverride,secondaryScoreClassName:M.hideSecondaryScoreOnMobile,hideAfScore:!0})}),"Comments"===S&&(0,t.jsx)("div",{className:M.agreementButtons,children:(0,t.jsx)(h.default,{document:C.document,hideKarma:k,voteProps:C,agreementScoreClassName:M.footerAgreementScoreOverride})})]}),C.document&&"namesAttachedReactions"===Y&&(0,t.jsx)("div",{className:(0,r.default)(M.condensedFooterReactions,{[M.hidden]:_}),children:(0,t.jsx)(x.default,{voteProps:C,allowReactions:"Comments"===S})}),(0,t.jsxs)("div",{className:M.bookmarksAndScore,children:[H&&(0,t.jsx)("div",{className:M.scoreBreakdownContainer,children:"Comments"===S?(0,t.jsx)($,{metadata:U,sources:I.sources,commentMetaInfo:I}):(0,t.jsx)($,{metadata:U,sources:I.sources,postMetaInfo:I})}),j&&u.bookmarkableCollectionNames.has(S)&&(0,t.jsx)("div",{className:M.bookmarkButtonContainer,onClick:()=>{E("ultraFeedBookmarkInFooterClicked",{documentId:j.documentId,collectionName:S}),O("bookmarkClicked")},children:(0,t.jsx)(m.default,{documentId:j.documentId,collectionName:S,initial:N.isBookmarked,className:(0,r.default)(M.bookmarkButton,{[M.bookmarkButtonHighlighted]:j.highlighted})})})]})]})})},Y=e=>{var n,o;let{post:i,metaInfo:r,className:a,replyConfig:s,hideReacts:c}=e,u=(0,d.getVotingSystemByName)((null==i?void 0:i.votingSystem)||"default"),m=(0,l.useVote)(i,"Posts",u),p="namesAttachedReactions"===u.name,h=null!=(n=i.commentCount)?n:0,f={documentId:i._id,highlighted:null==(o=r.sources)?void 0:o.includes("bookmarks")},v=(0,g.postGetCommentsUrl)(i),{isReplying:x,onReplySubmit:y,onReplyCancel:b}=s;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Z,{commentCount:h,commentsUrl:v,showVoteButtons:p,voteProps:m,hideKarma:!1,bookmarkProps:f,collectionName:"Posts",metaInfo:r,className:a,document:i,replyConfig:s,cannotReplyReason:null,hideReacts:c}),x&&(0,t.jsx)(C.default,{document:i,collectionName:"Posts",cannotReplyReason:null,onReplySubmit:y,onReplyCancel:b})]})},Q=e=>{var n,o,i,r;let{comment:a,metaInfo:s,className:c,replyConfig:u,cannotReplyReason:m,hideReacts:p,isFirstCommentInThread:h}=e,g=a.post,v=(0,d.getVotingSystemByName)((null==g?void 0:g.votingSystem)||"default"),x=(0,l.useVote)(a,"Comments",v),y=!!(null==g?void 0:g.hideCommentKarma),b="namesAttachedReactions"===v.name&&!y,w=s.descendentCount,k={documentId:a._id,highlighted:null==(n=s.sources)?void 0:n.includes("bookmarks")},j=(0,f.commentGetPageUrlFromIds)({postId:null==(o=a.post)?void 0:o._id,postSlug:null==(i=a.post)?void 0:i.slug,tagSlug:null==(r=a.tag)?void 0:r.slug,tagCommentType:a.tagCommentType,commentId:a._id}),{isReplying:S,onReplySubmit:I,onReplyCancel:T}=u;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Z,{commentCount:w,commentsUrl:j,showVoteButtons:b,voteProps:x,hideKarma:y,bookmarkProps:k,collectionName:"Comments",metaInfo:s,className:c,document:a,replyConfig:u,cannotReplyReason:m,hideReacts:p,isFirstCommentInThread:h}),S&&(0,t.jsx)(C.default,{document:a,collectionName:"Comments",cannotReplyReason:m,onReplySubmit:I,onReplyCancel:T})]})},K=e=>{let{collectionName:n,document:o,metaInfo:i,className:r,replyConfig:a,cannotReplyReason:s,hideReacts:l,isFirstCommentInThread:d}=e;return"Posts"===n?(0,t.jsx)(Y,{post:o,metaInfo:i,className:r,replyConfig:a,hideReacts:l}):(0,t.jsx)(Q,{comment:o,metaInfo:i,className:r,replyConfig:a,cannotReplyReason:s,hideReacts:l,isFirstCommentInThread:d})};var X=e.i(339213);let J=(0,X.default)((0,t.jsxs)(k.default.Fragment,{children:[(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0V0z"}),(0,t.jsx)("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"})]}),"ArrowUpward");e.s(["default",0,J],465186);let ee=(0,X.default)((0,t.jsxs)(k.default.Fragment,{children:[(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0V0z"}),(0,t.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"})]}),"ArrowDownward");e.s(["default",0,ee],924905);let et=(0,X.default)((0,t.jsxs)(k.default.Fragment,{children:[(0,t.jsx)("path",{d:"M7.41 18.59 8.83 20 12 16.83 15.17 20l1.41-1.41L12 14z"}),(0,t.jsx)("path",{d:"M16.59 5.41 15.17 4 12 7.17 8.83 4 7.41 5.41 12 10z"})]}),"UnfoldLess"),en=(0,o.defineStyles)("OverflowNavButtons",e=>({base:{display:"flex",flexDirection:"column",gap:"8px",zIndex:e.zIndexes.overflowNavButtons},both:{position:"sticky",bottom:128,float:"right",marginRight:-64,[e.breakpoints.down("sm")]:{width:"fit-content",marginRight:-4}},onlyUp:{position:"absolute",right:-48,bottom:0,[e.breakpoints.down("sm")]:{right:12,bottom:24}},commentOnlyUp:{right:-64,[e.breakpoints.down("sm")]:{right:-4}},button:{display:"flex",alignItems:"center",justifyContent:"center",background:"dark"===e.palette.type?e.palette.grey[400]:e.palette.panelBackground.tooltipBackground2,borderRadius:"40%",opacity:"dark"===e.palette.type?.8:.4,color:e.palette.text.alwaysWhite,width:36,height:36,cursor:"pointer",transition:"opacity 0.5s ease"},hidden:{opacity:"0 !important",pointerEvents:"none"},fontSmall:{fontSize:20}}));e.s(["default",0,e=>{let{nav:o,onCollapse:i,applyCommentStyle:a}=e,{showUp:s,showDown:l,scrollToTop:d,scrollToBottom:c}=o,u=(0,n.useStyles)(en),{captureEvent:m}=(0,b.useTracking)(),p=(0,k.useCallback)(()=>{m("overflowNavCollapseClicked"),null==i||i(),d()},[i,d,m]),h=(0,k.useCallback)(()=>{m("overflowNavUpClicked"),d()},[d,m]),g=(0,k.useCallback)(()=>{m("overflowNavDownClicked"),c()},[c,m]),f=s&&!l?(0,r.default)(u.onlyUp,{[u.commentOnlyUp]:a}):u.both;return(0,t.jsxs)("div",{className:(0,r.default)(u.base,f),children:[i&&(0,t.jsx)("div",{onClick:p,className:u.button,children:(0,t.jsx)(et,{})}),(0,t.jsx)("div",{onClick:h,className:(0,r.default)(u.button,{[u.hidden]:!s}),children:(0,t.jsx)(J,{className:u.fontSmall})}),(0,t.jsx)("div",{onClick:g,className:(0,r.default)(u.button,{[u.hidden]:!l}),children:(0,t.jsx)(ee,{className:u.fontSmall})})]})}],374655)},414942,849951,434968,802588,716480,708694,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(65189),i=e.i(109665),r=e.i(182584),a=e.i(242763),s=e.i(79732),l=e.i(429329),d=e.i(495791),c=e.i(820010),u=e.i(530841);let m=e=>{let{onSeeLess:n,isSeeLessMode:o=!1}=e;return(0,t.jsx)(i.default,{title:o?"Undo see less":"Show me less like this",onClick:n,icon:"Close"})};e.s(["default",0,m],849951);var p=e.i(539254),h=e.i(110601),g=e.i(372593);e.i(547426);var f=e.i(575059),v=e.i(813292),x=e.i(12152),y=e.i(673991);let b=(0,l.defineStyles)("ScoreBreakdownDropdownItem",e=>({tooltipWrapper:{display:"block",[e.breakpoints.down("sm")]:{display:"none"}},title:{flexGrow:1,overflowX:"clip",textOverflow:"ellipsis"},tooltip:{backgroundColor:e.palette.background.paper,borderRadius:3,boxShadow:e.palette.boxShadow.lwCard}})),C=e=>{let n,{metadata:o,sources:i,commentMetaInfo:r,postMetaInfo:a}=e,l=(0,s.useStyles)(b),d=(0,u.useCurrentUser)();return(0,y.userIsAdmin)(d)?(n="commentThread"===o.rankedItemType?(0,t.jsx)(x.ThreadScoreBreakdownContent,{breakdown:o.scoreBreakdown,sources:i,metaInfo:r}):(0,t.jsx)(x.PostScoreBreakdownContent,{breakdown:o.scoreBreakdown,sources:i,metaInfo:a}),(0,t.jsx)(h.default,{title:n,placement:"auto",popperClassName:l.tooltip,clickable:!0,className:l.tooltipWrapper,children:(0,t.jsxs)(g.MenuItem,{children:[(0,t.jsx)(f.default,{children:(0,t.jsx)(v.default,{icon:"Insights"})}),(0,t.jsx)("span",{className:l.title,children:"Why am I seeing this?"})]})})):null};e.s(["default",0,C],434968);let w=(0,l.defineStyles)("UltraFeedPostActions",e=>({root:{minWidth:300}}));e.s(["default",0,e=>{let{post:l,closeMenu:h,includeBookmark:g,onSeeLess:f,isSeeLessMode:v,postMetaInfo:x}=e,y=(0,s.useStyles)(w),b=(0,u.useCurrentUser)(),k=(0,n.useCallback)(e=>{e.preventDefault(),window.open((0,r.postGetPageUrl)(l),"_blank","noopener,noreferrer"),h()},[l,h]),j=(0,n.useCallback)(()=>{let e=(0,r.postGetPageUrl)(l,!0);navigator.clipboard.writeText(e),h()},[l,h]),S=(0,n.useCallback)(()=>{null==f||f(),h()},[f,h]),I=l.user,T=(null==b?void 0:b._id)===(null==I?void 0:I._id);return(0,t.jsxs)(o.default,{className:y.root,children:[I&&!T&&(0,t.jsx)(d.default,{document:I,title:"Follow ".concat((0,c.userGetDisplayName)(I)),subscriptionType:"newActivityForFeed"}),(null==x?void 0:x.rankingMetadata)&&(0,t.jsx)(C,{metadata:x.rankingMetadata,sources:x.sources,postMetaInfo:x}),f&&(0,t.jsx)(m,{onSeeLess:S,isSeeLessMode:v}),g&&(0,t.jsx)(p.default,{documentId:l._id,collectionName:"Posts"}),(0,t.jsx)(i.default,{title:"Copy link",icon:"Link",onClick:j}),(0,t.jsx)(i.default,{title:"Open in new tab",icon:"ArrowRight",onClick:k}),(0,t.jsx)(a.default,{post:l})]})}],414942);let k=(0,e.i(339213).default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,t.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"AccessTime");e.s(["default",0,k],802588);var j=e.i(776153),S=e.i(343794);let I=(0,l.defineStyles)("SeeLessFeedback",e=>({root:{maxWidth:500,margin:"0 auto"},contentBox:{display:"flex",flexDirection:"column",alignItems:"center",gap:12},messageRow:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center"},message:{fontFamily:e.palette.fonts.sansSerifStack,fontSize:14,textAlign:"center",color:e.palette.text.normal,[e.breakpoints.down("sm")]:{fontSize:14}},feedbackOptions:{display:"flex",flexDirection:"column",width:"100%",maxWidth:250},checkbox:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",padding:"4px 12px",transition:"all 0.2s ease","&:hover":{backgroundColor:e.palette.panelBackground.hoverHighlightGrey}},checkboxSelected:{"&:hover":{backgroundColor:e.palette.panelBackground.hoverHighlightGrey}},checkIcon:{width:18,height:18,borderRadius:3,border:"2px solid ".concat(e.palette.text.dim),display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},checkIconSelected:{backgroundColor:e.palette.primary.main,borderColor:e.palette.primary.main,color:e.palette.text.alwaysWhite},checkboxLabel:{fontFamily:e.palette.fonts.sansSerifStack,fontSize:12,color:e.palette.text.normal},buttonContainer:{display:"flex",justifyContent:"center"},undoButton:{padding:"4px 6px",backgroundColor:"transparent",cursor:"pointer",fontFamily:e.palette.fonts.sansSerifStack,fontSize:14,color:e.palette.text.normal,opacity:.7,"&:hover":{opacity:1}},textAreaContainer:{width:"100%"},textArea:{width:"100%",minHeight:50,padding:"8px 12px",borderRadius:4,border:"1px solid ".concat(e.palette.text.dim),backgroundColor:e.palette.panelBackground.default,color:e.palette.text.normal,fontFamily:e.palette.fonts.sansSerifStack,fontSize:12,resize:"vertical","&:focus":{outline:"none",borderColor:e.palette.primary.main},"&::placeholder":{color:e.palette.text.dim3}},betaDisclaimer:{width:250,fontFamily:e.palette.fonts.sansSerifStack,fontSize:12,fontStyle:"italic",color:e.palette.text.dim,textAlign:"center"}}));e.s(["default",0,e=>{let{onUndo:o,onFeedbackChange:i}=e,r=(0,s.useStyles)(I),[a,l]=(0,n.useState)({author:!1,topic:!1,contentType:!1,repetitive:!1,other:!1,text:""}),d=(0,n.useRef)(null);return(0,n.useEffect)(()=>()=>{d.current&&clearTimeout(d.current)},[]),(0,t.jsx)("div",{className:r.root,children:(0,t.jsxs)("div",{className:r.contentBox,children:[(0,t.jsxs)("div",{className:r.messageRow,children:[(0,t.jsx)("span",{className:r.message,children:"You've requested to see less like this"}),(0,t.jsx)("button",{className:r.undoButton,onClick:o,children:"(undo)"})]}),(0,t.jsx)("div",{className:r.feedbackOptions,children:[{key:"author",label:"See less from this author"},{key:"topic",label:"See less of this topic"},{key:"contentType",label:"See less of this content type"},{key:"repetitive",label:"Too repetitive"},{key:"other",label:"Other reason"}].map(e=>{let{key:n,label:o}=e;return(0,t.jsxs)("div",{className:(0,S.default)(r.checkbox,{[r.checkboxSelected]:a[n]}),onClick:()=>{let e;l(e={...a,[n]:!a[n]}),i(e)},children:[(0,t.jsx)("div",{className:(0,S.default)(r.checkIcon,{[r.checkIconSelected]:a[n]}),children:a[n]&&(0,t.jsx)(j.default,{style:{fontSize:14}})}),(0,t.jsx)("span",{className:r.checkboxLabel,children:o})]},n)})}),(0,t.jsx)("div",{className:r.textAreaContainer,children:(0,t.jsx)("textarea",{className:r.textArea,placeholder:"Tell us more (autosaved)",value:a.text||"",onChange:e=>{let t={...a,text:e.target.value};l(t),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{i(t)},500)},maxLength:500})}),(0,t.jsx)("div",{className:r.betaDisclaimer,children:'Note: Effects of "see less" might not be immediate as we are still developing the algorithm.'})]})})}],716480);var T=e.i(514089);e.i(813868);var N=e.i(122756),L=e.i(161517),R=e.i(712434),_=e.i(68880),A=e.i(196886);let M=(0,N.gql)("\n  mutation updateUltraFeedEvent($selector: String!, $data: UpdateUltraFeedEventDataInput!) {\n    updateUltraFeedEvent(selector: $selector, data: $data) {\n      data {\n        _id\n      }\n    }\n  }\n");e.s(["useSeeLess",0,e=>{var t;let{documentId:o,collectionName:i,metaInfo:r}=e,a="Posts"===i?"post":"comment",s=(0,u.useCurrentUser)(),[l,d]=(0,n.useState)(!1),[c,m]=(0,n.useState)(null),[p,h]=(0,n.useState)(null),[g]=(0,T.useMutation)(A.UltraFeedEventCreateMutation),[f]=(0,T.useMutation)(M),{captureEvent:v}=(0,L.useTracking)(),x=r&&"recommInfo"in r?null==(t=r.recommInfo)?void 0:t.recommId:void 0,y=(0,n.useCallback)(async()=>{s&&(d(!1),c&&"pending"!==c&&await f({variables:{selector:c,data:{event:{cancelled:!0}}}}),"post"===a&&x&&R.recombeeApi.createRating(o,s._id,"neutral",x),v("ultraFeedSeeLessUndone",{["".concat(a,"Id")]:o,eventId:c}),m(null))},[s,c,o,a,x,f,v]),b=(0,n.useCallback)(async()=>{if(!s)return;if(l)return void y();d(!0),v("ultraFeedSeeLessClicked",{documentId:o,collectionName:i,sources:null==r?void 0:r.sources,servedEventId:null==r?void 0:r.servedEventId});let e={data:{userId:s._id,eventType:"seeLess",documentId:o,collectionName:i,feedItemId:null==r?void 0:r.servedEventId,event:{feedbackReasons:{author:!1,topic:!1,contentType:!1,repetitive:!1,other:!1,text:""},sources:null==r?void 0:r.sources,cancelled:!1}}};try{var t,n,a;let l=null==(a=(await g({variables:e})).data)||null==(n=a.createUltraFeedEvent)||null==(t=n.data)?void 0:t._id;l&&m(l),"Posts"===i&&r&&"recommInfo"in r&&x&&R.recombeeApi.createRating(o,s._id,"bigDownvote",x)}catch(e){console.error("Error creating see less event:",e),y()}},[s,l,y,v,o,i,r,g,x]),C=(0,_.useDebouncedCallback)(async e=>{c&&"pending"!==c&&(await f({variables:{selector:c,data:{event:{feedbackReasons:e}}}}),v("ultraFeedSeeLessFeedback",{["".concat(a,"Id")]:o,eventId:c,feedback:{...e}}))},{rateLimitMs:1e3,callOnLeadingEdge:!1,onUnmount:"callIfScheduled",allowExplicitCallAfterUnmount:!1}),w=(0,n.useCallback)(e=>{c&&"pending"!==c?C(e):h(e)},[c,C]);return(0,n.useEffect)(()=>{c&&"pending"!==c&&p&&(w(p),h(null))},[c,p,w]),{isSeeLessMode:l,seeLessEventId:c,handleSeeLessClick:b,handleFeedbackChange:w}}],708694)},178286,750329,898641,727169,453139,e=>{"use strict";var t=e.i(843476),n=e.i(673991),o=e.i(530841),i=e.i(109665);e.s(["default",0,e=>{let{comment:r,showEdit:a}=e,s=(0,o.useCurrentUser)();return((0,n.userCanDo)(s,"comments.edit.all")||(0,n.userOwns)(s,r))&&!r.draft?(0,t.jsx)(i.default,{title:"Edit",onClick:a,disabled:!!r.originalDialogueId,tooltip:r.originalDialogueId?"Cannot edit dialogue crossposts to shortform":void 0,icon:"Edit"}):null}],178286);var r=e.i(725788),a=e.i(177864);e.s(["default",0,e=>{let{comment:s,post:l}=e,d=(0,o.useCurrentUser)(),{openDialog:c}=(0,r.useDialog)();return l&&(0,n.userCanDo)(d,"reports.new")&&!s.draft?(0,t.jsx)(i.default,{title:"Report",onClick:()=>{d&&c({name:"ReportForm",contents:e=>{var n;let{onClose:o}=e;return(0,t.jsx)(a.default,{onClose:o,commentId:s._id,postId:null!=(n=s.postId)?n:void 0,link:"/posts/"+s.postId+"/a/"+s._id,userId:d._id})}})},icon:"Report"}):null}],750329);var s=e.i(144437),l=e.i(820010),d=e.i(514089);e.i(813868);var c=e.i(122756);let u=()=>{let[e]=(0,d.useMutation)((0,c.gql)("\n    mutation moderateComment($commentId: String, $deleted: Boolean, $deletedReason: String, $deletedPublic: Boolean) {\n      moderateComment(commentId: $commentId, deleted: $deleted, deletedReason: $deletedReason, deletedPublic: $deletedPublic) {\n        ...CommentsList\n      }\n    }\n  "));return{moderateCommentMutation:async function(t){return await e({variables:t})}}};var m=e.i(791434),p=e.i(271645),h=e.i(538794),g=e.i(328018),f=e.i(136541),v=e.i(476331);e.i(793794);var x=e.i(527633);e.i(725105);var y=e.i(572148),b=e.i(833851);let C=(0,h.registerComponent)("DeleteCommentDialog",e=>{let{comment:n,onClose:i,classes:r}=e,[a,l]=(0,p.useState)(""),{moderateCommentMutation:d}=u(),{flash:c}=(0,s.useMessages)(),m=(0,o.useCurrentUser)(),h=(null==m?void 0:m._id)===n.userId;return(0,t.jsxs)(b.default,{open:!0,onClose:i,children:[(0,t.jsx)(v.DialogTitle,{children:"What is your reason for deleting this comment?"}),(0,t.jsxs)(f.DialogContent,{children:[(0,t.jsx)("p",{className:r.subtitle,children:(0,t.jsx)("em",{children:h?"(If you delete publicly, the reason will be displayed below the comment. If you delete without a trace, the comment will be removed without any public indication.)":"(If you delete without a trace, the reason will be sent to the author of the comment privately. Otherwise it will be publicly displayed below the comment.)"})}),(0,t.jsx)("br",{}),(0,t.jsx)(y.default,{id:"comment-menu-item-delete-reason",label:"Reason for deleting (optional)",className:r.modalTextField,value:a,onChange:e=>l(e.target.value),fullWidth:!0,multiline:!0})]}),(0,t.jsxs)(g.DialogActions,{children:[(0,t.jsx)(x.default,{onClick:e=>{e.preventDefault(),d({commentId:n._id,deleted:!0,deletedPublic:!1,deletedReason:a}).then(()=>{c({messageString:"Successfully deleted comment",type:"success"}),i&&i()}).catch()},className:r.deleteWithoutTrace,children:"Delete Without Trace"}),(0,t.jsx)(x.default,{onClick:i,children:"Cancel"}),(0,t.jsx)(x.default,{color:"primary",onClick:e=>{e.preventDefault(),d({commentId:n._id,deleted:!0,deletedPublic:!0,deletedReason:a}).then(()=>{c({messageString:"Successfully deleted comment",type:"success"}),i&&i()}).catch()},children:"Delete"})]})]})},{styles:e=>({subtitle:{fontFamily:e.isFriendlyUI?e.palette.fonts.sansSerifStack:void 0},deleteWithoutTrace:{marginRight:"auto"},modalTextField:{marginTop:10}})});e.s(["default",0,e=>{let{comment:a,post:d,tag:c}=e,p=(0,o.useCurrentUser)(),{openDialog:h}=(0,r.useDialog)(),{flash:g}=(0,s.useMessages)(),{moderateCommentMutation:f}=u(),v=async e=>{e.preventDefault();try{await f({commentId:a._id,deleted:!1,deletedReason:""}),g({messageString:"Successfully restored comment",type:"success"})}catch(e){g(e.message)}};return p&&(d||c)&&(0,l.userCanModerateComment)(p,null!=d?d:null,null!=c?c:null,a)?a.deleted?(0,n.userIsAdminOrMod)(p)||a.deletedByUserId===p._id?(0,t.jsx)(i.default,{title:(0,m.preferredHeadingCase)("Undo Delete"),onClick:v}):null:(0,t.jsx)(i.default,{title:"Delete",onClick:()=>{h({name:"DeleteCommentDialog",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(C,{onClose:n,comment:a})}})}}):null}],898641);let w=(0,c.gql)("\n  mutation updateCommentRetractCommentDropdownItem($selector: SelectorInput!, $data: UpdateCommentDataInput!) {\n    updateComment(selector: $selector, data: $data) {\n      data {\n        ...CommentsList\n      }\n    }\n  }\n");e.s(["default",0,e=>{let{comment:n}=e,r=(0,o.useCurrentUser)(),[a]=(0,d.useMutation)(w);return!r||n.userId!==r._id||n.draft?null:n.retracted?(0,t.jsx)(i.default,{title:(0,m.preferredHeadingCase)("Unretract Comment"),onClick:()=>{a({variables:{selector:{_id:n._id},data:{retracted:!1}}})},tooltip:"Comment will be un-crossed-out, indicating you endorse it again."}):(0,t.jsx)(i.default,{title:(0,m.preferredHeadingCase)("Retract Comment"),onClick:()=>{a({variables:{selector:{_id:n._id},data:{retracted:!0}}})},tooltip:"Comment will become crossed out, indicating you no longer endorse it."})}],727169);var k=e.i(84377);e.s(["default",0,e=>{let{comment:r,post:a}=e,d=(0,o.useCurrentUser)(),c=(0,k.useUpdateCurrentUser)(),{flash:u}=(0,s.useMessages)();return a&&(0,l.userCanModeratePost)(d,a)&&a.frontpageDate&&(0,n.userOwns)(d,a)&&!r.draft?(0,t.jsx)(i.default,{title:"Ban from all your posts",onClick:e=>{if(e.preventDefault(),d&&confirm("Are you sure you want to ban this user from commenting on all your posts?")){var t,n;let e=null!=(t=r.userId)?t:"",o=[...null!=(n=d.bannedUserIds)?n:[]];o.includes(e)||o.push(e),c({bannedUserIds:o}).then(()=>{var e;return u({messageString:"User ".concat(null==r||null==(e=r.user)?void 0:e.displayName," is now banned from commenting on any of your posts")})})}}}):null}],453139)},946255,e=>{"use strict";var t=e.i(843476),n=e.i(271645);let o=(0,e.i(339213).default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,t.jsx)("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4z"})]}),"ArrowRightAlt");e.s(["default",0,o])},708751,e=>{"use strict";var t=e.i(843476),n=e.i(343794),o=e.i(429329),i=e.i(79732);let r=(0,o.defineStyles)("OmegaIcon",e=>({root:{fontSize:24,fontWeight:600,fontFamily:'Palatino,"Palatino Linotype","Palatino LT STD","Book Antiqua",Georgia,serif',position:"relative",top:2,width:24,textAlign:"center"}}));e.s(["default",0,e=>{let{className:o}=e,a=(0,i.useStyles)(r);return(0,t.jsx)("span",{className:(0,n.default)(a.root,o),children:""})}])},436790,934572,840208,29338,718996,317809,124121,e=>{"use strict";var t=e.i(843476),n=e.i(144437),o=e.i(276320),i=e.i(514089),r=e.i(530841),a=e.i(673991),s=e.i(946255),l=e.i(897095),d=e.i(109665),c=e.i(708751);e.i(813868);var u=e.i(122756),m=e.i(429329),p=e.i(79732);let h=(0,u.gql)("\n  mutation updateCommentMoveToAlignmentCommentDropdownItem($selector: SelectorInput!, $data: UpdateCommentDataInput!) {\n    updateComment(selector: $selector, data: $data) {\n      data {\n        ...CommentsList\n      }\n    }\n  }\n"),g=(0,m.defineStyles)("MoveToAlignmentCommentDropdownItem",e=>({iconRoot:{position:"relative",width:24},omegaIcon:{position:"absolute !important",left:0,top:"7px !important",opacity:.3},moveIcon:{marginLeft:8,color:e.palette.text.maxIntensity},undoIcon:{marginLeft:8,width:20,color:e.palette.text.maxIntensity}}));e.s(["default",0,e=>{let{comment:u,post:m}=e,f=(0,p.useStyles)(g),v=(0,r.useCurrentUser)(),x=(0,o.useApolloClient)(),{flash:y}=(0,n.useMessages)(),[b]=(0,i.useMutation)(h),C=async()=>{v&&(await b({variables:{selector:{_id:u._id},data:{af:!0,afDate:new Date,moveToAlignmentUserId:v._id}}}),await x.resetStore(),y("Comment and its parents moved to AI Alignment Forum"))},w=async()=>{await b({variables:{selector:{_id:u._id},data:{af:!1,afDate:null,moveToAlignmentUserId:null}}}),await x.resetStore(),y("Comment and its children removed from AI Alignment Forum")};return(null==m?void 0:m.af)&&(0,a.userCanDo)(v,"comments.alignment.move.all")&&!u.draft?u.af?(0,t.jsx)(d.default,{title:"Remove from Alignment",onClick:w,icon:()=>(0,t.jsxs)("span",{className:f.iconRoot,children:[(0,t.jsx)(c.default,{className:f.omegaIcon}),(0,t.jsx)(l.default,{className:f.undoIcon})]})}):(0,t.jsx)(d.default,{title:"Move to Alignment",onClick:C,icon:()=>(0,t.jsxs)("span",{className:f.iconRoot,children:[(0,t.jsx)(c.default,{className:f.omegaIcon}),(0,t.jsx)(s.default,{className:f.moveIcon})]})}):null}],436790);var f=e.i(538794),v=e.i(271645);let x=(0,e.i(339213).default)((0,t.jsxs)(v.default.Fragment,{children:[(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0z"}),(0,t.jsx)("path",{d:"M10 7H8v4H4v2h4v4h2v-4h4v-2h-4V7zm10 11h-2V7.38L15 8.4V6.7L19.7 5h.3v13z"})]}),"ExposurePlus1");var y=e.i(909817),b=e.i(693311);let C=(0,u.gql)("\n  mutation updateCommentSuggestAlignmentCommentDropdownItem($selector: SelectorInput!, $data: UpdateCommentDataInput!) {\n    updateComment(selector: $selector, data: $data) {\n      data {\n        ...SuggestAlignmentComment\n      }\n    }\n  }\n"),w=(0,f.registerComponent)("SuggestAlignmentCommentDropdownItem",e=>{let{comment:n,post:o,classes:s}=e,u=(0,r.useCurrentUser)(),[m]=(0,i.useMutation)(C);return(null==o?void 0:o.af)&&!n.af&&u&&(0,a.userCanDo)(u,"comments.alignment.suggest")&&!n.draft?n.suggestForAlignmentUserIds&&n.suggestForAlignmentUserIds.includes(u._id)?(0,t.jsx)(d.default,{title:"Unsuggest for Alignment",onClick:()=>void m({variables:{selector:{_id:n._id},data:{suggestForAlignmentUserIds:(0,b.default)(n.suggestForAlignmentUserIds,u._id)}}}),icon:()=>(0,t.jsxs)("span",{className:s.iconRoot,children:[(0,t.jsx)(c.default,{className:s.omegaIcon}),(0,t.jsx)(l.default,{className:s.undoIcon})]})}):(0,t.jsx)(d.default,{title:"Suggest for Alignment",onClick:()=>void m({variables:{selector:{_id:n._id},data:{suggestForAlignmentUserIds:(0,y.default)([...n.suggestForAlignmentUserIds,u._id])}}}),icon:()=>(0,t.jsxs)("span",{className:s.iconRoot,children:[(0,t.jsx)(c.default,{className:s.omegaIcon}),(0,t.jsx)(x,{className:s.plusOneIcon})]})}):null},{styles:e=>({iconRoot:{position:"relative",width:24},omegaIcon:{position:"absolute !important",left:0,top:"7px !important",opacity:.3},plusOneIcon:{marginLeft:8,color:e.palette.text.maxIntensity,width:20},undoIcon:{marginLeft:8,width:20,color:e.palette.text.maxIntensity}})});e.s(["default",0,w],934572);var k=e.i(84377),j=e.i(820010);e.s(["default",0,e=>{let{comment:o,post:i}=e,s=(0,r.useCurrentUser)(),l=(0,k.useUpdateCurrentUser)(),{flash:c}=(0,n.useMessages)();return i&&(0,j.userCanModeratePost)(s,i)&&!i.frontpageDate&&(0,a.userOwns)(s,i)&&!o.draft?(0,t.jsx)(d.default,{title:"Ban from all your personal blog posts",onClick:e=>{if(s&&(e.preventDefault(),confirm("Are you sure you want to ban this user from commenting on all your personal blog posts?"))){var t,n;let e=null!=(t=o.userId)?t:"",i=[...null!=(n=s.bannedPersonalUserIds)?n:[]];i.includes(e)||i.push(e),l({bannedPersonalUserIds:i}).then(()=>{var e;return c({messageString:"User ".concat(null==o||null==(e=o.user)?void 0:e.displayName," is now banned from commenting on any of your personal blog posts")})})}}}):null}],840208);var S=e.i(791434);let I=(0,u.gql)("\n  mutation updateCommentMoveToAnswersDropdownItem($selector: SelectorInput!, $data: UpdateCommentDataInput!) {\n    updateComment(selector: $selector, data: $data) {\n      data {\n        ...CommentsList\n      }\n    }\n  }\n");e.s(["default",0,e=>{let{comment:s,post:l}=e,c=(0,r.useCurrentUser)(),{flash:u}=(0,n.useMessages)(),m=(0,o.useApolloClient)(),[p]=(0,i.useMutation)(I);if(s.topLevelCommentId||!(null==l?void 0:l.question)||!((0,a.userCanDo)(c,"comments.edit.all")||(0,a.userOwns)(c,s))||s.draft)return null;let h=async()=>{await p({variables:{selector:{_id:s._id},data:{answer:!0}}}),u("Comment moved to the Answers section."),await m.resetStore()},g=async()=>{await p({variables:{selector:{_id:s._id},data:{answer:!1}}}),u("Answer moved to the Comments section."),await m.resetStore()};return s.answer?(0,t.jsx)(d.default,{title:(0,S.preferredHeadingCase)("Move To Comments"),onClick:g}):(0,t.jsx)(d.default,{title:(0,S.preferredHeadingCase)("Move To Answers"),onClick:h})}],29338);let T=(0,u.gql)("\n  mutation updateCommentToggleIsModeratorCommentDropdownItem($selector: SelectorInput!, $data: UpdateCommentDataInput!) {\n    updateComment(selector: $selector, data: $data) {\n      data {\n        ...CommentsList\n      }\n    }\n  }\n");e.s(["default",0,e=>{let{comment:n}=e,o=(0,r.useCurrentUser)(),[s]=(0,i.useMutation)(T);if(!o||!(0,a.userCanDo)(o,"posts.moderate.all"))return null;let l=e=>()=>{s({variables:{selector:{_id:n._id},data:{moderatorHat:!0,...e}}})};return n.moderatorHat?(0,t.jsx)(d.default,{title:(0,S.preferredHeadingCase)("Un-mark as Moderator Comment"),onClick:()=>{s({variables:{selector:{_id:n._id},data:{moderatorHat:!1}}})}}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.default,{title:(0,S.preferredHeadingCase)("Mark as Moderator Comment (visible)"),onClick:l()}),(0,t.jsx)(d.default,{title:(0,S.preferredHeadingCase)("Mark as Moderator Comment (invisible)"),onClick:l({hideModeratorHat:!0})})]})}],718996);let N=(0,u.gql)("\n  mutation updateCommentPinToProfileDropdownItem($selector: SelectorInput!, $data: UpdateCommentDataInput!) {\n    updateComment(selector: $selector, data: $data) {\n      data {\n        ...CommentsList\n      }\n    }\n  }\n"),L=(0,f.registerComponent)("PinToProfileDropdownItem",e=>{var n;let{comment:o,post:a,classes:s}=e,l=(0,r.useCurrentUser)(),[c]=(0,i.useMutation)(N),u=(0,v.useCallback)(()=>{c({variables:{selector:{_id:o._id},data:{isPinnedOnProfile:!o.isPinnedOnProfile}}})},[c,o]),m=(null==l?void 0:l._id)===o.userId;if(!(m||(null==l?void 0:l.isAdmin))||!a||o.draft)return null;let p=m?(0,S.isFriendlyUI)()?"your":"my":"".concat(null==(n=o.user)?void 0:n.displayName,"'s"),h=o.isPinnedOnProfile?"Unpin from ".concat(p," profile"):"Pin to ".concat(p," profile");return(0,t.jsx)(d.default,{title:h,onClick:u,icon:"Pin"})},{styles:e=>({icon:e.isFriendlyUI?{fontSize:"18px"}:{}})});e.s(["default",0,L],317809);let R=(0,u.gql)("\n  mutation updateCommentShortformFrontpageDropdownItem($selector: SelectorInput!, $data: UpdateCommentDataInput!) {\n    updateComment(selector: $selector, data: $data) {\n      data {\n        ...CommentsList\n      }\n    }\n  }\n");e.s(["default",0,e=>{let{comment:n}=e,o=(0,r.useCurrentUser)(),[s]=(0,i.useMutation)(R),l=(0,v.useCallback)(e=>()=>{s({variables:{selector:{_id:n._id},data:{shortformFrontpage:e}}})},[s,n._id]);if(!n.shortform||!o||!((0,a.userCanDo)(o,"comments.edit.all")||(0,a.userOwns)(o,n))||n.draft)return null;let c=n.shortformFrontpage?"Remove from Frontpage":"Allow on Frontpage";return(0,t.jsx)(d.default,{title:(0,S.preferredHeadingCase)(c),onClick:l(!n.shortformFrontpage)})}],124121)},245314,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(538794),i=e.i(802056),r=e.i(242021),a=e.i(530841),s=e.i(161517),l=e.i(820010),d=e.i(946271);e.i(813868);var c=e.i(122756),u=e.i(178286),m=e.i(750329),p=e.i(898641),h=e.i(727169),g=e.i(453139),f=e.i(17662),v=e.i(436790),x=e.i(934572),y=e.i(840208),b=e.i(29338),C=e.i(718996),w=e.i(317809),k=e.i(65189),j=e.i(124121),S=e.i(204597),I=e.i(773736),T=e.i(777792);let N=e=>{var o;let{comment:i,post:r}=e,s=(0,a.useCurrentUser)(),d=!!((null==(o=i.user)?void 0:o._id)&&i.user._id!==(null==s?void 0:s._id)&&!i.deleted),c=(0,n.useMemo)(()=>(e=>{var t;let{comment:n,post:o,currentUser:i,enableSubscribeToCommentUser:r}=e;return[{document:o,enabled:!!(o&&n.shortform&&!n.topLevelCommentId&&(null==(t=n.user)?void 0:t._id)&&n.user._id!==(null==i?void 0:i._id)),subscribeMessage:"Subscribe to ".concat(null==o?void 0:o.title),unsubscribeMessage:"Unsubscribe from ".concat(null==o?void 0:o.title),title:"New quick takes from ".concat((0,l.userGetDisplayName)(n.user)),subscriptionType:S.subscriptionTypes.newShortform},{document:n,subscribeMessage:"Subscribe to this comment's replies",unsubscribeMessage:"Unsubscribe from this comment's replies",title:"New replies to this comment",subscriptionType:S.subscriptionTypes.newReplies},{document:n.user,enabled:r,subscribeMessage:"Subscribe to posts by ".concat((0,l.userGetDisplayName)(n.user)),unsubscribeMessage:"Unsubscribe from posts by ".concat((0,l.userGetDisplayName)(n.user)),title:"New posts by ".concat((0,l.userGetDisplayName)(n.user)),subscriptionType:S.subscriptionTypes.newPosts},{document:n.user,enabled:r&&I.allowSubscribeToUserComments,subscribeMessage:"Subscribe to all comments by ".concat((0,l.userGetDisplayName)(n.user)),unsubscribeMessage:"Unsubscribe from all comments by ".concat((0,l.userGetDisplayName)(n.user)),title:"New comments by ".concat((0,l.userGetDisplayName)(n.user)),subscriptionType:S.subscriptionTypes.newUserComments}]})({comment:i,post:r,currentUser:s,enableSubscribeToCommentUser:d}),[i,r,s,d]);return i.draft?null:(0,t.jsx)(T.CombinedSubscriptionsDropdownItem,{notifyMeItems:c})};var L=e.i(144437),R=e.i(109665),_=e.i(514089);let A=(0,c.gql)("\n  mutation updatePostBanUserFromPostDropdownItem($selector: SelectorInput!, $data: UpdatePostDataInput!) {\n    updatePost(selector: $selector, data: $data) {\n      data {\n        ...PostsPage\n      }\n    }\n  }\n"),M=e=>{let{comment:n,post:o}=e,i=(0,a.useCurrentUser)(),{flash:r}=(0,L.useMessages)(),[s]=(0,_.useMutation)(A);return o&&(0,l.userCanModeratePost)(i,o)&&!n.draft?(0,t.jsx)(R.default,{title:"Ban user from this post",onClick:e=>{if(e.preventDefault(),confirm("Are you sure you want to ban this user from commenting on this post?")){var t,i;let e=null!=(t=n.userId)?t:"",a=[...null!=(i=o.bannedUserIds)?i:[]];a.includes(e)||a.push(e),s({variables:{selector:{_id:n.postId},data:{bannedUserIds:a}}}).then(()=>{var e;return r({messageString:"User ".concat(null==n||null==(e=n.user)?void 0:e.displayName," is now banned from commenting on ").concat(o.title)})},()=>{var e;return r({messageString:"Error banning user ".concat(null==n||null==(e=n.user)?void 0:e.displayName)})})}}}):null};var P=e.i(725788),E=e.i(673991),F=e.i(791434),B=e.i(328018),D=e.i(136541),U=e.i(476331);e.i(793794);var H=e.i(527633),W=e.i(166540),O=e.i(833851),V=e.i(823963);let z=(0,o.registerComponent)("LockThreadDialog",e=>{let{commentId:o,onClose:i,classes:r}=e,a=(0,W.default)().add(1e3,"years").toDate(),[s,l]=(0,n.useState)(a),[d]=(0,_.useMutation)((0,c.gql)("\n    mutation lockThread($commentId: String!, $until: String) {\n      lockThread(commentId: $commentId, until: $until)\n    }\n  ")),u=async()=>{await d({variables:{commentId:o,until:s.toISOString()}}),i(),window.location.reload()};return(0,t.jsxs)(O.default,{open:!0,onClose:i,children:[(0,t.jsx)(U.DialogTitle,{children:"Lock Comment Thread"}),(0,t.jsxs)(D.DialogContent,{children:[(0,t.jsx)("p",{className:r.message,children:"Prevent replies to this comment and all comments descended from it"}),(0,t.jsx)(V.DatePicker,{label:"Locked until",name:"lockUntil",value:null!=s?s:void 0,onChange:e=>l(e)})]}),(0,t.jsxs)(B.DialogActions,{children:[(0,t.jsx)(H.default,{onClick:i,children:"Cancel"}),(0,t.jsx)(H.default,{onClick:u,children:"Confirm"})]})]})},{styles:e=>({message:{fontFamily:e.isFriendlyUI?e.palette.fonts.sansSerifStack:void 0}})}),$=e=>{let{comment:n}=e,o=(0,a.useCurrentUser)(),{openDialog:i}=(0,P.useDialog)(),[r]=(0,_.useMutation)((0,c.gql)("\n    mutation unlockThread($commentId: String!) {\n      unlockThread(commentId: $commentId)\n    }\n  "));if(!(0,E.userIsAdminOrMod)(o)||n.draft)return null;let s=async()=>{await r({variables:{commentId:n._id}}),window.location.reload()};return n.repliesBlockedUntil?(0,t.jsx)(R.default,{title:(0,F.preferredHeadingCase)("Unlock Thread"),onClick:s}):(0,t.jsx)(R.default,{title:(0,F.preferredHeadingCase)("Lock Thread"),onClick:()=>{i({name:"LockThreadDialog",contents:e=>{let{onClose:o}=e;return(0,t.jsx)(z,{onClose:o,commentId:n._id})}})}})};var q=e.i(539254);let G=(0,c.gql)("\n  query CommentActions($documentId: String) {\n    post(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...PostsDetails\n      }\n    }\n  }\n"),Z=e=>{var n,o;let{comment:i,post:r,tag:s,showEdit:c}=e,S=(0,a.useCurrentUser)(),{data:I}=(0,d.useQuery)(G,{variables:{documentId:null==r?void 0:r._id},skip:!r,fetchPolicy:"cache-first"}),T=null!=(n=null==I||null==(o=I.post)?void 0:o.result)?n:void 0;return(0,t.jsxs)(k.default,{children:[(0,t.jsx)(u.default,{comment:i,showEdit:c}),(0,t.jsx)(w.default,{comment:i,post:r}),(0,t.jsx)(N,{comment:i,post:r}),!i.draft&&(0,t.jsx)(q.default,{documentId:i._id,collectionName:"Comments",preventMenuClose:!0}),(0,t.jsx)(m.default,{comment:i,post:r}),(0,t.jsx)(v.default,{comment:i,post:T}),(0,t.jsx)(x.default,{comment:i,post:T}),T&&(0,l.userCanModeratePost)(S,T)&&T.user&&(0,t.jsx)(f.default,{}),(0,t.jsx)(b.default,{comment:i,post:T}),(0,t.jsx)(j.default,{comment:i}),(0,t.jsx)(p.default,{comment:i,post:T,tag:s}),(0,t.jsx)(h.default,{comment:i}),(0,t.jsx)($,{comment:i}),(0,t.jsx)(M,{comment:i,post:T}),(0,t.jsx)(g.default,{comment:i,post:T}),(0,t.jsx)(y.default,{comment:i,post:T}),(0,t.jsx)(C.default,{comment:i})]})},Y=(0,o.registerComponent)("CommentsMenu",e=>{let{classes:o,className:l,comment:d,post:c,tag:u,showEdit:m,onSeeLess:p,isSeeLessMode:h,icon:g,ActionsComponent:f,commentMetaInfo:v}=e,[x,y]=(0,n.useState)(null),[b,C]=(0,n.useState)(!1),w=!!(0,a.useCurrentUserId)(),{captureEvent:k}=(0,s.useTracking)({eventType:"commentMenuClicked",eventProps:{commentId:d._id,itemType:"comment"}});return w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:l,onClick:e=>{k("commentMenuClicked",{open:!0}),y(e.currentTarget),C(!0)},children:g||(0,t.jsx)(i.default,{className:o.icon})}),(0,t.jsx)(r.Menu,{onClick:()=>{k("commentMenuClicked",{open:!1}),y(null)},open:!!x,anchorEl:x,className:o.root,children:b&&(0,t.jsx)(null!=f?f:Z,{comment:d,post:c,tag:u,showEdit:m,onSeeLess:p,isSeeLessMode:h,commentMetaInfo:v})})]}):null},{styles:e=>({root:{...e.isFriendlyUI&&{"& .MuiList-padding":{padding:0}}},icon:{cursor:"pointer",fontSize:"1.4rem"}})});e.s(["default",0,Y],245314)},652897,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(161517),i=e.i(566721),r=e.i(644169),a=e.i(552275),s=e.i(159211),l=e.i(937636),d=e.i(340903);e.s(["useCommentLink",0,e=>{let{comment:n,post:a,tag:c,scrollOnClick:u,scrollIntoView:m,permalink:p}=e,h=(0,l.useNavigate)(),{location:g,query:f}=(0,l.useSubscribedLocation)(),{captureEvent:v}=(0,o.useTracking)(),x=(0,i.commentGetPageUrlFromIds)({postId:null==a?void 0:a._id,postSlug:null==a?void 0:a.slug,tagSlug:null==c?void 0:c.slug,commentId:n._id,tagCommentType:n.tagCommentType,permalink:p}),y="dateIcon",b=e=>{if(v("linkClicked",{buttonPressed:e.button,furtherContext:y}),(0,d.isSpecialClick)(e)||g.pathname!==x.split("?")[0])return;e.preventDefault();let t={search:r.default.stringify({...f,commentId:n._id}),hash:void 0};h({...g,...t}),m&&m()};return u?e=>{let{children:n}=e;return(0,t.jsx)("a",{rel:"nofollow",href:x,onClick:b,children:n})}:e=>{let{children:n}=e;return(0,t.jsx)(s.Link,{rel:"nofollow",to:x,eventProps:{furtherContext:y},children:n})}},"useCommentLinkState",0,()=>{var e;let{query:t,hash:o}=(0,l.useSubscribedLocation)(),i=t.commentId,r=o.slice(1),s=null!=(e=(0,n.useSyncExternalStore)(()=>()=>{},()=>"in-context"===a.commentPermalinkStyleSetting.get()&&null!=i?i:r,()=>"in-context"===a.commentPermalinkStyleSetting.get()?i:""))?e:"";return{linkedCommentId:i,scrollToCommentId:s}}])},555336,e=>{"use strict";var t=e.i(843476),n=e.i(652897),o=e.i(343794);e.i(552275);var i=e.i(935132),r=e.i(417222),a=e.i(79732),s=e.i(429329),l=e.i(758623),d=e.i(110601);let c=(0,s.defineStyles)("CommentsItemDate",e=>({root:{...e.isFriendlyUI?{marginLeft:2,marginRight:7}:{marginLeft:2,marginRight:16},"& a:hover, & a:active":{"& $icon":{color:"".concat(e.palette.icon.dim5," !important")}},position:"relative",whiteSpace:"nowrap",zIndex:e.zIndexes.commentPermalinkIcon,color:e.palette.text.dim},answerDate:{color:"inherit"},postTitle:{marginRight:5},link:{},icon:{fontSize:"0.9rem",verticalAlign:"middle",color:e.palette.icon.dim,margin:"0 2px",position:"relative",top:-2},editedMarker:{paddingLeft:2,fontSize:12}})),u=e=>!!e.lastEditedAt&&new Date(e.lastEditedAt).getTime()-new Date(e.postedAt).getTime()>36e5,m=e=>{let{comment:n}=e;return u(n)&&n.lastEditedAt?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:["Posted ",(0,t.jsx)(l.ExpandedDate,{date:n.postedAt})]}),(0,t.jsxs)("div",{children:["Last edited ",(0,t.jsx)(l.ExpandedDate,{date:n.lastEditedAt})]})]}):(0,t.jsx)(l.ExpandedDate,{date:n.postedAt})};e.s(["default",0,e=>{let s,{comment:p,preventDateFormatting:h,className:g,...f}=e,v=(0,a.useStyles)(c),x=(0,n.useCommentLink)({comment:p,...f});s=h?void 0:p.answer?"MMM DD, YYYY":p.debateResponse?"h:mm a":void 0;let y=(0,t.jsxs)(d.default,{title:(0,t.jsx)(m,{comment:p}),children:[(0,t.jsx)(l.default,{date:p.postedAt,format:s,tooltip:!1}),u(p)&&(0,t.jsx)("span",{className:v.editedMarker,children:"*"})]});return(0,t.jsx)("span",{className:(0,o.default)(v.root,p.answer&&v.answerDate,g),children:(0,t.jsx)(r.default,{ssr:!(0,i.isLWorAF)(),fallback:y,children:(0,t.jsx)(x,{children:y})})})}])},148263,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(65189),i=e.i(109665),r=e.i(566721),a=e.i(182584),s=e.i(495791),l=e.i(820010),d=e.i(178286),c=e.i(530841),u=e.i(539254),m=e.i(849951),p=e.i(434968);e.s(["default",0,e=>{var h,g;let{comment:f,post:v,closeMenu:x,showEdit:y,onSeeLess:b,isSeeLessMode:C,commentMetaInfo:w}=e,k=(0,c.useCurrentUserId)(),j=f.postId?"".concat((0,a.postGetPageUrl)({_id:f.postId,slug:null!=(h=null==v?void 0:v.slug)?h:""}),"#").concat(f._id):(0,r.commentGetPageUrlFromIds)({commentId:f._id,postId:null!=(g=f.postId)?g:void 0,postSlug:null==v?void 0:v.slug,tagSlug:void 0}),S=(0,n.useCallback)(e=>{e.preventDefault(),window.open(j,"_blank","noopener,noreferrer"),null==x||x()},[j,x]),I=(0,n.useCallback)(()=>{navigator.clipboard.writeText(window.location.origin+j),null==x||x()},[j,x]),T=(0,n.useCallback)(()=>{null==b||b(),null==x||x()},[b,x]),N=k&&f.userId===k;return(0,t.jsxs)(o.default,{children:[!N&&(0,t.jsx)(s.default,{document:f.user,title:"Follow ".concat((0,l.userGetDisplayName)(f.user)),subscriptionType:"newActivityForFeed"}),(null==w?void 0:w.rankingMetadata)&&(0,t.jsx)(p.default,{metadata:w.rankingMetadata,sources:w.sources,commentMetaInfo:w}),(0,t.jsx)(s.default,{document:f,title:"Subscribe to replies",subscriptionType:"newReplies"}),b&&(0,t.jsx)(m.default,{onSeeLess:T,isSeeLessMode:C}),(0,t.jsx)(u.default,{documentId:f._id,collectionName:"Comments"}),(0,t.jsx)(i.default,{title:"Open in new tab",icon:"ArrowRight",onClick:S}),(0,t.jsx)(i.default,{title:"Copy link",icon:"Link",onClick:I}),(0,t.jsx)(d.default,{comment:f,showEdit:y})]})}])},94482,e=>{"use strict";var t=e.i(843476),n=e.i(271645);let o=(0,e.i(339213).default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0V0z"}),(0,t.jsx)("path",{d:"M11 9l1.42 1.42L8.83 14H18V4h2v12H8.83l3.59 3.58L11 21l-6-6 6-6z"})]}),"SubdirectoryArrowLeft");e.s(["default",0,o])},716475,e=>{"use strict";var t=e.i(843476),n=e.i(79732),o=e.i(429329),i=e.i(343794);let r=(0,o.defineStyles)("UltraFeedMetaInfoPill",e=>({base:{alignSelf:"center",height:22,lineHeight:1.4,padding:"2px 6px",fontSize:12,fontWeight:500,borderRadius:4,display:"inline-block",marginLeft:"auto",[e.breakpoints.down("sm")]:{lineHeight:1.2}},defaultColors:{color:e.palette.grey[600],border:"1px solid ".concat(e.palette.grey[400])},readItemColors:{color:e.palette.grey[800],border:"1px solid ".concat(e.palette.grey[600])},hideOnDesktop:{display:"none",[e.breakpoints.down("sm")]:{display:"inline-block"}}})),a={read:"Read",quickTake:"Quick Take"};e.s(["default",0,e=>{let{type:o,readStyles:s,className:l}=e,d=(0,n.useStyles)(r),c=s||"read"===o;return(0,t.jsx)("span",{className:(0,i.default)(d.base,{[d.defaultColors]:!c,[d.readItemColors]:c},l),children:a[o]})}])},231080,e=>{"use strict";e.s(["metaNoticeStyles",0,e=>({color:e.palette.lwTertiary.main,fontSize:"1rem",marginLeft:e.spacing.unit/2,...e.typography.italic})])},222454,e=>{"use strict";e.s(["default",()=>T]);var t=e.i(843476),n=e.i(271645),o=e.i(161517),i=e.i(673991),r=e.i(530841),a=e.i(79732),s=e.i(429329),l=e.i(343794),d=e.i(182584),c=e.i(244389),u=e.i(245314),m=e.i(555336),p=e.i(636492),h=e.i(148263),g=e.i(94482),f=e.i(110601),v=e.i(813292),x=e.i(834562),y=e.i(716475),b=e.i(914682),C=e.i(159211),w=e.i(231080),k=e.i(495314);let j=(0,s.defineStyles)("UltraFeedCommentsItemMeta",e=>({root:{position:"relative",display:"flex",flexWrap:"wrap",flexDirection:"column",alignItems:"baseline",justifyContent:"space-between",color:"".concat(e.palette.ultraFeed.dim," !important"),fontFamily:e.palette.fonts.sansSerifStack,fontSize:e.typography.body2.fontSize,[e.breakpoints.down("sm")]:{fontSize:e.typography.ultraFeedMobileStyle.fontSize},"& > *":{},"& a:hover, & a:active":{textDecoration:"none",color:"".concat(e.palette.linkHover.dim," !important")}},metaRow:{display:"flex",flexWrap:"nowrap",alignItems:"baseline",position:"relative",width:"100%",paddingRight:16,[e.breakpoints.down("sm")]:{paddingRight:20}},tripleDotMenu:{opacity:.7,position:"absolute",right:-20,top:-2,zIndex:10,padding:"4px 10px 4px 4px",[e.breakpoints.down("sm")]:{marginRight:0,right:-8,padding:"4px"}},commentShortformIconContainer:{position:"relative",bottom:0,cursor:"pointer","&:hover":{opacity:.7}},commentShortformIcon:{[e.breakpoints.down("sm")]:{bottom:10},cursor:"pointer",color:e.palette.grey[600],width:13,height:13,marginLeft:-2,marginRight:e.spacing.unit,position:"relative",top:2},debateIconContainer:{position:"relative",bottom:0,display:"flex",alignItems:"center",cursor:"pointer","&:hover":{opacity:.7}},debateIcon:{cursor:"pointer",color:e.palette.grey[500],width:16,height:16,marginLeft:-2,marginRight:6,position:"relative",top:2},username:{marginRight:8,textWrap:"nowrap",fontWeight:600,color:"".concat(e.palette.text.primary," !important")},moderatorHat:{marginRight:12,whiteSpace:"nowrap"},metaNotice:{...(0,w.metaNoticeStyles)(e)},reviewForNotice:{marginRight:8,fontSize:"inherit",whiteSpace:"nowrap"},newContentDateStyling:{},date:{marginRight:12,fontSize:e.typography.body2.fontSize,[e.breakpoints.down("sm")]:{...e.typography.ultraFeedMobileStyle}},sameRowPostTitle:{maxWidth:"70%",position:"relative",marginLeft:"auto",marginRight:8,cursor:"pointer",overflow:"hidden",wordBreak:"break-all",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":1,backgroundColor:"transparent",transition:"background-color 1.5s ease-out",padding:"2px 8px",borderRadius:4,[e.breakpoints.down("sm")]:{marginRight:20}},sameRowPostTitleHighlighted:{backgroundColor:"".concat(e.palette.primary.main,"3b"),transition:"none"},abovePostTitle:{marginBottom:8,marginRight:16,color:e.palette.link.dim,fontSize:"1.3rem",lineHeight:e.typography.body2.lineHeight,fontFamily:e.palette.fonts.sansSerifStack,fontStyle:"italic",cursor:"pointer",overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":2,[e.breakpoints.down("sm")]:{fontSize:e.typography.ultraFeedMobileStyle.fontSize},backgroundColor:"transparent",transition:"background-color 1.5s ease-out",padding:"4px 0px",borderRadius:4},abovePostTitleHighlighted:{backgroundColor:"".concat(e.palette.primary.main,"3b"),transition:"none"},postTitleReplyTo:{marginRight:4},postTitleLinkOrButtonSpan:{color:e.palette.primary.main},hideOnDesktop:{display:"none",[e.breakpoints.down("sm")]:{display:"unset"}},hideOnMobile:{[e.breakpoints.down("sm")]:{display:"none"}},replyingToIcon:{fontSize:14,transform:"rotate(90deg)",marginRight:4,marginLeft:-2},replyingToIconClickable:{cursor:"pointer","&:hover":{opacity:.7}}})),S=e=>{let{comment:n,post:i,isTopLevelComment:r,postInitiallyExpanded:s,parentAuthorName:d,onReplyIconClick:c,onPostTitleHighlight:u}=e,m=(0,a.useStyles)(j),{captureEvent:p}=(0,o.useTracking)(),h=(e,t)=>{e.stopPropagation(),p("shortform"===t?"ultraFeedShortformIconClicked":"ultraFeedDebateIconClicked"),u&&u(t)};if(!i)return null;if(!r||s){let e=r?"Replying to ".concat(i.title):"Replying to ".concat(null!=d?d:"parent comment");return(0,t.jsx)(f.default,{title:e,placement:"top",children:(0,t.jsx)(g.default,{className:(0,l.default)(m.replyingToIcon,{[m.replyingToIconClickable]:!!c}),onClick:e=>{e.stopPropagation(),p("ultraFeedReplyArrowClicked"),c&&c()}})})}if(r)if(n.shortform)return(0,t.jsx)(f.default,{title:i.title,placement:"top",children:(0,t.jsx)("div",{className:m.commentShortformIconContainer,onClick:e=>h(e,"shortform"),children:(0,t.jsx)(v.default,{icon:"Shortform",className:m.commentShortformIcon})})});else return(0,t.jsx)(f.default,{title:"Replying to ".concat(i.title),placement:"top",children:(0,t.jsx)("div",{className:m.debateIconContainer,onClick:e=>h(e,"debate"),children:(0,t.jsx)(x.default,{className:m.debateIcon})})})},I=e=>{let{comment:n,position:o,enabled:i,onPostTitleClick:r,highlighted:s}=e,u=(0,a.useStyles)(j),{post:m}=n;return i&&m&&!m.shortform?(0,t.jsx)("div",{className:(0,l.default)({[u.sameRowPostTitle]:"metarow"===o,[u.sameRowPostTitleHighlighted]:"metarow"===o&&s,[u.hideOnMobile]:"metarow"===o||m.shortform,[u.abovePostTitle]:"above"===o,[u.abovePostTitleHighlighted]:"above"===o&&s,[u.hideOnDesktop]:"above"===o}),children:(0,t.jsxs)(c.default,{postId:m._id,placement:"top",As:"span",children:["above"===o&&(0,t.jsx)("span",{className:u.postTitleReplyTo,children:"Replying to"}),(0,t.jsx)("a",{href:(0,d.postGetPageUrl)(m),onClick:e=>{0!==e.button||e.metaKey||e.ctrlKey||e.altKey||e.shiftKey||!r||(e.preventDefault(),r())},className:u.postTitleLinkOrButtonSpan,children:m.title})]})}):null},T=e=>{var s;let{comment:d,metaInfo:c,setShowEdit:g,hideDate:f,hideActionsMenu:v,showPostTitle:x,postInitiallyExpanded:w=!1,onPostTitleClick:T,parentAuthorName:N,onReplyIconClick:L,onSeeLess:R,isSeeLessMode:_}=e,A=(0,a.useStyles)(j),M=(0,r.useCurrentUser)(),[P,E]=(0,n.useState)(!1),{post:F}=d,{feedType:B}=(0,b.useUltraFeedContext)();if(!F)return null;let D=d.hideModeratorHat?"Moderator Comment (Invisible)":"Moderator Comment",U=d.moderatorHat&&(!d.hideModeratorHat||(0,i.userIsAdmin)(M)),H=d.postedAt&&new Date(d.postedAt)>new Date(Date.now()-6048e5),W=!d.parentCommentId,O=!!c.lastViewed||!!c.lastInteracted,V=!!c.fromSubscribedUser;return(0,t.jsxs)("div",{className:A.root,children:[(0,t.jsx)("div",{className:A.tripleDotMenu,children:!v&&g&&F&&(0,t.jsx)(o.AnalyticsContext,{pageElementContext:"tripleDotMenu",children:(0,t.jsx)(u.default,{comment:d,post:F,showEdit:g,onSeeLess:R,isSeeLessMode:_,ActionsComponent:h.default,commentMetaInfo:c})})}),(0,t.jsx)(I,{enabled:x,position:"above",comment:d,onPostTitleClick:T,highlighted:P}),(0,t.jsxs)("div",{className:A.metaRow,children:[(0,t.jsx)(S,{comment:d,post:F,isTopLevelComment:W,postInitiallyExpanded:w,parentAuthorName:N,onReplyIconClick:L,onPostTitleHighlight:e=>{E(!0),setTimeout(()=>{E(!1)},100)}}),(0,t.jsx)(p.default,{user:null!=(s=d.user)?s:void 0,className:A.username,tooltipPlacement:"bottom-start",showSubscribedIcon:"following"===B&&V}),!f&&F&&(0,t.jsx)("span",{className:(0,l.default)({[A.newContentDateStyling]:H}),children:(0,t.jsx)(m.default,{comment:d,post:F,className:A.date})}),d.reviewingForReview&&(0,t.jsx)(C.Link,{to:(0,k.getReviewLink)(d.reviewingForReview),className:(0,l.default)(A.metaNotice,A.reviewForNotice),children:"Review for ".concat(d.reviewingForReview," Review")}),F.shortform&&W&&(0,t.jsx)(y.default,{type:"quickTake",readStyles:O}),U&&(0,t.jsx)("span",{className:A.moderatorHat,children:D}),(0,t.jsx)(I,{enabled:x,position:"metarow",comment:d,onPostTitleClick:T,highlighted:P})]})]})}},113436,e=>{"use strict";e.s(["default",()=>s]);var t=e.i(843476),n=e.i(343794),o=e.i(823567),i=e.i(239832),r=e.i(946271);e.i(813868);let a=(0,e.i(122756).gql)("\n  query CommentEdit($documentId: String) {\n    comment(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...CommentEdit\n      }\n    }\n  }\n"),s=e=>{var s,l;let{comment:d,successCallback:c,cancelCallback:u,className:m,formProps:p={},prefilledProps:h}=e,{data:g,loading:f}=(0,r.useQuery)(a,{variables:{documentId:d._id},fetchPolicy:"network-only"});if(f)return(0,t.jsx)(i.default,{});let v=null!=(s=null==g||null==(l=g.comment)?void 0:l.result)?s:void 0;return(0,t.jsx)("div",{className:(0,n.default)("comments-edit-form",m),children:(0,t.jsx)(o.CommentForm,{initialData:v,prefilledProps:h,onSuccess:c,onCancel:u,submitLabel:d.draft?"Publish":"Save",disableSubmitDropdown:!d.draft})})}},25533,e=>{"use strict";var t=e.i(843476),n=e.i(271645);let o=(0,e.i(339213).default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,t.jsx)("path",{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"})]}),"HelpOutline");e.s(["default",0,o])},39211,e=>{"use strict";var t=e.i(843476),n=e.i(25533);let o=(0,e.i(538794).registerComponent)("LWHelpIcon",e=>{let{classes:o}=e;return(0,t.jsx)("span",{children:(0,t.jsx)(n.default,{className:o.icon})})},{styles:e=>({icon:{fontSize:"1.3em",width:"1.5em",position:"relative",top:".19em",color:e.palette.grey[500]}})});e.s(["default",0,o])},168455,e=>{"use strict";var t=e.i(843476),n=e.i(538794),o=e.i(343794),i=e.i(813292);let r=(0,n.registerComponent)("SettingsButton",e=>{let{classes:n,className:r,onClick:a,showIcon:s=!0,label:l="",useArrow:d,textShadow:c=!1,labelClassName:u}=e,m=d?"ThickChevronDown":"Settings";return l?(0,t.jsxs)("span",{className:(0,o.default)(n.iconWithLabelGroup,r),onClick:a,children:[s&&(0,t.jsx)(i.default,{icon:m,className:(0,o.default)(n.icon,n.iconWithLabel,{[n.rotate180]:"up"===d})}),(0,t.jsx)("span",{className:(0,o.default)(n.label,{[n.textShadow]:c},u),children:l})]}):(0,t.jsx)(i.default,{icon:m,className:(0,o.default)(n.icon,r,{[n.rotate180]:"up"===d}),onClick:a})},{styles:e=>({icon:{cursor:"pointer",color:e.palette.grey[600],fontSize:18},iconWithLabelGroup:{display:"flex",alignItems:"center",cursor:"pointer"},iconWithLabel:{marginRight:4,marginLeft:4},label:{...e.typography.body2,fontSize:14,color:e.palette.grey[600],...e.isFriendlyUI?{fontWeight:600}:{}},blackLabel:{color:e.palette.text.primary},whiteLabel:{[e.breakpoints.up("lg")]:{color:e.palette.text.alwaysWhite}},textShadow:{color:e.palette.text.primary,textShadow:"0 0 2px ".concat(e.palette.text.invertedBackgroundText)},rotate180:{transform:"rotate(180deg)"}}),stylePriority:-1});e.s(["default",0,r])},258169,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(345955),i=e.i(338552),r=e.i(600723),a=e.i(530841),s=e.i(552275);let l=new o.TupleSet(["list","card"]),d=e=>l.has(e),c=()=>{let e=s.postsListViewTypeSetting.get();return d(e)?e:"list"},u=(0,n.createContext)({getView:c,setView:()=>console.error("Can't set view outside of PostsListViewProvider")});e.s(["PostsListViewProvider",0,e=>{let{children:o}=e,{cookieValue:s,setCookieValue:l}=(()=>{let e=(0,a.useCurrentUser)(),[t,o]=(0,i.useCookiesWithConsent)([r.POSTS_LIST_VIEW_TYPE_COOKIE]),s=(0,n.useCallback)(e=>{o(r.POSTS_LIST_VIEW_TYPE_COOKIE,e,{path:"/"})},[o]),l=e?t[r.POSTS_LIST_VIEW_TYPE_COOKIE]:c();return{cookieValue:d(l)?l:null,setCookieValue:s}})(),[m,p]=(0,n.useState)(null!=s?s:c()),h=(0,n.useCallback)(()=>m,[m]),g=(0,n.useCallback)(e=>{p(e),l(e)},[l]);return(0,t.jsx)(u.Provider,{value:{getView:h,setView:g},children:o})},"isPostsListViewType",0,d,"usePostsListView",0,()=>(0,n.useContext)(u)])},74453,e=>{"use strict";var t=e.i(271645),n=e.i(530841),o=e.i(831195),i=e.i(182584),r=e.i(161517),a=e.i(791434),s=e.i(258169);e.i(813868);var l=e.i(122756),d=e.i(846552),c=e.i(774010);let u=(0,l.gql)("\n  query postsListWithVotes($selector: PostSelector, $limit: Int, $enableTotal: Boolean) {\n    posts(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...PostsListWithVotes\n      }\n      totalCount\n    }\n  }\n"),m=(0,l.gql)("\n  query postsListTagWithVotes($selector: PostSelector, $limit: Int, $enableTotal: Boolean, $tagId: String) {\n    posts(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...PostsListTagWithVotes\n      }\n      totalCount\n    }\n  }\n");e.s(["usePostsList",0,e=>{var l;let{children:p,terms:h,dimWhenLoading:g=!1,topLoading:f=!1,showLoading:v=!0,showLoadMore:x=!0,alwaysShowLoadMore:y=!1,showNoResults:b=!0,hideLastUnread:C=!1,showPostedAt:w=!0,enableTotal:k=!1,showNominationCount:j,showReviewCount:S,showDraftTag:I=!0,tagId:T,dense:N,defaultToShowUnreadComments:L,itemsPerPage:R=25,placeholderCount:_,showKarma:A=!0,hideAuthor:M=!1,hideTag:P=!1,hideTrailingButtons:E=!1,hideTagRelevance:F=!1,tooltipPlacement:B=(0,a.isFriendlyUI)()?"bottom-start":"bottom-end",boxShadow:D=!0,curatedIconLeft:U=!1,showFinalBottomBorder:H=!1,hideHiddenFrontPagePosts:W=!1,hideShortform:O=!1,loadMoreMessage:V,viewType:z="list",showPlacement:$=!1,order:q,...G}=e,[Z,Y]=(0,t.useState)(!1),{view:Q="default",limit:K=10,...X}=null!=h?h:{},{data:J,error:ee,loading:et,loadMoreProps:en}=(0,d.useQueryWithLoadMore)(T?m:u,{variables:{selector:{[Q]:X},limit:K,enableTotal:k,...(T?{extraVariables:{tagId:"String"},extraVariablesValues:{tagId:T}}:{}).extraVariablesValues},fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",itemsPerPage:R,alwaysShowLoadMore:y}),eo=null==J||null==(l=J.posts)?void 0:l.results,{loadMore:ei}=en,er={},ea=(0,n.useCurrentUser)();if(null==eo?void 0:eo.length){if(C&&!Z)for(let e=eo.length-1;e>=0;e--)if(eo[e].isRead&&e>0)er[eo[e]._id]=!0;else break;if(O)for(let e of eo)e.shortform&&(er[e._id]=!0);if(ea&&W)for(let e of ea.hiddenPostsMetadata||[])er[e.postId]=!0}let es=!!((null==eo?void 0:eo.length)&&eo.length>=K)||y,el=eo?(0,c.default)(eo,e=>e._id):eo,ed=q&&el?(0,o.default)(el,e=>q.indexOf(e._id)):eo;L&&ed&&(ed=(0,o.default)(ed,e=>{let t=(0,i.postGetLastCommentedAt)(e);return!e.lastVisitedAt||!t||new Date(e.lastVisitedAt)>=t}));let ec=(ed||[]).map(e=>e._id),eu=(ed||[]).map(e=>({postId:e._id,score:e.score,baseScore:e.baseScore})),{getView:em}=(0,s.usePostsListView)(),ep=em(),eh="fromContext"===z?ep:z;(0,r.useOnMountTracking)({eventType:"postList",eventProps:{postIds:ec,postVisibility:er,postMountData:eu,viewType:eh},captureOnMount:e=>e.postIds.length>0,skip:!ec.length||et});let eg=ed&&ed.length>1,ef=null==ed?void 0:ed.filter(e=>{let{_id:t}=e;return!(t in er)}).map((e,t)=>({post:e,index:t,terms:h,showNominationCount:j,showReviewCount:S,showDraftTag:I,dense:N,showKarma:A,hideAuthor:M,hideTag:P,hideTrailingButtons:E,curatedIconLeft:U,tagRel:T&&!F?e.tagRel:void 0,defaultToShowUnreadComments:L,showPostedAt:w,showBottomBorder:H||eg&&t<ed.length-1,tooltipPlacement:B,viewType:eh}));return{children:p,showNoResults:b,hideLastUnread:C,showLoadMore:x,showLoading:v,dimWhenLoading:g,topLoading:f,boxShadow:D,loading:et,error:ee,loadMore:(0,t.useCallback)(()=>{ei(),Y(!0)},[ei]),loadMoreProps:{...en,message:V},maybeMorePosts:es,orderedResults:ed,itemProps:ef,limit:K,showFinalBottomBorder:H,placeholderCount:_,viewType:eh,showPlacement:$,...G}}])},177607,e=>{"use strict";var t=e.i(271645),n=e.i(995669),o=e.i(530841),i=e.i(182584),r=e.i(644169),a=e.i(994034),s=e.i(656702),l=e.i(552275),d=e.i(944045);let c=(e,t)=>!!e&&!!t&&!!t.forum&&(e.sticky||t.af&&e.afSticky||t.meta&&e.metaSticky);e.s(["usePostsItem",0,e=>{let{post:u,tagRel:m=null,defaultToShowComments:p=!1,sequenceId:h,chapter:g,terms:f,resumeReading:v,dismissRecommendation:x,toggleDeleteDraft:y,showBottomBorder:b=!0,showDraftTag:C=!0,showPersonalIcon:w=!0,showIcons:k=!0,showPostedAt:j=!0,defaultToShowUnreadComments:S=!1,dense:I=!1,bookmark:T=!1,showNominationCount:N=!1,showReviewCount:L=!1,hideAuthor:R=!1,hideTag:_=!1,hideTrailingButtons:A=!1,tooltipPlacement:M="bottom-end",curatedIconLeft:P=!1,strikethroughTitle:E=!1,translucentBackground:F=!1,forceSticky:B=!1,showReadCheckbox:D=!1,showMostValuableCheckbox:U=!1,viewType:H="list",showKarma:W=!0,useCuratedDate:O=!0,isVoteable:V=!1,recombeeRecommId:z,emphasizeIfNew:$=!1,showCommentsIcon:q=!0,className:G}=e,[Z,Y]=(0,t.useState)(p),[Q,K]=(0,t.useState)(!1),[X,J]=(0,t.useState)(!1),{isRead:ee,recordPostView:et}=(0,n.useRecordPostView)(u),en=(0,o.useCurrentUser)(),eo=(0,t.useMemo)(()=>({recombeeOptions:{recommId:z}}),[z]),ei=(0,t.useCallback)(()=>{et({post:u,extraEventProperties:{type:"toggleComments"},recommendationOptions:eo}),Y(!Z),K(!0)},[u,et,Y,Z,K,eo]),er=(0,t.useCallback)(()=>{et({post:u,extraEventProperties:{type:"toggleDialogueMessages"},recommendationOptions:eo}),J(!X)},[u,et,J,X,eo]),ea=(e,t)=>ee&&!!t&&(!e||e<t)&&!Q,es=(0,i.postGetLastCommentedAt)(u),el=(0,i.postGetLastCommentPromotedAt)(u),ed=ea((0,d.maybeDate)(u.lastVisitedAt),es),ec=ea((0,d.maybeDate)(u.lastVisitedAt),es),eu=ea((0,d.maybeDate)(u.lastVisitedAt),el),em=u.draft&&!u.debate?"/editPost?".concat(r.default.stringify({postId:u._id,eventForm:u.isEvent})):(0,i.postGetPageUrl)(u,!1,h||(null==g?void 0:g.sequenceId));z&&l.recombeeEnabledSetting.get()&&(em="".concat(em,"?").concat(s.RECOMBEE_RECOMM_ID_QUERY_PARAM,"=").concat(z));let ep=!!(en&&v),eh=y&&(()=>y(u)),eg=!!(en&&u.draft&&(0,i.postCanDelete)(en,u)&&eh),ef={view:"postsItemComments",limit:7,postId:u._id,after:S&&!Z?u.lastVisitedAt:null},ev={pageElementContext:"postItem",postId:u._id,isSticky:c(u,f),viewType:H},ex=(0,a.getMarketInfo)(u),ey=!!z;return{post:u,postLink:em,commentsLink:em+"#comments",commentCount:(0,i.postGetCommentCount)(u),primaryTag:_?null:(0,i.postGetPrimaryTag)(u),tagRel:m,resumeReading:v,sticky:B||c(u,f),renderComments:Z||S&&ec,renderDialogueMessages:X,condensedAndHiddenComments:S&&!Z,toggleComments:ei,toggleDialogueMessages:er,showAuthor:!u.isEvent&&!R,showDate:j&&!v,showTrailingButtons:!A,showMostValuableCheckbox:U,showNominationCount:N,showReviewCount:L,showIcons:k,showKarma:W,useCuratedDate:O,hideTag:_,annualReviewMarketInfo:ex,showReadCheckbox:D,showDraftTag:C,showPersonalIcon:w,showBottomBorder:b,showDismissButton:ep,showArchiveButton:eg,showCommentsIcon:q,onDismiss:x,onArchive:eh,hasUnreadComments:ed,hasNewPromotedComments:eu,commentTerms:ef,analyticsProps:ev,translucentBackground:F,isRead:ee,tooltipPlacement:M,dense:I,curatedIconLeft:P,strikethroughTitle:E,viewType:H,bookmark:T,isVoteable:V,isRecommendation:ey,emphasizeIfNew:$,className:G}}])},112105,e=>{"use strict";e.s(["CuratedIcon",()=>b,"PostsItemIcons",()=>w]);var t=e.i(843476),n=e.i(271645),o=e.i(343794),i=e.i(182584),r=e.i(236631),a=e.i(159211),s=e.i(791434),l=e.i(552275),d=e.i(935132),c=e.i(161517),u=e.i(853333),m=e.i(712434),p=e.i(530841),h=e.i(763011),g=e.i(110601),f=e.i(813292),v=e.i(708751),x=e.i(79732);let y=(0,e.i(429329).defineStyles)("PostsItemIcons",e=>({iconSet:{marginLeft:e.isFriendlyUI?6:e.spacing.unit,marginRight:e.isFriendlyUI?2:e.spacing.unit,lineHeight:"1.0rem","&:empty":{display:"none"}},postIcon:{marginRight:4},icon:{"&&":{"--icon-size":"15.6px",fontSize:"15.6px",color:e.isFriendlyUI?e.palette.grey[600]:e.palette.icon.dim4,position:"relative",top:3}},curatedIcon:{"--icon-size":"15.6px",color:e.isFriendlyUI?e.palette.grey[600]:e.palette.icon.dim4,position:"relative",top:e.isFriendlyUI?2:3},curatedIconColor:{color:e.isFriendlyUI?e.palette.icon.yellow:e.palette.primary.main},question:{"--icon-size":"15.6px",color:e.isFriendlyUI?e.palette.grey[600]:e.palette.icon.dim4,fontWeight:"600"},alignmentIcon:{"&&":{top:0}},linkIcon:{position:"relative","--icon-size":"15.6px",...e.isFriendlyUI?{top:1,color:e.palette.grey[600]}:{top:3,color:e.palette.icon.dim4}},dialogueIcon:{strokeWidth:e.isFriendlyUI?"2px":void 0},recommendationIcon:{color:e.isFriendlyUI?e.palette.grey[600]:e.palette.icon.dim4,"&:hover":{opacity:.5}}})),b=e=>{let{hasColor:n}=e,i=(0,x.useStyles)(y);return(0,t.jsx)("span",{className:i.postIcon,children:(0,t.jsx)(g.default,{title:(0,t.jsxs)("div",{children:["Curated ",(0,t.jsx)("div",{children:(0,t.jsx)("em",{children:"(click to view all curated posts)"})})]}),placement:"bottom-start",children:(0,t.jsx)(a.Link,{to:r.curatedUrl,children:(0,t.jsx)(f.default,{icon:"Star",className:(0,o.default)(i.curatedIcon,{[i.curatedIconColor]:n&&(0,s.isFriendlyUI)()})})})})})},C=e=>{let{post:n,hover:r}=e,a=(0,x.useStyles)(y),{captureEvent:s}=(0,c.useTracking)(),{setIsHiddenMutation:d}=(0,u.useSetIsHiddenMutation)(),h=(0,p.useCurrentUser)();return(0,t.jsx)("span",{className:a.postIcon,children:(0,t.jsx)(g.default,{title:"Hide this recommendation and show fewer like it",placement:"right",children:r?(0,t.jsx)(f.default,{icon:"NotInterested",onClick:e=>{e.preventDefault(),e.stopPropagation(),h&&l.recombeeEnabledSetting.get()&&(0,i.isRecombeeRecommendablePost)(n)&&m.recombeeApi.createRating(n._id,h._id,"bigDownvote"),d({postId:n._id,isHidden:!0}),s("recommendationNotInterestedClicked",{postId:n._id})},className:(0,o.default)(a.icon,a.recommendationIcon)}):(0,t.jsx)(f.default,{icon:"Sparkle",className:(0,o.default)(a.icon,a.recommendationIcon)})})})},w=e=>{let{post:r,hover:l,hideCuratedIcon:c,hidePersonalIcon:u}=e,m=(0,x.useStyles)(y),p=(0,n.useContext)(h.IsRecommendationContext);return(0,t.jsxs)("span",{className:m.iconSet,children:[r.curatedDate&&!c&&(0,t.jsx)(b,{}),r.question&&(0,t.jsx)("span",{className:m.postIcon,children:(0,t.jsx)(g.default,{title:(0,t.jsxs)("div",{children:["Question ",(0,t.jsx)("div",{children:(0,t.jsx)("em",{children:"(click to view all questions)"})})]}),placement:"right",children:(0,t.jsx)(a.Link,{to:"/questions",children:(0,t.jsx)("span",{className:m.question,children:"Q"})})})}),r.url&&(0,t.jsx)("span",{className:m.postIcon,children:(0,t.jsx)(g.default,{title:(0,t.jsxs)("div",{children:["Link Post ",(0,t.jsx)("div",{children:(0,t.jsx)("em",{children:"(Click to see linked content)"})})]}),placement:"right",children:(0,t.jsx)("a",{href:r.url,children:(0,t.jsx)(f.default,{icon:"Link",className:m.linkIcon})})})}),(r.debate||r.collabEditorDialogue)&&(0,t.jsx)("span",{className:m.postIcon,children:(0,t.jsx)(g.default,{title:"Dialogue",placement:"right",children:(0,t.jsx)(f.default,{icon:(0,s.isFriendlyUI)()?"ChatBubbleLeftRight":"ChatBubbleLeftRightFilled",className:(0,o.default)(m.icon,m.dialogueIcon)})})}),!u&&!r.frontpageDate&&!r.isEvent&&(0,t.jsx)("span",{className:m.postIcon,children:(0,t.jsx)(g.default,{title:"Personal Blogpost",placement:"right",children:(0,t.jsx)(f.default,{icon:"User",className:m.icon})})}),!(0,d.isAF)()&&r.af&&(0,t.jsx)("span",{className:m.postIcon,children:(0,t.jsx)(g.default,{title:(0,t.jsxs)("div",{children:["Crossposted from AlignmentForum.org",(0,t.jsx)("div",{children:(0,t.jsx)("em",{children:"(Click to visit AF version)"})})]}),placement:"right",children:(0,t.jsx)("a",{href:"https://alignmentforum.org".concat((0,i.postGetPageUrl)(r)),children:(0,t.jsx)(v.default,{className:(0,o.default)(m.icon,m.alignmentIcon)})})})}),p&&(0,t.jsx)(C,{post:r,hover:l})]})}},568769,e=>{"use strict";var t=e.i(843476),n=e.i(271645);let o=(0,e.i(339213).default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("path",{d:"M18.6 6.62c-1.44 0-2.8.56-3.77 1.53L12 10.66 10.48 12h.01L7.8 14.39c-.64.64-1.49.99-2.4.99-1.87 0-3.39-1.51-3.39-3.38S3.53 8.62 5.4 8.62c.91 0 1.76.35 2.44 1.03l1.13 1 1.51-1.34L9.22 8.2C8.2 7.18 6.84 6.62 5.4 6.62 2.42 6.62 0 9.04 0 12s2.42 5.38 5.4 5.38c1.44 0 2.8-.56 3.77-1.53l2.83-2.5.01.01L13.52 12h-.01l2.69-2.39c.64-.64 1.49-.99 2.4-.99 1.87 0 3.39 1.51 3.39 3.38s-1.52 3.38-3.39 3.38c-.9 0-1.76-.35-2.44-1.03l-1.14-1.01-1.51 1.34 1.27 1.12c1.02 1.01 2.37 1.57 3.82 1.57 2.98 0 5.4-2.41 5.4-5.38s-2.42-5.37-5.4-5.37z"}),(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0V0z"})]}),"AllInclusive");e.s(["default",0,o])},119902,e=>{"use strict";let t=["/about","/account","/bestoflesswrong/2018","/bestoflesswrong/2019","/books/2018","/books/2019","/codex/[slug]","/collaborateOnPost","/contact","/donate","/drafts","/editPost","/events/[_id]/[slug]","/events/[_id]","/faq","/g/[groupId]/p/[_id]","/highlights/[slug]","/hpmor/[slug]","/login","/manageSubscriptions","/newPost","/petrov/ceremony","/postAnalytics","/posts/[_id]/[slug]","/posts/[_id]","/posts/slug/[slug]","/posts/slug","/rationality/[slug]","/resendVerificationEmail","/s/[_id]/p/[postId]","/search","/users/[slug]/edit","/w/[slug]","/w/[slug]/discussion","/w/create"];function n(e){var n=e,o=t;let i=n.split("/");for(let e of o){let t=e.split("/");if(i.length===t.length&&i.every((e,n)=>i[n]===t[n]||t[n].startsWith("[")))return!0}return!1}e.s(["routeHasWhiteBackground",()=>n])},109270,e=>{"use strict";var t=e.i(152100),n=e.i(119902);e.s(["useIsOnGrayBackground",0,()=>{let e=(0,t.usePrerenderablePathname)();return!(0,n.routeHasWhiteBackground)(e)}])},93495,e=>{"use strict";e.s(["default",()=>T]);var t=e.i(843476),n=e.i(538794),o=e.i(343794),i=e.i(530841),r=e.i(937636),a=e.i(159211),s=e.i(182584),l=e.i(358466),d=e.i(128380),c=e.i(645446),u=e.i(959294),m=e.i(35693),p=e.i(289078),h=e.i(112105),g=e.i(813292),f=e.i(956277),v=e.i(552275),x=e.i(935132),y=e.i(51160),b=e.i(162927),C=e.i(568769),w=e.i(598113),k=e.i(109270);let j=new Map([[v.amaTagIdSetting,y.default],[v.openThreadTagIdSetting,C.default]]),S=new Map([[v.startHerePostIdSetting,b.default],[{get:()=>{var e,t;return(0,x.isEAForum)()?null==(t=v.annualReviewAnnouncementPostPathSetting.get())||null==(e=t.match(/^\/posts\/([a-zA-Z\d]+)/))?void 0:e[1]:null}},w.default]]),I=e=>{let{children:n}=e;return(0,t.jsx)(t.Fragment,{children:n})},T=(0,n.registerComponent)("PostsTitle",e=>{var n;let{post:c,postLink:v,sticky:x,read:y,showPersonalIcon:b=!0,showDraftTag:C=!0,wrap:w=!1,showIcons:T=!0,isLink:N=!0,curatedIconLeft:L=!0,strikethroughTitle:R=!1,Wrapper:_=I,showEventTag:A,linkEventProps:M,postItemHovered:P,className:E,classes:F}=e,B=(0,i.useCurrentUserId)(),{pathname:D}=(0,r.useLocation)(),{event:U,current:H}=null!=(n=((e,t)=>{let{currentForumEvent:n,isEventPost:o}=(0,u.useCurrentAndRecentForumEvents)();if(!e)return;let i=o(t,{includeRecent:!0});if(null==i?void 0:i.tag){var r;return i.tag._id===(null==n||null==(r=n.tag)?void 0:r._id)?{event:i,current:!0}:{event:i,current:!1}}})(null!=A&&A,c))?n:{},W=(0,p.useTheme)(),O=c.draft&&c.userId!==B&&c.shareWithUsers,V=(0,k.useIsOnGrayBackground)(),z=D!==(0,l.getCommunityPath)()&&"/pastEvents"!==D&&"/upcomingEvents"!==D&&!D.includes("/events")&&!D.includes("/groups")&&!D.includes("/community"),$=v||(0,s.postGetPageUrl)(c),q=(e=>{let t=Array.from(S.keys()).find(t=>e._id===t.get());if(t)return S.get(t);let n=Array.from(j.keys()),o="tags"in e?e.tags:[];if(!o)return null;let i=n.find(e=>o.find(t=>t._id===e.get()));return i?j.get(i):null})(c),G=(0,t.jsxs)("span",{children:[x&&(0,t.jsx)("span",{className:F.sticky,children:(0,t.jsx)(g.default,{icon:"Pin",className:F.stickyIcon})}),q&&(0,t.jsx)(q,{className:F.primaryIcon}),c.draft&&C&&(0,t.jsx)("span",{className:F.tag,children:"[Draft]"}),c.isFuture&&(0,t.jsx)("span",{className:F.tag,children:"[Pending]"}),c.unlisted&&(0,t.jsx)("span",{className:F.tag,children:"[Unlisted]"}),O&&(0,t.jsx)("span",{className:F.tag,children:"[Shared]"}),c.isEvent&&z&&(0,t.jsx)("span",{className:F.tag,children:"[Event]"}),(0,t.jsx)(_,{children:c.title})]});return(0,t.jsxs)("span",{className:(0,o.default)(F.root,y&&F.read,w&&F.wrap,V&&F.onGrayBackground,R&&F.strikethroughTitle,E),children:[T&&L&&c.curatedDate&&(0,t.jsx)("span",{className:F.leftCurated,children:(0,t.jsx)(d.InteractionWrapper,{className:F.interactionWrapper,children:(0,t.jsx)(h.CuratedIcon,{hasColor:!0})})}),(0,t.jsx)("span",{className:w?void 0:F.eaTitleDesktopEllipsis,children:N?(0,t.jsx)(a.Link,{to:$,doOnDown:!0,eventProps:M,children:G}):G}),T&&(0,t.jsx)("span",{className:F.hideXsDown,children:(0,t.jsx)(d.InteractionWrapper,{className:F.interactionWrapper,children:(0,t.jsx)(h.PostsItemIcons,{post:c,hideCuratedIcon:L,hidePersonalIcon:!b,hover:P})})}),(null==U?void 0:U.tag)&&(0,t.jsx)(d.InteractionWrapper,{className:F.interactionWrapper,children:(0,t.jsx)(f.default,{tagSlug:U.tag.slug,className:F.highlightedTagTooltip,children:(0,t.jsx)(a.Link,{doOnDown:!0,to:(0,m.tagGetUrl)(U.tag),className:F.eventTagLink,children:(0,t.jsx)("span",{className:(0,o.default)(F.eventTag,{[F.eventTagBordered]:!H}),style:{"--post-title-tag-background":H?U.lightColor:W.palette.tag.background,"--post-title-tag-foreground":H?U.darkColor:W.palette.tag.text},children:U.tag.shortName||U.tag.name})})})})]})},{styles:e=>({root:{color:e.palette.text.normal,position:"relative",lineHeight:"1.7rem",fontWeight:e.isFriendlyUI?600:void 0,fontFamily:e.isFriendlyUI?e.palette.fonts.sansSerifStack:e.typography.postStyle.fontFamily,zIndex:e.zIndexes.postItemTitle,[e.breakpoints.down("xs")]:{paddingLeft:2},overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",alignItems:"center",...e.typography.postsItemTitle,[e.breakpoints.down("xs")]:{whiteSpace:"unset",lineHeight:"1.8rem"},marginRight:e.spacing.unit},onGrayBackground:{...e.isBookUI&&e.dark&&{color:e.palette.greyAlpha(1)}},wrap:{whiteSpace:"normal"},sticky:{paddingLeft:e.isFriendlyUI?2:void 0,paddingRight:e.isFriendlyUI?8:10,position:"relative",top:2,color:e.palette.icon.dim4},stickyIcon:e.isFriendlyUI?{width:16,height:16,padding:1.5,color:e.palette.primary.main}:{"--icon-size":"1.2rem"},primaryIcon:{color:e.palette.icon.dim55,paddingRight:e.spacing.unit,top:-2,width:e.isFriendlyUI?26:"auto",position:"relative",verticalAlign:"middle"},read:{color:e.palette.text.dim55,"&:hover":{color:e.palette.text.normal}},eaTitleDesktopEllipsis:e.isFriendlyUI?{"&:hover":{opacity:.5},"& a":{opacity:1},[e.breakpoints.up("sm")]:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}:{},hideXsDown:{[e.breakpoints.down("xs")]:{display:"none"}},tag:{marginRight:e.spacing.unit},popper:{opacity:1},leftCurated:{position:"relative",top:-1,marginRight:4},interactionWrapper:{display:"inline-block"},strikethroughTitle:{textDecoration:"line-through"},eventTagLink:{"&:hover":{opacity:.8}},eventTag:{...(0,c.tagStyle)(e),...(0,c.smallTagTextStyle)(e),display:"flex",alignItems:"center",marginLeft:10,padding:"0 6px",height:20,border:"none",backgroundColor:e.dark?"var(--post-title-tag-foreground)":"var(--post-title-tag-background)",color:e.dark?"var(--post-title-tag-background)":"var(--post-title-tag-foreground)"},eventTagBordered:{border:e.palette.border.normal,borderRadius:2},highlightedTagTooltip:{marginTop:-2}})})},927907,e=>{"use strict";var t=e.i(843476);e.i(552275);var n=e.i(935132),o=e.i(110601);e.s(["default",0,e=>{let{document:i,placement:r="left",linkItem:a}=e,s=(0,n.isAF)()?i.afBaseScore:i.baseScore,l=!(0,n.isAF)()&&i.af?i.afBaseScore:null;return(0,t.jsx)(o.default,{placement:r,clickable:!!a,title:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:[null!=s?s:0," karma"]}),(0,t.jsxs)("div",{children:["(",i.voteCount," votes)"]}),a,l&&(0,t.jsx)("div",{children:(0,t.jsxs)("em",{children:["(",l," karma on AlignmentForum.org)"]})})]}),children:null!=s?s:0})}])},140747,e=>{"use strict";var t=e.i(843476),n=e.i(900914),o=e.i(343794),i=e.i(927907),r=e.i(429329),a=e.i(79732);let s=(0,r.defineStyles)("EAKarmaDisplay",e=>({root:{color:e.palette.grey[600],display:"flex",flexDirection:"column",alignItems:"center"},voteArrow:{color:e.palette.grey[400],margin:"-6px 0 2px 0"}}),{stylePriority:-1});e.s(["default",0,e=>{let{post:r,className:l}=e,d=(0,a.useStyles)(s);return(0,t.jsxs)("div",{className:(0,o.default)(d.root,l),children:[(0,t.jsx)("div",{className:d.voteArrow,children:(0,t.jsx)(n.SoftUpArrowIcon,{})}),(0,t.jsx)(i.default,{document:r})]})}])},899270,e=>{"use strict";var t=e.i(843476),n=e.i(538794),o=e.i(343794),i=e.i(716512),r=e.i(181832);let a=(0,n.registerComponent)("PostsItem2MetaInfo",e=>{let{children:n,className:r,classes:a}=e;return(0,t.jsx)(i.Typography,{component:"span",className:(0,o.default)(a.metaInfo,r),variant:"body2",children:n})},{styles:e=>({metaInfo:{color:e.palette.text.dim3,...(0,r.isIfAnyoneBuildsItFrontPage)({color:e.palette.text.bannerAdOverlay}),fontSize:e.isFriendlyUI?"13px":"1.1rem",textAlign:"center",flexShrink:0,flexGrow:0}})});e.s(["default",0,a])},932835,e=>{"use strict";var t=e.i(843476),n=e.i(538794),o=e.i(224931),i=e.i(693062),r=e.i(343794),a=e.i(791434),s=e.i(935132),l=e.i(900174),d=e.i(710970),c=e.i(899270);let u=(0,n.registerComponent)("PostsItemTagRelevance",e=>{let{tagRel:n,classes:s}=e,u=(0,o.useVote)(n,"TagRels"),{fail:m,reason:p}=(0,i.useVoteButtonsDisabled)(),h=!m,g=(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:[n.baseScore," Relevance"]}),(0,t.jsxs)("div",{children:["(",n.voteCount," ",1===n.voteCount?"vote":"votes",")"]}),!h&&p]}),f=(0,a.isBookUI)();return(0,t.jsx)(c.default,{className:s.root,children:(0,t.jsx)(l.TooltipSpan,{title:g,placement:"left-end",children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:(0,r.default)(s.voteButton,s.vertLayoutVoteDown),children:(0,t.jsx)(d.default,{orientation:"down",color:"error",upOrDown:"Downvote",solidArrow:f,enabled:h,...u})}),(0,t.jsx)("div",{className:s.score,children:u.baseScore}),(0,t.jsx)("div",{className:(0,r.default)(s.voteButton,s.vertLayoutVoteUp),children:(0,t.jsx)(d.default,{orientation:"up",color:"secondary",upOrDown:"Upvote",solidArrow:f,enabled:h,...u})})]})})})},{styles:e=>({root:{width:30,position:"absolute",textAlign:"center",top:"51%",right:"calc(100% - 2px)",marginTop:-10},voteButton:{fontSize:25},vertLayoutVoteUp:{position:"absolute",left:e.isFriendlyUI?9:10,top:(0,s.forumSelect)({LessWrong:-17,AlignmentForum:-15,default:-15})},vertLayoutVoteDown:{position:"absolute",left:e.isFriendlyUI?9:10,top:(0,s.forumSelect)({LessWrong:8,AlignmentForum:10,default:10})},score:{width:"100%",fontSize:11}})});e.s(["default",0,u])},764226,e=>{"use strict";e.s(["default",()=>i]);var t=e.i(843476),n=e.i(538794),o=e.i(244389);let i=(0,n.registerComponent)("PostsItemTooltipWrapper",e=>{let{children:n,post:i,placement:r="bottom-end",As:a="div",disabled:s,className:l}=e;return(0,t.jsx)(o.default,{post:i,postsList:!0,placement:r,pageElementContext:"postItemTooltip",As:a,className:l,inlineBlock:!1,disabled:s,children:n})})},897096,e=>{"use strict";e.s(["default",()=>r]);var t=e.i(843476),n=e.i(692436),o=e.i(181232),i=e.i(64278);let r=e=>{var r,a;let{post:s,useHorizontalLayout:l,isFooter:d}=e,c=s.votingSystem||"default",u=(0,n.getVotingSystemByName)(c),m=null!=(r=null==(a=i.postBottomVotingComponents[c])?void 0:a.call(i.postBottomVotingComponents))?r:null;return m?(0,t.jsx)(m,{document:s,votingSystem:u,isFooter:d}):(0,t.jsx)(o.default,{post:s,useHorizontalLayout:l,votingSystem:u,isFooter:d})}},343745,226464,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(339213);let i=(0,o.default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("path",{d:"M20.54 5.23l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM12 17.5L6.5 12H10v-2h4v2h3.5L12 17.5zM5.12 5l.81-1h12l.94 1H5.12z"}),(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"})]}),"Archive");e.s(["default",0,i],343745);let r=(0,o.default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("defs",{children:(0,t.jsx)("path",{id:"a",d:"M0 0h24v24H0V0z"})}),(0,t.jsx)("path",{d:"M20.55 5.22l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.15.55L3.46 5.22C3.17 5.57 3 6.01 3 6.5V19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.49-.17-.93-.45-1.28zM12 9.5l5.5 5.5H14v2h-4v-2H6.5L12 9.5zM5.12 5l.82-1h12l.93 1H5.12z"})]}),"Unarchive");e.s(["default",0,r],226464)},883574,e=>{"use strict";e.s(["DismissButton",()=>p,"MENU_WIDTH",()=>u,"default",()=>h]);var t=e.i(843476),n=e.i(343745),o=e.i(226464),i=e.i(636867),r=e.i(530841),a=e.i(791434),s=e.i(79732),l=e.i(429329),d=e.i(110601),c=e.i(671396);let u=18,m=(0,l.defineStyles)("PostsItemTrailingButtons",e=>({actions:{opacity:0,display:"flex",position:"absolute",top:0,right:-u-6,width:u,height:"100%",alignItems:"center",justifyContent:"center",[e.breakpoints.down("sm")]:{display:"none"}},archiveButton:{opacity:0,display:"flex",position:"absolute",top:1,right:-3*u,width:u,height:"100%",cursor:"pointer",alignItems:"center",justifyContent:"center",[e.breakpoints.down("sm")]:{display:"none"}},dismissButton:{cursor:"pointer"}})),p=e=>{let{onDismiss:n}=e,o=(0,s.useStyles)(m);return(0,t.jsx)(d.default,{title:"Don't remind me to finish reading this sequence unless I visit it again",placement:"right",children:(0,t.jsx)(i.default,{className:o.dismissButton,onClick:n})})},h=e=>{let{post:i,showTrailingButtons:l,showMostValuableCheckbox:u,showDismissButton:h,showArchiveButton:g,resumeReading:f,onDismiss:v,onArchive:x}=e,y=(0,s.useStyles)(m),b=(0,r.useCurrentUser)();return!l||u?null:(0,t.jsxs)(t.Fragment,{children:[(h||f||(0,a.isBookUI)())&&(0,t.jsxs)("div",{className:y.actions,children:[h&&(0,t.jsx)(p,{showDismissButton:h,onDismiss:v}),(0,a.isBookUI)()&&!f&&b&&(0,t.jsx)(c.default,{post:i,vertical:!0,autoPlace:!0})]}),g&&(0,t.jsx)("div",{className:y.archiveButton,children:i.deletedDraft?(0,t.jsx)(d.default,{title:"Restore this draft (include in your main draft list)",placement:"right",children:(0,t.jsx)(o.default,{onClick:x})}):(0,t.jsx)(d.default,{title:"Archive this draft (hide from list)",placement:"right",children:(0,t.jsx)(n.default,{onClick:x})})})]})}},783959,e=>{"use strict";var t=e.i(843476),n=e.i(538794),o=e.i(716512);let i=(0,n.registerComponent)("NoContent",e=>{let{children:n,classes:i}=e;return(0,t.jsx)(o.Typography,{variant:"body2",className:i.root,children:n})},{styles:e=>({root:{color:e.palette.grey[600],margin:2*e.spacing.unit}})});e.s(["default",0,i])},87154,e=>{"use strict";var t=e.i(973327);function n(e){let n=e.map(e=>({item:e,children:[]})),o=(0,t.default)(n,e=>e.item._id),i=[];for(let e of n){let t=e.item.parentCommentId;if(t){let n=o[t];n?n.children.push(e):i.push(e)}else i.push(e)}return i}function o(e){return e.map(e=>{var t,n;return(null==e||null==(t=e.item)?void 0:t.parentCommentId)!==(null==e||null==(n=e.item)?void 0:n.topLevelCommentId)?{item:{...e.item,gapIndicator:!0},children:e.children}:e})}function i(e){return[e.item,...e.children.flatMap(i)]}e.s(["addGapIndicators",()=>o,"commentTreesEqual",()=>function e(t,n){if(!!t!=!!n)return!1;if(!t&&!n)return!0;if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++)if(t[o].item!==n[o].item||!e(t[o].children,n[o].children))return!1;return!0},"flattenCommentBranch",()=>i,"unflattenComments",()=>n])},200080,e=>{"use strict";var t=e.i(843476),n=e.i(343794),o=e.i(791434),i=e.i(429329),r=e.i(79732);let a=(0,i.defineStyles)("CommentFrame",e=>({node:{border:e.palette.border.commentBorder,borderRadius:e.isFriendlyUI?e.borderRadius.small:void 0,cursor:"default","&$deleted":{opacity:.6}},commentsNodeRoot:{borderRadius:e.borderRadius.small},child:{marginLeft:e.spacing.unit,marginBottom:6,borderLeft:e.palette.border.commentBorder,borderTop:e.palette.border.commentBorder,borderBottom:e.palette.border.commentBorder,borderRight:"none",borderRadius:e.isFriendlyUI?"".concat(e.borderRadius.small,"px 0 0 ").concat(e.borderRadius.small,"px"):"2px 0 0 2px"},new:{"&&":{borderLeft:"solid 5px ".concat(e.palette.secondary.light).concat(e.isFriendlyUI?"":"8c"),"&:hover":{borderLeft:"solid 5px ".concat(e.palette.secondary.main).concat(e.isFriendlyUI?"":"8c")}}},deleted:{},isAnswer:{border:e.palette.border.answerBorder},answerChildComment:{marginBottom:e.spacing.unit,border:e.palette.border.commentBorder},childAnswerComment:{borderRight:"none"},oddAnswerComment:{backgroundColor:e.palette.panelBackground.default},answerLeafComment:{paddingBottom:0},isSingleLine:{marginBottom:0,borderBottom:"none",borderTop:e.palette.border.commentBorder,"&.comments-node-root":{marginBottom:4,borderBottom:e.palette.border.commentBorder}},condensed:{"&.comments-node-root":{marginBottom:4}},shortformTop:{"&&":{marginTop:e.isFriendlyUI?2*e.spacing.unit:4*e.spacing.unit,marginBottom:0}},hoverPreview:{"&&":{marginBottom:0}},moderatorHat:{"&.comments-node-even":{background:e.palette.panelBackground.commentModeratorHat},"&.comments-node-odd":{background:e.palette.panelBackground.commentModeratorHat}},"@keyframes higlight-animation":{from:{backgroundColor:e.palette.panelBackground.commentHighlightAnimation,border:e.palette.border.maxIntensity},to:{backgroundColor:"none",border:e.palette.border.commentBorder}},highlightAnimation:{animation:"higlight-animation ".concat(3,"s ease-in-out 0s;")},promoted:{border:"solid 1px ".concat(e.palette.lwTertiary.main)},isPinnedOnProfile:{"&::before":{content:"''",position:"absolute",zIndex:-1,top:1,right:1,bottom:1,left:1,boxSizing:"border-box",backgroundColor:e.palette.panelBackground.default,borderRadius:e.isFriendlyUI?e.borderRadius.small:0},position:"relative",backgroundImage:"linear-gradient(to bottom right, ".concat(e.palette.border.secondaryHighlight,", ").concat(e.palette.border.primaryHighlight,")"),border:"none",zIndex:0,"&.CommentFrame-isAnswer":{backgroundImage:"linear-gradient(to bottom right, ".concat(e.palette.border.secondaryHighlight2,", ").concat(e.palette.border.primaryHighlight2,")")}}}),{stylePriority:-1});e.s(["CONDENSED_MARGIN_BOTTOM",0,4,"HIGHLIGHT_DURATION",0,3,"default",0,e=>{let i,s,{comment:l,treeOptions:d,onClick:c,id:u,nestingLevel:m,hasChildren:p,highlighted:h,isSingleLine:g,isChild:f,isNewComment:v,isReplyToAnswer:x,hoverPreview:y,shortform:b,showPinnedOnProfile:C,children:w,className:k}=e,j=(0,r.useStyles)(a),{condensed:S,postPage:I,switchAlternatingHighlights:T}=d,N=m+ +!!T,L=(0,n.default)("comments-node",(i=N,s=j,(0,n.default)(1===i&&s.commentsNodeRoot,1===i&&"comments-node-root",i%2==0&&"comments-node-even",i%2!=0&&"comments-node-odd",i>8&&"comments-node-its-getting-nested-here",i>12&&"comments-node-so-take-off-all-your-margins",i>16&&"comments-node-im-getting-so-nested",i>20&&"comments-node-im-gonna-drop-my-margins",i>24&&"comments-node-what-are-you-even-arguing-about",i>28&&"comments-node-are-you-sure-this-is-a-good-idea",i>32&&"comments-node-seriously-what-the-fuck",i>36&&"comments-node-are-you-curi-and-lumifer-specifically",i>40&&"comments-node-cuz-i-guess-that-makes-sense-but-like-really-tho")),j.node,k,l.af&&"af",h&&j.highlightAnimation,f&&j.child,v&&j.new,l.deleted&&j.deleted,(0,o.isFriendlyUI)()&&C&&l.isPinnedOnProfile&&j.isPinnedOnProfile,l.answer&&j.isAnswer,x&&j.answerChildComment,f&&x&&j.childAnswerComment,N%2!=0&&x&&j.oddAnswerComment,!p&&j.answerLeafComment,g&&j.isSingleLine,S&&j.condensed,I&&b&&1===N&&j.shortformTop,y&&j.hoverPreview,!l.hideModeratorHat&&l.moderatorHat&&j.moderatorHat,l.promoted&&j.promoted);return(0,t.jsx)("div",{className:L,onClick:c,id:u,children:w})}])},548723,e=>{"use strict";var t=e.i(843476),n=e.i(538794),o=e.i(94482),i=e.i(343794),r=e.i(717017),a=e.i(110601);let s=(0,n.registerComponent)("ShowParentComment",e=>{let{comment:n,active:r,onClick:s,classes:l}=e;return n?(0,t.jsx)(a.default,{title:"".concat(r?"Hide":"Show"," previous comment"),children:(0,t.jsx)("span",{className:(0,i.default)(l.root,{[l.active]:r}),onClick:s,children:(0,t.jsx)(o.default,{className:(0,i.default)(l.icon,{[l.activeArrow]:r})})})}):null},{styles:e=>({root:{paddingRight:e.spacing.unit,paddingTop:e.spacing.unit,paddingBottom:e.spacing.unit,cursor:"pointer",color:e.palette.icon.slightlyDim2},active:{color:e.palette.icon.dim5},icon:{fontSize:12,transform:"rotate(90deg)"},parentComment:{background:e.palette.panelBackground.default,position:"absolute",zIndex:2,maxWidth:650,bottom:"100%",left:0,boxShadow:e.palette.boxShadow.comment},usernameSpacing:{paddingRight:1,color:e.palette.icon.dim5,[r.legacyBreakpoints.maxSmall]:{padding:"0 10px"}},activeArrow:{transform:"rotate(-90deg)"}})});e.s(["default",0,s])},780239,698659,e=>{"use strict";e.s(["default",()=>f],780239);var t=e.i(843476),n=e.i(343794),o=e.i(820010),i=e.i(159211),r=e.i(773736),a=e.i(530841),s=e.i(791434),l=e.i(765744),d=e.i(695310),c=e.i(636492),u=e.i(435307),m=e.i(300891),p=e.i(429329),h=e.i(79732);let g=(0,p.defineStyles)("CommentUserName",e=>({author:{...e.typography.body2,fontWeight:600,...e.isFriendlyUI&&{marginRight:2}},authorAnswer:{...e.typography.body2,fontFamily:e.isFriendlyUI?e.palette.fonts.sansSerifStack:e.typography.postStyle.fontFamily,fontWeight:600,"& a, & a:hover":{textShadow:"none",backgroundImage:"none"}},mainWrapper:{display:"flex",alignItems:"center","&:hover":{opacity:1},"& a:hover":{opacity:1}},fullWrapper:{borderRadius:e.borderRadius.default,height:26,padding:"1px 4px 1px 2px",marginLeft:-6,"&:hover":{background:e.palette.grey[300]}},profileImage:{minWidth:20,marginLeft:4,marginRight:6,"@media screen and (max-width: 290px)":{display:"none"}},profileImagePlaceholder:{marginRight:4}}),{stylePriority:100}),f=e=>{let{comment:p,simple:f=!1,className:v,useUltraFeedModal:x=!1,tooltipPlacement:y}=e,b=(0,h.useStyles)(g),C=(0,a.useFilteredCurrentUser)(e=>(0,r.userHasCommentProfileImages)(e)),w=p.user,k=x?c.default:d.default;return p.deleted?(0,t.jsx)("span",{className:v,children:"[comment deleted]"}):p.hideAuthor||!w||w.deleted?(0,t.jsx)("span",{className:v,children:(0,t.jsx)(l.default,{userShownToAdmins:w})}):p.answer?(0,t.jsxs)("span",{className:(0,n.default)(v,b.authorAnswer),children:["Answer by ",(0,t.jsx)(k,{user:w,simple:f,tooltipPlacement:y})]}):(0,s.isFriendlyUI)()?(0,t.jsxs)(e=>{let{children:r}=e;return f?(0,t.jsx)("div",{className:b.mainWrapper,children:r}):(0,t.jsx)(m.default,{user:w,children:(0,t.jsx)(i.Link,{to:(0,o.userGetProfileUrl)(w),className:(0,n.default)(b.mainWrapper,b.fullWrapper,v),children:r})})},{children:[C?(0,t.jsx)(u.default,{user:w,size:20,fallback:"initials",className:b.profileImage}):(0,t.jsx)("div",{className:b.profileImagePlaceholder}),(0,t.jsx)(d.default,{user:w,className:b.author,simple:!0,color:!0})]}):(0,t.jsx)(k,{user:w,simple:f,className:(0,n.default)(v,b.author),tooltipPlacement:null!=y?y:"bottom-start"})};var v=e.i(566721);e.i(552275);var x=e.i(935132),y=e.i(110601),b=e.i(813292);let C=(0,p.defineStyles)("CommentShortformIcon",e=>({smallIcon:e.isFriendlyUI?{cursor:"pointer",color:e.palette.grey[1e3],height:16,marginLeft:-2,marginRight:3,position:"relative",top:2}:{cursor:"pointer",color:e.palette.grey[600],width:13,height:13,marginLeft:-2,marginRight:e.spacing.unit,position:"relative",top:2}}));e.s(["default",0,e=>{let{comment:o,post:r,simple:a,iconClassName:s}=e,l=(0,h.useStyles)(C);return!o.shortform||o.topLevelCommentId||(0,x.isEAForum)()?null:a?(0,t.jsx)(b.default,{icon:"Shortform",className:(0,n.default)(l.smallIcon,s)}):(0,t.jsx)(y.default,{title:"Shortform",children:(0,t.jsx)(i.Link,{to:(0,v.commentGetPageUrlFromIds)({postId:r._id,postSlug:r.slug,commentId:o._id}),children:(0,t.jsx)(b.default,{icon:"Shortform",className:(0,n.default)(l.smallIcon,s)})})})}],698659)},601466,e=>{"use strict";var t=e.i(843476),n=e.i(538794),o=e.i(343794),i=e.i(229720);let r=(0,n.registerComponent)("PostsItemComments",e=>{let{commentCount:n,small:r,onClick:a,unreadComments:s,newPromotedComments:l,classes:d}=e,c=d.noUnreadComments;return s&&(c=d.unreadComments),l&&(c=d.unreadComments),(0,t.jsxs)("div",{className:r?d.commentsIconSmall:d.commentsIconLarge,onClick:a,children:[(0,t.jsx)(i.default,{className:(0,o.default)(d.commentCountIcon,c)}),(0,t.jsx)("div",{className:d.commentCount,children:n})]})},{styles:e=>({commentsIconSmall:{width:20,fontSize:11,top:4,height:24,position:"relative",flexShrink:0,"& .MuiSvgIcon-root":{height:"100%"},"& div":{marginTop:-2}},commentsIconLarge:{width:26,height:24,cursor:"pointer",position:"relative",flexShrink:0,top:2,"& div":{marginTop:-3}},commentCount:{position:"absolute",right:"50%",top:"50%",transform:"translate(50%, -50%)",color:e.palette.icon.commentsBubble.commentCount,fontVariantNumeric:"lining-nums",...e.typography.commentStyle,"@media print":{color:e.palette.text.normal}},noUnreadComments:{color:e.palette.icon.commentsBubble.noUnread},unreadComments:{color:e.palette.secondary.light},newPromotedComments:{color:e.palette.icon.commentsBubble.newPromoted},commentCountIcon:{position:"absolute",right:"50%",top:"50%",transform:"translate(50%, -50%)",width:30,height:30}})});e.s(["default",0,r])},527919,219087,e=>{"use strict";e.s(["SingleLineCommentPlaceholder",()=>w,"default",()=>k,"singleLineStyles",()=>b],527919);var t=e.i(843476),n=e.i(538794),o=e.i(898298),i=e.i(343794),r=e.i(96009),a=e.i(566721),s=e.i(186947),l=e.i(489885),d=e.i(231080),c=e.i(758623),u=e.i(548723),m=e.i(780239),p=e.i(698659),h=e.i(601466),g=e.i(87828),f=e.i(903780),v=e.i(601342),x=e.i(79732),y=e.i(429329);let b=e=>({borderRadius:3,backgroundColor:e.palette.panelBackground.singleLineComment,"&:hover":{backgroundColor:e.palette.panelBackground.singleLineCommentHovered},marginTop:0,marginBottom:0,paddingLeft:e.spacing.unit,paddingRight:e.spacing.unit,color:e.palette.text.dim60,whiteSpace:"nowrap",fontFamily:e.isFriendlyUI?e.palette.fonts.sansSerifStack:void 0}),C=(0,y.defineStyles)("SingleLineComment",e=>({root:{position:"relative",cursor:"pointer"},placeholder:{height:30},commentInfo:{display:"flex",...b(e)},username:{display:"inline-block",padding:5,"& a, & a:hover":{color:e.palette.link.unmarked},fontWeight:600,marginRight:10},parentComment:{position:"relative",top:5},shortformIcon:{marginTop:4},tagIcon:{display:"flex",flexDirection:"column",justifyContent:"center",marginLeft:-2,marginRight:8,"& svg":{width:12,height:12,fill:e.palette.grey[600]}},leadingInfo:{display:"inline-block",textAlign:"center",paddingTop:5,paddingRight:5,flexGrow:0,flexShrink:0},date:{display:"inline-block",padding:5,paddingRight:e.spacing.unit,paddingLeft:e.spacing.unit},truncatedHighlight:{padding:5,display:"inline",flexGrow:1,overflow:"hidden",textOverflow:"ellipsis",marginTop:0,marginBottom:0,"& *":{display:"inline"},"& blockquote, & br, & figure, & img":{display:"none"},"& p":{marginRight:6},"& strong":{fontWeight:e.typography.body2.fontWeight}},highlight:{backgroundColor:e.palette.panelBackground.default,width:"inherit",maxWidth:625,position:"absolute",top:"calc(100% - 20px)",right:0,zIndex:5,border:e.palette.border.faint,boxShadow:e.palette.boxShadow.comment,maxHeight:500,overflow:"hidden","& img":{maxHeight:"200px"}},highlightPadding:{padding:1.5*e.spacing.unit},isAnswer:{fontSize:e.typography.body2.fontSize,lineHeight:e.typography.body2.lineHeight,"& a, & a:hover":{textShadow:"none",color:e.typography.body1.color,backgroundImage:"none"}},odd:{backgroundColor:e.palette.panelBackground.default,"&:hover":{backgroundColor:e.palette.panelBackground.singleLineCommentOddHovered}},metaNotice:{...(0,d.metaNoticeStyles)(e),marginRight:e.spacing.unit},postTitle:{...(0,d.metaNoticeStyles)(e),marginRight:20},preview:{width:400},deemphasize:{opacity:.5}})),w=e=>{let{nestingLevel:n}=e,o=(0,x.useStyles)(C);return(0,t.jsx)("div",{className:o.root,children:(0,t.jsx)(g.default,{contentType:"comment",className:(0,i.default)(o.placeholder,o.commentInfo,n%2!=0&&o.odd),children:" "})})},k=(0,n.registerComponent)("SingleLineComment",e=>{var n,r,d,y;let{treeOptions:b,comment:w,nestingLevel:k,parentCommentId:j,hideKarma:S,showDescendentCount:I,displayTagIcon:T=!1}=e,N=(0,x.useStyles)(C),{anchorEl:L,hover:R,eventHandlers:_}=(0,o.useHover)();if(!w)return null;let{enableHoverPreview:A=!0,hideSingleLineMeta:M,post:P,singleLinePostTitle:E,hideParentCommentToggle:F,deemphasizeCommentsExcludingUserIds:B}=b,D=w.title||(null==(y=w.contents)?void 0:y.plaintextMainText),U=R&&(null!=(n=w.baseScore)?n:0)>-5&&!(0,s.isMobile)()&&A,H=(null!=(r=w.baseScore)?r:0)>-5&&!w.deleted,W=w.tag,O=!!(T&&W&&(0,l.getCoreTagIconMap)()[W.slug]),V=k+ +!!b.switchAlternatingHighlights,z=!!B&&!B.has(null!=(d=w.userId)?d:"");return(0,t.jsxs)("div",{className:N.root,..._,children:[(0,t.jsxs)(g.default,{contentType:w.answer?"post":"comment",className:(0,i.default)(N.commentInfo,w.answer&&N.isAnswer,V%2!=0&&N.odd,z&&N.deemphasize),children:[P&&(0,t.jsx)("div",{className:N.shortformIcon,children:(0,t.jsx)(p.default,{comment:w,post:P,simple:!0})}),O&&(0,t.jsx)("div",{className:N.tagIcon,children:(0,t.jsx)(l.default,{tag:W})}),!F&&j!=w.parentCommentId&&(0,t.jsx)("span",{className:N.parentComment,children:(0,t.jsx)(u.default,{comment:w})}),!S&&!w.draft&&(0,t.jsx)("span",{className:N.leadingInfo,children:(0,a.commentGetKarma)(w)}),w.draft&&(0,t.jsx)("span",{className:N.leadingInfo,children:"[Draft]"}),(0,t.jsx)(m.default,{comment:w,simple:!0,className:N.username}),!M&&(0,t.jsx)("span",{className:N.date,children:(0,t.jsx)(c.default,{date:w.postedAt,tooltip:!1})}),H&&(0,t.jsxs)(g.default,{contentType:"comment",className:N.truncatedHighlight,children:[E&&(0,t.jsx)("span",{className:N.postTitle,children:null==P?void 0:P.title}),w.nominatedForReview&&!M&&(0,t.jsx)("span",{className:N.metaNotice,children:"Nomination"}),w.reviewingForReview&&!M&&(0,t.jsx)("span",{className:N.metaNotice,children:"Review"}),w.promoted&&!M&&(0,t.jsx)("span",{className:N.metaNotice,children:"Pinned"}),D]}),I&&w.descendentCount>0&&(0,t.jsx)(h.default,{small:!0,commentCount:w.descendentCount,unreadComments:!1,newPromotedComments:!1})]}),(0,t.jsx)(f.default,{open:U,anchorEl:L,placement:"bottom-end",clickable:!1,children:(0,t.jsx)("div",{className:N.preview,children:(0,t.jsx)(v.default,{truncated:!0,nestingLevel:1,comment:w,treeOptions:{...b,hideReply:!0,hideVoteBottom:!0,initialShowEdit:!1,forceSingleLine:!1,forceNotSingleLine:!0,switchAlternatingHighlights:!1,showEditInContext:!1},hoverPreview:!0,noAutoScroll:!0})})})]})},{hocs:[r.default],areEqual:{treeOptions:"shallow"}});var j=e.i(51160),S=e.i(110601);let I=(0,n.registerComponent)("CommentDiscussionIcon",e=>{let{comment:n,small:o=!1,classes:r}=e;return"SUBFORUM"!==n.tagCommentType||n.topLevelCommentId?null:(0,t.jsx)(S.default,{title:"Discussion",children:(0,t.jsx)(j.default,{className:(0,i.default)(r.icon,{[r.smallIcon]:o})})})},{styles:e=>({icon:{color:e.palette.grey[500],width:20,height:20,marginRight:8,position:"relative",top:3},smallIcon:{width:15,height:15,marginRight:6,top:2}})});e.s(["default",0,I],219087)},733361,e=>{"use strict";e.s(["default",()=>r]);var t=e.i(843476),n=e.i(538794),o=e.i(692436),i=e.i(64278);let r=(0,n.registerComponent)("SmallSideVote",e=>{let{document:n,hideKarma:r=!1,collectionName:a}=e,s=(null==n?void 0:n.votingSystem)||"default",l=(0,o.getVotingSystemByName)(s),d=i.commentVotingComponents[s]();return d?(0,t.jsx)(d,{document:n,hideKarma:r,collectionName:a,votingSystem:l}):null},{areEqual:"auto"})},628525,(e,t,n)=>{"use strict";var o={};function i(e,t,n){var r,a,s,l,d,c="";for("string"!=typeof t&&(n=t,t=i.defaultChars),void 0===n&&(n=!0),d=function(e){var t,n,i=o[e];if(i)return i;for(t=0,i=o[e]=[];t<128;t++)n=String.fromCharCode(t),/^[0-9a-z]$/i.test(n)?i.push(n):i.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)i[e.charCodeAt(t)]=e[t];return i}(t),r=0,a=e.length;r<a;r++){if(s=e.charCodeAt(r),n&&37===s&&r+2<a&&/^[0-9a-f]{2}$/i.test(e.slice(r+1,r+3))){c+=e.slice(r,r+3),r+=2;continue}if(s<128){c+=d[s];continue}if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&r+1<a&&(l=e.charCodeAt(r+1))>=56320&&l<=57343){c+=encodeURIComponent(e[r]+e[r+1]),r++;continue}c+="%EF%BF%BD";continue}c+=encodeURIComponent(e[r])}return c}i.defaultChars=";/?:@&=+$,-_.!~*'()#",i.componentChars="-_.!~*'()",t.exports=i},788253,(e,t,n)=>{"use strict";var o={};function i(e,t){var n;return"string"!=typeof t&&(t=i.defaultChars),n=function(e){var t,n,i=o[e];if(i)return i;for(t=0,i=o[e]=[];t<128;t++)n=String.fromCharCode(t),i.push(n);for(t=0;t<e.length;t++)i[n=e.charCodeAt(t)]="%"+("0"+n.toString(16).toUpperCase()).slice(-2);return i}(t),e.replace(/(%[a-f0-9]{2})+/gi,function(e){var t,o,i,r,a,s,l,d="";for(t=0,o=e.length;t<o;t+=3){if((i=parseInt(e.slice(t+1,t+3),16))<128){d+=n[i];continue}if((224&i)==192&&t+3<o&&(192&(r=parseInt(e.slice(t+4,t+6),16)))==128){(l=i<<6&1984|63&r)<128?d+="":d+=String.fromCharCode(l),t+=3;continue}if((240&i)==224&&t+6<o&&(r=parseInt(e.slice(t+4,t+6),16),a=parseInt(e.slice(t+7,t+9),16),(192&r)==128&&(192&a)==128)){(l=i<<12&61440|r<<6&4032|63&a)<2048||l>=55296&&l<=57343?d+="":d+=String.fromCharCode(l),t+=6;continue}if((248&i)==240&&t+9<o&&(r=parseInt(e.slice(t+4,t+6),16),a=parseInt(e.slice(t+7,t+9),16),s=parseInt(e.slice(t+10,t+12),16),(192&r)==128&&(192&a)==128&&(192&s)==128)){(l=i<<18&1835008|r<<12&258048|a<<6&4032|63&s)<65536||l>1114111?d+="":(l-=65536,d+=String.fromCharCode(55296+(l>>10),56320+(1023&l))),t+=9;continue}d+=""}return d})}i.defaultChars=";/?:@&=+$,#",i.componentChars="",t.exports=i},910216,(e,t,n)=>{"use strict";t.exports=function(e){var t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&-1!==e.hostname.indexOf(":")?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||""}},969755,(e,t,n)=>{"use strict";function o(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var i=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,a=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,s=["%","/","?",";","#"].concat(["'"].concat(["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","	"]))),l=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,c=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,u={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};o.prototype.parse=function(e,t){var n,o,r,p,h,g=e;if(g=g.trim(),!t&&1===e.split("#").length){var f=a.exec(g);if(f)return this.pathname=f[1],f[2]&&(this.search=f[2]),this}var v=i.exec(g);if(v&&(r=(v=v[0]).toLowerCase(),this.protocol=v,g=g.substr(v.length)),(t||v||g.match(/^\/\/[^@\/]+@[^@\/]+/))&&(h="//"===g.substr(0,2))&&!(v&&u[v])&&(g=g.substr(2),this.slashes=!0),!u[v]&&(h||v&&!m[v])){var x,y,b=-1;for(n=0;n<l.length;n++)-1!==(p=g.indexOf(l[n]))&&(-1===b||p<b)&&(b=p);for(-1!==(y=-1===b?g.lastIndexOf("@"):g.lastIndexOf("@",b))&&(x=g.slice(0,y),g=g.slice(y+1),this.auth=x),b=-1,n=0;n<s.length;n++)-1!==(p=g.indexOf(s[n]))&&(-1===b||p<b)&&(b=p);-1===b&&(b=g.length),":"===g[b-1]&&b--;var C=g.slice(0,b);g=g.slice(b),this.parseHost(C),this.hostname=this.hostname||"";var w="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!w){var k=this.hostname.split(/\./);for(n=0,o=k.length;n<o;n++){var j=k[n];if(j&&!j.match(d)){for(var S="",I=0,T=j.length;I<T;I++)j.charCodeAt(I)>127?S+="x":S+=j[I];if(!S.match(d)){var N=k.slice(0,n),L=k.slice(n+1),R=j.match(c);R&&(N.push(R[1]),L.unshift(R[2])),L.length&&(g=L.join(".")+g),this.hostname=N.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),w&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var _=g.indexOf("#");-1!==_&&(this.hash=g.substr(_),g=g.slice(0,_));var A=g.indexOf("?");return -1!==A&&(this.search=g.substr(A),g=g.slice(0,A)),g&&(this.pathname=g),m[r]&&this.hostname&&!this.pathname&&(this.pathname=""),this},o.prototype.parseHost=function(e){var t=r.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},t.exports=function(e,t){if(e&&e instanceof o)return e;var n=new o;return n.parse(e,t),n}},274899,(e,t,n)=>{"use strict";t.exports.encode=e.r(628525),t.exports.decode=e.r(788253),t.exports.format=e.r(910216),t.exports.parse=e.r(969755)},634171,(e,t,n)=>{t.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},270893,(e,t,n)=>{t.exports=/[\0-\x1F\x7F-\x9F]/},218095,(e,t,n)=>{t.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},484865,(e,t,n)=>{t.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},940454,(e,t,n)=>{t.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},303672,(e,t,n)=>{"use strict";n.Any=e.r(634171),n.Cc=e.r(270893),n.Cf=e.r(218095),n.P=e.r(484865),n.Z=e.r(940454)},306963,(e,t,n)=>{"use strict";t.exports=e.r(677391)},785306,(e,t,n)=>{"use strict";var o=Object.prototype.hasOwnProperty;function i(e,t){return o.call(e,t)}function r(e){return(!(e>=55296)||!(e<=57343))&&(!(e>=64976)||!(e<=65007))&&(65535&e)!=65535&&(65535&e)!=65534&&(!(e>=0)||!(e<=8))&&11!==e&&(!(e>=14)||!(e<=31))&&(!(e>=127)||!(e<=159))&&!(e>1114111)&&!0}function a(e){return e>65535?String.fromCharCode(55296+((e-=65536)>>10),56320+(1023&e)):String.fromCharCode(e)}var s=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,l=RegExp(s.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),d=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,c=e.r(306963),u=/[&<>"]/,m=/[&<>"]/g,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function h(e){return p[e]}var g=/[.?*+^$[\]\\(){}|-]/g,f=e.r(484865);n.lib={},n.lib.mdurl=e.r(274899),n.lib.ucmicro=e.r(303672),n.assign=function(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach(function(t){if(t){if("object"!=typeof t)throw TypeError(t+"must be object");Object.keys(t).forEach(function(n){e[n]=t[n]})}}),e},n.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},n.has=i,n.unescapeMd=function(e){return 0>e.indexOf("\\")?e:e.replace(s,"$1")},n.unescapeAll=function(e){return 0>e.indexOf("\\")&&0>e.indexOf("&")?e:e.replace(l,function(e,t,n){if(t)return t;var o=0;return i(c,n)?c[n]:35===n.charCodeAt(0)&&d.test(n)&&r(o="x"===n[1].toLowerCase()?parseInt(n.slice(2),16):parseInt(n.slice(1),10))?a(o):e})},n.isValidEntityCode=r,n.fromCodePoint=a,n.escapeHtml=function(e){return u.test(e)?e.replace(m,h):e},n.arrayReplaceAt=function(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))},n.isSpace=function(e){switch(e){case 9:case 32:return!0}return!1},n.isWhiteSpace=function(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1},n.isMdAsciiPunct=function(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}},n.isPunctChar=function(e){return f.test(e)},n.escapeRE=function(e){return e.replace(g,"\\$&")},n.normalizeReference=function(e){return(e=e.trim().replace(/\s+/g," ")).toLowerCase().toUpperCase()}},999876,(e,t,n)=>{"use strict";t.exports=function(e,t,n){var o,i,r,a,s=-1,l=e.posMax,d=e.pos;for(e.pos=t+1,o=1;e.pos<l;){if(93===(r=e.src.charCodeAt(e.pos))&&0==--o){i=!0;break}if(a=e.pos,e.md.inline.skipToken(e),91===r){if(a===e.pos-1)o++;else if(n)return e.pos=d,-1}}return i&&(s=e.pos),e.pos=d,s}},806282,(e,t,n)=>{"use strict";var o=e.r(785306).unescapeAll;t.exports=function(e,t,n){var i,r,a=t,s={ok:!1,pos:0,lines:0,str:""};if(60===e.charCodeAt(t)){for(t++;t<n&&10!==(i=e.charCodeAt(t))&&60!==i;){if(62===i){s.pos=t+1,s.str=o(e.slice(a+1,t)),s.ok=!0;break}if(92===i&&t+1<n){t+=2;continue}t++}return s}for(r=0;t<n&&32!==(i=e.charCodeAt(t))&&!(i<32)&&127!==i;){if(92===i&&t+1<n){if(32===e.charCodeAt(t+1))break;t+=2;continue}if(40===i&&++r>32)return s;if(41===i){if(0===r)break;r--}t++}return a===t||0!==r||(s.str=o(e.slice(a,t)),s.lines=0,s.pos=t,s.ok=!0),s}},807095,(e,t,n)=>{"use strict";var o=e.r(785306).unescapeAll;t.exports=function(e,t,n){var i,r,a=0,s=t,l={ok:!1,pos:0,lines:0,str:""};if(t>=n||34!==(r=e.charCodeAt(t))&&39!==r&&40!==r)return l;for(t++,40===r&&(r=41);t<n;){if((i=e.charCodeAt(t))===r){l.pos=t+1,l.lines=a,l.str=o(e.slice(s+1,t)),l.ok=!0;break}if(40===i&&41===r)break;10===i?a++:92===i&&t+1<n&&(t++,10===e.charCodeAt(t)&&a++);t++}return l}},979167,(e,t,n)=>{"use strict";n.parseLinkLabel=e.r(999876),n.parseLinkDestination=e.r(806282),n.parseLinkTitle=e.r(807095)},681902,(e,t,n)=>{"use strict";var o=e.r(785306).assign,i=e.r(785306).unescapeAll,r=e.r(785306).escapeHtml,a={};function s(){this.rules=o({},a)}a.code_inline=function(e,t,n,o,i){var a=e[t];return"<code"+i.renderAttrs(a)+">"+r(e[t].content)+"</code>"},a.code_block=function(e,t,n,o,i){var a=e[t];return"<pre"+i.renderAttrs(a)+"><code>"+r(e[t].content)+"</code></pre>\n"},a.fence=function(e,t,n,o,a){var s,l,d,c,u=e[t],m=u.info?i(u.info).trim():"",p="",h="";return(m&&(p=(d=m.split(/(\s+)/g))[0],h=d.slice(2).join("")),0===(s=n.highlight&&n.highlight(u.content,p,h)||r(u.content)).indexOf("<pre"))?s+"\n":m?(l=u.attrIndex("class"),c=u.attrs?u.attrs.slice():[],l<0?c.push(["class",n.langPrefix+p]):(c[l]=c[l].slice(),c[l][1]+=" "+n.langPrefix+p),"<pre><code"+a.renderAttrs({attrs:c})+">"+s+"</code></pre>\n"):"<pre><code"+a.renderAttrs(u)+">"+s+"</code></pre>\n"},a.image=function(e,t,n,o,i){var r=e[t];return r.attrs[r.attrIndex("alt")][1]=i.renderInlineAsText(r.children,n,o),i.renderToken(e,t,n)},a.hardbreak=function(e,t,n){return n.xhtmlOut?"<br />\n":"<br>\n"},a.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?"<br />\n":"<br>\n":"\n"},a.text=function(e,t){return r(e[t].content)},a.html_block=function(e,t){return e[t].content},a.html_inline=function(e,t){return e[t].content},s.prototype.renderAttrs=function(e){var t,n,o;if(!e.attrs)return"";for(t=0,o="",n=e.attrs.length;t<n;t++)o+=" "+r(e.attrs[t][0])+'="'+r(e.attrs[t][1])+'"';return o},s.prototype.renderToken=function(e,t,n){var o,i="",r=!1,a=e[t];return a.hidden?"":(a.block&&-1!==a.nesting&&t&&e[t-1].hidden&&(i+="\n"),i+=(-1===a.nesting?"</":"<")+a.tag,i+=this.renderAttrs(a),0===a.nesting&&n.xhtmlOut&&(i+=" /"),a.block&&(r=!0,1===a.nesting&&t+1<e.length&&("inline"===(o=e[t+1]).type||o.hidden?r=!1:-1===o.nesting&&o.tag===a.tag&&(r=!1))),i+=r?">\n":">")},s.prototype.renderInline=function(e,t,n){for(var o,i="",r=this.rules,a=0,s=e.length;a<s;a++)void 0!==r[o=e[a].type]?i+=r[o](e,a,t,n,this):i+=this.renderToken(e,a,t);return i},s.prototype.renderInlineAsText=function(e,t,n){for(var o="",i=0,r=e.length;i<r;i++)"text"===e[i].type?o+=e[i].content:"image"===e[i].type?o+=this.renderInlineAsText(e[i].children,t,n):"softbreak"===e[i].type&&(o+="\n");return o},s.prototype.render=function(e,t,n){var o,i,r,a="",s=this.rules;for(o=0,i=e.length;o<i;o++)"inline"===(r=e[o].type)?a+=this.renderInline(e[o].children,t,n):void 0!==s[r]?a+=s[e[o].type](e,o,t,n,this):a+=this.renderToken(e,o,t,n);return a},t.exports=s},6108,(e,t,n)=>{"use strict";function o(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}o.prototype.attrIndex=function(e){var t,n,o;if(!this.attrs)return -1;for(n=0,o=(t=this.attrs).length;n<o;n++)if(t[n][0]===e)return n;return -1},o.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]},o.prototype.attrSet=function(e,t){var n=this.attrIndex(e),o=[e,t];n<0?this.attrPush(o):this.attrs[n]=o},o.prototype.attrGet=function(e){var t=this.attrIndex(e),n=null;return t>=0&&(n=this.attrs[t][1]),n},o.prototype.attrJoin=function(e,t){var n=this.attrIndex(e);n<0?this.attrPush([e,t]):this.attrs[n][1]=this.attrs[n][1]+" "+t},t.exports=o},946480,(e,t,n)=>{"use strict";var o=e.r(6108);function i(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}i.prototype.Token=o,t.exports=i},46009,(e,t,n)=>{"use strict";function o(){this.__rules__=[],this.__cache__=null}o.prototype.__find__=function(e){for(var t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return -1},o.prototype.__compile__=function(){var e=this,t=[""];e.__rules__.forEach(function(e){e.enabled&&e.alt.forEach(function(e){0>t.indexOf(e)&&t.push(e)})}),e.__cache__={},t.forEach(function(t){e.__cache__[t]=[],e.__rules__.forEach(function(n){!n.enabled||t&&0>n.alt.indexOf(t)||e.__cache__[t].push(n.fn)})})},o.prototype.at=function(e,t,n){var o=this.__find__(e);if(-1===o)throw Error("Parser rule not found: "+e);this.__rules__[o].fn=t,this.__rules__[o].alt=(n||{}).alt||[],this.__cache__=null},o.prototype.before=function(e,t,n,o){var i=this.__find__(e);if(-1===i)throw Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:n,alt:(o||{}).alt||[]}),this.__cache__=null},o.prototype.after=function(e,t,n,o){var i=this.__find__(e);if(-1===i)throw Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:n,alt:(o||{}).alt||[]}),this.__cache__=null},o.prototype.push=function(e,t,n){this.__rules__.push({name:e,enabled:!0,fn:t,alt:(n||{}).alt||[]}),this.__cache__=null},o.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach(function(e){var o=this.__find__(e);if(o<0){if(t)return;throw Error("Rules manager: invalid rule name "+e)}this.__rules__[o].enabled=!0,n.push(e)},this),this.__cache__=null,n},o.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(e){e.enabled=!1}),this.enable(e,t)},o.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach(function(e){var o=this.__find__(e);if(o<0){if(t)return;throw Error("Rules manager: invalid rule name "+e)}this.__rules__[o].enabled=!1,n.push(e)},this),this.__cache__=null,n},o.prototype.getRules=function(e){return null===this.__cache__&&this.__compile__(),this.__cache__[e]||[]},t.exports=o},437645,(e,t,n)=>{"use strict";var o=/\r\n?|\n/g,i=/\0/g;t.exports=function(e){var t;t=(t=e.src.replace(o,"\n")).replace(i,""),e.src=t}},900328,(e,t,n)=>{"use strict";t.exports=function(e){var t;e.inlineMode?((t=new e.Token("inline","",0)).content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}},496848,(e,t,n)=>{"use strict";t.exports=function(e){var t,n,o,i=e.tokens;for(n=0,o=i.length;n<o;n++)"inline"===(t=i[n]).type&&e.md.inline.parse(t.content,e.md,e.env,t.children)}},816256,(e,t,n)=>{"use strict";var o=e.r(785306).arrayReplaceAt;t.exports=function(e){var t,n,i,r,a,s,l,d,c,u,m,p,h,g,f,v,x,y,b,C=e.tokens;if(e.md.options.linkify){for(r=0,a=C.length;r<a;r++)if("inline"===C[r].type&&e.md.linkify.pretest(C[r].content))for(s=C[r].children,f=0,i=s.length-1;i>=0;i--){if("link_close"===(d=s[i]).type){for(i--;s[i].level!==d.level&&"link_open"!==s[i].type;)i--;continue}if("html_inline"===d.type&&(t=d.content,/^<a[>\s]/i.test(t)&&f>0&&f--,n=d.content,/^<\/a\s*>/i.test(n)&&f++),!(f>0)&&"text"===d.type&&e.md.linkify.test(d.content)){for(u=0,m=d.content,b=e.md.linkify.match(m),c=[],g=d.level,h=0;u<b.length;u++)v=b[u].url,x=e.md.normalizeLink(v),e.md.validateLink(x)&&(y=b[u].text,y=b[u].schema?"mailto:"!==b[u].schema||/^mailto:/i.test(y)?e.md.normalizeLinkText(y):e.md.normalizeLinkText("mailto:"+y).replace(/^mailto:/,""):e.md.normalizeLinkText("http://"+y).replace(/^http:\/\//,""),(p=b[u].index)>h&&((l=new e.Token("text","",0)).content=m.slice(h,p),l.level=g,c.push(l)),(l=new e.Token("link_open","a",1)).attrs=[["href",x]],l.level=g++,l.markup="linkify",l.info="auto",c.push(l),(l=new e.Token("text","",0)).content=y,l.level=g,c.push(l),(l=new e.Token("link_close","a",-1)).level=--g,l.markup="linkify",l.info="auto",c.push(l),h=b[u].lastIndex);h<m.length&&((l=new e.Token("text","",0)).content=m.slice(h),l.level=g,c.push(l)),C[r].children=s=o(s,i,c)}}}}},270453,(e,t,n)=>{"use strict";var o=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,i=/\((c|tm|r|p)\)/i,r=/\((c|tm|r|p)\)/ig,a={c:"",r:"",p:"",tm:""};function s(e,t){return a[t.toLowerCase()]}t.exports=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&(i.test(e.tokens[t].content)&&function(e){var t,n,o=0;for(t=e.length-1;t>=0;t--)"text"!==(n=e[t]).type||o||(n.content=n.content.replace(r,s)),"link_open"===n.type&&"auto"===n.info&&o--,"link_close"===n.type&&"auto"===n.info&&o++}(e.tokens[t].children),o.test(e.tokens[t].content)&&function(e){var t,n,i=0;for(t=e.length-1;t>=0;t--)"text"===(n=e[t]).type&&!i&&o.test(n.content)&&(n.content=n.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),"link_open"===n.type&&"auto"===n.info&&i--,"link_close"===n.type&&"auto"===n.info&&i++}(e.tokens[t].children))}},608671,(e,t,n)=>{"use strict";var o=e.r(785306).isWhiteSpace,i=e.r(785306).isPunctChar,r=e.r(785306).isMdAsciiPunct,a=/['"]/,s=/['"]/g;function l(e,t,n){return e.substr(0,t)+n+e.substr(t+1)}t.exports=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&a.test(e.tokens[t].content)&&function(e,t){var n,a,d,c,u,m,p,h,g,f,v,x,y,b,C,w,k,j,S,I,T;for(n=0,S=[];n<e.length;n++){for(a=e[n],p=e[n].level,k=S.length-1;k>=0&&!(S[k].level<=p);k--);if(S.length=k+1,"text"===a.type){d=a.content,u=0,m=d.length;e:for(;u<m&&(s.lastIndex=u,c=s.exec(d));){if(C=w=!0,u=c.index+1,j="'"===c[0],g=32,c.index-1>=0)g=d.charCodeAt(c.index-1);else for(k=n-1;k>=0&&"softbreak"!==e[k].type&&"hardbreak"!==e[k].type;k--)if(e[k].content){g=e[k].content.charCodeAt(e[k].content.length-1);break}if(f=32,u<m)f=d.charCodeAt(u);else for(k=n+1;k<e.length&&"softbreak"!==e[k].type&&"hardbreak"!==e[k].type;k++)if(e[k].content){f=e[k].content.charCodeAt(0);break}if(v=r(g)||i(String.fromCharCode(g)),x=r(f)||i(String.fromCharCode(f)),y=o(g),(b=o(f))?C=!1:x&&!(y||v)&&(C=!1),y?w=!1:v&&!(b||x)&&(w=!1),34===f&&'"'===c[0]&&g>=48&&g<=57&&(w=C=!1),C&&w&&(C=v,w=x),!C&&!w){j&&(a.content=l(a.content,c.index,""));continue}if(w){for(k=S.length-1;k>=0&&(h=S[k],!(S[k].level<p));k--)if(h.single===j&&S[k].level===p){h=S[k],j?(I=t.md.options.quotes[2],T=t.md.options.quotes[3]):(I=t.md.options.quotes[0],T=t.md.options.quotes[1]),a.content=l(a.content,c.index,T),e[h.token].content=l(e[h.token].content,h.pos,I),u+=T.length-1,h.token===n&&(u+=I.length-1),m=(d=a.content).length,S.length=k;continue e}}C?S.push({token:n,pos:c.index,single:j,level:p}):w&&j&&(a.content=l(a.content,c.index,""))}}}}(e.tokens[t].children,e)}},413510,(e,t,n)=>{"use strict";var o=e.r(46009),i=[["normalize",e.r(437645)],["block",e.r(900328)],["inline",e.r(496848)],["linkify",e.r(816256)],["replacements",e.r(270453)],["smartquotes",e.r(608671)]];function r(){this.ruler=new o;for(var e=0;e<i.length;e++)this.ruler.push(i[e][0],i[e][1])}r.prototype.process=function(e){var t,n,o;for(t=0,n=(o=this.ruler.getRules("")).length;t<n;t++)o[t](e)},r.prototype.State=e.r(946480),t.exports=r},81251,(e,t,n)=>{"use strict";var o=e.r(6108),i=e.r(785306).isSpace;function r(e,t,n,o){var r,a,s,l,d,c,u,m;for(this.src=e,this.md=t,this.env=n,this.tokens=o,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",a=this.src,m=!1,s=l=c=u=0,d=a.length;l<d;l++){if(r=a.charCodeAt(l),!m)if(i(r)){c++,9===r?u+=4-u%4:u++;continue}else m=!0;(10===r||l===d-1)&&(10!==r&&l++,this.bMarks.push(s),this.eMarks.push(l),this.tShift.push(c),this.sCount.push(u),this.bsCount.push(0),m=!1,c=0,u=0,s=l+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}r.prototype.push=function(e,t,n){var i=new o(e,t,n);return i.block=!0,n<0&&this.level--,i.level=this.level,n>0&&this.level++,this.tokens.push(i),i},r.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},r.prototype.skipEmptyLines=function(e){for(var t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},r.prototype.skipSpaces=function(e){for(var t=this.src.length;e<t&&i(this.src.charCodeAt(e));e++);return e},r.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!i(this.src.charCodeAt(--e)))return e+1;return e},r.prototype.skipChars=function(e,t){for(var n=this.src.length;e<n&&this.src.charCodeAt(e)===t;e++);return e},r.prototype.skipCharsBack=function(e,t,n){if(e<=n)return e;for(;e>n;)if(t!==this.src.charCodeAt(--e))return e+1;return e},r.prototype.getLines=function(e,t,n,o){var r,a,s,l,d,c,u,m=e;if(e>=t)return"";for(r=0,c=Array(t-e);m<t;m++,r++){for(a=0,u=l=this.bMarks[m],d=m+1<t||o?this.eMarks[m]+1:this.eMarks[m];l<d&&a<n;){if(i(s=this.src.charCodeAt(l)))9===s?a+=4-(a+this.bsCount[m])%4:a++;else if(l-u<this.tShift[m])a++;else break;l++}a>n?c[r]=Array(a-n+1).join(" ")+this.src.slice(l,d):c[r]=this.src.slice(l,d)}return c.join("")},r.prototype.Token=o,t.exports=r},355627,(e,t,n)=>{"use strict";var o=e.r(785306).isSpace;function i(e,t){var n=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];return e.src.substr(n,o-n)}function r(e){var t,n=[],o=0,i=e.length,r=!1,a=0,s="";for(t=e.charCodeAt(o);o<i;)124===t&&(r?(s+=e.substring(a,o-1),a=o):(n.push(s+e.substring(a,o)),s="",a=o+1)),r=92===t,o++,t=e.charCodeAt(o);return n.push(s+e.substring(a)),n}t.exports=function(e,t,n,a){var s,l,d,c,u,m,p,h,g,f,v,x,y,b,C,w,k,j;if(t+2>n||(m=t+1,e.sCount[m]<e.blkIndent||e.sCount[m]-e.blkIndent>=4||(d=e.bMarks[m]+e.tShift[m])>=e.eMarks[m]||124!==(k=e.src.charCodeAt(d++))&&45!==k&&58!==k||d>=e.eMarks[m]||124!==(j=e.src.charCodeAt(d++))&&45!==j&&58!==j&&!o(j)||45===k&&o(j)))return!1;for(;d<e.eMarks[m];){if(124!==(s=e.src.charCodeAt(d))&&45!==s&&58!==s&&!o(s))return!1;d++}for(c=0,p=(l=i(e,t+1)).split("|"),f=[];c<p.length;c++){if(!(v=p[c].trim()))if(0===c||c===p.length-1)continue;else return!1;if(!/^:?-+:?$/.test(v))return!1;58===v.charCodeAt(v.length-1)?f.push(58===v.charCodeAt(0)?"center":"right"):58===v.charCodeAt(0)?f.push("left"):f.push("")}if(-1===(l=i(e,t).trim()).indexOf("|")||e.sCount[t]-e.blkIndent>=4||((p=r(l)).length&&""===p[0]&&p.shift(),p.length&&""===p[p.length-1]&&p.pop(),0===(h=p.length)||h!==f.length))return!1;if(a)return!0;for(c=0,b=e.parentType,e.parentType="table",w=e.md.block.ruler.getRules("blockquote"),(g=e.push("table_open","table",1)).map=x=[t,0],(g=e.push("thead_open","thead",1)).map=[t,t+1],(g=e.push("tr_open","tr",1)).map=[t,t+1];c<p.length;c++)g=e.push("th_open","th",1),f[c]&&(g.attrs=[["style","text-align:"+f[c]]]),(g=e.push("inline","",0)).content=p[c].trim(),g.children=[],g=e.push("th_close","th",-1);for(g=e.push("tr_close","tr",-1),g=e.push("thead_close","thead",-1),m=t+2;m<n&&!(e.sCount[m]<e.blkIndent);m++){for(c=0,C=!1,u=w.length;c<u;c++)if(w[c](e,m,n,!0)){C=!0;break}if(C||!(l=i(e,m).trim())||e.sCount[m]-e.blkIndent>=4)break;for((p=r(l)).length&&""===p[0]&&p.shift(),p.length&&""===p[p.length-1]&&p.pop(),m===t+2&&((g=e.push("tbody_open","tbody",1)).map=y=[t+2,0]),(g=e.push("tr_open","tr",1)).map=[m,m+1],c=0;c<h;c++)g=e.push("td_open","td",1),f[c]&&(g.attrs=[["style","text-align:"+f[c]]]),(g=e.push("inline","",0)).content=p[c]?p[c].trim():"",g.children=[],g=e.push("td_close","td",-1);g=e.push("tr_close","tr",-1)}return y&&(g=e.push("tbody_close","tbody",-1),y[1]=m),g=e.push("table_close","table",-1),x[1]=m,e.parentType=b,e.line=m,!0}},798417,(e,t,n)=>{"use strict";t.exports=function(e,t,n){var o,i,r;if(e.sCount[t]-e.blkIndent<4)return!1;for(i=o=t+1;o<n;){if(e.isEmpty(o)){o++;continue}if(e.sCount[o]-e.blkIndent>=4){i=++o;continue}break}return e.line=i,(r=e.push("code_block","code",0)).content=e.getLines(t,i,4+e.blkIndent,!1)+"\n",r.map=[t,e.line],!0}},753818,(e,t,n)=>{"use strict";t.exports=function(e,t,n,o){var i,r,a,s,l,d,c,u=!1,m=e.bMarks[t]+e.tShift[t],p=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||m+3>p||126!==(i=e.src.charCodeAt(m))&&96!==i||(l=m,(r=(m=e.skipChars(m,i))-l)<3)||(c=e.src.slice(l,m),a=e.src.slice(m,p),96===i&&a.indexOf(String.fromCharCode(i))>=0))return!1;if(o)return!0;for(s=t;!(++s>=n)&&(!((m=l=e.bMarks[s]+e.tShift[s])<(p=e.eMarks[s]))||!(e.sCount[s]<e.blkIndent));){;if(!(e.src.charCodeAt(m)!==i||e.sCount[s]-e.blkIndent>=4||(m=e.skipChars(m,i))-l<r)&&!((m=e.skipSpaces(m))<p)){u=!0;break}}return r=e.sCount[t],e.line=s+ +!!u,(d=e.push("fence","code",0)).info=a,d.content=e.getLines(t+1,s,r,!0),d.markup=c,d.map=[t,e.line],!0}},863906,(e,t,n)=>{"use strict";var o=e.r(785306).isSpace;t.exports=function(e,t,n,i){var r,a,s,l,d,c,u,m,p,h,g,f,v,x,y,b,C,w,k,j,S=e.lineMax,I=e.bMarks[t]+e.tShift[t],T=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||62!==e.src.charCodeAt(I++))return!1;if(i)return!0;for(l=p=e.sCount[t]+1,32===e.src.charCodeAt(I)?(I++,l++,p++,r=!1,b=!0):9===e.src.charCodeAt(I)?(b=!0,(e.bsCount[t]+p)%4==3?(I++,l++,p++,r=!1):r=!0):b=!1,h=[e.bMarks[t]],e.bMarks[t]=I;I<T&&o(a=e.src.charCodeAt(I));)9===a?p+=4-(p+e.bsCount[t]+ +!!r)%4:p++,I++;for(g=[e.bsCount[t]],e.bsCount[t]=e.sCount[t]+1+ +!!b,c=I>=T,x=[e.sCount[t]],e.sCount[t]=p-l,y=[e.tShift[t]],e.tShift[t]=I-e.bMarks[t],w=e.md.block.ruler.getRules("blockquote"),v=e.parentType,e.parentType="blockquote",m=t+1;m<n&&(j=e.sCount[m]<e.blkIndent,!((I=e.bMarks[m]+e.tShift[m])>=(T=e.eMarks[m])));m++){if(62===e.src.charCodeAt(I++)&&!j){for(l=p=e.sCount[m]+1,32===e.src.charCodeAt(I)?(I++,l++,p++,r=!1,b=!0):9===e.src.charCodeAt(I)?(b=!0,(e.bsCount[m]+p)%4==3?(I++,l++,p++,r=!1):r=!0):b=!1,h.push(e.bMarks[m]),e.bMarks[m]=I;I<T&&o(a=e.src.charCodeAt(I));)9===a?p+=4-(p+e.bsCount[m]+ +!!r)%4:p++,I++;c=I>=T,g.push(e.bsCount[m]),e.bsCount[m]=e.sCount[m]+1+ +!!b,x.push(e.sCount[m]),e.sCount[m]=p-l,y.push(e.tShift[m]),e.tShift[m]=I-e.bMarks[m];continue}if(c)break;for(s=0,C=!1,d=w.length;s<d;s++)if(w[s](e,m,n,!0)){C=!0;break}if(C){e.lineMax=m,0!==e.blkIndent&&(h.push(e.bMarks[m]),g.push(e.bsCount[m]),y.push(e.tShift[m]),x.push(e.sCount[m]),e.sCount[m]-=e.blkIndent);break}h.push(e.bMarks[m]),g.push(e.bsCount[m]),y.push(e.tShift[m]),x.push(e.sCount[m]),e.sCount[m]=-1}for(f=e.blkIndent,e.blkIndent=0,(k=e.push("blockquote_open","blockquote",1)).markup=">",k.map=u=[t,0],e.md.block.tokenize(e,t,m),(k=e.push("blockquote_close","blockquote",-1)).markup=">",e.lineMax=S,e.parentType=v,u[1]=e.line,s=0;s<y.length;s++)e.bMarks[s+t]=h[s],e.tShift[s+t]=y[s],e.sCount[s+t]=x[s],e.bsCount[s+t]=g[s];return e.blkIndent=f,!0}},206929,(e,t,n)=>{"use strict";var o=e.r(785306).isSpace;t.exports=function(e,t,n,i){var r,a,s,l,d=e.bMarks[t]+e.tShift[t],c=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||42!==(r=e.src.charCodeAt(d++))&&45!==r&&95!==r)return!1;for(a=1;d<c;){if((s=e.src.charCodeAt(d++))!==r&&!o(s))return!1;s===r&&a++}return!(a<3)&&(!!i||(e.line=t+1,(l=e.push("hr","hr",0)).map=[t,e.line],l.markup=Array(a+1).join(String.fromCharCode(r)),!0))}},261684,(e,t,n)=>{"use strict";var o=e.r(785306).isSpace;function i(e,t){var n,i,r;return(i=e.bMarks[t]+e.tShift[t],r=e.eMarks[t],42!==(n=e.src.charCodeAt(i++))&&45!==n&&43!==n||i<r&&!o(e.src.charCodeAt(i)))?-1:i}function r(e,t){var n,i=e.bMarks[t]+e.tShift[t],r=i,a=e.eMarks[t];if(r+1>=a||(n=e.src.charCodeAt(r++))<48||n>57)return -1;for(;;){if(r>=a)return -1;if((n=e.src.charCodeAt(r++))>=48&&n<=57){if(r-i>=10)return -1;continue}if(41===n||46===n)break;return -1}return r<a&&!o(n=e.src.charCodeAt(r))?-1:r}t.exports=function(e,t,n,o){var a,s,l,d,c,u,m,p,h,g,f,v,x,y,b,C,w,k,j,S,I,T,N,L,R,_,A,M,P=!1,E=!0;if(e.sCount[t]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[t]-e.listIndent>=4&&e.sCount[t]<e.blkIndent)return!1;if(o&&"paragraph"===e.parentType&&e.sCount[t]>=e.blkIndent&&(P=!0),(N=r(e,t))>=0){if(m=!0,R=e.bMarks[t]+e.tShift[t],x=Number(e.src.slice(R,N-1)),P&&1!==x)return!1}else{if(!((N=i(e,t))>=0))return!1;m=!1}if(P&&e.skipSpaces(N)>=e.eMarks[t])return!1;if(v=e.src.charCodeAt(N-1),o)return!0;for(f=e.tokens.length,m?(M=e.push("ordered_list_open","ol",1),1!==x&&(M.attrs=[["start",x]])):M=e.push("bullet_list_open","ul",1),M.map=g=[t,0],M.markup=String.fromCharCode(v),b=t,L=!1,A=e.md.block.ruler.getRules("list"),k=e.parentType,e.parentType="list";b<n;){for(T=N,y=e.eMarks[b],u=C=e.sCount[b]+N-(e.bMarks[t]+e.tShift[t]);T<y;){if(9===(a=e.src.charCodeAt(T)))C+=4-(C+e.bsCount[b])%4;else if(32===a)C++;else break;T++}if((c=(s=T)>=y?1:C-u)>4&&(c=1),d=u+c,(M=e.push("list_item_open","li",1)).markup=String.fromCharCode(v),M.map=p=[t,0],m&&(M.info=e.src.slice(R,N-1)),I=e.tight,S=e.tShift[t],j=e.sCount[t],w=e.listIndent,e.listIndent=e.blkIndent,e.blkIndent=d,e.tight=!0,e.tShift[t]=s-e.bMarks[t],e.sCount[t]=C,s>=y&&e.isEmpty(t+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,t,n,!0),(!e.tight||L)&&(E=!1),L=e.line-t>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=w,e.tShift[t]=S,e.sCount[t]=j,e.tight=I,(M=e.push("list_item_close","li",-1)).markup=String.fromCharCode(v),b=t=e.line,p[1]=b,s=e.bMarks[t],b>=n||e.sCount[b]<e.blkIndent||e.sCount[t]-e.blkIndent>=4)break;for(l=0,_=!1,h=A.length;l<h;l++)if(A[l](e,b,n,!0)){_=!0;break}if(_)break;if(m){if((N=r(e,b))<0)break;R=e.bMarks[b]+e.tShift[b]}else if((N=i(e,b))<0)break;if(v!==e.src.charCodeAt(N-1))break}return(M=m?e.push("ordered_list_close","ol",-1):e.push("bullet_list_close","ul",-1)).markup=String.fromCharCode(v),g[1]=b,e.line=b,e.parentType=k,E&&function(e,t){var n,o,i=e.level+2;for(n=t+2,o=e.tokens.length-2;n<o;n++)e.tokens[n].level===i&&"paragraph_open"===e.tokens[n].type&&(e.tokens[n+2].hidden=!0,e.tokens[n].hidden=!0,n+=2)}(e,f),!0}},185894,(e,t,n)=>{"use strict";var o=e.r(785306).normalizeReference,i=e.r(785306).isSpace;t.exports=function(e,t,n,r){var a,s,l,d,c,u,m,p,h,g,f,v,x,y,b,C,w=0,k=e.bMarks[t]+e.tShift[t],j=e.eMarks[t],S=t+1;if(e.sCount[t]-e.blkIndent>=4||91!==e.src.charCodeAt(k))return!1;for(;++k<j;)if(93===e.src.charCodeAt(k)&&92!==e.src.charCodeAt(k-1)){if(k+1===j||58!==e.src.charCodeAt(k+1))return!1;break}for(d=e.lineMax,b=e.md.block.ruler.getRules("reference"),g=e.parentType,e.parentType="reference";S<d&&!e.isEmpty(S);S++)if(!(e.sCount[S]-e.blkIndent>3)&&!(e.sCount[S]<0)){for(u=0,y=!1,m=b.length;u<m;u++)if(b[u](e,S,d,!0)){y=!0;break}if(y)break}for(k=1,j=(x=e.getLines(t,S,e.blkIndent,!1).trim()).length;k<j;k++){if(91===(a=x.charCodeAt(k)))return!1;if(93===a){h=k;break}10===a?w++:92===a&&++k<j&&10===x.charCodeAt(k)&&w++}if(h<0||58!==x.charCodeAt(h+1))return!1;for(k=h+2;k<j;k++)if(10===(a=x.charCodeAt(k)))w++;else if(i(a));else break;if(!(f=e.md.helpers.parseLinkDestination(x,k,j)).ok||(c=e.md.normalizeLink(f.str),!e.md.validateLink(c)))return!1;for(k=f.pos,w+=f.lines,s=k,l=w,v=k;k<j;k++)if(10===(a=x.charCodeAt(k)))w++;else if(i(a));else break;for(f=e.md.helpers.parseLinkTitle(x,k,j),k<j&&v!==k&&f.ok?(C=f.str,k=f.pos,w+=f.lines):(C="",k=s,w=l);k<j&&i(a=x.charCodeAt(k));)k++;if(k<j&&10!==x.charCodeAt(k)&&C)for(C="",k=s,w=l;k<j&&i(a=x.charCodeAt(k));)k++;return(!(k<j)||10===x.charCodeAt(k))&&!!(p=o(x.slice(1,h)))&&(!!r||(void 0===e.env.references&&(e.env.references={}),void 0===e.env.references[p]&&(e.env.references[p]={title:C,href:c}),e.parentType=g,e.line=t+w+1,!0))}},365092,(e,t,n)=>{"use strict";t.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},465726,(e,t,n)=>{"use strict";var o="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",i="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",r=RegExp("^(?:"+o+"|"+i+"|<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->|<[?][\\s\\S]*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),a=RegExp("^(?:"+o+"|"+i+")");t.exports.HTML_TAG_RE=r,t.exports.HTML_OPEN_CLOSE_TAG_RE=a},848004,(e,t,n)=>{"use strict";var o=e.r(365092),i=e.r(465726).HTML_OPEN_CLOSE_TAG_RE,r=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[RegExp("^</?("+o.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[RegExp(i.source+"\\s*$"),/^$/,!1]];t.exports=function(e,t,n,o){var i,a,s,l,d=e.bMarks[t]+e.tShift[t],c=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||60!==e.src.charCodeAt(d))return!1;for(i=0,l=e.src.slice(d,c);i<r.length&&!r[i][0].test(l);i++);if(i===r.length)return!1;if(o)return r[i][2];if(a=t+1,!r[i][1].test(l)){for(;a<n&&!(e.sCount[a]<e.blkIndent);a++)if(d=e.bMarks[a]+e.tShift[a],c=e.eMarks[a],l=e.src.slice(d,c),r[i][1].test(l)){0!==l.length&&a++;break}}return e.line=a,(s=e.push("html_block","",0)).map=[t,a],s.content=e.getLines(t,a,e.blkIndent,!0),!0}},198801,(e,t,n)=>{"use strict";var o=e.r(785306).isSpace;t.exports=function(e,t,n,i){var r,a,s,l,d=e.bMarks[t]+e.tShift[t],c=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||35!==(r=e.src.charCodeAt(d))||d>=c)return!1;for(a=1,r=e.src.charCodeAt(++d);35===r&&d<c&&a<=6;)a++,r=e.src.charCodeAt(++d);return!(a>6)&&(!(d<c)||!!o(r))&&(!!i||(c=e.skipSpacesBack(c,d),(s=e.skipCharsBack(c,35,d))>d&&o(e.src.charCodeAt(s-1))&&(c=s),e.line=t+1,(l=e.push("heading_open","h"+String(a),1)).markup="########".slice(0,a),l.map=[t,e.line],(l=e.push("inline","",0)).content=e.src.slice(d,c).trim(),l.map=[t,e.line],l.children=[],(l=e.push("heading_close","h"+String(a),-1)).markup="########".slice(0,a),!0))}},877687,(e,t,n)=>{"use strict";t.exports=function(e,t,n){var o,i,r,a,s,l,d,c,u,m,p=t+1,h=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;for(m=e.parentType,e.parentType="paragraph";p<n&&!e.isEmpty(p);p++)if(!(e.sCount[p]-e.blkIndent>3)){if(e.sCount[p]>=e.blkIndent&&(l=e.bMarks[p]+e.tShift[p])<(d=e.eMarks[p])&&(45===(u=e.src.charCodeAt(l))||61===u)&&(l=e.skipChars(l,u),(l=e.skipSpaces(l))>=d)){c=61===u?1:2;break}if(!(e.sCount[p]<0)){for(r=0,i=!1,a=h.length;r<a;r++)if(h[r](e,p,n,!0)){i=!0;break}if(i)break}}return!!c&&(o=e.getLines(t,p,e.blkIndent,!1).trim(),e.line=p+1,(s=e.push("heading_open","h"+String(c),1)).markup=String.fromCharCode(u),s.map=[t,e.line],(s=e.push("inline","",0)).content=o,s.map=[t,e.line-1],s.children=[],(s=e.push("heading_close","h"+String(c),-1)).markup=String.fromCharCode(u),e.parentType=m,!0)}},944020,(e,t,n)=>{"use strict";t.exports=function(e,t){var n,o,i,r,a,s,l=t+1,d=e.md.block.ruler.getRules("paragraph"),c=e.lineMax;for(s=e.parentType,e.parentType="paragraph";l<c&&!e.isEmpty(l);l++)if(!(e.sCount[l]-e.blkIndent>3)&&!(e.sCount[l]<0)){for(i=0,o=!1,r=d.length;i<r;i++)if(d[i](e,l,c,!0)){o=!0;break}if(o)break}return n=e.getLines(t,l,e.blkIndent,!1).trim(),e.line=l,(a=e.push("paragraph_open","p",1)).map=[t,e.line],(a=e.push("inline","",0)).content=n,a.map=[t,e.line],a.children=[],a=e.push("paragraph_close","p",-1),e.parentType=s,!0}},689451,(e,t,n)=>{"use strict";var o=e.r(46009),i=[["table",e.r(355627),["paragraph","reference"]],["code",e.r(798417)],["fence",e.r(753818),["paragraph","reference","blockquote","list"]],["blockquote",e.r(863906),["paragraph","reference","blockquote","list"]],["hr",e.r(206929),["paragraph","reference","blockquote","list"]],["list",e.r(261684),["paragraph","reference","blockquote"]],["reference",e.r(185894)],["html_block",e.r(848004),["paragraph","reference","blockquote"]],["heading",e.r(198801),["paragraph","reference","blockquote"]],["lheading",e.r(877687)],["paragraph",e.r(944020)]];function r(){this.ruler=new o;for(var e=0;e<i.length;e++)this.ruler.push(i[e][0],i[e][1],{alt:(i[e][2]||[]).slice()})}r.prototype.tokenize=function(e,t,n){for(var o,i=this.ruler.getRules(""),r=i.length,a=t,s=!1,l=e.md.options.maxNesting;a<n&&(e.line=a=e.skipEmptyLines(a),!(a>=n)&&!(e.sCount[a]<e.blkIndent));){if(e.level>=l){e.line=n;break}for(o=0;o<r&&!i[o](e,a,n,!1);o++);e.tight=!s,e.isEmpty(e.line-1)&&(s=!0),(a=e.line)<n&&e.isEmpty(a)&&(s=!0,e.line=++a)}},r.prototype.parse=function(e,t,n,o){var i;e&&(i=new this.State(e,t,n,o),this.tokenize(i,i.line,i.lineMax))},r.prototype.State=e.r(81251),t.exports=r},155068,(e,t,n)=>{"use strict";var o=e.r(6108),i=e.r(785306).isWhiteSpace,r=e.r(785306).isPunctChar,a=e.r(785306).isMdAsciiPunct;function s(e,t,n,o){this.src=e,this.env=n,this.md=t,this.tokens=o,this.tokens_meta=Array(o.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1}s.prototype.pushPending=function(){var e=new o("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e},s.prototype.push=function(e,t,n){this.pending&&this.pushPending();var i=new o(e,t,n),r=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),i.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],r={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(i),this.tokens_meta.push(r),i},s.prototype.scanDelims=function(e,t){var n,o,s,l,d,c,u,m,p,h=e,g=!0,f=!0,v=this.posMax,x=this.src.charCodeAt(e);for(n=e>0?this.src.charCodeAt(e-1):32;h<v&&this.src.charCodeAt(h)===x;)h++;return s=h-e,o=h<v?this.src.charCodeAt(h):32,u=a(n)||r(String.fromCharCode(n)),p=a(o)||r(String.fromCharCode(o)),c=i(n),(m=i(o))?g=!1:p&&!(c||u)&&(g=!1),c?f=!1:u&&!(m||p)&&(f=!1),t?(l=g,d=f):(l=g&&(!f||u),d=f&&(!g||p)),{can_open:l,can_close:d,length:s}},s.prototype.Token=o,t.exports=s},936523,(e,t,n)=>{"use strict";t.exports=function(e,t){for(var n=e.pos;n<e.posMax&&!function(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}(e.src.charCodeAt(n));)n++;return n!==e.pos&&(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}},369495,(e,t,n)=>{"use strict";var o=e.r(785306).isSpace;t.exports=function(e,t){var n,i,r,a=e.pos;if(10!==e.src.charCodeAt(a))return!1;if(n=e.pending.length-1,i=e.posMax,!t)if(n>=0&&32===e.pending.charCodeAt(n))if(n>=1&&32===e.pending.charCodeAt(n-1)){for(r=n-1;r>=1&&32===e.pending.charCodeAt(r-1);)r--;e.pending=e.pending.slice(0,r),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(a++;a<i&&o(e.src.charCodeAt(a));)a++;return e.pos=a,!0}},320595,(e,t,n)=>{"use strict";for(var o=e.r(785306).isSpace,i=[],r=0;r<256;r++)i.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){i[e.charCodeAt(0)]=1}),t.exports=function(e,t){var n,r=e.pos,a=e.posMax;if(92!==e.src.charCodeAt(r))return!1;if(++r<a){if((n=e.src.charCodeAt(r))<256&&0!==i[n])return t||(e.pending+=e.src[r]),e.pos+=2,!0;if(10===n){for(t||e.push("hardbreak","br",0),r++;r<a&&o(n=e.src.charCodeAt(r));)r++;return e.pos=r,!0}}return t||(e.pending+="\\"),e.pos++,!0}},37417,(e,t,n)=>{"use strict";t.exports=function(e,t){var n,o,i,r,a,s,l,d,c=e.pos;if(96!==e.src.charCodeAt(c))return!1;for(n=c,c++,o=e.posMax;c<o&&96===e.src.charCodeAt(c);)c++;if(l=(i=e.src.slice(n,c)).length,e.backticksScanned&&(e.backticks[l]||0)<=n)return t||(e.pending+=i),e.pos+=l,!0;for(a=s=c;-1!==(a=e.src.indexOf("`",s));){for(s=a+1;s<o&&96===e.src.charCodeAt(s);)s++;if((d=s-a)===l)return t||((r=e.push("code_inline","code",0)).markup=i,r.content=e.src.slice(c,a).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),e.pos=s,!0;e.backticks[d]=a}return e.backticksScanned=!0,t||(e.pending+=i),e.pos+=l,!0}},995832,(e,t,n)=>{"use strict";function o(e,t){var n,o,i,r,a,s=[],l=t.length;for(n=0;n<l;n++)126===(i=t[n]).marker&&-1!==i.end&&(r=t[i.end],(a=e.tokens[i.token]).type="s_open",a.tag="s",a.nesting=1,a.markup="~~",a.content="",(a=e.tokens[r.token]).type="s_close",a.tag="s",a.nesting=-1,a.markup="~~",a.content="","text"===e.tokens[r.token-1].type&&"~"===e.tokens[r.token-1].content&&s.push(r.token-1));for(;s.length;){for(o=(n=s.pop())+1;o<e.tokens.length&&"s_close"===e.tokens[o].type;)o++;n!==--o&&(a=e.tokens[o],e.tokens[o]=e.tokens[n],e.tokens[n]=a)}}t.exports.tokenize=function(e,t){var n,o,i,r,a=e.pos,s=e.src.charCodeAt(a);if(t||126!==s||(i=(o=e.scanDelims(e.pos,!0)).length,r=String.fromCharCode(s),i<2))return!1;for(i%2&&(e.push("text","",0).content=r,i--),n=0;n<i;n+=2)e.push("text","",0).content=r+r,e.delimiters.push({marker:s,length:0,token:e.tokens.length-1,end:-1,open:o.can_open,close:o.can_close});return e.pos+=o.length,!0},t.exports.postProcess=function(e){var t,n=e.tokens_meta,i=e.tokens_meta.length;for(o(e,e.delimiters),t=0;t<i;t++)n[t]&&n[t].delimiters&&o(e,n[t].delimiters)}},45745,(e,t,n)=>{"use strict";function o(e,t){var n,o,i,r,a,s;for(n=t.length-1;n>=0;n--)(95===(o=t[n]).marker||42===o.marker)&&-1!==o.end&&(i=t[o.end],s=n>0&&t[n-1].end===o.end+1&&t[n-1].marker===o.marker&&t[n-1].token===o.token-1&&t[o.end+1].token===i.token+1,a=String.fromCharCode(o.marker),(r=e.tokens[o.token]).type=s?"strong_open":"em_open",r.tag=s?"strong":"em",r.nesting=1,r.markup=s?a+a:a,r.content="",(r=e.tokens[i.token]).type=s?"strong_close":"em_close",r.tag=s?"strong":"em",r.nesting=-1,r.markup=s?a+a:a,r.content="",s&&(e.tokens[t[n-1].token].content="",e.tokens[t[o.end+1].token].content="",n--))}t.exports.tokenize=function(e,t){var n,o,i=e.pos,r=e.src.charCodeAt(i);if(t||95!==r&&42!==r)return!1;for(n=0,o=e.scanDelims(e.pos,42===r);n<o.length;n++)e.push("text","",0).content=String.fromCharCode(r),e.delimiters.push({marker:r,length:o.length,token:e.tokens.length-1,end:-1,open:o.can_open,close:o.can_close});return e.pos+=o.length,!0},t.exports.postProcess=function(e){var t,n=e.tokens_meta,i=e.tokens_meta.length;for(o(e,e.delimiters),t=0;t<i;t++)n[t]&&n[t].delimiters&&o(e,n[t].delimiters)}},753742,(e,t,n)=>{"use strict";var o=e.r(785306).normalizeReference,i=e.r(785306).isSpace;t.exports=function(e,t){var n,r,a,s,l,d,c,u,m="",p="",h=e.pos,g=e.posMax,f=e.pos,v=!0;if(91!==e.src.charCodeAt(e.pos)||(l=e.pos+1,(s=e.md.helpers.parseLinkLabel(e,e.pos,!0))<0))return!1;if((d=s+1)<g&&40===e.src.charCodeAt(d)){for(v=!1,d++;d<g&&(i(r=e.src.charCodeAt(d))||10===r);d++);if(d>=g)return!1;if(f=d,(c=e.md.helpers.parseLinkDestination(e.src,d,e.posMax)).ok){for(m=e.md.normalizeLink(c.str),e.md.validateLink(m)?d=c.pos:m="",f=d;d<g&&(i(r=e.src.charCodeAt(d))||10===r);d++);if(c=e.md.helpers.parseLinkTitle(e.src,d,e.posMax),d<g&&f!==d&&c.ok)for(p=c.str,d=c.pos;d<g&&(i(r=e.src.charCodeAt(d))||10===r);d++);}(d>=g||41!==e.src.charCodeAt(d))&&(v=!0),d++}if(v){if(void 0===e.env.references)return!1;if(d<g&&91===e.src.charCodeAt(d)?(f=d+1,(d=e.md.helpers.parseLinkLabel(e,d))>=0?a=e.src.slice(f,d++):d=s+1):d=s+1,a||(a=e.src.slice(l,s)),!(u=e.env.references[o(a)]))return e.pos=h,!1;m=u.href,p=u.title}return t||(e.pos=l,e.posMax=s,e.push("link_open","a",1).attrs=n=[["href",m]],p&&n.push(["title",p]),e.md.inline.tokenize(e),e.push("link_close","a",-1)),e.pos=d,e.posMax=g,!0}},208009,(e,t,n)=>{"use strict";var o=e.r(785306).normalizeReference,i=e.r(785306).isSpace;t.exports=function(e,t){var n,r,a,s,l,d,c,u,m,p,h,g,f,v="",x=e.pos,y=e.posMax;if(33!==e.src.charCodeAt(e.pos)||91!==e.src.charCodeAt(e.pos+1)||(d=e.pos+2,(l=e.md.helpers.parseLinkLabel(e,e.pos+1,!1))<0))return!1;if((c=l+1)<y&&40===e.src.charCodeAt(c)){for(c++;c<y&&(i(r=e.src.charCodeAt(c))||10===r);c++);if(c>=y)return!1;for(f=c,(m=e.md.helpers.parseLinkDestination(e.src,c,e.posMax)).ok&&(v=e.md.normalizeLink(m.str),e.md.validateLink(v)?c=m.pos:v=""),f=c;c<y&&(i(r=e.src.charCodeAt(c))||10===r);c++);if(m=e.md.helpers.parseLinkTitle(e.src,c,e.posMax),c<y&&f!==c&&m.ok)for(p=m.str,c=m.pos;c<y&&(i(r=e.src.charCodeAt(c))||10===r);c++);else p="";if(c>=y||41!==e.src.charCodeAt(c))return e.pos=x,!1;c++}else{if(void 0===e.env.references)return!1;if(c<y&&91===e.src.charCodeAt(c)?(f=c+1,(c=e.md.helpers.parseLinkLabel(e,c))>=0?s=e.src.slice(f,c++):c=l+1):c=l+1,s||(s=e.src.slice(d,l)),!(u=e.env.references[o(s)]))return e.pos=x,!1;v=u.href,p=u.title}return!t&&(a=e.src.slice(d,l),e.md.inline.parse(a,e.md,e.env,g=[]),(h=e.push("image","img",0)).attrs=n=[["src",v],["alt",""]],h.children=g,h.content=a,p&&n.push(["title",p])),e.pos=c,e.posMax=y,!0}},538282,(e,t,n)=>{"use strict";var o=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,i=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/;t.exports=function(e,t){var n,r,a,s,l,d,c=e.pos;if(60!==e.src.charCodeAt(c))return!1;for(l=e.pos,d=e.posMax;;){if(++c>=d||60===(s=e.src.charCodeAt(c)))return!1;if(62===s)break}return(n=e.src.slice(l+1,c),i.test(n))?(r=e.md.normalizeLink(n),!!e.md.validateLink(r)&&(t||((a=e.push("link_open","a",1)).attrs=[["href",r]],a.markup="autolink",a.info="auto",(a=e.push("text","",0)).content=e.md.normalizeLinkText(n),(a=e.push("link_close","a",-1)).markup="autolink",a.info="auto"),e.pos+=n.length+2,!0)):!!o.test(n)&&(r=e.md.normalizeLink("mailto:"+n),!!e.md.validateLink(r)&&(t||((a=e.push("link_open","a",1)).attrs=[["href",r]],a.markup="autolink",a.info="auto",(a=e.push("text","",0)).content=e.md.normalizeLinkText(n),(a=e.push("link_close","a",-1)).markup="autolink",a.info="auto"),e.pos+=n.length+2,!0))}},36434,(e,t,n)=>{"use strict";var o=e.r(465726).HTML_TAG_RE;t.exports=function(e,t){var n,i,r,a,s=e.pos;return!!e.md.options.html&&(a=e.posMax,60===e.src.charCodeAt(s)&&!(s+2>=a))&&(33===(i=e.src.charCodeAt(s+1))||63===i||47===i||!!((n=32|i)>=97&&n<=122))&&!!(r=e.src.slice(s).match(o))&&(t||(e.push("html_inline","",0).content=e.src.slice(s,s+r[0].length)),e.pos+=r[0].length,!0)}},316560,(e,t,n)=>{"use strict";var o=e.r(306963),i=e.r(785306).has,r=e.r(785306).isValidEntityCode,a=e.r(785306).fromCodePoint,s=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,l=/^&([a-z][a-z0-9]{1,31});/i;t.exports=function(e,t){var n,d,c=e.pos,u=e.posMax;if(38!==e.src.charCodeAt(c))return!1;if(c+1<u){if(35===e.src.charCodeAt(c+1)){if(d=e.src.slice(c).match(s))return t||(n="x"===d[1][0].toLowerCase()?parseInt(d[1].slice(1),16):parseInt(d[1],10),e.pending+=r(n)?a(n):a(65533)),e.pos+=d[0].length,!0}else if((d=e.src.slice(c).match(l))&&i(o,d[1]))return t||(e.pending+=o[d[1]]),e.pos+=d[0].length,!0}return t||(e.pending+="&"),e.pos++,!0}},433584,(e,t,n)=>{"use strict";function o(e,t){var n,o,i,r,a,s,l,d,c={},u=t.length;if(u){var m=0,p=-2,h=[];for(n=0;n<u;n++)if(i=t[n],h.push(0),(t[m].marker!==i.marker||p!==i.token-1)&&(m=n),p=i.token,i.length=i.length||0,i.close){for(c.hasOwnProperty(i.marker)||(c[i.marker]=[-1,-1,-1,-1,-1,-1]),a=c[i.marker][3*!!i.open+i.length%3],s=o=m-h[m]-1;o>a;o-=h[o]+1)if((r=t[o]).marker===i.marker&&r.open&&r.end<0&&(l=!1,(r.close||i.open)&&(r.length+i.length)%3==0&&(r.length%3!=0||i.length%3!=0)&&(l=!0),!l)){d=o>0&&!t[o-1].open?h[o-1]+1:0,h[n]=n-o+d,h[o]=d,i.open=!1,r.end=n,r.close=!1,s=-1,p=-2;break}-1!==s&&(c[i.marker][3*!!i.open+(i.length||0)%3]=s)}}}t.exports=function(e){var t,n=e.tokens_meta,i=e.tokens_meta.length;for(o(e,e.delimiters),t=0;t<i;t++)n[t]&&n[t].delimiters&&o(e,n[t].delimiters)}},604543,(e,t,n)=>{"use strict";t.exports=function(e){var t,n,o=0,i=e.tokens,r=e.tokens.length;for(t=n=0;t<r;t++)i[t].nesting<0&&o--,i[t].level=o,i[t].nesting>0&&o++,"text"===i[t].type&&t+1<r&&"text"===i[t+1].type?i[t+1].content=i[t].content+i[t+1].content:(t!==n&&(i[n]=i[t]),n++);t!==n&&(i.length=n)}},904483,(e,t,n)=>{"use strict";var o=e.r(46009),i=[["text",e.r(936523)],["newline",e.r(369495)],["escape",e.r(320595)],["backticks",e.r(37417)],["strikethrough",e.r(995832).tokenize],["emphasis",e.r(45745).tokenize],["link",e.r(753742)],["image",e.r(208009)],["autolink",e.r(538282)],["html_inline",e.r(36434)],["entity",e.r(316560)]],r=[["balance_pairs",e.r(433584)],["strikethrough",e.r(995832).postProcess],["emphasis",e.r(45745).postProcess],["text_collapse",e.r(604543)]];function a(){var e;for(e=0,this.ruler=new o;e<i.length;e++)this.ruler.push(i[e][0],i[e][1]);for(e=0,this.ruler2=new o;e<r.length;e++)this.ruler2.push(r[e][0],r[e][1])}a.prototype.skipToken=function(e){var t,n,o=e.pos,i=this.ruler.getRules(""),r=i.length,a=e.md.options.maxNesting,s=e.cache;if(void 0!==s[o]){e.pos=s[o];return}if(e.level<a)for(n=0;n<r&&(e.level++,t=i[n](e,!0),e.level--,!t);n++);else e.pos=e.posMax;!t&&e.pos++,s[o]=e.pos},a.prototype.tokenize=function(e){for(var t,n,o=this.ruler.getRules(""),i=o.length,r=e.posMax,a=e.md.options.maxNesting;e.pos<r;){if(e.level<a)for(n=0;n<i&&!(t=o[n](e,!1));n++);if(t){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},a.prototype.parse=function(e,t,n,o){var i,r,a,s=new this.State(e,t,n,o);for(this.tokenize(s),a=(r=this.ruler2.getRules("")).length,i=0;i<a;i++)r[i](s)},a.prototype.State=e.r(155068),t.exports=a},486563,(e,t,n)=>{"use strict";t.exports=function(t){var n={};n.src_Any=e.r(634171).source,n.src_Cc=e.r(270893).source,n.src_Z=e.r(940454).source,n.src_P=e.r(484865).source,n.src_ZPCc=[n.src_Z,n.src_P,n.src_Cc].join("|"),n.src_ZCc=[n.src_Z,n.src_Cc].join("|");var o="[><]";return n.src_pseudo_letter="(?:(?!"+o+"|"+n.src_ZPCc+")"+n.src_Any+")",n.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",n.src_auth="(?:(?:(?!"+n.src_ZCc+"|[@/\\[\\]()]).)+@)?",n.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",n.src_host_terminator="(?=$|"+o+"|"+n.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+n.src_ZPCc+"))",n.src_path="(?:[/?#](?:(?!"+n.src_ZCc+"|"+o+"|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+n.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+n.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+n.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+n.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+n.src_ZCc+"|[']).)+\\'|\\'(?="+n.src_pseudo_letter+"|[-]).|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+n.src_ZCc+"|[.]).|"+(t&&t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+n.src_ZCc+").|;(?!"+n.src_ZCc+").|\\!+(?!"+n.src_ZCc+"|[!]).|\\?(?!"+n.src_ZCc+"|[?]).)+|\\/)?",n.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',n.src_xn="xn--[a-z0-9\\-]{1,59}",n.src_domain_root="(?:"+n.src_xn+"|"+n.src_pseudo_letter+"{1,63})",n.src_domain="(?:"+n.src_xn+"|(?:"+n.src_pseudo_letter+")|(?:"+n.src_pseudo_letter+"(?:-|"+n.src_pseudo_letter+"){0,61}"+n.src_pseudo_letter+"))",n.src_host="(?:(?:(?:(?:"+n.src_domain+")\\.)*"+n.src_domain+"))",n.tpl_host_fuzzy="(?:"+n.src_ip4+"|(?:(?:(?:"+n.src_domain+")\\.)+(?:%TLDS%)))",n.tpl_host_no_ip_fuzzy="(?:(?:(?:"+n.src_domain+")\\.)+(?:%TLDS%))",n.src_host_strict=n.src_host+n.src_host_terminator,n.tpl_host_fuzzy_strict=n.tpl_host_fuzzy+n.src_host_terminator,n.src_host_port_strict=n.src_host+n.src_port+n.src_host_terminator,n.tpl_host_port_fuzzy_strict=n.tpl_host_fuzzy+n.src_port+n.src_host_terminator,n.tpl_host_port_no_ip_fuzzy_strict=n.tpl_host_no_ip_fuzzy+n.src_port+n.src_host_terminator,n.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+n.src_ZPCc+"|>|$))",n.tpl_email_fuzzy="(^|"+o+'|"|\\(|'+n.src_ZCc+")("+n.src_email_name+"@"+n.tpl_host_fuzzy_strict+")",n.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+n.src_ZPCc+"))((?![$+<=>^`|])"+n.tpl_host_port_fuzzy_strict+n.src_path+")",n.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+n.src_ZPCc+"))((?![$+<=>^`|])"+n.tpl_host_port_no_ip_fuzzy_strict+n.src_path+")",n}},20258,(e,t,n)=>{"use strict";function o(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach(function(t){t&&Object.keys(t).forEach(function(n){e[n]=t[n]})}),e}function i(e){return Object.prototype.toString.call(e)}function r(e){return"[object Function]"===i(e)}function a(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var s={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1},l={"http:":{validate:function(e,t,n){var o=e.slice(t);return(n.re.http||(n.re.http=RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(o))?o.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){var o=e.slice(t);return(n.re.no_http||(n.re.no_http=RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(o))?t>=3&&":"===e[t-3]||t>=3&&"/"===e[t-3]?0:o.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){var o=e.slice(t);return(n.re.mailto||(n.re.mailto=RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(o))?o.match(n.re.mailto)[0].length:0}}},d="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function c(){return function(e,t){t.normalize(e)}}function u(t){var n=t.re=e.r(486563)(t.__opts__),o=t.__tlds__.slice();function s(e){return e.replace("%TLDS%",n.src_tlds)}t.onCompile(),t.__tlds_replaced__||o.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),o.push(n.src_xn),n.src_tlds=o.join("|"),n.email_fuzzy=RegExp(s(n.tpl_email_fuzzy),"i"),n.link_fuzzy=RegExp(s(n.tpl_link_fuzzy),"i"),n.link_no_ip_fuzzy=RegExp(s(n.tpl_link_no_ip_fuzzy),"i"),n.host_fuzzy_test=RegExp(s(n.tpl_host_fuzzy_test),"i");var l=[];function d(e,t){throw Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}t.__compiled__={},Object.keys(t.__schemas__).forEach(function(e){var n=t.__schemas__[e];if(null!==n){var o,a={validate:null,link:null};if(t.__compiled__[e]=a,"[object Object]"===i(n)){"[object RegExp]"===i(n.validate)?(o=n.validate,a.validate=function(e,t){var n=e.slice(t);return o.test(n)?n.match(o)[0].length:0}):r(n.validate)?a.validate=n.validate:d(e,n),r(n.normalize)?a.normalize=n.normalize:n.normalize?d(e,n):a.normalize=c();return}if("[object String]"===i(n))return void l.push(e);d(e,n)}}),l.forEach(function(e){t.__compiled__[t.__schemas__[e]]&&(t.__compiled__[e].validate=t.__compiled__[t.__schemas__[e]].validate,t.__compiled__[e].normalize=t.__compiled__[t.__schemas__[e]].normalize)}),t.__compiled__[""]={validate:null,normalize:c()};var u=Object.keys(t.__compiled__).filter(function(e){return e.length>0&&t.__compiled__[e]}).map(a).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+n.src_ZPCc+"))("+u+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+n.src_ZPCc+"))("+u+")","ig"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),t.__index__=-1,t.__text_cache__=""}function m(e,t){var n=e.__index__,o=e.__last_index__,i=e.__text_cache__.slice(n,o);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=o+t,this.raw=i,this.text=i,this.url=i}function p(e,t){var n=new m(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function h(e,t){if(!(this instanceof h))return new h(e,t);!t&&Object.keys(e||{}).reduce(function(e,t){return e||s.hasOwnProperty(t)},!1)&&(t=e,e={}),this.__opts__=o({},s,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=o({},l,e),this.__compiled__={},this.__tlds__=d,this.__tlds_replaced__=!1,this.re={},u(this)}h.prototype.add=function(e,t){return this.__schemas__[e]=t,u(this),this},h.prototype.set=function(e){return this.__opts__=o(this.__opts__,e),this},h.prototype.test=function(e){var t,n,o,i,r,a,s,l;if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;if(this.re.schema_test.test(e)){for((s=this.re.schema_search).lastIndex=0;null!==(t=s.exec(e));)if(i=this.testSchemaAt(e,t[2],s.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||l<this.__index__)&&null!==(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(r=n.index+n[1].length,(this.__index__<0||r<this.__index__)&&(this.__schema__="",this.__index__=r,this.__last_index__=n.index+n[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&e.indexOf("@")>=0&&null!==(o=e.match(this.re.email_fuzzy))&&(r=o.index+o[1].length,a=o.index+o[0].length,(this.__index__<0||r<this.__index__||r===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=r,this.__last_index__=a)),this.__index__>=0},h.prototype.pretest=function(e){return this.re.pretest.test(e)},h.prototype.testSchemaAt=function(e,t,n){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,n,this):0},h.prototype.match=function(e){var t=0,n=[];this.__index__>=0&&this.__text_cache__===e&&(n.push(p(this,t)),t=this.__last_index__);for(var o=t?e.slice(t):e;this.test(o);)n.push(p(this,t)),o=o.slice(this.__last_index__),t+=this.__last_index__;return n.length?n:null},h.prototype.tlds=function(e,t){return(e=Array.isArray(e)?e:[e],t)?this.__tlds__=this.__tlds__.concat(e).sort().filter(function(e,t,n){return e!==n[t-1]}).reverse():(this.__tlds__=e.slice(),this.__tlds_replaced__=!0),u(this),this},h.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},h.prototype.onCompile=function(){},t.exports=h},676027,e=>{"use strict";let t=/^xn--/,n=/[^\0-\x7E]/,o=/[\x2E\u3002\uFF0E\uFF61]/g,i={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},r=Math.floor,a=String.fromCharCode;function s(e){throw RangeError(i[e])}function l(e,t){let n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),i+(function(e,t){let n=[],o=e.length;for(;o--;)n[o]=t(e[o]);return n})((e=e.replace(o,".")).split("."),t).join(".")}function d(e){let t=[],n=0,o=e.length;for(;n<o;){let i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<o){let o=e.charCodeAt(n++);(64512&o)==56320?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t}let c=e=>String.fromCodePoint(...e),u=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},m=function(e,t,n){let o=0;for(e=n?r(e/700):e>>1,e+=r(e/t);e>455;o+=36)e=r(e/35);return r(o+36*e/(e+38))},p=function(e){let t=[],n=e.length,o=0,i=128,a=72,l=e.lastIndexOf("-");l<0&&(l=0);for(let n=0;n<l;++n)e.charCodeAt(n)>=128&&s("not-basic"),t.push(e.charCodeAt(n));for(let c=l>0?l+1:0;c<n;){let l=o;for(let t=1,i=36;;i+=36){var d;c>=n&&s("invalid-input");let l=(d=e.charCodeAt(c++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36;(l>=36||l>r((0x7fffffff-o)/t))&&s("overflow"),o+=l*t;let u=i<=a?1:i>=a+26?26:i-a;if(l<u)break;let m=36-u;t>r(0x7fffffff/m)&&s("overflow"),t*=m}let u=t.length+1;a=m(o-l,u,0==l),r(o/u)>0x7fffffff-i&&s("overflow"),i+=r(o/u),o%=u,t.splice(o++,0,i)}return String.fromCodePoint(...t)},h=function(e){let t=[],n=(e=d(e)).length,o=128,i=0,l=72;for(let n of e)n<128&&t.push(a(n));let c=t.length,p=c;for(c&&t.push("-");p<n;){let n=0x7fffffff;for(let t of e)t>=o&&t<n&&(n=t);let d=p+1;for(let h of(n-o>r((0x7fffffff-i)/d)&&s("overflow"),i+=(n-o)*d,o=n,e))if(h<o&&++i>0x7fffffff&&s("overflow"),h==o){let e=i;for(let n=36;;n+=36){let o=n<=l?1:n>=l+26?26:n-l;if(e<o)break;let i=e-o,s=36-o;t.push(a(u(o+i%s,0))),e=r(i/s)}t.push(a(u(e,0))),l=m(i,d,p==c),i=0,++p}++i,++o}return t.join("")},g=function(e){return l(e,function(e){return t.test(e)?p(e.slice(4).toLowerCase()):e})},f=function(e){return l(e,function(e){return n.test(e)?"xn--"+h(e):e})};e.s(["decode",()=>p,"default",0,{version:"2.1.0",ucs2:{decode:d,encode:c},decode:p,encode:h,toASCII:f,toUnicode:g},"encode",()=>h,"toASCII",()=>f,"toUnicode",()=>g,"ucs2decode",()=>d,"ucs2encode",()=>c])},680997,(e,t,n)=>{"use strict";t.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},311985,(e,t,n)=>{"use strict";t.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}}},657944,(e,t,n)=>{"use strict";t.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}}},19236,(e,t,n)=>{"use strict";var o=e.r(785306),i=e.r(979167),r=e.r(681902),a=e.r(413510),s=e.r(689451),l=e.r(904483),d=e.r(20258),c=e.r(274899),u=e.r(676027),m={default:e.r(680997),zero:e.r(311985),commonmark:e.r(657944)},p=/^(vbscript|javascript|file|data):/,h=/^data:image\/(gif|png|jpeg|webp);/;function g(e){var t=e.trim().toLowerCase();return!p.test(t)||!!h.test(t)}var f=["http:","https:","mailto:"];function v(e){var t=c.parse(e,!0);if(t.hostname&&(!t.protocol||f.indexOf(t.protocol)>=0))try{t.hostname=u.toASCII(t.hostname)}catch(e){}return c.encode(c.format(t))}function x(e){var t=c.parse(e,!0);if(t.hostname&&(!t.protocol||f.indexOf(t.protocol)>=0))try{t.hostname=u.toUnicode(t.hostname)}catch(e){}return c.decode(c.format(t),c.decode.defaultChars+"%")}function y(e,t){if(!(this instanceof y))return new y(e,t);t||o.isString(e)||(t=e||{},e="default"),this.inline=new l,this.block=new s,this.core=new a,this.renderer=new r,this.linkify=new d,this.validateLink=g,this.normalizeLink=v,this.normalizeLinkText=x,this.utils=o,this.helpers=o.assign({},i),this.options={},this.configure(e),t&&this.set(t)}y.prototype.set=function(e){return o.assign(this.options,e),this},y.prototype.configure=function(e){var t,n=this;if(o.isString(e)&&!(e=m[t=e]))throw Error('Wrong `markdown-it` preset "'+t+'", check name');if(!e)throw Error("Wrong `markdown-it` preset, can't be empty");return e.options&&n.set(e.options),e.components&&Object.keys(e.components).forEach(function(t){e.components[t].rules&&n[t].ruler.enableOnly(e.components[t].rules),e.components[t].rules2&&n[t].ruler2.enableOnly(e.components[t].rules2)}),this},y.prototype.enable=function(e,t){var n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(t){n=n.concat(this[t].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));var o=e.filter(function(e){return 0>n.indexOf(e)});if(o.length&&!t)throw Error("MarkdownIt. Failed to enable unknown rule(s): "+o);return this},y.prototype.disable=function(e,t){var n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(t){n=n.concat(this[t].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));var o=e.filter(function(e){return 0>n.indexOf(e)});if(o.length&&!t)throw Error("MarkdownIt. Failed to disable unknown rule(s): "+o);return this},y.prototype.use=function(e){var t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this},y.prototype.parse=function(e,t){if("string"!=typeof e)throw Error("Input data should be a String");var n=new this.core.State(e,this,t);return this.core.process(n),n.tokens},y.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)},y.prototype.parseInline=function(e,t){var n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens},y.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)},t.exports=y},477094,(e,t,n)=>{"use strict";t.exports=e.r(19236)},250052,(e,t,n)=>{"use strict";t.exports=function(e,t,n){var o=(n=n||{}).marker||":",i=o.charCodeAt(0),r=o.length,a=n.validate||function(e){return e.trim().split(" ",2)[0]===t},s=n.render||function(e,n,o,i,r){return 1===e[n].nesting&&e[n].attrPush(["class",t]),r.renderToken(e,n,o,i,r)};e.block.ruler.before("fence","container_"+t,function(e,n,s,l){var d,c,u,m,p,h,g,f,v=!1,x=e.bMarks[n]+e.tShift[n],y=e.eMarks[n];if(i!==e.src.charCodeAt(x))return!1;for(d=x+1;d<=y&&o[(d-x)%r]===e.src[d];d++);if((u=Math.floor((d-x)/r))<3||(d-=(d-x)%r,m=e.src.slice(x,d),!a(p=e.src.slice(d,y))))return!1;if(l)return!0;for(c=n;!(++c>=s)&&(!((x=e.bMarks[c]+e.tShift[c])<(y=e.eMarks[c]))||!(e.sCount[c]<e.blkIndent));){;if(i===e.src.charCodeAt(x)&&!(e.sCount[c]-e.blkIndent>=4)){for(d=x+1;d<=y&&o[(d-x)%r]===e.src[d];d++);if(!(Math.floor((d-x)/r)<u)&&(d-=(d-x)%r,!((d=e.skipSpaces(d))<y))){v=!0;break}}}return g=e.parentType,f=e.lineMax,e.parentType="container",e.lineMax=c,(h=e.push("container_"+t+"_open","div",1)).markup=m,h.block=!0,h.info=p,h.map=[n,c],e.md.block.tokenize(e,n+1,c),(h=e.push("container_"+t+"_close","div",-1)).markup=e.src.slice(x,d),h.block=!0,e.parentType=g,e.lineMax=f,e.line=c+ +!!v,!0},{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules["container_"+t+"_open"]=s,e.renderer.rules["container_"+t+"_close"]=s}},505769,(e,t,n)=>{"use strict";function o(e,t,n,o){var i=Number(e[t].meta.id+1).toString(),r="";return"string"==typeof o.docId&&(r="-"+o.docId+"-"),r+i}function i(e,t){var n=Number(e[t].meta.id+1).toString();return e[t].meta.subId>0&&(n+=":"+e[t].meta.subId),"["+n+"]"}function r(e,t,n,o,i){var r=i.rules.footnote_anchor_name(e,t,n,o,i),a=i.rules.footnote_caption(e,t,n,o,i),s=r;return e[t].meta.subId>0&&(s+=":"+e[t].meta.subId),'<sup class="footnote-ref"><a href="#fn'+r+'" id="fnref'+s+'">'+a+"</a></sup>"}function a(e,t,n){return(n.xhtmlOut?'<hr class="footnotes-sep" />\n':'<hr class="footnotes-sep">\n')+'<section class="footnotes">\n<ol class="footnotes-list">\n'}function s(){return"</ol>\n</section>\n"}function l(e,t,n,o,i){var r=i.rules.footnote_anchor_name(e,t,n,o,i);return e[t].meta.subId>0&&(r+=":"+e[t].meta.subId),'<li id="fn'+r+'" class="footnote-item">'}function d(){return"</li>\n"}function c(e,t,n,o,i){var r=i.rules.footnote_anchor_name(e,t,n,o,i);return e[t].meta.subId>0&&(r+=":"+e[t].meta.subId),' <a href="#fnref'+r+'" class="footnote-backref"></a>'}t.exports=function(e){var t=e.helpers.parseLinkLabel,n=e.utils.isSpace;e.renderer.rules.footnote_ref=r,e.renderer.rules.footnote_block_open=a,e.renderer.rules.footnote_block_close=s,e.renderer.rules.footnote_open=l,e.renderer.rules.footnote_close=d,e.renderer.rules.footnote_anchor=c,e.renderer.rules.footnote_caption=i,e.renderer.rules.footnote_anchor_name=o,e.block.ruler.before("reference","footnote_def",function(e,t,o,i){var r,a,s,l,d,c,u,m,p,h,g,f=e.bMarks[t]+e.tShift[t],v=e.eMarks[t];if(f+4>v||91!==e.src.charCodeAt(f)||94!==e.src.charCodeAt(f+1))return!1;for(d=f+2;d<v;d++){if(32===e.src.charCodeAt(d))return!1;if(93===e.src.charCodeAt(d))break}if(d===f+2||d+1>=v||58!==e.src.charCodeAt(++d))return!1;if(i)return!0;for(d++,e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.refs||(e.env.footnotes.refs={}),c=e.src.slice(f+2,d-2),e.env.footnotes.refs[":"+c]=-1,(u=new e.Token("footnote_reference_open","",1)).meta={label:c},u.level=e.level++,e.tokens.push(u),r=e.bMarks[t],a=e.tShift[t],s=e.sCount[t],l=e.parentType,g=d,m=p=e.sCount[t]+d-(e.bMarks[t]+e.tShift[t]);d<v&&n(h=e.src.charCodeAt(d));)9===h?p+=4-p%4:p++,d++;return e.tShift[t]=d-g,e.sCount[t]=p-m,e.bMarks[t]=g,e.blkIndent+=4,e.parentType="footnote",e.sCount[t]<e.blkIndent&&(e.sCount[t]+=e.blkIndent),e.md.block.tokenize(e,t,o,!0),e.parentType=l,e.blkIndent-=4,e.tShift[t]=a,e.sCount[t]=s,e.bMarks[t]=r,(u=new e.Token("footnote_reference_close","",-1)).level=--e.level,e.tokens.push(u),!0},{alt:["paragraph","reference"]}),e.inline.ruler.after("image","footnote_inline",function(e,n){var o,i,r,a,s=e.posMax,l=e.pos;return!(l+2>=s)&&94===e.src.charCodeAt(l)&&91===e.src.charCodeAt(l+1)&&(o=l+2,!((i=t(e,l+1))<0)&&(n||(e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.list||(e.env.footnotes.list=[]),r=e.env.footnotes.list.length,e.md.inline.parse(e.src.slice(o,i),e.md,e.env,a=[]),e.push("footnote_ref","",0).meta={id:r},e.env.footnotes.list[r]={content:e.src.slice(o,i),tokens:a}),e.pos=i+1,e.posMax=s,!0))}),e.inline.ruler.after("footnote_inline","footnote_ref",function(e,t){var n,o,i,r,a=e.posMax,s=e.pos;if(s+3>a||!e.env.footnotes||!e.env.footnotes.refs||91!==e.src.charCodeAt(s)||94!==e.src.charCodeAt(s+1))return!1;for(o=s+2;o<a;o++){if(32===e.src.charCodeAt(o)||10===e.src.charCodeAt(o))return!1;if(93===e.src.charCodeAt(o))break}return o!==s+2&&!(o>=a)&&(o++,n=e.src.slice(s+2,o-1),void 0!==e.env.footnotes.refs[":"+n]&&(t||(e.env.footnotes.list||(e.env.footnotes.list=[]),e.env.footnotes.refs[":"+n]<0?(i=e.env.footnotes.list.length,e.env.footnotes.list[i]={label:n,count:0},e.env.footnotes.refs[":"+n]=i):i=e.env.footnotes.refs[":"+n],r=e.env.footnotes.list[i].count,e.env.footnotes.list[i].count++,e.push("footnote_ref","",0).meta={id:i,subId:r,label:n}),e.pos=o,e.posMax=a,!0))}),e.core.ruler.after("inline","footnote_tail",function(e){var t,n,o,i,r,a,s,l,d,c,u=!1,m={};if(e.env.footnotes&&(e.tokens=e.tokens.filter(function(e){return"footnote_reference_open"===e.type?(u=!0,d=[],c=e.meta.label,!1):"footnote_reference_close"===e.type?(u=!1,m[":"+c]=d,!1):(u&&d.push(e),!u)}),e.env.footnotes.list)){for(a=e.env.footnotes.list,s=new e.Token("footnote_block_open","",1),e.tokens.push(s),t=0,n=a.length;t<n;t++){for((s=new e.Token("footnote_open","",1)).meta={id:t,label:a[t].label},e.tokens.push(s),a[t].tokens?(l=[],(s=new e.Token("paragraph_open","p",1)).block=!0,l.push(s),(s=new e.Token("inline","",0)).children=a[t].tokens,s.content=a[t].content,l.push(s),(s=new e.Token("paragraph_close","p",-1)).block=!0,l.push(s)):a[t].label&&(l=m[":"+a[t].label]),e.tokens=e.tokens.concat(l),r="paragraph_close"===e.tokens[e.tokens.length-1].type?e.tokens.pop():null,i=a[t].count>0?a[t].count:1,o=0;o<i;o++)(s=new e.Token("footnote_anchor","",0)).meta={id:t,subId:o,label:a[t].label},e.tokens.push(s);r&&e.tokens.push(r),s=new e.Token("footnote_close","",-1),e.tokens.push(s)}s=new e.Token("footnote_block_close","",-1),e.tokens.push(s)}})}},803293,(e,t,n)=>{"use strict";var o=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function i(e,t){var n,i,r=e.posMax,a=e.pos;if(126!==e.src.charCodeAt(a)||t||a+2>=r)return!1;for(e.pos=a+1;e.pos<r;){if(126===e.src.charCodeAt(e.pos)){n=!0;break}e.md.inline.skipToken(e)}return!n||a+1===e.pos||(i=e.src.slice(a+1,e.pos)).match(/(^|[^\\])(\\\\)*\s/)?(e.pos=a,!1):(e.posMax=e.pos,e.pos=a+1,e.push("sub_open","sub",1).markup="~",e.push("text","",0).content=i.replace(o,"$1"),e.push("sub_close","sub",-1).markup="~",e.pos=e.posMax+1,e.posMax=r,!0)}t.exports=function(e){e.inline.ruler.after("emphasis","sub",i)}},543881,(e,t,n)=>{"use strict";var o=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function i(e,t){var n,i,r=e.posMax,a=e.pos;if(94!==e.src.charCodeAt(a)||t||a+2>=r)return!1;for(e.pos=a+1;e.pos<r;){if(94===e.src.charCodeAt(e.pos)){n=!0;break}e.md.inline.skipToken(e)}return!n||a+1===e.pos||(i=e.src.slice(a+1,e.pos)).match(/(^|[^\\])(\\\\)*\s/)?(e.pos=a,!1):(e.posMax=e.pos,e.pos=a+1,e.push("sup_open","sup",1).markup="^",e.push("text","",0).content=i.replace(o,"$1"),e.push("sup_close","sup",-1).markup="^",e.pos=e.posMax+1,e.posMax=r,!0)}t.exports=function(e){e.inline.ruler.after("emphasis","sup",i)}},40926,e=>{"use strict";var t=e.i(477094),n=e.i(250052),o=e.i(505769),i=e.i(803293),r=e.i(543881);function a(e,t){var n,o,i,r=e.pos;if(92!==e.src.charCodeAt(r))return!1;var a=e.src.slice(++r).match(/^(?:\\\[|\\\(|begin\{([^}]*)\})/);if(!a)return!1;r+=a[0].length,"\\["===a[0]?(n="display_math",o="\\\\]"):"\\("===a[0]?(n="inline_math",o="\\\\)"):a[1]&&(n="math",o="\\end{"+a[1]+"}",i=!0);var s=e.src.indexOf(o,r);if(-1===s)return!1;var l=s+o.length;return t||(e.push(n,"",0).content=i?e.src.slice(e.pos,l):e.src.slice(r,s)),e.pos=l,!0}function s(e,t){var n=e.pos;if(36!==e.src.charCodeAt(n))return!1;var o="$",i=e.src.charCodeAt(++n);if(36===i){if(o="$$",36===e.src.charCodeAt(++n))return!1}else if(32===i||9===i||10===i)return!1;var r=e.src.indexOf(o,n);if(-1===r||92===e.src.charCodeAt(r-1))return!1;var a=r+o.length;if(1===o.length){var s=e.src.charCodeAt(r-1);if(32===s||9===s||10===s)return!1;var l=e.src.charCodeAt(a);if(l>=48&&l<58)return!1}return t||(e.push(1===o.length?"inline_math":"display_math","",0).content=e.src.slice(n,r)),e.pos=a,!0}var l={math:"Math",inline_math:"InlineMath",display_math:"DisplayMath"};function d(e,t){let n=!1,o=e.skipChars(t,43);62===e.src.charCodeAt(o)&&(o++,n=!0);let i=o-t,r="+".repeat(Math.max(i-1,0))+(n?">":"+");return{pos:o,isOpen:n,markerCount:i,marker:r}}function c(e,t,n,o){let i=!1,r=e.bMarks[t]+e.tShift[t],a=e.eMarks[t],{pos:s,isOpen:l,markerCount:c,marker:m}=d(e,r);if(c<3)return!1;let p=e.src.slice(s,a).trim();if(u(e,s,a)||p.endsWith(m))return!1;if(o)return!0;let h=t,g=!0;for(;!(++h>=n)&&(!((r=e.bMarks[h]+e.tShift[h])<(a=e.eMarks[h]))||!(e.sCount[h]<e.blkIndent));){;if(43!==e.src.charCodeAt(r)){g&&(g=u(e,r,a));continue}if(e.sCount[h]-e.blkIndent>=4)continue;let t=d(e,r);if((s=t.pos,t.marker===m)&&!((s=e.skipSpaces(s))<a)){i=!0;break}}if(g)return!1;let f=e.parentType,v=e.lineMax;e.parentType="reference",e.lineMax=h;let x=e.push("collapsible_open","details",1);x.block=!0,x.info=p,x.markup=m,x.map=[t,h],l&&x.attrSet("open","");let y=[],b=[new e.Token("collapsible_marker","span",-1)];if(p.match(/^#{1,6}/)){let t=(y=e.md.parse(p,e.env)).shift();t&&y.unshift(t,...b)}else e.md.inline.parse(p,e.md,e.env,y),y.unshift(...b);return(x=e.push("collapsible_summary","summary",0)).content=p,x.children=y,x=e.push("collapsible_contents","div",1),e.md.block.tokenize(e,t+1,h),x=e.push("collapsible_contents_close","div",-1),(x=e.push("collapsible_close","details",-1)).markup=e.src.slice(r,s),x.block=!0,e.parentType=f,e.lineMax=v,e.line=h+ +!!i,!0}function u(e,t,n){for(;t<n;t++)if(!e.md.utils.isWhiteSpace(e.src.charCodeAt(t)))return!1;return!0}function m(e){e.block.ruler.before("fence","collapsible",c,{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.collapsible_open=function(e,t,n,o,i){return'<details class="detailsBlock">'},e.renderer.rules.collapsible_contents=function(e,t,n,o,i){return'<div class="detailsBlockContent">'},e.renderer.rules.collapsible_contents_close=function(e,t,n,o,i){return"</div>"},e.renderer.rules.collapsible_summary=function(e,t,n,o,i){let r=i.render(e[t].children,n,o);return'<summary class="detailsBlockTitle">'.concat(r,"</summary>")}}let p=null;function h(){if(!p){var e,d,c;let u=(0,t.default)({linkify:!0});u.use((d=e||{},e=Object.keys(c={beforeMath:"",afterMath:"",beforeInlineMath:"\\(",afterInlineMath:"\\)",beforeDisplayMath:"\\[",afterDisplayMath:"\\]"}).reduce(function(e,t){return void 0===e[t]&&(e[t]=c[t]),e},d),function(t){t.inline.ruler.before("escape","math",a),t.inline.ruler.push("texMath",s),Object.keys(l).forEach(function(n){var o=e["before"+l[n]],i=e["after"+l[n]];t.renderer.rules[n]=function(e,t){return o+e[t].content.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")+i}})})),u.use(n.default,"spoiler"),u.use(o.default),v(u),u.use(i.default),u.use(r.default),u.use(m),p=u}return p}let g=null;function f(){if(!g){let e=(0,t.default)({linkify:!0});e.use(n.default,"spoiler"),e.use(o.default),v(e),e.use(i.default),e.use(r.default),g=e}return g}function v(e){e.renderer.rules.footnote_ref=(e,t,n,o,i)=>{let r=i.rules.footnote_anchor_name(e,t,n,o,i),a=i.rules.footnote_caption(e,t,n,o,i);e[t].meta.subId>0&&e[t].meta.subId;let s=Number(e[t].meta.id+1).toString();return'<span data-footnote-reference="" data-footnote-index="'.concat(s,'" data-footnote-id="').concat(r,'" role="doc-noteref" id="fnref').concat(r,'" class="footnote-reference">\n      <sup><a href="#fn').concat(r,'" class="">').concat(a,"</a></sup>\n    </span>")},e.renderer.rules.footnote_block_open=(e,t,n)=>'<ol data-footnote-section="" role="doc-endnotes" class="footnote-section footnotes">',e.renderer.rules.footnote_block_close=()=>"</ol>\n",e.renderer.rules.footnote_open=(e,t,n,o,i)=>{let r=i.rules.footnote_anchor_name(e,t,n,o,i);e[t].meta.subId>0&&(r+=":".concat(e[t].meta.subId));let a=Number(e[t].meta.id+1).toString();return'<li data-footnote-item="" data-footnote-index="'.concat(a,'" data-footnote-id="').concat(r,'" id="fn').concat(r,'" role="doc-endnote" class="footnote-item">')},e.renderer.rules.footnote_close=()=>"</li>\n",e.renderer.rules.footnote_anchor=(e,t,n,o,i)=>{let r=i.rules.footnote_anchor_name(e,t,n,o,i);return e[t].meta.subId>0&&(r+=":".concat(e[t].meta.subId)),' <a href="#fnref'.concat(r,'" class="footnote-backref"></a>')},e.renderer.rules.footnote_anchor_name=(e,t,n,o)=>{let i=Number(e[t].meta.id+1).toString(),r="";return"string"==typeof o.docId&&(r="-".concat(o.docId,"-")),r+i},e.renderer.rules.footnote_caption=(e,t,n,o)=>{let i=Number(e[t].meta.id+1).toString();return e[t].meta.subId>0&&(i+=":".concat(e[t].meta.subId)),"[".concat(i,"]")}}e.s(["getMarkdownIt",()=>h,"getMarkdownItNoMathjax",()=>f],40926)},618354,e=>{"use strict";function t(e){let[t,n,o]=(e=e||"1.0.0").split(".").map(e=>parseInt(e,10));return{major:t,minor:n,patch:o}}e.i(2942),e.i(40926),e.s(["extractVersionsFromSemver",()=>t])},336846,969189,e=>{"use strict";var t=e.i(843476),n=e.i(618354),o=e.i(271645);let i=(0,e.i(339213).default)((0,t.jsxs)(o.default.Fragment,{children:[(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,t.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"})]}),"History");e.s(["default",0,i],969189);var r=e.i(159211),a=e.i(110601),s=e.i(79732);let l=(0,e.i(429329).defineStyles)("CommentOutdatedWarning",e=>({outdatedWarning:{float:"right",position:"relative",[e.breakpoints.down("xs")]:{float:"none",display:"block"}},icon:{fontSize:"inherit",position:"relative",top:2}})),d=e=>{let{comment:n}=e,o=(0,s.useStyles)(l);return(0,t.jsx)("span",{className:o.outdatedWarning,children:(0,t.jsx)(a.default,{title:"The top-level post had major updates since this comment was created. Click to see post at time of creation.",children:(0,t.jsxs)(r.QueryLink,{query:{revision:n.postVersion},merge:!0,children:[(0,t.jsx)(i,{className:o.icon})," Response to previous version "]})})})};e.s(["default",0,e=>{let{comment:o,post:i}=e;return!function(e,t){var o;if(!(null==e?void 0:e.postVersion)||!(null==t||null==(o=t.contents)?void 0:o.version))return!1;let{major:i}=(0,n.extractVersionsFromSemver)(e.postVersion),{major:r}=(0,n.extractVersionsFromSemver)(t.contents.version);return 0===i?r>1:i<r}(o,i)?null:(0,t.jsx)(d,{comment:o})}],336846)},449644,e=>{"use strict";var t=e.i(843476),n=e.i(538794),o=e.i(820010),i=e.i(552275),r=e.i(791434),a=e.i(110601),s=e.i(813292);let l=(0,n.registerComponent)("UserCommentMarkers",e=>{let{user:n,isPostAuthor:l,className:d,classes:c}=e;if(!n)return null;let u=(0,r.isFriendlyUI)()&&l,m=(0,o.isNewUser)(n);return u||m?(0,t.jsxs)("span",{className:d,children:[u&&(0,t.jsx)(a.default,{placement:"bottom-start",title:"Post author",className:c.iconWrapper,children:(0,t.jsx)(s.default,{icon:"Author",className:c.postAuthorIcon})}),m&&(0,t.jsx)(a.default,{placement:"bottom-start",title:"".concat(n.displayName," is either new on ").concat(i.siteNameWithArticleSetting.get()," or doesn't have much karma yet."),className:c.iconWrapper,children:(0,t.jsx)(s.default,{icon:"Sprout",className:c.sproutIcon})})]}):null},{styles:e=>({iconWrapper:{margin:"0 3px"},postAuthorIcon:{verticalAlign:"text-bottom",color:e.palette.grey[500],fontSize:16},sproutIcon:{position:"relative",bottom:-2,color:e.palette.icon.sprout,fontSize:16}})});e.s(["default",0,l])},111907,783323,e=>{"use strict";e.s(["default",()=>D],111907);var t=e.i(843476),n=e.i(271645),o=e.i(343794),i=e.i(159211),r=e.i(552275),a=e.i(935132),s=e.i(182584),l=e.i(652897),d=e.i(673991),c=e.i(530841),u=e.i(161517),m=e.i(791434),p=e.i(698659),h=e.i(219087),g=e.i(548723),f=e.i(780239),v=e.i(555336),x=e.i(733361),y=e.i(336846),b=e.i(645446),C=e.i(147630),w=e.i(813292),k=e.i(245314),j=e.i(449644),S=e.i(946271);e.i(813868);var I=e.i(122756),T=e.i(331795);function N(e){let{document:t}=(0,T.parseDocumentFromString)(e);t.querySelectorAll(".footnote-reference").forEach(e=>e.remove());let n=t.querySelector(".footnotes");return null==n||n.remove(),(t.body.textContent||"").trim()}e.s(["stripFootnotes",()=>N],783323);var L=e.i(110601),R=e.i(429329),_=e.i(79732);let A=(0,I.gql)("\n  query CommentPollVote($documentId: String) {\n    forumEvent(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...ForumEventsDisplay\n      }\n    }\n  }\n"),M=(0,R.defineStyles)("CommentPollVote",e=>({root:{fontWeight:600,whiteSpace:"nowrap"},agreePollVote:{color:e.palette.primary.main},disagreePollVote:{color:e.palette.warning.main},tooltip:{transform:"translateY(-10px)"}})),P=e=>{var n,i,r,a,s,l;let{comment:d}=e,c=(0,_.useStyles)(M),u=null==(i=d.forumEventMetadata)||null==(n=i.poll)?void 0:n.voteWhenPublished,m=null==(a=d.forumEventMetadata)||null==(r=a.poll)?void 0:r.latestVote,{loading:p,data:h}=(0,S.useQuery)(A,{variables:{documentId:d.forumEventId},skip:!d.forumEventId,ssr:!1}),g=null==h||null==(s=h.forumEvent)?void 0:s.result,f=(null==g?void 0:g.isGlobal)!==!1,v=!f&&g?"#".concat(g._id):void 0,x=(null==g?void 0:g.pollAgreeWording)||"agree",y=(null==g?void 0:g.pollDisagreeWording)||"disagree";if(null==u)return null;let b=e=>"".concat(Math.round(200*Math.abs(e-.5)),"%"),C=(null!=m?m:u)>=.5,w=u>=.5,k=b(null!=m?m:u),j=b(u),I=w!==C,T=I||k!==j,R=(null==g||null==(l=g.pollQuestion)?void 0:l.html)&&N(g.pollQuestion.html);return(0,t.jsxs)("span",{className:c.root,children:[T&&(0,t.jsxs)("span",{className:(0,o.default)(w?c.agreePollVote:c.disagreePollVote),children:[(0,t.jsx)(L.default,{title:"Vote when comment was posted",placement:"top",popperClassName:c.tooltip,children:(0,t.jsxs)("s",{children:[j,I&&(w?" ".concat(x):" ".concat(y))]})}),""]}),(0,t.jsx)(L.default,{title:R&&(0,t.jsxs)("span",{children:['With the question "',R,'"']}),placement:"top",popperClassName:c.tooltip,children:(0,t.jsxs)(f?"span":"a",{className:C?c.agreePollVote:c.disagreePollVote,href:v,children:[k,C?" ".concat(x):" ".concat(y)]})})]})};var E=e.i(231080),F=e.i(495314);let B=(0,R.defineStyles)("CommentsItemMeta",e=>({root:{"& > div":{marginRight:5},position:"relative",display:"flex",flexWrap:"wrap",alignItems:"center",rowGap:"6px",marginBottom:8,color:e.palette.text.dim,paddingTop:"0.6em",marginRight:e.isFriendlyUI?40:20,"& a:hover, & a:active":{textDecoration:"none",color:e.isFriendlyUI?void 0:"".concat(e.palette.linkHover.dim," !important")}},sideCommentMeta:{display:"flex",alignItems:"baseline"},metaNotice:{...(0,E.metaNoticeStyles)(e)},collapse:{marginRight:e.isFriendlyUI?6:5,opacity:.8,fontSize:"0.8rem",lineHeight:"1rem",paddingBottom:e.isFriendlyUI?4:2,display:e.isFriendlyUI?"inline-block":"flex",verticalAlign:"middle",transform:e.isFriendlyUI?"translateY(3px)":void 0,"& span":{fontFamily:"monospace"}},collapseChevron:{width:15,transition:"transform 0.2s"},collapseChevronOpen:{transform:"rotate(90deg)"},collapseCharacter:{transform:"translateY(0.75px)"},username:{marginRight:6*!e.isFriendlyUI,"$sideCommentMeta &":{flexGrow:1,whiteSpace:"nowrap",textOverflow:"ellipsis",flexShrink:1,display:"inline-block",overflowX:"hidden"}},userMarkers:{marginRight:6},moderatorHat:{marginRight:8},relevantTags:{marginLeft:12,position:"relative",top:-2,"& .FooterTag-root:nth-child(n+4)":{marginTop:8}},relevantTag:{marginTop:4},showMoreTags:{position:"relative",top:1,color:e.palette.grey[500],fontSize:12,marginLeft:8},rightSection:{position:"absolute",right:e.isFriendlyUI?-46:-26,top:12,display:"flex"},linkIcon:{"--icon-size":"15.6px",verticalAlign:"top",color:e.palette.icon.dim,margin:"0 4px",position:"relative",top:1},linkIconHighlighted:{strokeWidth:"0.7px",stroke:"currentColor",color:e.palette.primary.main},menu:e.isFriendlyUI?{color:e.palette.icon.dim}:{opacity:.35}})),D=e=>{var S;let{treeOptions:I,comment:T,showCommentTitle:N,isParentComment:L,parentCommentId:R,showParentState:A,toggleShowParent:M,scrollIntoView:E,parentAnswerId:D,setSingleLine:U,collapsed:H,toggleCollapse:W,setShowEdit:O,rightSectionElements:V}=e,z=(0,_.useStyles)(B),$=(0,c.useFilteredCurrentUser)(e=>(0,d.userIsAdmin)(e)),{scrollToCommentId:q}=(0,l.useCommentLinkState)(),{postPage:G,showCollapseButtons:Z,post:Y,tag:Q,singleLineCollapse:K,isSideComment:X,hideActionsMenu:J,hideParentCommentToggle:ee,hideParentCommentToggleForTopLevel:et}=I,en=Y&&(Y.userId===T.userId||(0,s.userIsPostCoauthor)(T.user,Y)),eo=(null==Y?void 0:Y.shortform)&&!T.parentCommentId,ei={comment:T,post:Y,tag:Q,scrollIntoView:E,scrollOnClick:G&&!L},er=(0,l.useCommentLink)(ei),ea=T.moderatorHat&&(!!$||!T.hideModeratorHat),es=T.hideModeratorHat?"Moderator Comment (Invisible)":"Moderator Comment",el=(0,a.isEAForum)()&&"2020"===T.reviewingForReview?"the Decade":T.reviewingForReview,[ed,ec]=(0,n.useState)(!1),eu=null!=(S=T.relevantTags)?S:[],em=!1;ed||(em=eu.length>1&&!ed,eu=eu.slice(0,1));let ep="in-context"===r.commentPermalinkStyleSetting.get()&&q===T._id,eh=!L&&!J;return(0,t.jsxs)("div",{className:(0,o.default)(z.root,X&&z.sideCommentMeta),children:[!R&&!T.parentCommentId&&L&&(0,t.jsx)("div",{children:""}),Y&&(0,t.jsx)(p.default,{comment:T,post:Y}),!N&&(0,t.jsx)(h.default,{comment:T,small:!0}),!ee&&!(et&&T.parentCommentId===T.topLevelCommentId)&&R!=T.parentCommentId&&D!=T.parentCommentId&&(0,t.jsx)(g.default,{comment:T,active:A,onClick:M}),(Z||H)&&(0,t.jsx)("a",{className:z.collapse,onClick:W,children:(0,m.isFriendlyUI)()?(0,t.jsx)(w.default,{icon:"ThickChevronRight",className:(0,o.default)(z.collapseChevron,!H&&z.collapseChevronOpen)}):(0,t.jsxs)(t.Fragment,{children:["[",(0,t.jsx)("span",{className:z.collapseCharacter,children:H?"+":"-"}),"]"]})}),K&&(0,t.jsxs)("a",{className:z.collapse,onClick:()=>U&&U(!0),children:["[",(0,t.jsx)("span",{children:H?"+":"-"}),"]"]}),(0,t.jsx)(f.default,{comment:T,className:z.username}),(0,t.jsx)(j.default,{user:T.user,isPostAuthor:en&&!eo,className:z.userMarkers}),(0,t.jsx)(v.default,{...ei}),ea&&(0,t.jsx)("span",{className:z.moderatorHat,children:es}),!T.debateResponse&&!T.rejected&&!T.draft&&(0,t.jsx)(x.default,{document:T,collectionName:"Comments",hideKarma:null==Y?void 0:Y.hideCommentKarma}),Y&&(0,t.jsx)(y.default,{comment:T,post:Y}),T.nominatedForReview&&(0,t.jsx)(i.Link,{to:"/nominations/".concat(T.nominatedForReview),className:z.metaNotice,children:"Nomination for ".concat(T.nominatedForReview," Review")}),T.reviewingForReview&&(0,t.jsx)(i.Link,{to:(0,F.getReviewLink)(T.reviewingForReview),className:z.metaNotice,children:"Review for ".concat(el," Review")}),!!eu.length&&(0,t.jsxs)("span",{className:z.relevantTags,children:[eu.map(e=>(0,t.jsx)(b.default,{tag:e,hoverable:!0,className:z.relevantTag,neverCoreStyling:(0,m.isBookUI)(),smallText:!0},e._id)),em&&(0,t.jsx)(C.default,{loadMore:()=>ec(!0),message:"Show more",className:z.showMoreTags})]}),T.forumEventId&&(0,t.jsx)(P,{comment:T}),(V||(0,m.isFriendlyUI)()||eh)&&(0,t.jsxs)("span",{className:z.rightSection,children:[V,(0,m.isFriendlyUI)()&&(0,t.jsx)(er,{children:(0,t.jsx)(w.default,{icon:"Link",className:(0,o.default)(z.linkIcon,{[z.linkIconHighlighted]:ep})})}),eh&&(0,t.jsx)(u.AnalyticsContext,{pageElementContext:"tripleDotMenu",children:(0,t.jsx)(k.default,{className:z.menu,comment:T,post:Y,tag:Q,showEdit:O})})]})]})}},257006,e=>{"use strict";e.s(["default",()=>i]);var t=e.i(843476),n=e.i(566721),o=e.i(918889);let i=e=>{var i;let{comment:r,...a}=e,s=null==(i=r.contents)?void 0:i.html;return s?(0,t.jsx)(o.default,{contentHtml:s,moreLink:(0,n.commentGetPageUrlFromIds)({commentId:r._id,postId:r.postId,postSlug:"postSlug"in r?r.postSlug:void 0}),contentType:"comment",alwaysExpandInPlace:!0,...a}):null}},472722,e=>{"use strict";var t=e.i(843476),n=e.i(244026),o=e.i(605299),i=e.i(232794);e.s(["default",0,e=>{let{date:r}=e,{timezone:a}=(0,o.useTimezone)();return(0,t.jsx)(i.default,{dateTime:r,children:(0,n.default)(new Date(r)).tz(a).calendar()})}])},601250,e=>{"use strict";var t=e.i(843476),n=e.i(946271);e.i(813868);var o=e.i(122756),i=e.i(472722),r=e.i(429329),a=e.i(79732);let s=(0,o.gql)("\n  query CommentDeletedMetadata($documentId: String) {\n    comment(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...DeletedCommentsMetaData\n      }\n    }\n  }\n"),l=(0,r.defineStyles)("CommentDeletedMetadata",e=>({root:{opacity:.5},meta:{fontSize:12,marginLeft:3,fontStyle:"italic"}}));e.s(["default",0,e=>{var o;let{documentId:r}=e,d=(0,a.useStyles)(l),{data:c}=(0,n.useQuery)(s,{variables:{documentId:r}}),u=null==c||null==(o=c.comment)?void 0:o.result;if(!u||!u.deleted)return null;{let e=u.deletedByUser&&u.deletedByUser.displayName;return(0,t.jsxs)("div",{className:d.root,children:[(0,t.jsxs)("div",{className:d.meta,children:[e&&(0,t.jsxs)("span",{children:["Deleted by ",e]}),", ",u.deletedDate&&(0,t.jsx)("span",{children:(0,t.jsx)(i.default,{date:u.deletedDate})})]}),u.deletedReason&&(0,t.jsxs)("div",{className:d.meta,children:["Reason: ",u.deletedReason]})]})}}])},783473,e=>{"use strict";e.s(["default",()=>m]);var t=e.i(843476),n=e.i(538794),o=e.i(343794),i=e.i(964344),r=e.i(530841),a=e.i(552275),s=e.i(87828),l=e.i(690118),d=e.i(692436),c=e.i(601250),u=e.i(916449);let m=(0,n.registerComponent)("CommentBody",e=>{var n;let m,p,{comment:h,commentBodyRef:g,collapsed:f,truncated:v,postPage:x,voteProps:y,className:b,classes:C}=e,w=(0,r.useFilteredCurrentUser)(e=>e&&(x?e.noCollapseCommentsPosts:e.noCollapseCommentsFrontpage)),{html:k=""}=h.contents||{},j=(0,o.default)(b,!h.answer&&C.commentStyling,h.answer&&C.answerStyling,h.retracted&&C.retracted);if(h.deleted)return(0,t.jsx)(c.default,{documentId:h._id});if(f)return null;let S=v&&!w?(0,i.commentExcerptFromHTML)(h,x):null!=k?k:"";p=h.answer?"answer":h.debateResponse?"debateResponse":"comment";let I=(0,d.getVotingSystemByName)(h.votingSystem);y&&I.getCommentHighlights&&(m=I.getCommentHighlights({comment:h,voteProps:y}));let T=(0,t.jsx)(s.default,{contentType:p,className:C.root,children:(0,t.jsx)(l.ContentItemBody,{ref:null!=g?g:void 0,className:j,dangerouslySetInnerHTML:{__html:S},description:"comment ".concat(h._id),nofollow:((null==(n=h.user)?void 0:n.karma)||0)<a.nofollowKarmaThreshold.get(),replacedSubstrings:m,contentStyleType:p})});return I.hasInlineReacts&&y?(0,t.jsx)(u.default,{contentRef:g,voteProps:y,styling:"comment",children:T}):T},{styles:e=>({commentStyling:{maxWidth:"100%",overflowX:"hidden",overflowY:"hidden"},answerStyling:{maxWidth:"100%",overflowX:"hidden",overflowY:"hidden","& .read-more-button a, & .read-more-button a:hover":{textShadow:"none",backgroundImage:"none"},marginBottom:".5em"},root:{position:"relative","& .read-more-button":{fontSize:".85em",color:e.palette.grey[600]}},retracted:{textDecoration:"line-through"}})})},838781,e=>{"use strict";e.s(["default",()=>d]);var t=e.i(843476),n=e.i(538794),o=e.i(343794),i=e.i(946271);e.i(813868);var r=e.i(122756),a=e.i(154330),s=e.i(239832);let l=(0,r.gql)("\n  query ParentCommentSingle($documentId: String) {\n    comment(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...CommentsListWithParentMetadata\n      }\n    }\n  }\n"),d=(0,n.registerComponent)("ParentCommentSingle",e=>{var n;let{documentId:r,nestingLevel:d,post:c,tag:u,truncated:m,treeOptions:p}=e,{loading:h,data:g}=(0,i.useQuery)(l,{variables:{documentId:r}}),f=null==g||null==(n=g.comment)?void 0:n.result;return f&&!h?(0,t.jsx)("div",{className:(0,o.default)("comments-node","recent-comments-node",{"comments-node-root":1===d,"comments-node-even":d%2==0,"comments-node-odd":d%2!=0}),children:(0,t.jsx)(a.default,{treeOptions:{...p,tag:u,post:c},isParentComment:!0,comment:f,nestingLevel:d,truncated:!!m})}):(0,t.jsx)(s.default,{})},{})},154330,250217,197837,e=>{"use strict";e.s(["default",()=>G],154330);var t=e.i(843476),n=e.i(271645),o=e.i(538794),i=e.i(343794),r=e.i(96009),a=e.i(530841),s=e.i(159211),l=e.i(35693),d=e.i(161517),c=e.i(566721),u=e.i(495314),m=e.i(797341),p=e.i(435481),h=e.i(111907),g=e.i(231080),f=e.i(692436),v=e.i(224931),x=e.i(113436),y=e.i(257006),b=e.i(783473),C=e.i(819131),w=e.i(838781),k=e.i(813292),j=e.i(219087),S=e.i(110601),I=e.i(244389),T=e.i(698609),N=e.i(39211),L=e.i(489885),R=e.i(536059);e.s(["default",()=>V],197837);var _=e.i(552275),A=e.i(70796),M=e.i(673991),P=e.i(820010),E=e.i(166540),F=e.i(472722),B=e.i(478386);let D=(0,o.registerComponent)("CommentBottomCaveats",e=>{let{comment:n,classes:o}=e,i=(0,A.useCurrentTime)(),r=n.repliesBlockedUntil&&new Date(n.repliesBlockedUntil)>i,a=r?(0,E.default)(n.repliesBlockedUntil).diff(i,"years"):null;return(0,t.jsxs)(t.Fragment,{children:[r&&(0,t.jsxs)("div",{className:o.blockedReplies,children:["A moderator has deactivated replies on this comment"," ",!(a&&a>=100)&&n.repliesBlockedUntil&&(0,t.jsxs)(t.Fragment,{children:["until ",(0,t.jsx)(F.default,{date:n.repliesBlockedUntil})]})]}),n.retracted&&(0,t.jsx)(B.default,{className:o.caveatText,children:"[This comment is no longer endorsed by its author]"}),(0,c.commentIsHiddenPendingReview)(n)&&!n.rejected&&(0,t.jsx)(B.default,{className:o.caveatText,children:"[This comment will not be visible to other users until the moderation team has reviewed it.]"})]})},{styles:e=>({caveatText:{flexGrow:1},blockedReplies:{padding:"5px 0"}})});e.s(["default",0,D],250217);var U=e.i(64278),H=e.i(429329),W=e.i(79732);let O=(0,H.defineStyles)("CommentBottom",e=>({bottom:{display:"flex",alignItems:"center",paddingBottom:e.isFriendlyUI?12:5,paddingTop:e.isFriendlyUI?4:void 0,minHeight:12,...e.isFriendlyUI?{}:{fontSize:12}},leftSection:{display:"flex",alignItems:"center",columnGap:e.spacing.unit,flexWrap:"wrap"},rightSection:{display:"flex",alignItems:"center",columnGap:e.spacing.unit,marginLeft:"auto"},answer:{display:"flex",alignItems:"baseline"},editInContext:{...e.typography.body2,fontWeight:450,color:e.palette.lwTertiary.main,marginLeft:e.spacing.unit}})),V=e=>{var n,o,r;let{comment:l,treeOptions:d,votingSystem:u,voteProps:m,commentBodyRef:p,replyButton:h}=e,g=(0,W.useStyles)(O),f=(0,a.useFilteredCurrentUser)(e=>(0,M.userCanDo)(e,"comments.replyOnBlocked.all")),v=(0,a.useFilteredCurrentUser)(e=>(0,M.userCanDo)(e,"posts.moderate.all")),x=(0,a.useFilteredCurrentUser)(e=>{var t;return!e||(0,P.userIsAllowedToComment)(e,null!=(t=d.post)?t:null,null,!0)}),y=(0,A.useCurrentTime)(),b=u.name,C=null!=(n=null==(o=U.commentBottomComponents[b])?void 0:o.call(U.commentBottomComponents))?n:null,w=l.repliesBlockedUntil&&new Date(l.repliesBlockedUntil)>y,k=_.hideUnreviewedAuthorCommentsSettings.get(),j=k&&new Date(k)<new Date(l.postedAt)&&l.authorIsUnreviewed,S=!d.hideReply&&!l.deleted&&(!w||f)&&x&&(!j||v),I=d.showEditInContext,T=!!C&&!d.hideVoteBottom,N=T||I;return(0,t.jsxs)("div",{className:(0,i.default)(g.bottom,l.answer&&g.answer),children:[(0,t.jsxs)("div",{className:g.leftSection,children:[(0,t.jsx)(D,{comment:l}),S&&h]}),N&&(0,t.jsxs)("div",{className:g.rightSection,children:[T&&(0,t.jsx)(C,{document:l,hideKarma:null==(r=d.post)?void 0:r.hideCommentKarma,collectionName:"Comments",votingSystem:u,commentBodyRef:p,voteProps:m}),I&&(0,t.jsx)(s.Link,{to:(0,c.commentGetPageUrlFromIds)({commentId:l._id,postId:l.postId}),target:"_blank",rel:"noopener noreferrer",className:g.editInContext,children:"Edit in context"})]})]})},z=(0,e.i(770703).default)(()=>e.A(723974),{loadableGenerated:{modules:[176240]}}),$=(0,H.defineStyles)("CommentsItem",e=>({root:{paddingLeft:1.5*e.spacing.unit,paddingRight:1.5*e.spacing.unit,position:"relative","&:hover .CommentsItemMeta-menu":{opacity:1}},subforumTop:{paddingTop:4},tagIcon:{marginRight:6,"& svg":{width:15,height:15,fill:e.palette.grey[600]}},body:{borderStyle:"none",padding:0,...e.typography.commentStyle},sideComment:{"& blockquote":{paddingRight:0,marginLeft:4,paddingLeft:12}},replyLink:{marginRight:8,display:"inline",fontWeight:e.isFriendlyUI?600:e.typography.body1.fontWeight,color:e.palette.link.dim,fontSize:e.isFriendlyUI?"1.1rem":void 0,"@media print":{display:"none"}},firstParentComment:{marginLeft:-(1.5*e.spacing.unit),marginRight:-(1.5*e.spacing.unit)},replyForm:{marginTop:2,marginBottom:8,border:e.palette.border.normal,borderRadius:e.isFriendlyUI?e.borderRadius.small:0},replyFormMinimalist:{borderRadius:e.borderRadius.small},deleted:{backgroundColor:e.palette.panelBackground.deletedComment},metaNotice:{...(0,g.metaNoticeStyles)(e)},pinnedIconWrapper:{color:e.palette.grey[400],paddingTop:10,marginBottom:"-3px"},pinnedIcon:e.isFriendlyUI?{width:16,height:16,padding:1.5}:{"--icon-size":"12px"},title:{...e.typography.display2,...e.typography.postStyle,flexGrow:1,marginTop:8,marginBottom:0,marginLeft:0,display:"block",fontSize:"1.5rem",lineHeight:"1.5em"},postTitle:{paddingTop:e.spacing.unit,...e.typography.commentStyle,display:"block",color:e.palette.link.dim2},reviewVotingButtons:{borderTop:e.palette.border.normal,display:"flex",justifyContent:"space-between",alignItems:"center",paddingLeft:6},updateVoteMessage:{...e.typography.body2,...e.typography.smallText,color:e.palette.grey[600]},postTitleRow:{display:"flex",columnGap:8,alignItems:"center"},flagIcon:{height:13,color:e.palette.error.main,position:"relative",top:3},replyIcon:{opacity:.3,height:18,width:18,position:"relative",top:3},excerpt:{marginBottom:8}}),{stylePriority:-1}),q=e=>{let{comment:n,treeOptions:o,isChild:i,showPinnedOnProfile:r}=e,a=(0,W.useStyles)($),{showPostTitle:d,moderatedCommentId:u}=o;return r&&n.isPinnedOnProfile||u===n._id||d&&!i&&n.post&&n.postId&&n.post||d&&!i&&n.tag&&n.tag?(0,t.jsxs)("div",{className:a.postTitleRow,children:[r&&n.isPinnedOnProfile&&(0,t.jsx)("div",{className:a.pinnedIconWrapper,children:(0,t.jsx)(k.default,{icon:"Pin",className:a.pinnedIcon})}),u===n._id&&(0,t.jsx)(p.default,{className:a.flagIcon}),d&&!i&&!!n.post&&n.postId&&n.post&&(0,t.jsx)(I.default,{inlineBlock:!0,postId:n.postId,children:(0,t.jsxs)(s.Link,{className:a.postTitle,to:(0,c.commentGetPageUrlFromIds)({postId:n.postId,commentId:n._id,postSlug:""}),children:[n.post.draft&&"[Draft] ",n.post.title]})}),d&&!i&&!!n.tag&&n.tag&&(0,t.jsx)(s.Link,{className:a.postTitle,to:(0,l.tagGetCommentLink)({tagSlug:n.tag.slug,tagCommentType:n.tagCommentType}),children:(0,m.default)(n.tag.name)})]}):null},G=(0,o.registerComponent)("CommentsItem",e=>{var o,r,s;let l,{treeOptions:m,comment:p,nestingLevel:g=1,isChild:k,collapsed:I,isParentComment:_,parentCommentId:A,scrollIntoView:M,toggleCollapse:P,setSingleLine:E,truncated:F,showPinnedOnProfile:B,parentAnswerId:D,enableGuidelines:U=!0,showParentDefault:H=!1,displayTagIcon:O=!1,excerptLines:G,className:Z}=e,Y=(0,W.useStyles)($),Q=(0,n.useRef)(null),[K,X]=(0,n.useState)(!1),[J,ee]=(0,n.useState)(m.initialShowEdit||!1),[et,en]=(0,n.useState)(H),eo="minimalist"===m.formStyle,ei=(0,a.useCurrentUserId)(),er=(0,a.useFilteredCurrentUser)(e=>(0,u.eligibleToNominate)(e)),{postPage:ea,tag:es,post:el,refetch:ed,hideReviewVoteButtons:ec,hideParentCommentToggleForTopLevel:eu}=m,em=!!((0,c.commentAllowTitle)({tagCommentType:p.tagCommentType,parentCommentId:p.parentCommentId})&&p.title&&!p.deleted&&!J),ep=(0,n.useCallback)(e=>{e.preventDefault(),X(!0)},[]),eh=(0,n.useCallback)(()=>X(!1),[]),eg=(0,n.useCallback)(()=>{ee(!0)},[]),ef=(0,n.useCallback)(()=>{en(e=>!e)},[]),ev=p.votingSystem||"default",ex=(0,f.getVotingSystemByName)(ev),ey=!ec&&(0,u.shouldShowReviewVotePrompt)({reviewingForReview:p.reviewingForReview,postAuthorUserId:null!=(o=null==el?void 0:el.userId)?o:null,currentUserId:ei,isEligibleToNominate:er}),eb=(0,v.useVote)(p,"Comments",ex),eC=K&&eo,ew=null==m||null==(s=m.replaceReplyButtonsWith)?void 0:s.call(m,p),ek=(0,n.useMemo)(()=>ew||(0,t.jsx)("a",{className:(0,i.default)("comments-item-reply-link",Y.replyLink),onClick:eC?eh:ep,children:eC?"Cancel":"Reply"}),[ew,eC,Y.replyLink,ep,eh]);return(0,t.jsx)(d.AnalyticsContext,{pageElementContext:"commentItem",commentId:p._id,children:(0,t.jsx)(R.default,{voteProps:eb,children:(0,t.jsxs)("div",{className:(0,i.default)(Y.root,Z,"recent-comments-node",p.deleted&&!p.deletedPublic&&Y.deleted,m.isSideComment&&Y.sideComment,"SUBFORUM"===p.tagCommentType&&!p.topLevelCommentId&&Y.subforumTop),children:[p.parentCommentId&&et&&(0,t.jsx)("div",{className:Y.firstParentComment,children:(0,t.jsx)(w.default,{post:el,tag:es,documentId:p.parentCommentId,nestingLevel:g-1,truncated:H,treeOptions:{hideParentCommentToggleForTopLevel:eu}},p.parentCommentId)}),(0,t.jsx)(q,{comment:p,treeOptions:m,isChild:k,showPinnedOnProfile:B}),(0,t.jsxs)("div",{className:(0,i.default)(Y.body),children:[em&&(0,t.jsxs)("div",{className:Y.title,children:[O&&es?(0,t.jsx)("span",{className:Y.tagIcon,children:(0,t.jsx)(L.default,{tag:es})}):(0,t.jsx)(j.default,{comment:p}),p.title]}),(0,t.jsx)(h.default,{treeOptions:m,comment:p,showCommentTitle:em,isParentComment:_,parentCommentId:A,showParentState:et,toggleShowParent:ef,scrollIntoView:M,parentAnswerId:D,setSingleLine:E,collapsed:I,toggleCollapse:P,setShowEdit:eg}),p.promoted&&p.promotedByUser&&(0,t.jsxs)("div",{className:Y.metaNotice,children:["Pinned by ",p.promotedByUser.displayName]}),p.rejected&&(0,t.jsx)("p",{children:(0,t.jsx)(z,{reason:null!=(r=p.rejectedReason)?r:null})}),J?(0,t.jsx)(x.default,{comment:p,successCallback:()=>{ed&&ed(),ee(!1),p.draft&&(null==E||E(!0))},cancelCallback:()=>{ee(!1),p.draft&&(null==E||E(!0))}}):G?(0,t.jsx)(y.default,{comment:p,lines:G,className:Y.excerpt}):(0,t.jsx)(b.default,{commentBodyRef:Q,truncated:F,collapsed:I,comment:p,postPage:ea,voteProps:eb}),!p.deleted&&!I&&!J&&(0,t.jsx)(V,{comment:p,post:el,treeOptions:m,votingSystem:ex,voteProps:eb,commentBodyRef:Q,replyButton:ek})]}),ey&&!I&&(0,t.jsxs)("div",{className:Y.reviewVotingButtons,children:[(0,t.jsx)("div",{className:Y.updateVoteMessage,children:(0,t.jsxs)(S.default,{title:"If this review changed your mind, update your ".concat((0,u.getReviewNameInSitu)()," vote for the original post "),children:["Update your ",(0,u.getReviewNameInSitu)()," vote for this post.",(0,t.jsx)(N.default,{})]})}),el&&(0,t.jsx)(T.default,{post:el,showTitle:!1})]}),K&&!I&&(l=(g+ +!m.switchAlternatingHighlights)%2==0?"comments-node-even":"comments-node-odd",(0,t.jsx)("div",{className:(0,i.default)(Y.replyForm,l,eo&&Y.replyFormMinimalist),children:(0,t.jsx)(C.default,{post:m.post,parentComment:p,successCallback:()=>{ed&&ed(),X(!1)},cancelCallback:eh,prefilledProps:{parentAnswerId:D||null},interactionType:"reply",enableGuidelines:U,formStyle:m.formStyle})}))]})})})},{hocs:[r.default],areEqual:{treeOptions:"shallow"}})},106244,e=>{"use strict";e.s(["default",()=>s]);var t=e.i(843476),n=e.i(87154),o=e.i(403276),i=e.i(239832),r=e.i(946271);e.i(813868);let a=(0,e.i(122756).gql)("\n  query multiCommentRepliesToCommentListQuery($selector: CommentSelector, $limit: Int, $enableTotal: Boolean) {\n    comments(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...CommentsList\n      }\n      totalCount\n    }\n  }\n"),s=e=>{var s;let{post:l,parentCommentId:d,directReplies:c=!1}=e,{view:u,limit:m,...p}=c?{view:"commentReplies",parentCommentId:d,limit:500}:{view:"repliesToCommentThread",topLevelCommentId:d,limit:500},{data:h,loading:g}=(0,r.useQuery)(a,{variables:{selector:{[u]:p},limit:null!=m?m:10,enableTotal:!1},notifyOnNetworkStatusChange:!0}),f=null==h||null==(s=h.comments)?void 0:s.results;if(g||!f)return(0,t.jsx)(i.default,{});let v=(0,n.unflattenComments)(f);return(0,t.jsx)(o.default,{treeOptions:{post:l},totalComments:f.length,comments:v,startThreadTruncated:!0,defaultNestingLevel:2,parentCommentId:d})}},601342,e=>{"use strict";e.s(["COMMENT_DRAFT_TREE_OPTIONS",()=>f,"default",()=>x]);var t=e.i(843476),n=e.i(271645),o=e.i(538794),i=e.i(96009),r=e.i(530841),a=e.i(161517),s=e.i(87154),l=e.i(200080),d=e.i(152302),c=e.i(552275),u=e.i(652897),m=e.i(527919),p=e.i(154330),h=e.i(106244),g=e.i(919202);let f={condensed:!0,singleLineCollapse:!0,hideSingleLineMeta:!0,forceSingleLine:!0,showCollapseButtons:!1,initialShowEdit:!0,hideReply:!0},v=(0,o.registerComponent)("CommentsNode",e=>{let{treeOptions:o,comment:i,startThreadTruncated:x,truncated:y,shortform:b,nestingLevel:C=1,expandAllThreads:w,forceUnTruncated:k,forceUnCollapsed:j,expandNewComments:S=!0,isChild:I,parentAnswerId:T,parentCommentId:N,showExtraChildrenButton:L,hoverPreview:R,childComments:_,loadChildrenSeparately:A,loadDirectReplies:M=!1,showPinnedOnProfile:P=!1,enableGuidelines:E=!0,karmaCollapseThreshold:F=-4,showParentDefault:B=!1,noAutoScroll:D=!1,displayTagIcon:U=!1,className:H,classes:W}=e,O=(0,r.useFilteredCurrentUser)(e=>null==e?void 0:e.noSingleLineComments),{captureEvent:V}=(0,a.useTracking)(),z=(0,n.useRef)(null),$="in-context"===c.commentPermalinkStyleSetting.get(),{linkedCommentId:q,scrollToCommentId:G}=(0,u.useCommentLinkState)(),{lastCommentId:Z,condensed:Y,postPage:Q,post:K,highlightDate:X,scrollOnExpand:J,forceSingleLine:ee,forceNotSingleLine:et,expandOnlyCommentIds:en,noDOMId:eo,onToggleCollapsed:ei}=o,er=(0,n.useCallback)(()=>[i,..._?_.flatMap(e=>(0,s.flattenCommentBranch)(e)):[]].some(e=>e._id===G),[_,i,G]),ea=!eo&&!D&&i&&G===i._id,es=(0,n.useCallback)(()=>{var e;return!er()&&!j&&(i.deleted||(null!=(e=i.baseScore)?e:0)<F)},[i.baseScore,i.deleted,j,F,er]),el=(0,n.useCallback)(()=>{var e;let t=Z===i._id,n=(null!=(e=i.baseScore)?e:0)<10||!!Y,r=1===C&&b,a=1===C&&Q;return en?!en.has(i._id):!!ee||!!o.isSideComment&&C>1||!ea&&!w&&!!(y||x)&&n&&!(t&&Y)&&!r&&!a&&!et},[i._id,i.baseScore,Y,w,en,et,ee,Z,C,Q,b,ea,x,o.isSideComment,y]),ed=(0,n.useCallback)(()=>!ea&&!!x,[ea,x]),[ec,eu]=(0,n.useState)(es),[em,ep]=(0,n.useState)(el()),[eh,eg]=(0,n.useState)(ed),[ef,ev]=(0,n.useState)(!1),[ex,ey]=(0,n.useState)(!1),eb=(0,n.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"smooth";(!(()=>{var e;if(!z)return!1;let t=null==(e=z.current)?void 0:e.getBoundingClientRect().top;return void 0!==t&&t>=0&&t<=window.innerHeight})()||$)&&(0,d.scrollFocusOnElement)({id:i._id,options:{behavior:e}}),ey(!0),setTimeout(()=>{ey(!1)},1e3*l.HIGHLIGHT_DURATION)},[i._id,$]);(0,n.useEffect)(()=>{$||D||o.isSideComment||!i||q!==i._id||window.scrollTo({top:0})},[q]),(0,n.useEffect)(()=>{ec&&er()&&eu(!1),ea&&eT({scroll:!0})},[G]);let eC=(0,n.useCallback)(()=>{null==ei||ei(),eu(!ec)},[ec,ei]),ew=!w&&(!!eh||!ef&&(y||!!x)),ek=!!(X&&new Date(i.postedAt).getTime()>new Date(X).getTime()),ej=!!em&&!O&&(!!ee||!et&&ew&&!(S&&ek)),eS=C+ +!!i.gapIndicator,eI=!ec&&_&&_.length>0&&(0,t.jsxs)("div",{className:W.children,children:[(0,t.jsx)("div",{className:W.parentScroll,onClick:()=>eb("smooth")}),L,_.map(e=>(0,t.jsx)(v,{isChild:!0,treeOptions:{...o,...e.item.draft&&f},comment:e.item,parentCommentId:i._id,parentAnswerId:T||i.answer&&i._id||null,nestingLevel:eS+1,truncated:ew,childComments:e.children,expandNewComments:S,enableGuidelines:E},e.item._id))]}),eT=(0,n.useCallback)(e=>{let{event:t,scroll:n=!1,scrollBehaviour:o="smooth"}=e;null==t||t.stopPropagation(),(ew||ej)&&(V("commentExpanded",{postId:i.postId,commentId:i._id,draft:i.draft}),eg(!1),ep(!1),ev(!0)),n&&eb(o)},[ew,ej,i.postId,i._id,i.draft,V,eb]),eN=(0,n.useCallback)(e=>{eT({event:e,scroll:J})},[eT,J]),eL=(0,t.jsxs)(l.default,{comment:i,treeOptions:o,onClick:eN,id:eo?void 0:i._id,nestingLevel:eS,hasChildren:_&&_.length>0,highlighted:ex,isSingleLine:ej,isChild:I,isNewComment:ek,isReplyToAnswer:!!T,hoverPreview:R,shortform:b,showPinnedOnProfile:P,className:H,children:[i._id&&(0,t.jsx)("div",{ref:z,children:ej?(0,t.jsx)(a.AnalyticsContext,{singleLineComment:!0,commentId:i._id,children:(0,t.jsx)(g.default,{eventType:"singeLineComment",children:(0,t.jsx)(m.default,{treeOptions:o,comment:i,nestingLevel:eS,parentCommentId:N,hideKarma:null==K?void 0:K.hideCommentKarma,showDescendentCount:A,displayTagIcon:U})})}):(0,t.jsx)(a.AnalyticsContext,{singleLineComment:!1,commentId:i._id,children:(0,t.jsx)(p.default,{treeOptions:o,truncated:ew&&!k,nestingLevel:eS,parentCommentId:N,parentAnswerId:T||i.answer&&i._id||void 0,toggleCollapse:eC,scrollIntoView:eb,setSingleLine:ep,displayTagIcon:U,...{comment:i,collapsed:ec,showPinnedOnProfile:P,enableGuidelines:E,showParentDefault:B}},i._id)})}),eI,!ej&&A&&(0,t.jsxs)("div",{className:"comments-children",children:[(0,t.jsx)("div",{className:W.parentScroll,onClick:()=>eb("smooth")}),(0,t.jsx)(h.default,{parentCommentId:i._id,post:K,directReplies:M})]})]});return i.gapIndicator?(0,t.jsx)("div",{className:W.gapIndicator,children:eL}):eL},{styles:e=>({parentScroll:{position:"absolute",top:0,left:0,width:8,height:"100%",cursor:"pointer","&:hover":{backgroundColor:e.palette.commentParentScrollerHover}},children:{position:"relative"},gapIndicator:{border:e.palette.border.commentBorder,backgroundColor:e.palette.grey[100],marginLeft:e.spacing.unit,paddingTop:e.spacing.unit}}),areEqual:{treeOptions:"shallow",childComments:(e,t)=>(0,s.commentTreesEqual)(e,t)},hocs:[i.default]}),x=v},403276,294870,e=>{"use strict";e.s(["default",()=>b],403276);var t=e.i(843476),n=e.i(538794),o=e.i(271645),i=e.i(395504),r=e.i(159211),a=e.i(964344),s=e.i(530841),l=e.i(96009),d=e.i(343794),c=e.i(163929),u=e.i(601342),m=e.i(168455),p=e.i(725788),h=e.i(293958),g=e.i(110601);let f=(0,n.registerComponent)("LoginPopupButton",e=>{let{classes:n,children:o,title:i,className:r}=e,a=(0,s.useCurrentUser)(),{openDialog:l}=(0,p.useDialog)();return a?null:(0,t.jsx)(g.default,{title:i,children:(0,t.jsx)("a",{className:r||n.root,onClick:e=>{a||(l({name:"LoginPopup",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(h.default,{onClose:n})}}),e.preventDefault())},children:o})})},{styles:e=>({root:{...e.typography.body2,color:e.palette.primary.main}})});e.s(["default",0,f],294870);var v=e.i(79732);let x=(0,e.i(429329).defineStyles)("CommentsList",e=>({button:{color:e.palette.lwTertiary.main},commentsListLoadingSpacer:{minHeight:"100vh"},expandOptions:{fontSize:14,clear:"both",marginTop:24,marginBottom:10,display:"flex",justifyContent:"space-between",alignItems:"center",color:e.palette.grey[600]},settingsLabel:{[e.breakpoints.down("xs")]:{display:"none"}}})),y=()=>{let e=(0,v.useStyles)(x);return(0,s.useCurrentUser)()?(0,t.jsx)(g.default,{title:"Go to your settings page to update your Comment Truncation Options",children:(0,t.jsx)(r.Link,{to:"/account",children:(0,t.jsx)(m.default,{label:(0,t.jsx)("span",{className:e.settingsLabel,children:"Change default truncation settings"})})})}):(0,t.jsx)(f,{title:"Login to change default truncation settings",children:(0,t.jsx)(m.default,{label:(0,t.jsx)("span",{className:e.settingsLabel,children:"Change truncation settings"})})})},b=(0,n.registerComponent)("CommentsList",e=>{let{treeOptions:n,comments:r,totalComments:s=0,startThreadTruncated:l,parentAnswerId:m,defaultNestingLevel:p=1,parentCommentId:h,loading:f}=e,b=(0,v.useStyles)(x),[C,w]=(0,o.useState)(!1);return((0,i.useOnSearchHotkey)(()=>w(!0)),r)?(0,t.jsxs)(c.default,{children:[(()=>{if(s>70){let e="Posts with more than ".concat(70," comments automatically truncate replies with less than ").concat(a.TRUNCATION_KARMA_THRESHOLD," karma. Click or press F to expand all.");return(0,t.jsxs)("div",{className:b.expandOptions,children:[(0,t.jsxs)("span",{children:["Some comments are truncated due to high volume. ",(0,t.jsx)(g.default,{title:e,children:(0,t.jsx)("a",{className:C?void 0:b.button,onClick:()=>w(!0),children:"(F to expand all)"})})]}),(0,t.jsx)(y,{})]})}})(),(0,t.jsx)("div",{className:(0,d.default)({[b.commentsListLoadingSpacer]:f}),children:r.map(e=>{var o;return(0,t.jsx)(u.default,{treeOptions:n,startThreadTruncated:l||s>=70,expandAllThreads:C,comment:e.item,childComments:e.children,parentCommentId:h,parentAnswerId:m,shortform:null==(o=n.post)?void 0:o.shortform,nestingLevel:p,isChild:p>1},e.item._id)})})]}):(0,t.jsx)("div",{children:(0,t.jsx)("p",{children:"No comments to display."})})},{hocs:[l.default],areEqual:"auto"})},2822,e=>{"use strict";e.s(["default",()=>h],2822);var t=e.i(843476),n=e.i(538794),o=e.i(783959),i=e.i(87154),r=e.i(239832),a=e.i(403276);let s=(0,n.registerComponent)("PostsItemNewCommentsListNode",e=>{var n;let{commentsList:o,loadingState:s,title:l,reverseOrder:d,post:c,treeOptions:u,classes:m}=e,p=o&&(null==(n=o[0])?void 0:n._id),h=o&&(0,i.unflattenComments)(o);return d&&(null==h||h.sort((e,t)=>new Date(e.item.postedAt).getTime()-new Date(t.item.postedAt).getTime())),(0,t.jsxs)("div",{children:[l&&(0,t.jsx)("div",{className:m.title,children:l}),h&&(0,t.jsx)(a.default,{treeOptions:{...u,lastCommentId:p,post:c},comments:h,startThreadTruncated:!0}),s&&(0,t.jsx)(r.default,{})]})},{styles:e=>({title:{fontSize:10,...e.typography.commentStyle,color:e.palette.text.dim700,marginBottom:4}})});var l=e.i(946271);e.i(813868);var d=e.i(122756);let c=(0,d.gql)("\n  query multiCommentPostsItemNewCommentsListQuery($selector: CommentSelector, $limit: Int, $enableTotal: Boolean) {\n    comments(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...CommentsList\n      }\n      totalCount\n    }\n  }\n"),u=(0,n.registerComponent)("PostsItemNewCommentsList",e=>{var n,i;let{terms:r,post:a,treeOptions:d}=e,{view:u,limit:m,...p}=r,{data:h,loading:g}=(0,l.useQuery)(c,{variables:{selector:{[u]:p},limit:null!=(n=r.limit)?n:5,enableTotal:!1},fetchPolicy:"cache-first",notifyOnNetworkStatusChange:!0}),f=null==h||null==(i=h.comments)?void 0:i.results;return g||!f||f.length?(0,t.jsx)(s,{commentsList:f,loadingState:g,post:a,treeOptions:d}):(0,t.jsx)(o.default,{children:"No comments found"})},{styles:e=>({})}),m=(0,d.gql)("\n  query multiCommentPostsDialogItemNewCommentsListQuery($selector: CommentSelector, $limit: Int, $enableTotal: Boolean) {\n    comments(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...CommentsList\n      }\n      totalCount\n    }\n  }\n"),p=(0,n.registerComponent)("PostsDialogItemNewCommentsList",e=>{var n,i;let{terms:r,post:a,treeOptions:d}=e,{view:c,limit:u,...p}=r,{data:h,loading:g}=(0,l.useQuery)(m,{variables:{selector:{[c]:p},limit:5,enableTotal:!1},fetchPolicy:"cache-first",notifyOnNetworkStatusChange:!0}),f=null==h||null==(n=h.comments)?void 0:n.results,{data:v,loading:x}=(0,l.useQuery)(m,{variables:{selector:{recentDebateResponses:{postId:a._id}},limit:2,enableTotal:!1},notifyOnNetworkStatusChange:!0}),y=null==v||null==(i=v.comments)?void 0:i.results,b=!g&&f&&!f.length,C=!x&&y&&!y.length;return b&&C?(0,t.jsx)(o.default,{children:"No comments found"}):(0,t.jsxs)("div",{children:[(0,t.jsx)(s,{commentsList:y,loadingState:x,post:a,treeOptions:d,title:"Dialog Responses",reverseOrder:!0}),(0,t.jsx)(s,{commentsList:f,loadingState:g,post:a,treeOptions:d,title:"User Comments"})]})},{styles:e=>({})}),h=(0,n.registerComponent)("PostsItemNewCommentsWrapper",e=>{let{terms:n,classes:o,post:i,treeOptions:r}=e;return i.debate?(0,t.jsx)(p,{terms:n,post:i,treeOptions:r}):(0,t.jsx)(u,{terms:n,post:i,treeOptions:r})},{styles:e=>({})})},967944,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(538794),i=e.i(530841),r=e.i(813292),a=e.i(514089),s=e.i(946271);e.i(813868);var l=e.i(122756);let d=(0,l.gql)("\n  query multiUserMostValuablePostPostMostValuableCheckboxQuery($selector: UserMostValuablePostSelector, $limit: Int, $enableTotal: Boolean) {\n    userMostValuablePosts(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...UserMostValuablePostInfo\n      }\n      totalCount\n    }\n  }\n"),c=(0,l.gql)("\n  mutation updateUserMostValuablePostPostMostValuableCheckbox($selector: SelectorInput!, $data: UpdateUserMostValuablePostDataInput!) {\n    updateUserMostValuablePost(selector: $selector, data: $data) {\n      data {\n        ...UserMostValuablePostInfo\n      }\n    }\n  }\n"),u=(0,l.gql)("\n  mutation createUserMostValuablePostPostMostValuableCheckbox($data: CreateUserMostValuablePostDataInput!) {\n    createUserMostValuablePost(data: $data) {\n      data {\n        ...UserMostValuablePostInfo\n      }\n    }\n  }\n"),m=(0,o.registerComponent)("PostMostValuableCheckbox",e=>{var o;let{post:l,classes:m}=e,p=(0,i.useCurrentUser)(),{data:h,loading:g}=(0,s.useQuery)(d,{variables:{selector:{currentUserPost:{postId:l._id}},limit:1,enableTotal:!1},notifyOnNetworkStatusChange:!0}),f=null==h||null==(o=h.userMostValuablePosts)?void 0:o.results,v=(null==f?void 0:f.length)?f[0]:null,[x,{loading:y}]=(0,a.useMutation)(u),[b,{loading:C}]=(0,a.useMutation)(c),[w,k]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{k(!!v&&!v.deleted)},[v]),p&&!g&&f)?(0,t.jsx)(r.default,{onClick:()=>{g||y||C||!p||(v?(k(!!v.deleted),b({variables:{selector:{_id:v._id},data:{deleted:!v.deleted}},optimisticResponse:{updateUserMostValuablePost:{__typename:"UserMostValuablePostOutput",data:{__typename:"UserMostValuablePost",...{...v,deleted:!v.deleted}}}}})):(k(!0),x({variables:{data:{userId:p._id,postId:l._id}}})))},icon:w?"Heart":"HeartOutline",className:m.root}):null},{styles:e=>({root:{cursor:"pointer",color:e.palette.text.alwaysWhite,fontSize:32,padding:6,"&:hover":{opacity:.5}}})});e.s(["default",0,m])},622224,e=>{"use strict";e.s(["default",()=>L]);var t=e.i(843476),n=e.i(271645),o=e.i(538794),i=e.i(161517),r=e.i(177607),a=e.i(159211),s=e.i(716970),l=e.i(96009),d=e.i(343794),c=e.i(128380),u=e.i(552275),m=e.i(258169),p=e.i(93495),h=e.i(813292),g=e.i(671396),f=e.i(140747),v=e.i(499201),x=e.i(932835),y=e.i(764226),b=e.i(897096),C=e.i(883574),w=e.i(495600),k=e.i(2822),j=e.i(967944),S=e.i(944045),I=e.i(429329),T=e.i(79732);let N=(0,I.defineStyles)("EAPostsItem",e=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between",maxWidth:s.SECTION_WIDTH,fontFamily:e.palette.fonts.sansSerifStack},rootCard:{marginBottom:2},readCheckbox:{minWidth:24,[e.breakpoints.down("xs")]:{marginLeft:-12}},expandedCommentsWrapper:{display:"flex",flexDirection:"column",minWidth:"100%",maxWidth:"100%",background:e.palette.grey[0],border:"1px solid ".concat(e.palette.grey[100]),borderRadius:e.borderRadius.default,"&:hover":{background:e.palette.grey[50],border:"1px solid ".concat(e.palette.grey[250])},"&:hover .PostsItemTrailingButtons-actions":{opacity:.2},"&:hover .PostsItemTrailingButtons-archiveButton":{opacity:.2}},container:{position:"relative",flexGrow:1,maxWidth:"100%",display:"flex",alignItems:"center",padding:"8px 12px 8px 0",fontWeight:500,fontSize:13,color:e.palette.grey[600],cursor:"pointer",[e.breakpoints.down("xs")]:{paddingRight:12}},containerCard:{paddingTop:12,paddingBottom:12},containerCardWithImage:{paddingBottom:0},containerNoKarma:{paddingLeft:20},postsVote:{position:"relative",fontSize:30,textAlign:"center","& .PostsVoteDefault-voteBlock":{marginTop:-5}},tagRelWrapper:{position:"relative",transform:"translateY(1px)",marginLeft:44,marginRight:14},details:{flexGrow:1,minWidth:0},titleWrapper:{display:"inline"},title:{fontWeight:600,fontSize:16,fontFamily:e.palette.fonts.sansSerifStack,marginBottom:2,[e.breakpoints.up("sm")]:{display:"flex",maxWidth:"100%"},[e.breakpoints.down("xs")]:{display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":3}},titleCardView:{fontWeight:700},titleCard:{display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":2,[e.breakpoints.down("xs")]:{"-webkit-line-clamp":3}},meta:{display:"flex",alignItems:"center",whiteSpace:"nowrap"},secondaryContainer:{display:"flex",alignItems:"center"},secondaryContainerCard:{alignSelf:"flex-start"},comments:{minWidth:58,marginLeft:4,display:"flex",alignItems:"center","& svg":{height:18,marginRight:1},"&:hover":{color:e.palette.grey[800],opacity:1},[e.breakpoints.up("sm")]:{padding:"10px 0"}},commentsCard:{[e.breakpoints.up("sm")]:{padding:0}},newComments:{fontWeight:700,color:e.palette.grey[1e3]},postActions:{minWidth:20,marginLeft:-5,"& .PostActionsButton-icon":{fontSize:20},"&:hover .PostActionsButton-icon":{color:e.palette.grey[700]}},hideOnMobile:{[e.breakpoints.down("xs")]:{display:"none"}},onlyMobile:{[e.breakpoints.up("sm")]:{display:"none"}},expandedComments:{padding:"0 12px 8px"},interactionWrapper:{"&:hover":{opacity:1}},karmaDisplay:{width:50,minWidth:50},card:{padding:"0 20px 16px ".concat(50,"px"),cursor:"pointer",display:"flex",alignItems:"flex-end",gap:"47px",[e.breakpoints.down("xs")]:{gap:"12px"}},cardNoKarma:{paddingLeft:20},cardText:{display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":3,overflow:"hidden",flexGrow:1,fontWeight:500,fontSize:13,lineHeight:"150%",color:e.palette.grey[600],maxHeight:80,[e.breakpoints.down("xs")]:{"-webkit-line-clamp":4,lineHeight:"140%"}},cardTextWithImage:{marginTop:12},cardTextNoImage:{maxWidth:509},cardImage:{borderRadius:e.borderRadius.small,width:160,minWidth:160,height:80,minHeight:80,objectFit:"cover",marginTop:-9,[e.breakpoints.down("xs")]:{width:100,minWidth:100}},cardMeta:{maxWidth:"calc(100% - ".concat(160,"px)")}}),{stylePriority:1}),L=(0,o.registerComponent)("EAPostsItem",e=>{var o,s,l,I;let L,{openInNewTab:R,hideSecondaryInfo:_,secondaryInfoNode:A,...M}=e,P=(0,T.useStyles)(N),{post:E,postLink:F,tagRel:B,commentCount:D,hasUnreadComments:U,sticky:H,showDraftTag:W,showPersonalIcon:O,showTrailingButtons:V,showMostValuableCheckbox:z,showDismissButton:$,onDismiss:q,onArchive:G,resumeReading:Z,strikethroughTitle:Y,curatedIconLeft:Q,showIcons:K,isRead:X,showReadCheckbox:J,tooltipPlacement:ee,toggleComments:et,renderComments:en,commentTerms:eo,condensedAndHiddenComments:ei,analyticsProps:er,viewType:ea,isVoteable:es,showKarma:el,useCuratedDate:ed,hideTag:ec,className:eu}=(0,r.usePostsItem)(M),{onClick:em}=(0,c.useClickableCell)({href:F,openInNewTab:R}),ep="card"===ea,{getView:eh}=(0,m.usePostsListView)(),eg=eh(),ef=(0,n.useCallback)(()=>A?(0,t.jsx)(c.InteractionWrapper,{className:P.interactionWrapper,children:A}):_||z?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.InteractionWrapper,{className:P.interactionWrapper,children:(0,t.jsxs)("a",{onClick:et,className:(0,d.default)(P.comments,ep&&P.commentsCard,U&&P.newComments),children:[(0,t.jsx)(h.default,{icon:"Comment"}),D]})}),(0,t.jsx)("div",{className:P.postActions,children:(0,t.jsx)(c.InteractionWrapper,{className:P.interactionWrapper,children:(0,t.jsx)(g.default,{post:E,popperGap:16,autoPlace:!0,vertical:!0})})}),B&&(0,t.jsx)("div",{className:P.tagRelWrapper,children:(0,t.jsx)(c.InteractionWrapper,{className:P.interactionWrapper,children:(0,t.jsx)(x.default,{tagRel:B})})})]}),[A,_,z,ep,U,D,E,B,et,P]),ev=es?(0,t.jsx)(c.InteractionWrapper,{className:(0,d.default)(P.interactionWrapper,P.postsVote),children:(0,t.jsx)(b.default,{post:E})}):(0,t.jsx)(f.default,{post:E,className:P.karmaDisplay}),ex=(null==(s=E.customHighlight)?void 0:s.plaintextDescription)||(null==(l=E.contents)?void 0:l.plaintextDescription)||"",ey=ex.trim().length>0,eb=!!E.socialPreviewData.imageUrl;return(0,t.jsx)(i.AnalyticsContext,{...er,children:(0,t.jsxs)("div",{className:(0,d.default)(P.root,ep&&P.rootCard,eu),children:[J&&(0,t.jsx)("div",{className:P.readCheckbox,children:(0,t.jsx)(w.default,{post:E,width:14})}),(0,t.jsxs)("div",{className:P.expandedCommentsWrapper,children:[(0,t.jsxs)("div",{onClick:em,className:(0,d.default)(P.container,ep&&P.containerCard,ep&&E.socialPreviewData.imageUrl&&P.containerCardWithImage,!el&&P.containerNoKarma),children:[el&&ev,(0,t.jsxs)("div",{className:P.details,children:[(0,t.jsx)(p.default,{post:E,sticky:H,showDraftTag:W,showPersonalIcon:O,strikethroughTitle:Y,curatedIconLeft:Q,showIcons:K,wrap:ep,Wrapper:e=>{let{children:n}=e;return(0,t.jsx)(y.default,{post:E,placement:ee,As:"span",disabled:"card"===ea,children:(0,t.jsx)(c.InteractionWrapper,{className:P.titleWrapper,children:(0,t.jsx)(a.Link,{to:F,children:n})})})},read:X&&!J,isLink:!1,showEventTag:!ec,className:(0,d.default)(P.title,"card"===eg&&P.titleCardView,ep&&P.titleCard)}),(0,t.jsxs)("div",{className:P.meta,children:[(0,t.jsx)(v.default,{post:E,useCuratedDate:ed,className:ep&&eb?P.cardMeta:void 0}),(0,t.jsx)("div",{className:(0,d.default)(P.secondaryContainer,P.onlyMobile),children:(0,t.jsx)(ef,{})})]})]}),(0,t.jsx)("div",{className:(0,d.default)(P.secondaryContainer,ep&&P.secondaryContainerCard,P.hideOnMobile),children:(0,t.jsx)(ef,{})}),z&&(0,t.jsx)("div",{className:P.secondaryContainer,children:(0,t.jsx)(c.InteractionWrapper,{className:P.interactionWrapper,children:(0,t.jsx)(j.default,{post:E})})}),(0,t.jsx)(c.InteractionWrapper,{className:P.interactionWrapper,children:(0,t.jsx)(C.default,{showArchiveButton:!1,post:E,showTrailingButtons:V,showMostValuableCheckbox:z,showDismissButton:$,resumeReading:Z,onDismiss:q,onArchive:G})})]}),ep&&(ey||eb)&&(0,t.jsxs)("div",{className:(0,d.default)(P.card,!el&&P.cardNoKarma),onClick:em,children:[(0,t.jsx)("div",{className:(0,d.default)(P.cardText,eb&&P.cardTextWithImage,!eb&&P.cardTextNoImage),children:ex}),eb&&(0,t.jsx)("img",{src:(I=E.socialPreviewData.imageUrl,L="".concat(u.cloudinaryCloudNameSetting.get(),"/image/upload/"),I.replace(L,"".concat(L,"c_fill,w_").concat(160,",h_").concat(80,",dpr_2,"))),alt:E.title,className:P.cardImage})]}),en&&(0,t.jsx)("div",{className:P.expandedComments,children:(0,t.jsx)(k.default,{terms:eo,post:E,treeOptions:{highlightDate:(0,S.maybeDate)(null!=(o=E.lastVisitedAt)?o:void 0),condensed:ei}})})]})]})})},{hocs:[l.default],areEqual:{terms:"deep"}})},235180,942262,e=>{"use strict";var t=e.i(100916);e.s(["collectionGetPageUrl",0,(e,n)=>{let o=n?(0,t.getSiteUrl)().slice(0,-1):"";return"".concat(o,"/").concat(e.slug)}],235180),e.s(["NEW_COMMENT_MARGIN_BOTTOM",0,"1.3em"],942262)},863783,e=>{"use strict";var t=e.i(843476),n=e.i(538794),o=e.i(758623),i=e.i(244026),r=e.i(343794),a=e.i(70796),s=e.i(711601),l=e.i(264517),d=e.i(899270),c=e.i(110601),u=e.i(232794);let m=e=>e.isFriendlyUI?{}:{fontWeight:300,color:e.palette.text.slightlyIntense2},p=(0,n.registerComponent)("PostsItemDate",e=>{var n;let{post:m,noStyles:p,includeAgo:h,useCuratedDate:g,emphasizeIfNew:f,classes:v}=e;p&&(v={tooltipSmallText:v.tooltipSmallText,xsHide:v.xsHide});let x=(0,a.useCurrentTime)();if(m.isEvent&&m.startTime)return(0,t.jsx)(c.default,{placement:"right",title:(0,t.jsxs)("span",{children:[(0,t.jsx)("div",{className:v.tooltipSmallText,children:"Event starts at"}),(0,t.jsx)(l.default,{post:m})]}),children:(0,t.jsx)(d.default,{className:v.startTime,children:(0,i.default)(m.startTime).format("YYYY")===(0,i.default)(x).format("YYYY")?(0,t.jsx)(o.default,{date:m.startTime,format:"MMM Do",tooltip:!1}):(0,t.jsx)(o.default,{date:m.startTime,format:"YYYY MMM Do",tooltip:!1})})});if(m.isEvent&&!m.startTime)return(0,t.jsx)(c.default,{placement:"right",title:(0,t.jsx)("span",{children:"To Be Determined"}),children:(0,t.jsx)(d.default,{className:v.startTime,children:"TBD"})});let y=g&&m.curatedDate||m.postedAt,b=(0,s.formatRelative)(new Date(y),x),C=h&&"now"!==b?(0,t.jsx)("span",{className:v.xsHide,children:"ago"}):null,w=f&&1728e5>Math.abs(new Date(m.postedAt).getTime()-x.getTime()),k=(0,t.jsx)(d.default,{className:(0,r.default)(v.postedAt,{[null!=(n=v.isNew)?n:""]:v.isNew&&w}),children:(0,t.jsxs)(u.default,{dateTime:y,children:[b,C]})});return m.curatedDate?(0,t.jsx)(c.default,{placement:"right",title:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:["Curated on ",(0,t.jsx)(o.ExpandedDate,{date:m.curatedDate})]}),(0,t.jsxs)("div",{children:["Posted on ",(0,t.jsx)(o.ExpandedDate,{date:m.postedAt})]})]}),children:k}):(0,t.jsx)(c.default,{placement:"right",title:(0,t.jsx)(o.ExpandedDate,{date:m.postedAt}),children:k})},{styles:e=>({postedAt:{...e.isFriendlyUI&&{display:"flex"},"&&":{cursor:"pointer",width:38,fontSize:"1rem",...m(e),[e.breakpoints.down("xs")]:{width:"auto"}}},isNew:{"&&":{fontWeight:400}},startTime:{"&&":{cursor:"pointer",width:72,fontSize:"1rem",...m(e),[e.breakpoints.down("xs")]:{width:"auto"}}},tooltipSmallText:{...e.typography.tinyText,...e.typography.italic},xsHide:{[e.breakpoints.down("xs")]:{display:"none"}}})});e.s(["default",0,p])},40404,e=>{"use strict";e.s(["default",()=>s]);var t=e.i(843476),n=e.i(946271);e.i(813868);var o=e.i(122756),i=e.i(690118),r=e.i(239832),a=e.i(783959);let s=e=>{let{postId:s,unreadCount:l}=e,{data:d,loading:c}=(0,n.useQuery)((0,o.gql)("\n    query LatestDialogueMessages($dialogueId: String!, $unreadCount: Int!) {\n      latestDialogueMessages(dialogueId: $dialogueId, numMessages: $unreadCount)\n    }\n  "),{variables:{dialogueId:s,unreadCount:l}});return c?(0,t.jsx)(r.default,{}):d?d.latestDialogueMessages&&d.latestDialogueMessages.length?(0,t.jsx)(i.ContentItemBody,{dangerouslySetInnerHTML:{__html:d.latestDialogueMessages.join("")}}):(0,t.jsx)(a.default,{children:"No new responses found"}):(0,t.jsx)("div",{})}},163253,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(244026),i=e.i(161517);let r=e=>new Date(e).toISOString().replace(/[-:]|\.\d{3}/g,""),a=(e,t)=>Object.keys(t).reduce((e,n,o)=>{let i=t[n];return null!==i?"".concat(e).concat(0===o?"?":"&").concat(n,"=").concat(encodeURIComponent(i)):e},e);var s=e.i(343794),l=e.i(946271);e.i(813868);var d=e.i(122756),c=e.i(110601),u=e.i(903780),m=e.i(79732),p=e.i(429329);let h=(0,d.gql)("\n  query AddToCalendarButton($documentId: String) {\n    post(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...PostsPlaintextDescription\n      }\n    }\n  }\n"),g=(0,p.defineStyles)("AddToCalendarButton",e=>({root:{position:"relative",textAlign:"left"},button:{display:"inline-flex",background:"transparent",color:e.palette.grey[600],font:"inherit",fontSize:e.isFriendlyUI?void 0:14,verticalAlign:"text-bottom","&:hover":{opacity:.5}},icon:{height:e.isFriendlyUI?18:16,fill:e.palette.grey[600]},label:{marginLeft:e.isFriendlyUI?7:8},dropdown:{background:e.palette.panelBackground.default,color:e.palette.grey[700],fontFamily:e.typography.fontFamily,padding:"4px 0",borderRadius:4,boxShadow:"0 1px 3px ".concat(e.palette.boxShadowColor(.2))},option:{display:"block",whiteSpace:"nowrap",padding:"6px 12px"}})),f=e=>{let{className:n=""}=e;return(0,t.jsxs)("svg",{viewBox:"207.59 11.407 18.981 20.638",xmlns:"http://www.w3.org/2000/svg",className:n,children:[(0,t.jsx)("path",{d:"M 225.59 21.407 L 225.59 15.407 C 225.59 14.307 224.69 13.407 223.59 13.407 L 222.59 13.407 L 222.59 11.407 L 220.59 11.407 L 220.59 13.407 L 212.59 13.407 L 212.59 11.407 L 210.59 11.407 L 210.59 13.407 L 209.59 13.407 C 208.49 13.407 207.59 14.307 207.59 15.407 L 207.59 29.407 C 207.59 30.507 208.49 31.407 209.59 31.407 L 216.59 31.407 L 216.59 29.407 L 209.59 29.407 L 209.59 19.407 L 223.59 19.407 L 223.59 21.407 L 225.59 21.407 Z"}),(0,t.jsx)("path",{d:"M 226.571 27.045 L 226.571 29.045 L 223.571 29.045 L 223.571 32.045 L 221.571 32.045 L 221.571 29.045 L 218.571 29.045 L 218.571 27.045 L 221.571 27.045 L 221.571 24.045 L 223.571 24.045 L 223.571 27.045 L 226.571 27.045 Z"})]})},v=e=>{var d,p,v,x,y;let b,C,w,{post:k,label:j,hideTooltip:S,hideIcon:I,iconClassName:T}=e,N=(0,m.useStyles)(g),{captureEvent:L}=(0,i.useTracking)(),[R,_]=(0,n.useState)(!1),A=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(R){let e=()=>_(!1);return document.addEventListener("click",e),()=>document.removeEventListener("click",e)}},[R,_]);let M=null!=(d=k.facebookLink)?d:null,{data:P}=(0,l.useQuery)(h,{variables:{documentId:k._id},skip:!k.startTime||!k.contents||"plaintextDescription"in k.contents}),E=null==P||null==(v=P.post)?void 0:v.result;E?M=(null==(x=E.contents)?void 0:x.plaintextDescription)||M:k.contents&&"plaintextDescription"in k.contents&&(M=k.contents.plaintextDescription||M);let F=k.endTime?(0,o.default)(k.endTime):(0,o.default)(k.startTime).add(1,"hour"),B={google:(b=y={name:k.title,details:M,location:null!=(p=k.onlineEvent?k.joinEventLink:k.location)?p:null,startsAt:(0,o.default)(k.startTime).format(),endsAt:F.format()},a("https://calendar.google.com/calendar/render",{action:"TEMPLATE",dates:"".concat(r(b.startsAt),"/").concat(r(b.endsAt)),location:b.location,text:b.name,details:b.details})),outlook:a("https://outlook.live.com/owa",{rru:"addevent",startdt:y.startsAt,enddt:y.endsAt,subject:y.name,location:y.location,body:y.details,allday:!1,uid:new Date().getTime().toString(),path:"/calendar/view/Month"}),ics:(C=["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT"],w=e=>e?e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/,/g,"\\,").replace(/;/g,"\\;"):null,"u">typeof document&&C.push("URL:".concat(document.URL)),C.push("DTSTAMP:".concat(r(Date())),"UID:".concat("".concat(r(Date())).concat(y.name).concat(String(Math.random()).substring(2)).concat("@".concat(window.location.hostname))),"DTSTART:".concat(r(y.startsAt)),"DTEND:".concat(r(y.endsAt)),"SUMMARY:".concat(w(y.name))),null!=y.details&&C.push("DESCRIPTION:".concat(w(y.details))),null!=y.location&&C.push("LOCATION:".concat(w(y.location))),C.push("END:VEVENT","END:VCALENDAR"),encodeURI("data:text/calendar;charset=utf8,".concat(C.join("\n"))))},D=(0,t.jsxs)("div",{className:N.root,children:[(0,t.jsxs)("button",{ref:A,className:N.button,onClick:e=>{e.preventDefault(),e.stopPropagation(),R||L("addToCalendarClicked"),_(!R)},children:[!I&&(0,t.jsx)(f,{className:(0,s.default)(N.icon,T)}),j&&(0,t.jsx)("span",{className:N.label,children:j})]}),(0,t.jsx)(u.default,{open:R,anchorEl:A.current,placement:"bottom-start",children:(0,t.jsxs)("div",{className:N.dropdown,children:[(0,t.jsx)("a",{href:B.google,target:"_blank",rel:"noopener noreferrer",className:N.option,children:"Google"}),(0,t.jsx)("a",{download:"download",href:B.ics,className:N.option,children:"Apple Calendar"}),(0,t.jsx)("a",{download:"download",href:B.ics,className:N.option,children:"Outlook"}),(0,t.jsx)("a",{href:B.outlook,target:"_blank",rel:"noopener noreferrer",className:N.option,children:"Outlook Web App"})]})})]});return S?D:(0,t.jsx)(c.default,{title:"Add to calendar",placement:"left",children:D})};e.s(["default",0,e=>e.post.startTime?(0,t.jsx)(v,{...e}):null],163253)},397106,e=>{"use strict";e.s(["default",()=>a]);var t=e.i(843476),n=e.i(538794),o=e.i(444098),i=e.i(636867),r=e.i(819131);let a=(0,n.registerComponent)("PopupCommentEditor",e=>{let{title:n,guidelines:a,commentFormProps:s,onClose:l,classes:d}=e;return(0,t.jsxs)(o.Card,{className:d.root,children:[(0,t.jsxs)("div",{className:d.header,children:[(0,t.jsx)("div",{className:d.title,children:n}),(0,t.jsx)(i.default,{className:d.close,onClick:l}),a]}),(0,t.jsx)("div",{className:d.editor,children:(0,t.jsx)(r.default,{enableGuidelines:!1,padding:!1,successCallback:l,interactionType:"comment",formProps:{maxHeight:!0},...s})})]})},{styles:e=>({root:{background:e.palette.panelBackground.default,width:600,position:"fixed",right:e.spacing.unit,bottom:e.spacing.unit,zIndex:e.zIndexes.commentBoxPopup,[e.breakpoints.down("sm")]:{width:"100%",right:0,bottom:0}},title:{...e.typography.commentStyle,...e.typography.body2,fontWeight:600,marginTop:4},close:{position:"absolute",right:8,top:10,cursor:"pointer",color:e.palette.grey[400],height:20,"&:hover":{color:e.palette.grey[600]}},header:{backgroundColor:e.palette.grey[100],paddingLeft:20,paddingRight:20,paddingTop:8,paddingBottom:8,position:"relative"},editor:{padding:20,paddingBottom:12}})})},415617,363254,e=>{"use strict";e.s(["default",()=>h],415617);var t=e.i(843476),n=e.i(161517),o=e.i(538794),i=e.i(627864),r=e.i(725788),a=e.i(530841);e.s(["default",()=>m],363254);var s=e.i(271645),l=e.i(159211),d=e.i(182584),c=e.i(495314),u=e.i(397106);let m=(0,o.registerComponent)("ReviewPostForm",e=>{let{classes:n,post:o,onClose:i}=e,[r,a]=(0,s.useState)(!0);return(0,t.jsx)(u.default,{title:(0,t.jsxs)(t.Fragment,{children:['Reviewing "',(0,t.jsx)(l.Link,{to:(0,d.postGetPageUrl)(o),children:o.title}),'"']}),guidelines:(0,t.jsxs)("div",{className:n.guidelines,children:[r&&(0,t.jsxs)("div",{children:["Reviews should provide information that help evaluate a post",(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"What does this post add to the conversation?"}),(0,t.jsx)("li",{children:"How did this post affect you, your thinking, and your actions?"}),(0,t.jsx)("li",{children:"Does it make accurate claims? Does it carve reality at the joints? How do you know?"}),(0,t.jsx)("li",{children:"Is there a subclaim of this post that you can test?"}),(0,t.jsx)("li",{children:"What followup work would you like to see building on this post?"})]}),(0,t.jsx)("div",{className:n.moderatorsNote,children:"Moderators may promote comprehensive reviews to top-level posts."}),(0,t.jsx)("a",{className:n.hidePrompt,onClick:()=>a(!1),children:"(click to hide)"})]}),!r&&(0,t.jsxs)("div",{onClick:()=>a(!0),children:["Reviews should ideally answer... ",(0,t.jsx)("a",{onClick:()=>a(!1),children:"(read more)"})]})]}),onClose:i,commentFormProps:{post:o,removeFields:["af"],prefilledProps:{reviewingForReview:c.REVIEW_YEAR.toString()}}},o._id)},{styles:e=>({guidelines:{cursor:"default",marginTop:e.spacing.unit,...e.typography.commentStyle,color:e.palette.grey[700],fontSize:"1rem",marginBottom:e.spacing.unit,"& ul":{marginTop:5,marginBottom:5,paddingInlineStart:"30px"},"& li":{marginTop:5,marginBottom:5}},hidePrompt:{position:"absolute",right:14,bottom:14},moderatorsNote:{fontStyle:"italic",marginTop:e.spacing.unit}})});var p=e.i(293958);let h=(0,o.registerComponent)("ReviewPostButton",e=>{let{classes:o,post:s,reviewMessage:l="Review",year:d}=e,c=(0,a.useCurrentUser)(),{openCommentBox:u}=(0,i.useCommentBox)(),{openDialog:h}=(0,r.useDialog)();return(0,t.jsx)(n.AnalyticsContext,{pageElementContext:"reviewPostButton",children:(0,t.jsx)("span",{onClick:()=>{c?u({commentBox:e=>{let{onClose:n}=e;return(0,t.jsx)(m,{onClose:n,post:s})}}):h({name:"LoginPopup",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(p.default,{onClose:n})}})},className:o.root,children:l})})},{styles:e=>({root:{...e.typography.body2,...e.typography.commentStyle,fontSize:"1rem",color:e.palette.lwTertiary.main,marginLeft:e.spacing.unit,marginRight:1.5*e.spacing.unit,cursor:"pointer","&:hover":{opacity:.8}}})})},906095,e=>{"use strict";e.i(813868);var t=e.i(122756),n=e.i(530841),o=e.i(946271);let i=(0,t.gql)("\n  query reviewVotesForPostAndUser($postId: String!, $userId: String!) {\n    reviewVotes(selector: { reviewVotesForPostAndUser: { postId: $postId, userId: $userId } }, limit: 1) {\n      results {\n        _id\n        qualitativeScore\n        quadraticScore\n      }\n    }\n  }\n");function r(e,t){var r,a,s;let l=(0,n.useCurrentUserId)(),{data:d,loading:c}=(0,o.useQuery)(i,{variables:{postId:e,userId:l},skip:!l||t});return{vote:null!=(r=null==d||null==(s=d.reviewVotes)||null==(a=s.results)?void 0:a[0])?r:null,loading:c}}e.s(["reviewVotesForPostAndUserQuery",0,i,"useCurrentUserReviewVote",()=>r])},523958,e=>{"use strict";e.s(["default",()=>f,"voteTextStyling",()=>g]);var t=e.i(843476),n=e.i(271645),o=e.i(538794),i=e.i(444098),r=e.i(530841),a=e.i(552275),s=e.i(495314),l=e.i(343794),d=e.i(698609),c=e.i(903780),u=e.i(110601),m=e.i(415617),p=e.i(906095),h=e.i(239832);let g=e=>({...e.typography.smallText,...e.typography.commentStyle,textAlign:"center",width:40}),f=(0,o.registerComponent)("PostsItemReviewVote",e=>{var o;let{classes:g,post:f,marginRight:v=!0}=e,[x,y]=(0,n.useState)(null),b=(0,r.useCurrentUser)(),C=!(0,s.canNominate)(b,f),{vote:w,loading:k}=(0,p.useCurrentUserReviewVote)(f._id,C);if(C)return null;if(k)return(0,t.jsx)(h.default,{});let j=(null==w?void 0:w.qualitativeScore)||0,S=null==(o=(0,s.getCostData)({})[j])?void 0:o.value,I="NOMINATIONS"===(0,s.getReviewPhase)();return(0,t.jsxs)("div",{onMouseLeave:()=>y(null),children:[(0,t.jsx)(u.default,{title:"".concat(I?"Nominate this post by casting a nomination vote":"Update your vote"),placement:"right",children:(0,t.jsx)("div",{className:(0,l.default)(g.buttonWrapper,{[g.marginRight]:v}),onClick:e=>y(e.target),children:0!==j?(0,t.jsx)("span",{className:(0,l.default)(g.button,[g[j]]),children:S}):(0,t.jsx)("span",{className:g.voteButton,children:"Vote"})})}),(0,t.jsx)(c.default,{placement:"right",anchorEl:x,open:!!x,children:(0,t.jsxs)(i.Card,{className:g.card,children:[(0,t.jsx)(d.default,{post:f}),(0,t.jsx)(m.default,{post:f,year:s.REVIEW_YEAR+"",reviewMessage:(0,t.jsx)(u.default,{title:"Write up your thoughts on what was good about a post, how it could be improved, and how you think stands the tests of time as part of the broader ".concat(a.forumTitleSetting.get()," conversation"),placement:"bottom",children:(0,t.jsx)("div",{className:g.reviewButton,children:"Write a Review"})})})]})})]})},{styles:e=>({buttonWrapper:{cursor:"pointer",...g(e)},7:{color:e.palette.text.invertedBackgroundText,background:e.palette.grey[700]},6:{color:e.palette.text.invertedBackgroundText,background:e.palette.grey[500]},5:{background:e.palette.grey[300]},4:{color:e.palette.grey[600]},3:{background:e.palette.grey[300]},2:{color:e.palette.text.invertedBackgroundText,background:e.palette.error.light},1:{color:e.palette.text.invertedBackgroundText,background:e.palette.error.dark},button:{border:e.palette.border.normal,borderRadius:3,paddingTop:2,paddingBottom:2,width:24,display:"inline-block"},voteButton:{border:e.palette.border.normal,borderRadius:3,paddingTop:2,paddingBottom:2,width:40,display:"inline-block"},card:{padding:e.isFriendlyUI?"8px 24px":8,textAlign:"center"},reviewButton:{paddingTop:4,paddingBottom:4,...e.typography.body2,color:e.palette.primary.main},marginRight:{marginLeft:10}})})},318712,398067,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(136541),i=e.i(514089);e.i(813868);var r=e.i(122756);e.i(248944);var a=e.i(921104);e.i(115004);var s=e.i(717888);e.i(793794);var l=e.i(527633),d=e.i(328018),c=e.i(476331),u=e.i(530841),m=e.i(937636),p=e.i(538794),h=e.i(833851),g=e.i(372593),f=e.i(422046);let v=(0,p.registerComponent)("RSVPForm",e=>{var p;let{post:v,onClose:x,initialResponse:y="yes",classes:b}=e,[C]=(0,i.useMutation)((0,r.gql)("\n    mutation RegisterRSVP($postId: String, $name: String, $email: String, $private: Boolean, $response: String) {\n        RSVPToEvent(postId: $postId, name: $name, email: $email, private: $private, response: $response) {\n        ...PostsDetails\n        }\n    }\n  ")),w=(0,m.useNavigate)(),k=(0,u.useCurrentUser)(),[j,S]=(0,n.useState)((null==k?void 0:k.displayName)||""),[I,T]=(0,n.useState)(null!=(p=null==k?void 0:k.email)?p:""),[N,L]=(0,n.useState)(y),[R,_]=(0,n.useState)("");return(0,t.jsxs)(h.default,{title:"RSVP to ".concat(v.title),open:!0,onClose:()=>{w({...location,search:""}),x&&x()},children:[(0,t.jsxs)(c.DialogTitle,{children:["RSVP to ",v.title]}),(0,t.jsxs)(o.DialogContent,{children:[(0,t.jsx)(a.default,{value:j,placeholder:"Name",onChange:e=>S(e.target.value)}),(0,t.jsx)(a.default,{value:I,placeholder:"Email (optional)",onChange:e=>T(e.target.value)}),(0,t.jsxs)(s.default,{value:N,onChange:e=>L(e.target.value),children:[(0,t.jsx)(g.MenuItem,{value:"yes",children:f.responseToText.yes}),(0,t.jsx)(g.MenuItem,{value:"maybe",children:f.responseToText.maybe}),(0,t.jsx)(g.MenuItem,{value:"no",children:f.responseToText.no})]}),R&&(0,t.jsx)("div",{children:R}),(0,t.jsx)("p",{className:b.emailMessage,children:"The provided email is only visible to the organizer."})]}),(0,t.jsx)(d.DialogActions,{children:(0,t.jsx)(l.default,{type:"submit",color:"primary",onClick:async()=>{if(j){let{error:e}=await C({variables:{postId:v._id,name:j,email:I,response:N}});e?_("Oops, something went wrong: ".concat(e.message)):x&&x()}else _("Please provide a name")},children:"Submit"})})]})},{styles:e=>({emailMessage:e.isFriendlyUI?{fontFamily:e.palette.fonts.sansSerifStack}:{fontStyle:"italic"}})});e.s(["default",0,v],318712);let x=(0,e.i(339213).default)((0,t.jsxs)(n.default.Fragment,{children:[(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0V0zm0 0h24v24H0V0z"}),(0,t.jsx)("path",{d:"M16.59 7.58L10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})]}),"CheckCircleOutline");e.s(["default",0,x],398067)},184805,834519,e=>{"use strict";e.s(["KARMA_WIDTH",()=>ea,"default",()=>el,"styles",()=>es],184805);var t=e.i(843476),n=e.i(538794),o=e.i(159211),i=e.i(161432),r=e.i(235180),a=e.i(96009),s=e.i(343794),l=e.i(942262),d=e.i(161517),c=e.i(552275),u=e.i(935132),m=e.i(495314),p=e.i(177607),h=e.i(883574),g=e.i(834562),f=e.i(898298),v=e.i(994034),x=e.i(932835),y=e.i(883340),b=e.i(601466),C=e.i(927907),w=e.i(93495),k=e.i(432382),j=e.i(110601),S=e.i(671396),I=e.i(112105),T=e.i(899270),N=e.i(764226),L=e.i(583864),R=e.i(863783),_=e.i(2822),A=e.i(40404),M=e.i(919202),P=e.i(163253),E=e.i(523958),F=e.i(415617),B=e.i(495600),D=e.i(967944);e.i(793794);var U=e.i(527633),H=e.i(271645),W=e.i(937636),O=e.i(725788),V=e.i(530841),z=e.i(318712),$=e.i(422046),q=e.i(398067),G=e.i(25533);let Z=(0,e.i(339213).default)((0,t.jsxs)(H.default.Fragment,{children:[(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,t.jsx)("path",{d:"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})]}),"HighlightOff");var Y=e.i(514089);e.i(813868);var Q=e.i(122756),K=e.i(576955),X=e.i(460793),J=e.i(87828);let ee=(0,n.registerComponent)("ResponseIcon",function(e){let{response:n,classes:o}=e;switch(n){case"yes":return(0,t.jsx)(q.default,{className:o.goingIcon});case"maybe":return(0,t.jsx)(G.default,{className:o.maybeIcon});case"no":return(0,t.jsx)(Z,{className:o.noIcon});default:return(0,t.jsx)(t.Fragment,{})}},{styles:e=>({goingIcon:{height:14,color:e.palette.primary.main},maybeIcon:{height:14,color:e.palette.text.eventMaybe},noIcon:{height:14,color:e.palette.grey[500]}})}),et=(0,n.registerComponent)("RSVPs",e=>{var n;let{post:o,classes:i}=e,{openDialog:r}=(0,O.useDialog)(),{query:a}=(0,W.useLocation)(),s=(0,V.useCurrentUser)(),l=(0,H.useCallback)(e=>{r({name:"RSVPForm",contents:n=>{let{onClose:i}=n;return(0,t.jsx)(z.default,{onClose:i,post:o,initialResponse:e})}})},[o,r]);(0,H.useEffect)(()=>{a.rsvpDialog&&l("yes")});let[d]=(0,Y.useMutation)((0,Q.gql)("\n    mutation CancelRSVPToEvent($postId: String, $name: String, $userId: String) {\n        CancelRSVPToEvent(postId: $postId, name: $name, userId: $userId) {\n        ...PostsDetails\n        }\n    }\n  ")),c=async e=>await d({variables:{postId:o._id,name:e.name,userId:e.userId}}),u=(0,X.default)((0,K.default)(o.rsvps,e=>e.response),e=>e.length);return(0,t.jsxs)(J.default,{contentType:"post",className:i.body,children:[(0,t.jsxs)("div",{className:i.topRow,children:[(0,t.jsx)("span",{className:i.rsvpMessage,children:"The host has requested RSVPs for this event"}),(0,t.jsxs)("span",{className:i.buttons,children:[(0,t.jsxs)(U.default,{color:"primary",variant:"outlined",className:i.goingButton,onClick:()=>l("yes"),children:[(0,t.jsx)(ee,{response:"yes"})," Going"]}),(0,t.jsxs)(U.default,{variant:"outlined",className:i.maybeButton,onClick:()=>l("maybe"),children:[(0,t.jsx)(ee,{response:"maybe"})," Maybe"]}),(0,t.jsxs)(U.default,{variant:"outlined",className:i.button,onClick:()=>l("no"),children:[(0,t.jsx)(ee,{response:"no"})," Can't Go"]})]})]}),o.isEvent&&!!(null==(n=o.rsvps)?void 0:n.length)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:i.rsvpCounts,children:Object.keys($.responseToText).map(e=>{var n;return(0,t.jsxs)("span",{className:i.rsvpCount,children:[(0,t.jsx)(ee,{response:e}),null!=(n=u[e])?n:0," ",$.responseToText[e]]},e)})}),(0,t.jsx)("div",{className:i.rsvpBlock,children:o.rsvps.map(e=>{let n=(null==s?void 0:s._id)===o.userId||(null==s?void 0:s._id)===e.userId;return(0,t.jsxs)("span",{className:i.rsvpItem,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(ee,{response:e.response}),(0,t.jsx)("span",{className:i.rsvpName,children:e.name}),n&&(0,t.jsx)("span",{className:i.remove,onClick:()=>c(e),children:"x"})]}),(null==s?void 0:s._id)===o.userId&&(0,t.jsx)("div",{className:i.email,children:e.email})]},"".concat(e.name,"-").concat(e.response))})})]})]})},{styles:e=>({body:{marginBottom:48},rsvpItem:{width:e.isFriendlyUI?"33%":"25%",display:"inline-block",marginRight:16,paddingTop:4,paddingBottom:4,padding:8,verticalAlign:"top",...e.typography.body2,...e.typography.commentStyle,[e.breakpoints.down("sm")]:{width:"33.3%"},[e.breakpoints.down("xs")]:{width:"50%"}},response:{marginTop:-4,...e.typography.smallText},rsvpBlock:{marginTop:10,marginBottom:10},rsvpCounts:{marginTop:10,marginBottom:10,...e.typography.body2,...e.typography.commentStyle},rsvpCount:{marginLeft:10},buttons:{[e.breakpoints.down("xs")]:{display:"block"}},button:{},goingButton:{color:e.palette.primary.main,borderColor:e.palette.primary.main,marginRight:8},maybeButton:{color:e.palette.text.eventMaybe,borderColor:e.palette.text.eventMaybe,marginRight:8},cantGoButton:{color:e.palette.grey[800]},email:{...e.typography.smallText,color:e.palette.text.dim3,marginLeft:24},remove:{color:e.palette.grey[500],marginLeft:12,cursor:"pointer",position:"relative",top:-2},rsvpName:{position:"relative",top:-1},topRow:{display:"flex",justifyContent:"space-between",alignItems:"center",[e.breakpoints.down("xs")]:{display:"block"}},rsvpMessage:e.isFriendlyUI?{fontFamily:e.palette.fonts.sansSerifStack}:{fontStyle:"italic"}})});e.s(["ResponseIcon",0,ee,"default",0,et],834519);var en=e.i(944045),eo=e.i(181832),ei=e.i(79732),er=e.i(429329);let ea=32,es=(0,er.defineStyles)("LWPostsItem",e=>({row:{display:"flex",alignItems:"center",justifyContent:"space-between",...(0,eo.isIfAnyoneBuildsItFrontPage)({flexDirection:"column","&::after":{height:2,content:'""',width:"100%",backdropFilter:e.palette.filters.bannerAdBlur}})},root:{position:"relative",minWidth:0,[e.breakpoints.down("xs")]:{width:"100%"},"&:hover .PostsItemTrailingButtons-actions":{opacity:.2},"&:hover .PostsItemTrailingButtons-archiveButton":{opacity:.2}},background:{width:"100%",background:e.palette.panelBackground.default,...e.isBookUI&&e.dark&&{background:e.palette.panelBackground.bannerAdTranslucent,backdropFilter:e.palette.filters.bannerAdBlur,...(0,eo.isIfAnyoneBuildsItFrontPage)({background:e.palette.panelBackground.bannerAdTranslucentDeep})}},checkboxWidth:{width:"calc(100% - 24px)"},translucentBackground:{width:"100%",background:e.palette.panelBackground.translucent,backdropFilter:"blur(1px)"},postsItem:{display:"flex",position:"relative",padding:10,paddingLeft:6,alignItems:"center",flexWrap:"nowrap",[e.breakpoints.down("xs")]:{flexWrap:"wrap",paddingTop:e.spacing.unit,paddingBottom:e.spacing.unit,paddingLeft:5}},withGrayHover:{"&:hover":{backgroundColor:e.palette.panelBackground.postsItemHover,...e.isBookUI&&e.dark&&{backgroundColor:e.palette.panelBackground.bannerAdTranslucentHeavy}}},hasSmallSubtitle:{"&&":{top:-5}},hasSequenceImage:{paddingRight:0},bottomBorder:{borderBottom:e.palette.border.itemSeparatorBottom,...(0,eo.isIfAnyoneBuildsItFrontPage)({borderBottom:"none"})},commentsBackground:{backgroundColor:e.palette.panelBackground.postsItemExpandedComments,[e.breakpoints.down("xs")]:{paddingLeft:e.spacing.unit/2,paddingRight:e.spacing.unit/2}},karma:{width:ea,marginRight:4,[e.breakpoints.down("xs")]:{width:"unset",justifyContent:"flex-start",marginLeft:2,marginRight:e.spacing.unit}},karmaPredictedReviewWinner:{color:e.palette.review.winner},title:{minHeight:26,flex:1500,maxWidth:"fit-content",overflow:"hidden",textOverflow:"ellipsis",marginRight:12,[e.breakpoints.up("sm")]:{position:"relative",top:3},[e.breakpoints.down("xs")]:{order:-1,height:"unset",maxWidth:"unset",width:"100%",paddingRight:e.spacing.unit,flex:"unset"},"&:hover":{opacity:1}},spacer:{flex:1,[e.breakpoints.down("xs")]:{display:"none"}},author:{"&&":{flex:1e3},justifyContent:"flex",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",marginRight:1.5*e.spacing.unit,zIndex:e.zIndexes.postItemAuthor,flex:1e3,maxWidth:"fit-content",...(0,eo.isIfAnyoneBuildsItFrontPage)({color:e.palette.text.bannerAdDim}),[e.breakpoints.down("xs")]:{justifyContent:"flex-end",width:"unset",marginLeft:0,flex:"unset"}},event:{maxWidth:250,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",marginRight:1.5*e.spacing.unit,[e.breakpoints.down("xs")]:{width:"unset",marginLeft:0}},newCommentsSection:{width:"100%",paddingLeft:2*e.spacing.unit,paddingRight:2*e.spacing.unit,paddingTop:e.spacing.unit,cursor:"pointer",marginBottom:l.NEW_COMMENT_MARGIN_BOTTOM,[e.breakpoints.down("xs")]:{padding:0}},actions:{opacity:0,display:"flex",position:"absolute",top:0,right:-h.MENU_WIDTH-6,width:h.MENU_WIDTH,height:"100%",cursor:"pointer",alignItems:"center",justifyContent:"center",[e.breakpoints.down("sm")]:{display:"none"}},archiveButton:{opacity:0,display:"flex",position:"absolute",top:1,right:-3*h.MENU_WIDTH,width:h.MENU_WIDTH,height:"100%",cursor:"pointer",alignItems:"center",justifyContent:"center",[e.breakpoints.down("sm")]:{display:"none"}},mobileSecondRowSpacer:{[e.breakpoints.up("sm")]:{display:"none"},flexGrow:1,height:24},mobileActions:{cursor:"pointer",width:h.MENU_WIDTH,opacity:.5,marginRight:e.spacing.unit,display:"none",[e.breakpoints.down("xs")]:{display:"block"}},mobileIcons:{[e.breakpoints.up("sm")]:{display:"none"}},mobileDismissButton:{display:"none",opacity:.75,verticalAlign:"middle",position:"relative",cursor:"pointer",right:10,[e.breakpoints.down("xs")]:{display:"inline-block"}},subtitle:{color:e.palette.grey[700],fontFamily:e.typography.commentStyle.fontFamily,[e.breakpoints.up("sm")]:{position:"absolute",left:42,bottom:5,zIndex:e.zIndexes.nextUnread},[e.breakpoints.down("xs")]:{order:-1,width:"100%",marginTop:-2,marginBottom:3,marginLeft:1},"& a":{color:e.palette.primary.main}},sequenceImage:{position:"relative",marginLeft:-60,opacity:.6,height:48,width:146,marginTop:-12,marginBottom:-12,[e.breakpoints.down("xs")]:{marginTop:0,marginBottom:0,position:"absolute",overflow:"hidden",right:0,bottom:0,height:"100%"},"&:after":{content:"''",position:"absolute",width:"100%",height:"100%",left:0,top:0,background:"linear-gradient(to right, ".concat(e.palette.panelBackground.default," 0%, ").concat(e.palette.panelBackground.translucent2," 60%, transparent 100%)")}},sequenceImageImg:{height:48,width:146,[e.breakpoints.down("xs")]:{height:"100%",width:"auto"}},reviewCounts:{width:50},noReviews:{color:e.palette.grey[400]},dense:{paddingTop:7,paddingBottom:8},withRelevanceVoting:{marginLeft:28},bookmark:{marginLeft:e.spacing.unit/2,marginRight:1.5*e.spacing.unit,position:"relative",height:22},isRead:{...(0,eo.isIfAnyoneBuildsItFrontPage)({background:e.palette.panelBackground.bannerAdTranslucent,backdropFilter:e.palette.filters.bannerAdBlur})},checkbox:{marginRight:10},mostValuableCheckbox:{marginLeft:5},commentsIcon:{marginLeft:8},reviewPostButton:{marginLeft:10,[e.breakpoints.down("xs")]:{marginRight:-8}},unreadDebateResponsesIcon:{height:14,position:"relative",top:2,color:e.palette.primary.main},unreadDebateResponseCount:{paddingLeft:4,color:e.palette.primary.main},unreadDebateResponseContainer:{cursor:"pointer","&:hover":{opacity:.5}},rsvps:{position:"relative",top:2,[e.breakpoints.down("xs")]:{marginRight:16}},rsvpCount:{position:"relative",top:-2,fontSize:"1rem",fontWeight:300,color:e.palette.greyAlpha(.9)},afterSpacerWrap:{[e.breakpoints.down("xs")]:{flexBasis:"100%"}},tertiaryRow:{display:"flex",flexDirection:"row",alignItems:"center",marginLeft:"auto",flexShrink:0}}),{stylePriority:1}),el=(0,n.registerComponent)("LWPostsItem",e=>{var n,a,l,U,H,W,O;let{post:V,postLink:z,commentCount:$,tagRel:q,resumeReading:G,sticky:Z,renderComments:Y,renderDialogueMessages:Q,condensedAndHiddenComments:K,toggleComments:X,toggleDialogueMessages:J,showAuthor:et,showDate:eo,showTrailingButtons:er,showMostValuableCheckbox:ea,showNominationCount:el,showReviewCount:ed,showIcons:ec,showKarma:eu,useCuratedDate:em,annualReviewMarketInfo:ep,showReadCheckbox:eh,showDraftTag:eg,showPersonalIcon:ef,showBottomBorder:ev,showDismissButton:ex,showArchiveButton:ey,showCommentsIcon:eb,onDismiss:eC,onArchive:ew,hasUnreadComments:ek,hasNewPromotedComments:ej,commentTerms:eS,analyticsProps:eI,translucentBackground:eT,isRead:eN,tooltipPlacement:eL,dense:eR,curatedIconLeft:e_,strikethroughTitle:eA,bookmark:eM,emphasizeIfNew:eP,className:eE}=(0,p.usePostsItem)(e),eF=(0,ei.useStyles)(es),{hover:eB,eventHandlers:eD}=(0,f.useHover)(),eU="".concat(V.nominationCount2019||0," nomination").concat(1===V.nominationCount2019?"":"s"," / ").concat(V.reviewCount2019||0," review").concat(1===V.nominationCount2019?"":"s"),eH="REVIEWS"===(0,m.getReviewPhase)()||"NOMINATIONS"===(0,m.getReviewPhase)()||"VOTING"===(0,m.getReviewPhase)();return(0,t.jsx)(d.AnalyticsContext,{...eI,children:(0,t.jsxs)("div",{className:eF.row,children:[eh&&(0,t.jsx)("div",{className:eF.checkbox,children:(0,t.jsx)(B.default,{post:V,width:14})}),(0,t.jsxs)("div",{className:(0,s.default)(eF.root,eE,{[eF.background]:!eT,[eF.checkboxWidth]:eh,[eF.translucentBackground]:eT,[eF.bottomBorder]:ev,[eF.commentsBackground]:Y,[eF.isRead]:eN&&!eh}),children:[(0,t.jsx)("div",{...eD,children:(0,t.jsxs)(N.default,{post:V,placement:eL,className:(0,s.default)(eF.postsItem,eF.withGrayHover,{[eF.dense]:eR,[eF.withRelevanceVoting]:!!q,[eF.hasSequenceImage]:!!G}),children:[q&&(0,t.jsx)(x.default,{tagRel:q}),eu&&(0,t.jsx)(T.default,{className:(0,s.default)(eF.karma,{[eF.karmaPredictedReviewWinner]:(0,v.highlightMarket)(ep)}),children:V.isEvent?(0,t.jsx)(P.default,{post:V}):(0,t.jsx)(C.default,{document:V})}),(0,t.jsx)("span",{className:(0,s.default)(eF.title,{[eF.hasSmallSubtitle]:!!G}),children:(0,t.jsx)(M.default,{eventType:"postItem",eventProps:{mountedPostId:V._id,mountedPostScore:V.score,mountedPostBaseScore:V.baseScore},captureOnMount:e=>e.capturePostItemOnMount,captureOnClick:!1,children:(0,t.jsx)(w.default,{postLink:z,post:V,read:eN&&!eh,sticky:Z,showDraftTag:eg,...ef?{showPersonalIcon:ef}:{},curatedIconLeft:e_,strikethroughTitle:eA,postItemHovered:eB})})}),((null==G?void 0:G.sequence)||(null==G?void 0:G.collection))&&(0,t.jsxs)("div",{className:eF.subtitle,children:[G.numRead?"Next unread in ":"First post in ",(0,t.jsx)(o.Link,{to:G.sequence?(0,i.sequenceGetPageUrl)(G.sequence):(0,r.collectionGetPageUrl)(G.collection),children:G.sequence?G.sequence.title:null==(a=G.collection)?void 0:a.title})," ",G.numRead>0&&(0,t.jsxs)("span",{children:["(",G.numRead,"/",G.numTotal," read)"]})]}),V.isEvent&&!V.onlineEvent&&(0,t.jsx)(T.default,{className:eF.event,children:(0,t.jsx)(y.default,{post:V})}),(0,t.jsx)("span",{className:eF.spacer}),(0,u.isLW)()&&V.isEvent&&(null==(l=V.rsvpCounts)?void 0:l.yes)>=5&&(0,t.jsxs)(T.default,{className:eF.rsvps,children:[(null==(U=V.rsvpCounts)?void 0:U.yes)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee,{response:"yes"}),(0,t.jsx)("span",{className:eF.rsvpCount,children:V.rsvpCounts.yes})]}),(null==(H=V.rsvpCounts)?void 0:H.maybe)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee,{response:"maybe"}),(0,t.jsx)("span",{className:eF.rsvpCount,children:V.rsvpCounts.maybe})]})]}),et&&(0,t.jsx)(T.default,{className:eF.author,children:(0,t.jsx)(k.default,{post:V,abbreviateIfLong:!0,newPromotedComments:ej,tooltipPlacement:"top"})}),!!V.unreadDebateResponseCount&&(0,t.jsx)(T.default,{className:eF.unreadDebateResponseContainer,children:(0,t.jsxs)("div",{className:eF.unreadDebateResponseCount,onClick:V.collabEditorDialogue?J:X,children:[(0,t.jsx)(g.default,{className:eF.unreadDebateResponsesIcon}),V.unreadDebateResponseCount]})}),eo&&(0,t.jsx)(R.default,{post:V,useCuratedDate:em,emphasizeIfNew:eP}),(0,t.jsx)("div",{className:eF.mobileSecondRowSpacer}),(0,t.jsxs)("div",{className:eF.tertiaryRow,children:[eH&&(0,t.jsx)("div",{className:eF.mobileSecondRowSpacer}),ec&&(0,t.jsx)("div",{className:eF.mobileIcons,children:(0,t.jsx)(I.PostsItemIcons,{post:V})}),(0,t.jsx)("div",{className:eF.mobileActions,children:!G&&(0,t.jsx)(S.default,{post:V,autoPlace:!0})}),!G&&eb&&(0,t.jsx)("div",{className:eF.commentsIcon,children:(0,t.jsx)(b.default,{small:!1,commentCount:$,onClick:X,unreadComments:ek,newPromotedComments:ej})}),"NOMINATIONS"===(0,m.getReviewPhase)()&&(0,t.jsx)(E.default,{post:V}),(0,m.postEligibleForReview)(V)&&(0,m.postPassedNomination)(V)&&"REVIEWS"===(0,m.getReviewPhase)()&&(0,t.jsx)("span",{className:eF.reviewPostButton,children:(0,t.jsx)(F.default,{post:V,year:m.REVIEW_YEAR+"",reviewMessage:(0,t.jsx)(j.default,{title:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:"What was good about this post? How it could be improved? Does it stand the test of time?"}),(0,t.jsx)("p",{children:(0,t.jsxs)("em",{children:[V.reviewCount||"No"," review",1!==V.reviewCount&&"s"]})})]}),placement:"top",children:"Review"})})}),(el||ed)&&(0,t.jsx)(j.default,{title:eU,placement:"top",children:(0,t.jsxs)(T.default,{className:eF.reviewCounts,children:[el&&(0,t.jsx)("span",{children:V.nominationCount2019||0}),ed&&(0,t.jsxs)("span",{children:[" ",(0,t.jsxs)("span",{className:eF.noReviews,children:[" ",""," "]}),V.reviewCount2019||(0,t.jsx)("span",{className:eF.noReviews,children:"0"})]})]})})]}),eM&&(0,t.jsx)("div",{className:eF.bookmark,children:(0,t.jsx)(L.default,{documentId:V._id,collectionName:"Posts",initial:V.isBookmarked})}),(0,t.jsx)("div",{className:eF.mobileDismissButton,children:ex&&(0,t.jsx)(h.DismissButton,{showDismissButton:ex,onDismiss:eC})}),G&&(0,t.jsx)("div",{className:eF.sequenceImage,children:(0,t.jsx)("img",{className:eF.sequenceImageImg,src:"https://res.cloudinary.com/".concat(c.cloudinaryCloudNameSetting.get(),"/image/upload/c_fill,dpr_2.0,g_custom,h_96,q_auto,w_292/v1/").concat((null==(W=G.sequence)?void 0:W.gridImageId)||(null==(O=G.collection)?void 0:O.gridImageId)||"sequences/vnyzzznenju0hzdv6pqb.jpg")})})]})}),(0,t.jsx)(h.default,{post:V,showTrailingButtons:er,showMostValuableCheckbox:ea,showDismissButton:ex,showArchiveButton:ey,resumeReading:G,onDismiss:eC,onArchive:ew}),Y&&(0,t.jsx)("div",{className:eF.newCommentsSection,onClick:X,children:(0,t.jsx)(_.default,{terms:eS,post:V,treeOptions:{highlightDate:(0,en.maybeDate)(null!=(n=V.lastVisitedAt)?n:void 0),condensed:K}})}),Q&&(0,t.jsx)("div",{className:eF.newCommentsSection,onClick:J,children:(0,t.jsx)(A.default,{postId:V._id,unreadCount:V.unreadDebateResponseCount})})]}),ea&&(0,t.jsx)("div",{className:eF.mostValuableCheckbox,children:(0,t.jsx)(D.default,{post:V})})]})})},{hocs:[a.default],areEqual:{terms:"deep"}})},206697,e=>{"use strict";e.s(["default",()=>r]);var t=e.i(843476),n=e.i(791434),o=e.i(622224),i=e.i(184805);let r=e=>(0,n.isFriendlyUI)()?(0,t.jsx)(o.default,{...e}):(0,t.jsx)(i.default,{...e})},312233,e=>{"use strict";var t=e.i(843476),n=e.i(343794),o=e.i(716970),i=e.i(429329),r=e.i(79732);let a=(0,i.defineStyles)("FriendlyPlaceholderPostsItem",e=>({root:{minWidth:"100%",width:o.SECTION_WIDTH,maxWidth:"100%",background:e.palette.grey[0],padding:"15px 17px",border:"1px solid ".concat(e.palette.grey[100]),borderRadius:e.borderRadius.default,[e.breakpoints.down("xs")]:{padding:"14px 17px 12px"}},rootCard:{padding:"16px 17px",marginBottom:2,height:143},container:{display:"flex",justifyContent:"space-between",alignItems:"center",columnGap:18},placeholder:{height:10,background:e.palette.panelBackground.placeholderGradient,backgroundSize:"300% 100%",animation:"profile-image-loader 1.8s infinite",borderRadius:3},karma:{flex:"none",width:16},titleCol:{flexGrow:1},title:{width:"100%",maxWidth:434,marginBottom:10},metaRow:{display:"flex",justifyContent:"space-between",alignItems:"center",columnGap:18},authorWrapper:{flexGrow:1},author:{width:"100%",maxWidth:183},commentIcon:{flex:"none",width:33,marginRight:4},commentIconMobile:{[e.breakpoints.up("sm")]:{display:"none"}},commentIconCard:{alignSelf:"flex-start",marginTop:2},threeDotsIcon:{flex:"none",height:15,width:10},threeDotsIconMobile:{[e.breakpoints.up("sm")]:{display:"none"}},threeDotsIconCard:{alignSelf:"flex-start"},hideOnMobile:{[e.breakpoints.down("xs")]:{display:"none"}}}));e.s(["default",0,e=>{let{viewType:o="list"}=e,i=(0,r.useStyles)(a),s="card"===o;return(0,t.jsx)("div",{className:(0,n.default)(i.root,s&&i.rootCard),children:(0,t.jsxs)("div",{className:i.container,children:[(0,t.jsx)("div",{className:(0,n.default)(i.placeholder,i.karma)}),(0,t.jsxs)("div",{className:i.titleCol,children:[(0,t.jsx)("div",{className:(0,n.default)(i.placeholder,i.title)}),(0,t.jsxs)("div",{className:i.metaRow,children:[(0,t.jsx)("div",{className:i.authorWrapper,children:(0,t.jsx)("div",{className:(0,n.default)(i.placeholder,i.author)})}),(0,t.jsx)("div",{className:(0,n.default)(i.placeholder,i.commentIcon,i.commentIconMobile)}),(0,t.jsx)("div",{className:(0,n.default)(i.placeholder,i.threeDotsIcon,i.threeDotsIconMobile)})]})]}),(0,t.jsx)("div",{className:(0,n.default)(i.placeholder,i.commentIcon,i.hideOnMobile,s&&i.commentIconCard)}),(0,t.jsx)("div",{className:(0,n.default)(i.placeholder,i.threeDotsIcon,i.hideOnMobile,s&&i.threeDotsIconCard)})]})})}])},563665,e=>{"use strict";e.s(["default",()=>m],563665);var t=e.i(843476),n=e.i(144950),o=e.i(791434),i=e.i(239832),r=e.i(312233),a=e.i(343794),s=e.i(79732),l=e.i(184805);let d=e=>{let{showBottomBorder:n}=e,o=(0,s.useStyles)(l.styles);return(0,t.jsx)("div",{className:o.row,children:(0,t.jsx)("div",{className:(0,a.default)(o.root,o.background,{[o.bottomBorder]:n}),children:(0,t.jsxs)("div",{className:o.postsItem,children:[(0,t.jsx)("span",{className:o.title}),(0,t.jsx)("div",{className:o.mobileSecondRowSpacer})]})})})};var c=e.i(147630),u=e.i(6791);let m=e=>{let{placeholderCount:a,loadMore:s,showFinalBottomBorder:l,viewType:m="list",children:p}=e;return a?(0,o.isFriendlyUI)()?(0,t.jsx)(t.Fragment,{children:(0,n.default)(0,a).map(e=>(0,t.jsx)(r.default,{viewType:m},e))}):(0,t.jsxs)(t.Fragment,{children:[(0,n.default)(0,a).map(e=>(0,t.jsx)(d,{showBottomBorder:l||e+1<a},e)),!!(s||p)&&(0,t.jsxs)(u.default,{children:[s&&(0,t.jsx)(c.LoadMorePlaceholder,{sectionFooterStyles:!0}),p]})]}):(0,t.jsx)(i.default,{})}},823073,51917,e=>{"use strict";e.s(["default",()=>w],823073);var t=e.i(843476),n=e.i(271645),o=e.i(538794),i=e.i(100916),r=e.i(343794),a=e.i(74453),s=e.i(161517),l=e.i(953143),d=e.i(79732),c=e.i(429329),u=e.i(147630),m=e.i(109318),p=e.i(6791),h=e.i(206697),g=e.i(563665),f=e.i(824083);let v=(0,n.createContext)(null),x=e=>{let{precedence:o,postId:i,children:r}=e,a=(0,n.useContext)(v),[s]=(0,n.useState)(()=>{if(!o||!a)return[];let e=a.precedencesSeenByPostId[i];return e?e.some(e=>e<o)?(a.precedencesSeenByPostId[i].push(o),[o]):e.includes(o)?[]:(a.precedencesSeenByPostId[i].push(o),e.filter(e=>e>o)):(a.precedencesSeenByPostId[i]=[o],[])});return(0,t.jsxs)("span",{className:"post_".concat(i,"_").concat(o),children:[r,(0,t.jsx)("style",{suppressHydrationWarning:!0,children:s.map(e=>".post_".concat(i,"_").concat(e," { display: none }")).join("\n")})]})};e.s(["HideIfRepeated",0,x,"HideRepeatedPostsProvider",0,e=>{let{children:o}=e,i=(0,n.useRef)({precedencesSeenByPostId:{}});return(0,t.jsx)(v.Provider,{value:i.current,children:o})}],51917);let y=e=>{let{error:n}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)(l.default,{id:n.id,values:{value:n.value}}),n.message]})},b=(0,c.defineStyles)("PostsList2",e=>({itemIsLoading:{opacity:.4},postsBoxShadow:{boxShadow:e.palette.boxShadow.default},postsGrid:{display:"grid",gridTemplateColumns:"minmax(0, min-content) minmax(10px, 1fr)",columnGap:"20px"},placement:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:16,fontWeight:700,letterSpacing:"1px"}})),C=e=>{let{...o}=e,{children:l,showNoResults:c,showLoadMore:f,showLoading:v,dimWhenLoading:C,loading:w,topLoading:k,boxShadow:j,error:S,loadMore:I,loadMoreProps:T,maybeMorePosts:N,orderedResults:L,itemProps:R,limit:_,placeholderCount:A,showFinalBottomBorder:M,viewType:P,showPlacement:E,header:F,repeatedPostsPrecedence:B}=(0,a.usePostsList)(o),D=(0,d.useStyles)(b);return!L&&w?(0,t.jsx)(g.default,{placeholderCount:A||_,showFinalBottomBorder:M,viewType:P,loadMore:f}):(null==L?void 0:L.length)||c?(0,t.jsxs)(t.Fragment,{children:[F,(0,t.jsxs)("div",{className:(0,r.default)({[D.itemIsLoading]:w&&C}),children:[S&&(0,t.jsx)(y,{error:(0,i.decodeIntlError)(S)}),w&&v&&(k||C)&&(0,t.jsx)(g.default,{placeholderCount:A||_,viewType:P,loadMore:f}),L&&!L.length&&(0,t.jsx)(m.default,{}),(0,t.jsx)(s.AnalyticsContext,{viewType:P,children:(0,t.jsx)("div",{className:(0,r.default)(j&&D.postsBoxShadow,E&&D.postsGrid),children:null==R?void 0:R.map(e=>(0,t.jsx)(n.default.Fragment,{children:(0,t.jsxs)(x,{precedence:B,postId:e.post._id,children:[E&&void 0!==e.index&&(0,t.jsxs)("div",{className:D.placement,children:["#",e.index+1]}),(0,t.jsx)(h.default,{...e})]})},e.post._id))})}),f&&(0,t.jsxs)(p.default,{children:[(0,t.jsx)(u.default,{...T,loading:w,loadMore:I,hideLoading:C||!v,hidden:!N&&!w,sectionFooterStyles:!0}),l]})]})]}):null},w=(0,o.registerComponent)("PostsList2",e=>{var n,o,i;return e.noSuspenseBoundary?(0,t.jsx)(C,{...e}):(0,t.jsx)(f.SuspenseWrapper,{name:"PostsList2",fallback:(0,t.jsx)(g.default,{placeholderCount:null!=(n=null!=(o=e.placeholderCount)?o:null==(i=e.terms)?void 0:i.limit)?n:1,showFinalBottomBorder:e.showFinalBottomBorder,viewType:"list",loadMore:e.alwaysShowLoadMore,children:e.children}),children:(0,t.jsx)(C,{...e})})},{areEqual:{terms:"deep"}})},609932,281007,837036,839316,120124,130657,e=>{"use strict";e.s(["ReviewOverviewTooltip",()=>A,"default",()=>P],609932);var t=e.i(843476),n=e.i(538794),o=e.i(159211),i=e.i(530841),r=e.i(161517),a=e.i(343794),s=e.i(552275),l=e.i(166540),d=e.i(495314),c=e.i(182584),u=e.i(644169),m=e.i(673991),p=e.i(782611),h=e.i(168455),g=e.i(110601),f=e.i(823073),v=e.i(188685),x=e.i(255947),y=e.i(144950),b=e.i(946271);e.i(813868);var C=e.i(122756);let w=(0,C.gql)("\n  query multiCommentReviewProgressReviewsQuery($selector: CommentSelector, $limit: Int, $enableTotal: Boolean) {\n    comments(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...CommentsListWithParentMetadata\n      }\n      totalCount\n    }\n  }\n"),k=(0,n.registerComponent)("ReviewProgressReviews",e=>{var n,o;let{classes:r,reviewYear:a}=e,s=(0,i.useCurrentUser)(),{data:l}=(0,b.useQuery)(w,{variables:{selector:{reviews:{userId:null==s?void 0:s._id,reviewYear:a}},limit:3,enableTotal:!0},skip:!s,notifyOnNetworkStatusChange:!0}),d=null==l||null==(n=l.comments)?void 0:n.results,c=null==l||null==(o=l.comments)?void 0:o.totalCount;if(!d)return null;let u=c||0,m=d.filter(e=>e.baseScore&&e.baseScore>=10).length,p=3-Math.min(u,3);return(0,t.jsx)(g.default,{title:(0,t.jsxs)("div",{children:[u<3&&(0,t.jsxs)("div",{children:["Help inform voters by writing ",3," reviews. Reviews with 10+ karma will appear on the Best of LessWrong page."]}),(0,t.jsx)("p",{children:(0,t.jsx)("em",{children:u?"You've written ".concat(u," review").concat(1===u?"":"s").concat(u>=3?"!":"."," ").concat(m?"(".concat(m," of your reviews got 10+ karma)"):"(None with 10+ karma yet)"):"You haven't written any reviews yet."})})]}),placement:"top",children:(0,t.jsxs)("div",{className:r.root,children:[d.map(e=>(0,t.jsx)(x.default,{className:r.filledIcon},e._id)),(0,y.default)(0,p).map(e=>(0,t.jsx)(v.default,{className:r.icon},e))]})})},{styles:e=>({root:{display:"flex",alignItems:"center"},text:{...e.typography.body2,marginLeft:10,color:e.palette.grey[600],fontSize:"1rem"},icon:{width:20,color:e.palette.grey[500]},filledIcon:{width:20,color:e.palette.grey[600]},extraIcon:{width:22,color:e.palette.primary.light},highlightedIcon:{color:e.palette.primary.main}})});e.s(["default",0,k],281007);var j=e.i(271645);let S=(0,e.i(339213).default)((0,t.jsxs)(j.default.Fragment,{children:[(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,t.jsx)("path",{d:"M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H6V6h12v12z"})]}),"CropSquare");e.s(["TARGET_REVIEW_VOTING_NUM",0,6],837036);let I=(0,C.gql)("\n  query multiReviewVoteReviewProgressVotingQuery($selector: ReviewVoteSelector, $limit: Int, $enableTotal: Boolean) {\n    reviewVotes(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...reviewVoteFragment\n      }\n      totalCount\n    }\n  }\n"),T=(0,n.registerComponent)("ReviewProgressVoting",e=>{var n,o;let{classes:r,reviewYear:a}=e,s=(0,i.useCurrentUser)(),{data:l}=(0,b.useQuery)(I,{variables:{selector:{reviewVotesFromUser:{userId:null==s?void 0:s._id,year:a.toString()}},limit:6,enableTotal:!0},skip:!s,notifyOnNetworkStatusChange:!0}),d=null==l||null==(n=l.reviewVotes)?void 0:n.results,c=null==l||null==(o=l.reviewVotes)?void 0:o.totalCount;if(!d)return null;let u=c||0,m=6-Math.min(u,6);return(0,t.jsx)("div",{children:(0,t.jsx)(g.default,{title:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:(0,t.jsx)("em",{children:u?"You've voted on ".concat(u," posts in the ").concat(a," Review").concat(u>=6?"!":"."):"You haven't voted on any posts yet."})}),u<6&&(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{children:["It'd be helpful if you voted on at least ",6," posts. More votes from established users improves the signal/noise of the review vote. (If there weren't ",6,' posts you found longterm valuable, it\'s fine to vote "0").']})})]}),placement:"top",children:(0,t.jsxs)("div",{className:r.root,children:[d.map(e=>(0,t.jsx)("div",{className:r.filledIcon},e._id)),(0,y.default)(0,m).map(e=>(0,t.jsx)(S,{className:r.icon},"".concat(null==s?void 0:s._id).concat(e)))]})})})},{styles:e=>({root:{display:"flex",alignItems:"center",marginRight:4},icon:{width:16,color:e.palette.grey[500],transform:"rotate(45deg)"},filledIcon:{width:12,height:12,marginRight:4,border:e.palette.border.intense,borderColor:e.palette.primary.main,backgroundColor:e.palette.primary.light,opacity:.7,transform:"rotate(45deg)",borderRadius:2}})});e.s(["default",0,T],839316);let N=(0,C.gql)("\n  query multiCommentReviewProgressNominationsQuery($selector: CommentSelector, $limit: Int, $enableTotal: Boolean) {\n    comments(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...CommentsListWithParentMetadata\n      }\n      totalCount\n    }\n  }\n"),L=(0,n.registerComponent)("ReviewProgressNominations",e=>{var n,o;let{classes:r,reviewYear:a=d.REVIEW_YEAR}=e,s=(0,i.useCurrentUser)(),{data:l}=(0,b.useQuery)(N,{variables:{selector:{reviews:{userId:null==s?void 0:s._id,reviewYear:a}},limit:2,enableTotal:!0},skip:!s,notifyOnNetworkStatusChange:!0}),c=null==l||null==(n=l.comments)?void 0:n.results,u=null==l||null==(o=l.comments)?void 0:o.totalCount,m=null!=u?u:0,p=2-Math.min(m,2),h=(0,t.jsxs)("div",{children:[m<2&&(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{children:["It'll help if you write ",2," short reviews about why a post was valuable to you."]})}),(0,t.jsx)("p",{children:(0,t.jsx)("em",{children:m?"You've written ".concat(m," review").concat(1!==m?"s":"").concat(m>=2?"!":"."):"You haven't written any reviews yet."})})]});return(0,t.jsx)(g.default,{title:h,placement:"top",children:(0,t.jsxs)("div",{className:r.root,children:[null==c?void 0:c.map(e=>(0,t.jsx)("div",{className:r.reviewIcon},e._id)),(0,y.default)(0,p).map(e=>(0,t.jsx)("div",{className:r.emptyReviewIcon},e))]})})},{styles:e=>({root:{display:"flex",alignItems:"center",marginRight:4},reviewIcon:{width:12,height:12,backgroundColor:e.palette.primary.light,border:"1px solid ".concat(e.palette.primary.main),borderRadius:2,marginLeft:14,transform:"rotate(45deg)"},emptyReviewIcon:{width:12,height:12,border:"1px solid ".concat(e.palette.grey[400]),borderRadius:2,marginLeft:14,transform:"rotate(45deg)"}})});e.s(["default",0,L],120124);let R=e=>({paddingTop:7,paddingBottom:7,paddingLeft:10,paddingRight:10,borderRadius:3,...e.typography.commentStyle,display:"inline-block",marginLeft:10,[e.breakpoints.down("xs")]:{marginLeft:6,paddingLeft:7,paddingRight:7}});function _(e){return 864e5>e.diff(new Date)}function A(){let e=s.forumTitleSetting.get(),n=(0,d.getReviewStart)(d.REVIEW_YEAR),o=(0,d.getNominationPhaseEnd)(d.REVIEW_YEAR),i=(0,d.getReviewPhaseEnd)(d.REVIEW_YEAR),r=(0,d.getNominationPhaseEndDisplay)(d.REVIEW_YEAR),a=(0,d.getReviewPhaseEndDisplay)(d.REVIEW_YEAR),l=(0,d.getVotingPhaseEndDisplay)(d.REVIEW_YEAR),c=(0,t.jsxs)("span",{children:[n.format("MMM Do")," - ",r.format("MMM Do")]}),u=(0,t.jsxs)("span",{children:[o.format("MMM Do")," - ",a.format("MMM Do")]}),m=(0,t.jsxs)("span",{children:[i.format("MMM Do")," - ",l.format("MMM Do")]});return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:["The ",e," community is reflecting on the best posts from ",d.REVIEW_YEAR,", in three phases:"]}),(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("em",{children:"Nomination Voting"})," (",c,")"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("em",{children:"Review"})," (",u,")"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("em",{children:"Final Voting"})," (",m,")"]})]}),(0,t.jsxs)("div",{children:["The ",e,' moderation team will incorporate that information, along with their judgment, into a "Best of ',d.REVIEW_YEAR,'" sequence.']}),(0,t.jsx)("p",{children:"We're currently in the nomination voting phase. Nominate posts by casting a nomination vote, or vote on existing nominations to help us prioritize them during the Review Phase."})]})}let M=(e,t,n)=>{if(e<t)return 0;t>=n&&console.error("In dateFraction: start and end dates are reversed");let o=(e.unix()-t.unix())/(n.unix()-t.unix())*100;return o>100?(console.error("Out of range in dateFraction: ".concat(e,", ").concat(t,", ").concat(n)),"100"):o.toFixed(2)},P=(0,n.registerComponent)("FrontpageReviewWidget",e=>{let{classes:n,showFrontpageItems:s=!0,reviewYear:v,className:x}=e,y=(0,i.useCurrentUser)(),b=(0,d.getReviewStart)(v),C=(0,d.getNominationPhaseEnd)(v),w=(0,d.getReviewPhaseEnd)(v),j=(0,d.getVotingPhaseEnd)(v),S=(0,d.getNominationPhaseEndDisplay)(v),I=(0,d.getReviewPhaseEndDisplay)(v),N=(0,d.getVotingPhaseEndDisplay)(v),R=l.default.utc(),P=(0,d.getReviewPhase)(v),E=(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:["Cast initial votes for the ",v," Review."]}),(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:["Nominate a post by casting a ",(0,t.jsx)("em",{children:"nomination vote"}),". Or, vote on an existing nominated post to help us prioritize it during the Review Phase."]}),(0,t.jsxs)("li",{children:["Any post from ",v," can be nominated"]}),(0,t.jsxs)("li",{children:["Any user registered before ",v," can nominate posts for review"]}),(0,t.jsx)("li",{children:"Posts will need at least two positive votes to proceed to the Review Phase."})]}),"NOMINATIONS"===P&&(0,t.jsx)("div",{children:(0,t.jsxs)("em",{children:[C.fromNow()," remaining"]})})]}),F=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:["Review posts for the ",v," Review ","NOMINATIONS"===P?"(Opens ".concat(C.format("MMM Do"),")"):""]}),(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:["Write reviews of posts nominated for the ",v," Review"]}),(0,t.jsx)("li",{children:"Only posts with at least one review are eligible for the final vote"})]}),"REVIEWS"===P&&(0,t.jsx)("div",{children:(0,t.jsxs)("em",{children:[w.fromNow()," remaining"]})})]}),B=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:["Cast your final votes for the ",v," Review. ","REVIEWS"===P||"NOMINATIONS"===P?"(Opens ".concat(w.format("MMM Do"),")"):""]}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"Look over nominated posts and vote on them"}),(0,t.jsxs)("li",{children:["Any user registered before ",v," can vote in the review"]}),(0,t.jsx)("li",{children:"The end result will be compiled into a canonical sequence"})]}),"REVIEWS"===P&&(0,t.jsx)("div",{children:(0,t.jsxs)("em",{children:[j.fromNow()," remaining"]})})]});d.reviewPostPath||console.error("No review announcement post path set");let D=(0,t.jsxs)("div",{className:n.reviewTimeline,children:[(0,t.jsx)("div",{className:n.nominationBlock,children:(0,t.jsxs)(g.default,{placement:"bottom-start",title:E,className:(0,a.default)(n.progress,{[n.activeProgress]:"NOMINATIONS"===P}),children:[(0,t.jsx)("div",{className:(0,a.default)(n.blockText,n.blockLabel),children:"Nomination Voting"}),(0,t.jsx)("div",{className:(0,a.default)(n.blockText,n.hideOnMobile),children:S.format("MMM Do")}),"NOMINATIONS"===P&&(0,t.jsx)("div",{className:n.coloredProgress,style:{width:"".concat(M(R,b,C),"%")}})]})}),(0,t.jsx)("div",{className:n.reviewBlock,children:(0,t.jsxs)(g.default,{placement:"bottom-start",title:F,className:(0,a.default)(n.progress,{[n.activeProgress]:"REVIEWS"===P}),children:[(0,t.jsx)("div",{className:(0,a.default)(n.blockText,n.blockLabel),children:"Discussion"}),(0,t.jsx)("div",{className:(0,a.default)(n.blockText,n.hideOnMobile),children:I.format("MMM Do")}),"REVIEWS"===P&&(0,t.jsx)("div",{className:n.coloredProgress,style:{width:"".concat(M(R,C,w),"%")}})]})}),(0,t.jsx)("div",{className:n.votingBlock,children:(0,t.jsxs)(g.default,{placement:"bottom-start",title:B,className:(0,a.default)(n.progress,{[n.activeProgress]:"VOTING"===P}),children:[(0,t.jsx)("div",{className:(0,a.default)(n.blockText,n.blockLabel),children:"Final Voting"}),(0,t.jsx)("div",{className:(0,a.default)(n.blockText,n.hideOnMobile),children:N.format("MMM Do")}),"VOTING"===P&&(0,t.jsx)("div",{className:n.coloredProgress,style:{width:"".concat(M(R,w,j),"%")}})]})})]}),U="/nominatePosts/".concat(v,"?").concat(u.default.stringify((0,c.allPostsParams)(v))),H=(0,t.jsxs)("div",{className:n.actionButtonRow,children:[y&&y.karma>=1e3&&(0,t.jsx)("span",{className:n.reviewProgressBar,children:(0,t.jsx)(L,{reviewYear:d.REVIEW_YEAR})}),s&&_(C)&&(0,t.jsxs)("span",{className:(0,a.default)(n.nominationTimeRemaining,n.timeRemaining),children:[(0,t.jsxs)("div",{children:[C.fromNow()," remaining to cast nomination votes"]}),(0,t.jsx)("div",{children:"(posts need two votes to proceed)"})]}),(0,t.jsx)(g.default,{className:n.buttonWrapper,title:"Look over your favorite posts from ".concat(v,", and nominate the ones that stand the tests of time."),children:(0,t.jsx)(o.Link,{to:U,className:n.actionButton,children:"Nominate Posts"})}),s&&(0,t.jsx)(g.default,{className:n.buttonWrapper,title:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"Reviews Dashboard"}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"View all posts with at least one nomination vote."}),(0,t.jsx)("li",{children:"Cast additional votes, to help prioritize posts during the Review Phase."}),(0,t.jsx)("li",{children:"Start writing reviews."})]})]}),children:(0,t.jsxs)(o.Link,{to:"/reviewVoting",className:n.actionButtonCTA,children:["Vote on ",(0,t.jsx)("span",{className:n.hideOnMobile,children:"nominated"})," posts"]})})]}),W=(0,t.jsxs)("div",{className:n.actionButtonRow,children:[y&&y.karma>=1e3&&(0,t.jsx)("span",{className:n.reviewProgressBar,children:(0,t.jsx)(k,{reviewYear:v})}),(0,t.jsx)(g.default,{title:"A detailed view of all nominated posts (sorted by Nomination Vote results)",children:(0,t.jsx)(o.Link,{to:"/reviewVoting",className:n.actionButton,children:"Advanced Review"})}),(0,t.jsx)(g.default,{title:"Find a top unreviewed post, and review it",children:(0,t.jsx)(o.Link,{to:"/quickReview/".concat(v),className:n.actionButtonCTA,children:"Quick Review"})}),_(w)&&(0,t.jsxs)("span",{className:n.timeRemaining,children:[w.fromNow()," remaining"]})]}),O=(0,t.jsxs)("div",{className:n.actionButtonRow,children:[y&&y.karma>=1e3&&(0,t.jsx)("span",{className:n.reviewProgressBar,children:(0,t.jsx)(T,{reviewYear:d.REVIEW_YEAR})}),(0,t.jsx)(g.default,{title:"A list of all reviews, with the top review-commenters ranked by total karma",children:(0,t.jsx)(o.Link,{to:"/reviews",className:n.actionButton,children:"Review Leaderboard"})}),(0,t.jsx)(o.Link,{to:"/reviewVoting",className:n.actionButtonCTA,children:"Cast Final Votes"}),_(j)&&(0,t.jsxs)("span",{className:n.timeRemaining,children:[j.fromNow()," remaining"]})]}),V=(0,t.jsx)(r.AnalyticsContext,{listContext:"frontpageReviewReviews",reviewYear:"".concat(v),children:(0,t.jsxs)(f.default,{itemsPerPage:10,terms:{view:"frontpageReviewWidget",reviewYear:v,limit:3},alwaysShowLoadMore:!0,children:["NOMINATIONS"===P&&s&&(0,d.eligibleToNominate)(y)&&H,"REVIEWS"===P&&s&&W,"VOTING"===P&&s&&(0,d.eligibleToNominate)(y)&&O]})});return(0,t.jsx)(r.AnalyticsContext,{pageSectionContext:"frontpageReviewWidget",children:(0,t.jsxs)("div",{className:x,children:[(0,t.jsxs)(p.default,{rootClassName:n.sectionTitle,titleClassName:n.reviewSectionTitle,title:(0,t.jsx)(g.default,{title:(0,t.jsx)(A,{}),placement:"bottom-start",children:(0,t.jsxs)(o.Link,{to:"/reviewVoting",children:[(0,t.jsx)("h3",{className:n.reviewtitle,children:(0,d.getReviewTitle)(v)}),(0,t.jsxs)("h1",{className:n.reviewPhaseTitle,children:["NOMINATIONS"===P&&"Nomination Voting","REVIEWS"===P&&"Discussion Phase","VOTING"===P&&"Final Voting"]})]})}),children:[s&&(0,t.jsx)(g.default,{title:(0,t.jsx)(A,{}),className:n.hideOnMobile,children:(0,t.jsx)(o.Link,{to:d.reviewPostPath||"",children:(0,t.jsx)(h.default,{showIcon:!1,label:"What is this?"})})}),!s&&(0,m.userIsAdmin)(y)&&(0,t.jsx)(o.Link,{to:"/reviewAdmin/".concat(v),children:(0,t.jsx)(h.default,{showIcon:!1,label:"Admin Dashboard"})})]}),D,s&&V]})})},{styles:e=>({sectionTitle:{alignItems:"flex-end",marginBottom:12},reviewtitle:{fontSize:"1.5rem",fontVariant:"small-caps",fontFamily:e.typography.postStyle.fontFamily,fontVariantNumeric:"normal",color:e.palette.grey[600],marginBottom:0},reviewSectionTitle:{marginTop:-24,marginBottom:-2,[e.breakpoints.down("xs")]:{marginTop:-16}},reviewPhaseTitle:{fontSize:"3rem",marginTop:-4,marginBottom:0},learnMore:{color:e.palette.lwTertiary.main},subtitle:{width:"100%",display:"flex",justifyContent:"space-between"},reviewTimeline:{...e.typography.commentStyle,display:"flex",marginBottom:6,marginTop:-8},nominationBlock:{flexGrow:1,marginRight:2,flexBasis:0},reviewBlock:{flexGrow:2,marginRight:2,flexBasis:0},votingBlock:{flexGrow:1,flexBasis:0},blockText:{color:e.palette.text.invertedBackgroundText,zIndex:1,whiteSpace:"nowrap"},blockLabel:{marginRight:10},progress:{position:"relative",marginBottom:2,padding:4,backgroundColor:e.palette.greyAlpha(.14),display:"flex",justifyContent:"space-between","&:hover":{boxShadow:"0px 0px 10px ".concat(e.palette.boxShadowColor(.1)),opacity:.9}},activeProgress:{backgroundColor:e.palette.review.activeProgress},coloredProgress:{position:"absolute",top:0,left:0,height:"100%",backgroundColor:e.palette.review.progressBar},nominationDate:{},actionButtonRow:{textAlign:"right",display:"flex",justifyContent:"flex-end",alignItems:"center"},actionButtonCTA:{backgroundColor:e.palette.primary.main,border:"solid 1px ".concat(e.palette.primary.main),color:e.palette.text.invertedBackgroundText,...R(e),textAlign:"center"},actionButton:{border:"solid 1px ".concat(e.palette.grey[400]),color:e.palette.grey[600],...R(e),textAlign:"center"},actionButtonSecondaryCTA:{backgroundColor:e.palette.background.pageActiveAreaBackground},adminButton:{border:"solid 1px ".concat(e.palette.review.adminButton),color:e.palette.review.adminButton},buttonWrapper:{flexGrow:0,flexShrink:0},hideOnMobile:{[e.breakpoints.down("sm")]:{display:"none"}},showOnMobile:{[e.breakpoints.up("md")]:{display:"none"}},timeRemaining:{...e.typography.commentStyle,fontSize:14,color:e.palette.grey[500],marginLeft:12},nominationTimeRemaining:{[e.breakpoints.down("sm")]:{display:"none"},marginRight:"auto",marginLeft:4,textAlign:"left"},reviewProgressBar:{marginRight:2,[e.breakpoints.down("xs")]:{display:"none"}}})}),E=(0,n.registerComponent)("ReviewVotingButtons",e=>{let{classes:n,post:o,dispatch:s,currentUserVote:l,costTotal:u}=e,m=(0,i.useCurrentUser)(),[p,h]=(0,j.useState)((null==l?void 0:l.score)||c.DEFAULT_QUALITATIVE_VOTE),[f,v]=(0,j.useState)(!(null==l?void 0:l.score));return((0,j.useEffect)(()=>{(null==l?void 0:l.score)&&(h(l.score),v(!1))},[null==l?void 0:l.score]),(0,d.reviewIsActive)())?(null==m?void 0:m._id)===o.userId?(0,t.jsx)("div",{className:n.root,children:"You can't vote on your own posts"}):(0,d.eligibleToNominate)(m)?(0,t.jsx)(r.AnalyticsContext,{pageElementContext:"reviewVotingButtons",children:(0,t.jsx)("div",{className:n.root,children:[1,2,3,4,5,6,7].map(e=>(0,t.jsx)(g.default,{title:(0,d.getCostData)({costTotal:u})[e].tooltip,children:(0,t.jsx)("span",{className:(0,a.default)(n.button,n[e],{[n.selectionHighlight]:p===e&&!f,[n.defaultHighlight]:p===e&&f}),onClick:t=>{t.preventDefault(),t.stopPropagation(),h(e),v(!1),s({_id:null==l?void 0:l._id,postId:o._id,score:e})},children:(0,d.getCostData)({costTotal:u})[e].value})},"".concat((0,d.getCostData)({costTotal:u})[e],"-").concat(e)))})}):(0,t.jsx)("div",{className:n.root,children:"You aren't eligible to vote"}):(0,t.jsx)("div",{className:n.root,children:"Voting period is over."})},{styles:e=>{let t=e.palette.text.reviewDownvote,n=e.isFriendlyUI?e.palette.primary.main:e.palette.text.reviewUpvote;return{root:{whiteSpace:"pre",...e.typography.commentStyle},button:{paddingTop:3,paddingBottom:3,marginRight:2,display:"inline-block",border:e.palette.border.faint,borderRadius:3,width:26,textAlign:"center",...e.typography.smallText,...e.typography.commentStyle,cursor:"pointer",background:e.palette.panelBackground.default,"&:hover":{backgroundColor:e.palette.greyAlpha(.075)}},selectionHighlight:{backgroundColor:e.palette.greyAlpha(.5),color:e.palette.text.invertedBackgroundText,borderRadius:3},defaultHighlight:{backgroundColor:e.palette.greyAlpha(.075),borderRadius:3},0:{},1:{color:t},2:{color:t},3:{color:t},4:{color:e.palette.grey[700]},5:{color:n},6:{color:n},7:{color:n}}}});e.s(["default",0,E],130657)},698609,e=>{"use strict";e.s(["default",()=>g]);var t=e.i(843476),n=e.i(514089);e.i(813868);var o=e.i(122756),i=e.i(271645),r=e.i(495314),a=e.i(159211),s=e.i(609932),l=e.i(530841),d=e.i(538794),c=e.i(130657),u=e.i(163929),m=e.i(110601),p=e.i(906095),h=e.i(239832);let g=(0,d.registerComponent)("ReviewVotingWidget",e=>{let{classes:d,post:g,showTitle:f=!0}=e,v=(0,l.useCurrentUser)(),[x]=(0,n.useMutation)((0,o.gql)("\n    mutation submitReviewVote($postId: String, $qualitativeScore: Int, $quadraticChange: Int, $newQuadraticScore: Int, $comment: String, $year: String, $dummy: Boolean) {\n      submitReviewVote(postId: $postId, qualitativeScore: $qualitativeScore, quadraticChange: $quadraticChange, comment: $comment, newQuadraticScore: $newQuadraticScore, year: $year, dummy: $dummy) {\n        ...PostsReviewVotingList\n      }\n    }\n  ")),y=(0,i.useCallback)(async e=>{let{_id:t,postId:n,score:o}=e;return await x({variables:{postId:n,qualitativeScore:o,year:r.REVIEW_YEAR.toString(),dummy:!1},refetchQueries:[{query:p.reviewVotesForPostAndUserQuery,variables:{postId:n,userId:null==v?void 0:v._id}}]})},[x,null==v?void 0:v._id]),b=!(0,r.eligibleToNominate)(v),{vote:C,loading:w}=(0,p.useCurrentUserReviewVote)(g._id,b);if(b)return null;if(w)return(0,t.jsx)(h.default,{});let k=null!==C?{_id:C._id,postId:g._id,score:C.qualitativeScore||0,type:"QUALITATIVE"}:null;return(0,t.jsx)(u.default,{children:(0,t.jsxs)("div",{className:d.root,children:[f&&(0,t.jsxs)("p",{children:["Vote on this post for the ",(0,t.jsx)(m.default,{title:(0,t.jsx)(s.ReviewOverviewTooltip,{}),children:(0,t.jsx)(a.Link,{to:"/reviewVoting",children:(0,r.getReviewNameInSitu)()})})]}),(0,t.jsx)(c.default,{post:g,dispatch:y,currentUserVote:k})]})})},{styles:e=>({root:{...e.typography.body2,...e.typography.commentStyle,textAlign:"center",color:e.palette.grey[800],padding:e.spacing.unit,"& a":{color:e.palette.primary.main}}})})},172167,e=>{"use strict";e.s(["UltraFeedCommentItem",()=>L,"UltraFeedCompressedCommentsItem",()=>N]);var t=e.i(843476),n=e.i(271645),o=e.i(343794),i=e.i(79732),r=e.i(429329),a=e.i(552275),s=e.i(601268),l=e.i(81207),d=e.i(161517),c=e.i(793631),u=e.i(222454),m=e.i(8404),p=e.i(953985),h=e.i(374655),g=e.i(716480),f=e.i(708694),v=e.i(530841),x=e.i(673991),y=e.i(113436),b=e.i(914682),C=e.i(566721),w=e.i(495314),k=e.i(110601),j=e.i(39211),S=e.i(698609);let I=(0,r.defineStyles)("UltraFeedCommentItem",e=>({root:{position:"relative",paddingTop:12,backgroundColor:e.palette.panelBackground.bannerAdTranslucentHeavy,transition:"background-color 1.0s ease-out",paddingLeft:20,paddingRight:16,[e.breakpoints.down("sm")]:{paddingLeft:20,paddingRight:20}},rootWithReadStyles:{backgroundColor:e.palette.ultraFeed.readBackground,opacity:e.palette.ultraFeed.readOpacity.root,"&:hover":{opacity:1},[e.breakpoints.down("sm")]:{backgroundColor:e.palette.ultraFeed.readBackgroundMobile,opacity:e.palette.ultraFeed.readOpacity.rootMobile}},rootWithAnimation:{backgroundColor:"".concat(e.palette.primary.main,"3b"),transition:"none"},moderatorComment:{background:e.palette.panelBackground.commentModeratorHat},mainContent:{display:"flex",flexDirection:"row",maxWidth:"100%"},compressedRoot:{backgroundColor:e.palette.panelBackground.bannerAdTranslucentHeavy,display:"flex",flexDirection:"row",[e.breakpoints.down("sm")]:{paddingLeft:20,paddingRight:20}},compressedRootWithReadStyles:{backgroundColor:e.palette.ultraFeed.readBackground,opacity:e.palette.ultraFeed.readOpacity.root,"&:hover":{opacity:1},[e.breakpoints.down("sm")]:{backgroundColor:e.palette.ultraFeed.readBackgroundMobile,opacity:e.palette.ultraFeed.readOpacity.rootMobile}},commentContentWrapper:{maxWidth:"100%",flex:1,display:"flex",flexDirection:"column",overflow:"visible"},commentHeader:{display:"flex",flexDirection:"column",overflow:"visible",position:"relative"},contentWrapper:{marginTop:12,marginBottom:12,paddingRight:16,[e.breakpoints.down("sm")]:{paddingRight:0}},contentWrapperWithReadStyles:{opacity:e.palette.ultraFeed.readOpacity.content,"&:hover":{opacity:1},[e.breakpoints.down("sm")]:{opacity:e.palette.ultraFeed.readOpacity.contentMobile}},numComments:{fontFamily:e.palette.fonts.sansSerifStack,fontSize:e.typography.body2.fontSize,display:"flex",alignItems:"center",justifyContent:"center",padding:8,opacity:.5,cursor:"pointer",color:e.palette.text.bannerAdOverlay,"&:hover":{opacity:1},[e.breakpoints.down("sm")]:{padding:6,fontSize:e.typography.ultraFeedMobileStyle.fontSize}},numCommentsWithReadStyles:{opacity:e.palette.ultraFeed.readOpacity.content,[e.breakpoints.down("sm")]:{opacity:e.palette.ultraFeed.readOpacity.contentMobile}},footer:{marginBottom:12},greyedOut:{opacity:.5,filter:"blur(0.5px)",pointerEvents:"none"},footerGreyedOut:{opacity:.5,filter:"blur(0.5px)","& > *":{pointerEvents:"none"}},branchNavContainer:{display:"flex",alignItems:"center",marginBottom:8,cursor:"pointer",color:e.palette.primary.main,fontSize:14,fontFamily:e.palette.fonts.sansSerifStack,"&:hover":{opacity:.8}},branchNavText:{fontStyle:"italic"},reviewVotingButtons:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:6,paddingBottom:6,gap:12,[e.breakpoints.down("sm")]:{flexDirection:"column",alignItems:"flex-start",paddingTop:0,gap:0,"& > div":{paddingLeft:0}}},updateVoteMessage:{...e.typography.body2,color:e.palette.grey[600],fontSize:13,flex:"1 1 auto",minWidth:220,position:"relative",bottom:4,[e.breakpoints.down("sm")]:{minWidth:"unset",bottom:0}}})),T=e=>{let{currentBranch:n,onBranchToggle:o}=e,r=(0,i.useStyles)(I),{captureEvent:a}=(0,d.useTracking)();return(0,t.jsx)("div",{className:r.branchNavContainer,onClick:()=>{a("ultraFeedBranchNavigationClicked",{currentBranch:n,switchingTo:"new"===n?"original":"new"}),null==o||o()},children:(0,t.jsx)("span",{className:r.branchNavText,children:"new"===n?"View original thread":"View your new reply"})})},N=e=>{let{numComments:n,setExpanded:r,isFirstComment:a=!1,isLastComment:s=!1,isHighlighted:l=!1,isRead:c=!1}=e,u=(0,i.useStyles)(I),{captureEvent:m}=(0,d.useTracking)();return(0,t.jsx)("div",{onClick:()=>{m("ultraFeedCompressedCommentsClicked",{numComments:n,numExpanded:Math.min(3,n),isFirstComment:a,isLastComment:s}),r()},className:(0,o.default)(u.compressedRoot,{[u.compressedRootWithReadStyles]:c}),children:(0,t.jsx)("div",{className:u.commentContentWrapper,children:(0,t.jsx)("div",{className:(0,o.default)(u.numComments,{[u.numCommentsWithReadStyles]:c}),children:(0,t.jsxs)("span",{children:["+",n," comments"]})})})})},L=e=>{var r,N,L,R,_,A,M,P,E,F,B,D,U;let H,{comment:W,metaInfo:O,onChangeDisplayStatus:V,showPostTitle:z,postInitiallyExpanded:$=!1,highlight:q=!1,isFirstComment:G=!1,isLastComment:Z=!1,onPostTitleClick:Y,settings:Q=s.DEFAULT_SETTINGS,parentAuthorName:K,onReplyIconClick:X,isHighlightAnimating:J=!1,replyConfig:ee,hasFork:et,currentBranch:en,onBranchToggle:eo,cannotReplyReason:ei,onEditSuccess:er,threadIndex:ea,commentIndex:es}=e,el=(0,i.useStyles)(I),{observe:ed,unobserve:ec,trackExpansion:eu}=(0,l.useUltraFeedObserver)(),em=(0,n.useRef)(null),{openInNewTab:ep}=(0,b.useUltraFeedContext)(),eh=(0,c.useOverflowNav)(em),eg=(0,v.useCurrentUser)(),{captureEvent:ef}=(0,d.useTracking)(),ev=null!=ei?ei:(0,x.userOwns)(eg,W)?"You cannot reply to your own comment from within the feed":null,ex=null!=(r=O.displayStatus)?r:"expanded",ey=!!O.lastViewed||!!O.lastInteracted,[eb,eC]=(0,n.useState)(0),[ew,ek]=(0,n.useState)(!1),{isSeeLessMode:ej,handleSeeLessClick:eS,handleFeedbackChange:eI}=(0,f.useSeeLess)({documentId:W._id,collectionName:"Comments",metaInfo:O}),{displaySettings:eT}=Q,eN=(0,n.useCallback)(()=>{ek(!0)},[]),eL=(0,n.useCallback)(()=>{ek(!1)},[]),eR=(0,n.useCallback)(e=>{ek(!1),er(e)},[er]);(0,n.useEffect)(()=>{let e=em.current;if(e){var t;ed(e,{documentId:W._id,documentType:"comment",postId:null!=(t=W.postId)?t:void 0,servedEventId:O.servedEventId,feedCardIndex:ea,feedCommentIndex:es})}return()=>{e&&ec(e)}},[ed,ec,W._id,W.postId,O.servedEventId,ea,es]);let e_=(0,n.useCallback)((e,t)=>{var n;eu({documentId:W._id,documentType:"comment",postId:null!=(n=W.postId)?n:void 0,level:+!!e,maxLevelReached:e,wordCount:t,servedEventId:O.servedEventId,feedCardIndex:ea,feedCommentIndex:es}),ef("ultraFeedCommentItemExpanded",{expanded:e,wordCount:t}),"collapsed"===ex&&e&&V("expanded")},[eu,W._id,W.postId,ex,V,O.servedEventId,ef,ea,es]),eA=(0,n.useMemo)(()=>{let{displaySettings:e}=Q;return{initialWordCount:"expandedToMaxInPlace"===ex?e.commentMaxWords:"hidden"===ex?10:"collapsed"===ex?e.commentCollapsedInitialWords:e.commentExpandedInitialWords,maxWordCount:e.commentMaxWords}},[Q,ex]),eM=W.moderatorHat&&(!W.hideModeratorHat||(0,x.userIsAdmin)(eg));H="expandedToMaxInPlace"===ex?eA.maxWordCount:ey?s.readCommentsInitialWords:eA.initialWordCount;let eP=(0,C.commentGetPageUrlFromIds)({postId:null==(M=W.post)?void 0:M._id,postSlug:null==(P=W.post)?void 0:P.slug,tagSlug:null==(E=W.tag)?void 0:E.slug,tagCommentType:W.tagCommentType,commentId:W._id}),eE=(0,w.shouldShowReviewVotePrompt)({reviewingForReview:W.reviewingForReview,postAuthorUserId:null!=(N=null==(F=W.post)?void 0:F.userId)?N:null,currentUserId:null==eg?void 0:eg._id,isEligibleToNominate:(0,w.eligibleToNominate)(eg),isSeeLessMode:ej,isEditing:ew,isCollapsedOrHidden:"collapsed"===ex||"hidden"===ex});return(0,t.jsx)(d.AnalyticsContext,{ultraFeedElementType:"feedComment",commentId:W._id,postId:null!=(L=W.postId)?L:void 0,ultraFeedSources:O.sources,children:(0,t.jsxs)("div",{className:(0,o.default)(el.root,{[el.rootWithAnimation]:J,[el.rootWithReadStyles]:ey,[el.moderatorComment]:eM}),children:[(0,t.jsx)("div",{className:el.mainContent,children:(0,t.jsxs)("div",{ref:em,className:el.commentContentWrapper,children:[(0,t.jsxs)("div",{className:(0,o.default)(el.commentHeader,{[el.greyedOut]:ej}),children:[et&&(0,t.jsx)(T,{currentBranch:en,onBranchToggle:eo}),(0,t.jsx)(u.default,{comment:W,metaInfo:O,setShowEdit:eN,showPostTitle:z,postInitiallyExpanded:$,onPostTitleClick:Y,parentAuthorName:K,onReplyIconClick:X,onSeeLess:eS,isSeeLessMode:ej})]}),ej&&(0,t.jsx)(g.default,{onUndo:eS,onFeedbackChange:eI}),!ej&&(0,t.jsx)("div",{className:(0,o.default)(el.contentWrapper,{[el.contentWrapperWithReadStyles]:ey&&!ej&&!ew}),children:ew?(0,t.jsx)(y.default,{comment:W,successCallback:eR,cancelCallback:eL}):(0,t.jsx)(m.default,{html:null!=(R=null==(B=W.contents)?void 0:B.html)?R:"",initialWordCount:H,maxWordCount:eA.maxWordCount,wordCount:null!=(_=null==(D=W.contents)?void 0:D.wordCount)?_:0,continueReadingUrl:eP,nofollow:(null!=(A=null==(U=W.user)?void 0:U.karma)?A:0)<a.nofollowKarmaThreshold.get(),clampOverride:eT.lineClampNumberOfLines,onExpand:e_,hideSuffix:!1,resetSignal:eb,isRead:ey})}),eE&&W.post&&(0,t.jsxs)("div",{className:el.reviewVotingButtons,children:[(0,t.jsx)("div",{className:el.updateVoteMessage,children:(0,t.jsxs)(k.default,{title:"If this review changed your mind, update your ".concat((0,w.getReviewNameInSitu)()," vote for the original post "),children:["Update your ",(0,w.getReviewNameInSitu)()," vote for this post.",(0,t.jsx)(j.default,{})]})}),(0,t.jsx)(S.default,{post:W.post,showTitle:!1})]}),!ew&&(0,t.jsx)(p.default,{document:W,collectionName:"Comments",metaInfo:O,className:(0,o.default)(el.footer,{[el.footerGreyedOut]:ej}),replyConfig:ee,cannotReplyReason:ev,isFirstCommentInThread:G})]})}),(eh.showUp||eh.showDown)&&(0,t.jsx)(h.default,{nav:eh,onCollapse:()=>{eC(e=>e+1),V("collapsed")},applyCommentStyle:!0})]})})}},611570,e=>{"use strict";e.s(["recalculateTruncation",0,(e,t,n,o)=>{if(!e.current||!t.current)return;let i=e.current.querySelector("."+n.scratch);if(!i)return;let r=i.querySelector("."+n.more);if(!r){if(!(r=e.current.querySelector("."+n.more)))return;i.appendChild(r)}let a=e.current.querySelector("."+n.placeholder);for(let t of(a&&e.current.removeChild(a),Array.from(e.current.querySelectorAll("."+n.item)).reverse()))i.insertBefore(t,i.firstChild);let s=(e=>{let t=e.getBoundingClientRect().width;for(let n=1;n<e.children.length;++n)t-=e.children[n].getBoundingClientRect().width;return t})(t.current),l=Array.from(i.querySelectorAll("."+n.item)),d=l.map(e=>e.getBoundingClientRect()),c=d[0].width,u=0,m=1;for(;m<d.length;++m){let e=c+d[m].width+10;if(e>s){c+(null==r?void 0:r.getBoundingClientRect().width)>s&&m--,u=d.length-m;break}c=e}e.current.innerHTML="";for(let t=0;t<m;++t)e.current.appendChild(l[t]);u&&(o(u,l.length,r),e.current.appendChild(r)),e.current.appendChild(i)}])},387736,e=>{"use strict";e.s(["default",()=>u]);var t=e.i(843476),n=e.i(271645),o=e.i(538794),i=e.i(77766),r=e.i(611570),a=e.i(343794),s=e.i(504280),l=e.i(636492),d=e.i(765744),c=e.i(110601);let u=(0,o.registerComponent)("TruncatedAuthorsList",e=>{let{post:o,expandContainer:u,className:m,classes:p,useMoreSuffix:h=!0,useUltraFeedModal:g=!1,showSubscribedIcon:f=!1}=e,{isAnon:v,authors:x,topCommentAuthor:y}=(0,i.usePostsUserAndCoauthors)(o),b=g?l.default:s.default,C=(0,n.useRef)(null),w=(0,n.useCallback)((e,t,n)=>{let o;o=e===t?"".concat(e," authors"):h?"+ ".concat(e," more"):"+".concat(e),n.innerHTML=n.innerHTML.replace(/(\+ \d+(?: more)?)|(\d+ authors)/,o)},[h]);return(0,n.useEffect)(()=>{if(v||0===x.length)return;let e=()=>(0,r.recalculateTruncation)(C,u,p,w);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[v,x,y,C,p,u,h,w]),v||0===x.length?(0,t.jsx)(d.default,{}):(0,t.jsxs)("div",{className:(0,a.default)(p.root,m),ref:C,children:[(0,t.jsx)("span",{className:(0,a.default)(p.item,p.placeholder),children:(0,t.jsx)(b,{user:x[0],...g&&{tooltipPlacement:"bottom-start",showSubscribedIcon:f}})}),(0,t.jsxs)("div",{className:p.scratch,"aria-hidden":"true",children:[x.map((e,n)=>(0,t.jsxs)("span",{className:p.item,children:[n>0?", ":"",(0,t.jsx)(b,{user:e,...g&&{tooltipPlacement:"bottom-start",showSubscribedIcon:f}})]},e._id)),x.length>1&&(0,t.jsx)(c.default,{title:(0,t.jsx)("div",{className:p.tooltip,children:x.slice(1).map(e=>(0,t.jsx)(b,{user:e,...g&&{simple:!0,showSubscribedIcon:f}},e._id))}),className:p.more,children:"+ 0 more"})]})]})},{styles:e=>({root:{position:"relative",overflow:"hidden",whiteSpace:"nowrap",maxWidth:"100%",fontSize:13},item:{},placeholder:{},tooltip:{display:"flex",flexDirection:"column"},more:{paddingLeft:4},scratch:{position:"absolute",opacity:0,pointerEvents:"none"}}),stylePriority:-2})},846051,694439,e=>{"use strict";e.s(["default",()=>G],846051);var t=e.i(843476),n=e.i(271645),o=e.i(161517),i=e.i(79732),r=e.i(429329),a=e.i(601268);e.s(["default",()=>W],694439);var s=e.i(182584),l=e.i(552275),d=e.i(81207),c=e.i(995669),u=e.i(343794),m=e.i(964344),p=e.i(793631),h=e.i(758623),g=e.i(671396),f=e.i(8404),v=e.i(953985),x=e.i(239832),y=e.i(374655),b=e.i(946271);e.i(813868);var C=e.i(122756),w=e.i(414942),k=e.i(263572),j=e.i(802588),S=e.i(904370),I=e.i(110601),T=e.i(192774),N=e.i(716480),L=e.i(708694),R=e.i(172167),_=e.i(432382),A=e.i(387736),M=e.i(813292),P=e.i(791440),E=e.i(914682),F=e.i(159211);let B=(0,C.gql)("\n  query LocalPostQuery($documentId: String!) {\n    post(selector: { _id: $documentId }) {\n      result {\n        ...UltraFeedPostFragment\n      }\n    }\n  }\n"),D=(0,r.defineStyles)("UltraFeedPostItem",e=>({root:{position:"relative",paddingTop:12,paddingLeft:20,paddingRight:16,fontFamily:e.palette.fonts.sansSerifStack,background:e.palette.panelBackground.bannerAdTranslucentHeavy,backdropFilter:e.palette.filters.bannerAdBlurHeavy,borderRadius:4,display:"flex",flexDirection:"row",transition:"background-color 1.0s ease-out",[e.breakpoints.down("sm")]:{paddingTop:16,paddingLeft:20,paddingRight:20}},rootWithReadStyles:{backgroundColor:e.palette.ultraFeed.readBackground,opacity:e.palette.ultraFeed.readOpacity.root,"&:hover":{opacity:1},[e.breakpoints.down("sm")]:{backgroundColor:e.palette.ultraFeed.readBackgroundMobile,borderTop:e.palette.border.itemSeparatorBottom,borderBottom:e.palette.border.itemSeparatorBottom,opacity:e.palette.ultraFeed.readOpacity.rootMobile}},rootWithAnimation:{backgroundColor:"".concat(e.palette.primary.main,"3b"),transition:"none"},mainContent:{display:"flex",flexDirection:"column",flexGrow:1,minWidth:0},greyedOut:{opacity:.5,filter:"blur(0.5px)",pointerEvents:"none"},tripleDotMenu:{position:"relative",bottom:1,color:e.palette.ultraFeed.dim,opacity:.7,"& svg":{fontSize:18,cursor:"pointer"},[e.breakpoints.down("sm")]:{position:"absolute",right:16,top:12,padding:5,marginLeft:4,zIndex:10}},header:{display:"flex",marginBottom:12,marginRight:-10,flexDirection:"row",justifyContent:"space-between",alignItems:"baseline",gap:16,[e.breakpoints.down("sm")]:{marginRight:0,position:"relative",flexDirection:"column",gap:"4px",alignItems:"stretch"}},titleContainer:{display:"flex",alignItems:"baseline",flexGrow:1,minWidth:0,[e.breakpoints.down("sm")]:{width:"100%",paddingRight:"30px"}},title:{fontFamily:e.palette.fonts.sansSerifStack,fontWeight:600,opacity:.8,lineHeight:1.15,textWrap:"balance",color:e.palette.text.bannerAdOverlay,"&:hover":{opacity:.9,textDecoration:"none",cursor:"pointer"},fontSize:"1.3rem",whiteSpace:"normal",[e.breakpoints.down("sm")]:{width:"100%",flexGrow:1,paddingRight:8}},titleIsRead:{},metaRow:{display:"flex",color:e.palette.text.dim,fontFamily:e.palette.fonts.sansSerifStack,fontSize:e.typography.body2.fontSize,alignItems:"baseline",flexShrink:0,flexWrap:"nowrap",columnGap:"8px",[e.breakpoints.down("sm")]:{flexWrap:"nowrap",alignItems:"baseline",rowGap:"6px",flexShrink:1,width:"auto"}},sourceIcon:{width:16,height:16,color:e.palette.grey[600],opacity:.7,position:"relative",top:2,flexShrink:0},metaDateContainer:{order:3,[e.breakpoints.down("sm")]:{order:2,flexShrink:0}},footer:{marginTop:12,marginBottom:12},footerGreyedOut:{opacity:.5,filter:"blur(0.5px)","& > *":{pointerEvents:"none"},"& .SeeLessButton-root":{pointerEvents:"auto !important"}},loadingContainer:{display:"flex",justifyContent:"center",padding:"20px 0"},authorsListWrapper:{flexGrow:1,minWidth:0,order:2,display:"block",whiteSpace:"nowrap",overflow:"hidden",[e.breakpoints.down("sm")]:{display:"none"}},mobileAuthorsListWrapper:{order:1,minWidth:0,display:"none",[e.breakpoints.down("sm")]:{display:"block"}},authorsList:{fontSize:"inherit",color:"inherit",fontFamily:"inherit"},newCommentContainer:{marginTop:16,marginLeft:-16,marginRight:-16,paddingLeft:16,paddingRight:16,borderTop:"1px solid ".concat(e.palette.greyAlpha(.1)),paddingTop:8},sourceIconsContainer:{display:"flex",alignItems:"center",order:1,gap:"4px",[e.breakpoints.down("sm")]:{order:3,flexShrink:0}},desktopTripleDotWrapper:{display:"block",order:4,[e.breakpoints.down("sm")]:{display:"none"}},mobileTripleDotWrapper:{display:"none",[e.breakpoints.down("sm")]:{display:"block",position:"absolute",right:-10,top:0,height:"auto",width:"auto"}},contentWithReadStyles:{opacity:e.palette.ultraFeed.readOpacity.content,"&:hover":{opacity:1},[e.breakpoints.down("sm")]:{opacity:e.palette.ultraFeed.readOpacity.contentMobile}}})),U=[{source:"bookmarks",icon:k.default,tooltip:"From your bookmarks"},{source:"subscriptionsPosts",icon:S.default,tooltip:"From users you follow"},{source:"recombee-lesswrong-ultrafeed",icon:T.SparkleIcon,tooltip:"Recommended for you"},{source:"hacker-news",icon:j.default,tooltip:"Latest posts"}],H=e=>{let{post:r,sources:a,handleSeeLess:l,isSeeLessMode:d,postMetaInfo:c}=e,m=(0,i.useStyles)(D),p=(0,n.useRef)(null),{feedType:f}=(0,E.useUltraFeedContext)(),v="following"===f,x=c.sources.includes("subscriptionsPosts"),y=U.filter(e=>{let{source:t}=e;return a.includes(t)}).map(e=>{let{source:t,icon:n,tooltip:o}=e;return{icon:n,tooltip:o,key:t}}),{isLinkpost:b,linkpostDomain:C}=(0,s.detectLinkpost)(r);return(0,t.jsxs)("div",{className:m.header,children:[(0,t.jsx)("div",{className:m.titleContainer,children:(0,t.jsx)(F.Link,{to:(0,s.postGetPageUrl)(r),className:m.title,children:r.title})}),(0,t.jsxs)("div",{className:m.metaRow,ref:p,children:[(0,t.jsx)("div",{className:m.mobileAuthorsListWrapper,children:(0,t.jsx)(A.default,{post:r,useMoreSuffix:!1,expandContainer:p,className:m.authorsList,useUltraFeedModal:!0,showSubscribedIcon:v&&x})}),(0,t.jsx)("div",{className:m.authorsListWrapper,children:(0,t.jsx)(_.default,{post:r,abbreviateIfLong:!0,tooltipPlacement:"top",compact:!0,useUltraFeedModal:!0,showSubscribedIcon:v&&x})}),r.postedAt&&(0,t.jsx)("span",{className:m.metaDateContainer,children:(0,t.jsx)(h.default,{date:r.postedAt})}),(0,t.jsxs)("div",{className:m.sourceIconsContainer,children:[y.map(e=>(0,t.jsx)(I.default,{title:e.tooltip,placement:"top",children:(0,t.jsx)("span",{children:(0,t.jsx)(e.icon,{className:m.sourceIcon})})},e.key)),b&&(0,t.jsx)(I.default,{title:"Linkpost from ".concat(C),placement:"top",children:(0,t.jsx)("a",{href:(0,s.postGetLink)(r),target:(0,s.postGetLinkTarget)(r),onClick:e=>e.stopPropagation(),children:(0,t.jsx)(M.default,{icon:"Link",className:m.sourceIcon})})})]}),(0,t.jsx)("div",{className:m.desktopTripleDotWrapper,children:(0,t.jsx)(o.AnalyticsContext,{pageElementContext:"tripleDotMenu",children:(0,t.jsx)(g.default,{post:r,vertical:!0,autoPlace:!0,includeBookmark:!0,onSeeLess:l,isSeeLessMode:d,ActionsComponent:w.default,postMetaInfo:c,className:(0,u.default)(m.tripleDotMenu,{[m.greyedOut]:d})})})})]})]})},W=e=>{var r,h,C,k,j,S,I,T,_;let{post:A,postMetaInfo:M,index:F,settings:U=a.DEFAULT_SETTINGS,isHighlightAnimating:W=!1}=e,O=(0,i.useStyles)(D),{observe:V,trackExpansion:z}=(0,d.useUltraFeedObserver)(),$=(0,n.useRef)(null),{openInNewTab:q,feedType:G}=(0,E.useUltraFeedContext)(),Z=(0,p.useOverflowNav)($),{captureEvent:Y}=(0,o.useTracking)(),{recordPostView:Q}=(0,c.useRecordPostView)(A),[K,X]=(0,n.useState)(!1),{displaySettings:J}=U,ee=J.postInitialWords>m.highlightMaxChars/5,[et,en]=(0,n.useState)(ee),[eo,ei]=(0,n.useState)(0),[er,ea]=(0,n.useState)(!1),[es,el]=(0,n.useState)(!1),[ed,ec]=(0,n.useState)(null),[eu,em]=(0,n.useState)(null),{isSeeLessMode:ep,handleSeeLessClick:eh,handleFeedbackChange:eg}=(0,L.useSeeLess)({documentId:A._id,collectionName:"Posts",metaInfo:M}),{data:ef,loading:ev}=(0,b.useQuery)(B,{skip:!et,fetchPolicy:"cache-first",variables:{documentId:A._id}}),ex=null==ef||null==(k=ef.post)?void 0:k.result;(0,n.useEffect)(()=>{let e=$.current;e&&V(e,{documentId:A._id,documentType:"post",servedEventId:M.servedEventId,feedCardIndex:F})},[V,A._id,M.servedEventId,F]);let ey=(0,n.useCallback)((e,t)=>{ea(e),!e||et||ex||en(!0),z({documentId:A._id,documentType:"post",level:+!!e,maxLevelReached:e,wordCount:t,servedEventId:M.servedEventId,feedCardIndex:F}),Y("ultraFeedPostItemExpanded",{expanded:e,wordCount:t}),K||(Q({post:A,extraEventProperties:{type:"ultraFeedExpansion"}}),X(!0))},[z,A,Y,Q,K,et,ex,M.servedEventId,F]),eb=(0,n.useCallback)(()=>{el(!es)},[es]),eC=(0,n.useCallback)(e=>{el(!1),ec(e),em({displayStatus:"expanded",sources:[],descendentCount:0,directDescendentCount:0,highlight:!1,lastServed:new Date,lastViewed:null,lastInteracted:new Date,postedAt:e.postedAt?new Date(e.postedAt):new Date})},[]),ew=(0,n.useCallback)(()=>{el(!1)},[]),ek=(0,n.useCallback)(e=>{ed&&e._id===ed._id&&ec({...e,post:A})},[ed,A]),ej=(0,n.useMemo)(()=>({isReplying:es,onReplyClick:eb,onReplySubmit:eC,onReplyCancel:ew}),[es,eb,eC,ew]),{isRead:eS}=M,eI=A.shortform?'This is a special post for quick takes (aka "shortform"). Only the owner can create top-level comments.':void 0,eT=null!=(r=null!=(h=null==ex||null==(j=ex.contents)?void 0:j.html)?h:null==(S=A.contents)?void 0:S.htmlHighlight)?r:eI,eN=A.shortform?0:null==(I=A.contents)?void 0:I.wordCount,eL=(0,n.useMemo)(()=>({initialWordCount:J.postInitialWords,maxWordCount:J.postMaxWords}),[J.postInitialWords,J.postMaxWords]);return eT?(0,t.jsx)(P.RecombeeRecommendationsContextWrapper,{postId:A._id,recommId:null==(T=M.recommInfo)?void 0:T.recommId,children:(0,t.jsx)(o.AnalyticsContext,{ultraFeedElementType:"feedPost",postId:A._id,feedCardIndex:F,ultraFeedSources:M.sources,children:(0,t.jsxs)("div",{className:(0,u.default)(O.root,{[O.rootWithAnimation]:W,[O.rootWithReadStyles]:"following"===G&&eS}),children:[(0,t.jsxs)("div",{ref:$,className:(0,u.default)(O.mainContent,{[O.contentWithReadStyles]:"following"===G&&eS}),children:[(0,t.jsx)("div",{className:O.mobileTripleDotWrapper,children:(0,t.jsx)(o.AnalyticsContext,{pageElementContext:"tripleDotMenu",children:(0,t.jsx)(g.default,{post:A,vertical:!0,autoPlace:!0,onSeeLess:eh,isSeeLessMode:ep,ActionsComponent:w.default,postMetaInfo:M,includeBookmark:!0,className:(0,u.default)(O.tripleDotMenu,{[O.greyedOut]:ep})})})}),(0,t.jsx)("div",{className:(0,u.default)({[O.greyedOut]:ep}),children:(0,t.jsx)(H,{post:A,sources:M.sources,isSeeLessMode:ep,handleSeeLess:eh,postMetaInfo:M})}),ep&&(0,t.jsx)(N.default,{onUndo:eh,onFeedbackChange:eg}),!ep&&(0,t.jsx)(f.default,{html:eT,initialWordCount:eL.initialWordCount,maxWordCount:eL.maxWordCount,wordCount:null!=eN?eN:200,continueReadingUrl:(0,s.postGetPageUrl)(A),nofollow:(null!=(C=null==(_=A.user)?void 0:_.karma)?C:0)<l.nofollowKarmaThreshold.get(),onExpand:ey,hideSuffix:ev,resetSignal:eo}),ev&&eT&&!ep&&(0,t.jsx)("div",{className:O.loadingContainer,children:(0,t.jsx)(x.default,{})}),(0,t.jsx)(v.default,{document:A,collectionName:"Posts",metaInfo:M,className:(0,u.default)(O.footer,{[O.footerGreyedOut]:ep}),replyConfig:ej}),ed&&eu&&!ep&&(0,t.jsx)("div",{className:O.newCommentContainer,children:(0,t.jsx)(R.UltraFeedCommentItem,{comment:ed,metaInfo:eu,onChangeDisplayStatus:()=>{},showPostTitle:!1,highlight:!1,isFirstComment:!0,isLastComment:!0,settings:U,parentAuthorName:null,isHighlightAnimating:!1,replyConfig:{isReplying:!1,onReplyClick:()=>{},onReplySubmit:()=>{},onReplyCancel:()=>{}},cannotReplyReason:"You cannot reply to your own comment within the feed",onEditSuccess:ek,threadIndex:F,commentIndex:0})})]}),(Z.showUp||Z.showDown)&&(0,t.jsx)(y.default,{nav:Z,onCollapse:er?()=>{ei(e=>e+1),ea(!1)}:void 0})]})})}):null},O=(0,r.defineStyles)("UltraFeedThreadCommentsList",e=>({commentItem:{position:"relative",borderBottom:e.palette.border.itemSeparatorBottom,"&:last-child":{borderBottom:"none"}},readItem:{[e.breakpoints.down("sm")]:{borderLeft:e.palette.border.readUltraFeedBorder,borderRight:e.palette.border.readUltraFeedBorder}},readWithReadNext:{borderBottom:e.palette.border.itemSeparatorBottom},firstItemRead:{[e.breakpoints.down("sm")]:{"&:first-child":{borderTop:e.palette.border.readUltraFeedBorder}}}})),V=e=>{let{compressedItems:n,commentMetaInfos:o,commentDisplayStatuses:r,highlightStatuses:a,commentAuthorsMap:s,animatingCommentIds:l,visibleComments:d,newReplies:c,replyingToCommentId:m,postInitiallyExpanded:p,settings:h,threadIndex:g,focusedCommentId:f,onSetDisplayStatus:v,onPostExpansion:x,onParentHighlight:y,onReplyClick:b,onReplySubmit:C,onReplyCancel:w,getNavigationProps:k,onBranchToggle:j,onNewReplyEdit:S}=e,I=(0,i.useStyles)(O),T=e=>{let t=null==o?void 0:o[e];return!!(null==t?void 0:t.lastViewed)||!!(null==t?void 0:t.lastInteracted)},N=e=>{if(e>=n.length-1)return!1;let t=n[e+1];return"placeholder"in t?t.hiddenComments.every(e=>T(e._id)):T(t._id)};return(0,t.jsx)(t.Fragment,{children:n.map((e,i)=>{if("placeholder"in e){let o=e.hiddenComments.length,r=e.hiddenComments.some(e=>a[e._id]),s=e.hiddenComments.every(e=>T(e._id)),l=N(i),d=s&&l;return(0,t.jsx)("div",{className:(0,u.default)(I.commentItem,{[I.readItem]:s,[I.readWithReadNext]:d,[I.firstItemRead]:0===i&&s}),children:(0,t.jsx)(R.UltraFeedCompressedCommentsItem,{numComments:o,setExpanded:()=>{e.hiddenComments.slice(-5).forEach(e=>{v(e._id,"expandedToMaxInPlace")})},isFirstComment:0===i,isLastComment:i===n.length-1,isHighlighted:r,isRead:s})},"placeholder-".concat(i))}{var L,_,A;let M=e._id,P=0===i,E=i===n.length-1,F=e.parentCommentId?s[e.parentCommentId]:null,B=l.has(M),D=k(M,d),U=Object.values(c).some(e=>e._id===M),H=T(M),W=N(i),O=H&&W,V=f?M===f:P&&!p;return(0,t.jsx)("div",{className:(0,u.default)(I.commentItem,{[I.readItem]:H,[I.readWithReadNext]:O,[I.firstItemRead]:0===i&&H}),children:(0,t.jsx)(R.UltraFeedCommentItem,{comment:e,metaInfo:{sources:[],descendentCount:0,directDescendentCount:0,lastViewed:void 0,lastInteracted:void 0,servedEventId:"",highlight:!1,...null==o?void 0:o[M],displayStatus:null!=(L=null!=(_=r[M])?_:null==o||null==(A=o[M])?void 0:A.displayStatus)?L:"collapsed"},onPostTitleClick:x,onChangeDisplayStatus:e=>v(M,e),showPostTitle:V,postInitiallyExpanded:p,highlight:a[M]||!1,isFirstComment:P,isLastComment:E,settings:h,parentAuthorName:F,onReplyIconClick:()=>y(M),isHighlightAnimating:B,replyConfig:{isReplying:m===M,onReplyClick:()=>b(M),onReplySubmit:e=>C(M,e),onReplyCancel:w},hasFork:D.showNav,currentBranch:D.currentBranch,threadIndex:g,commentIndex:i,onBranchToggle:()=>D.forkParentId&&j(D.forkParentId),onEditSuccess:U?S:()=>{}})},M)}})})};var z=e.i(820010);let $=(0,C.gql)("\n  query UltraFeedThreadItem($documentId: String) {\n    post(selector: { _id: $documentId }) {\n      result {\n        ...PostsListWithVotes\n      }\n    }\n  }\n"),q=(0,r.defineStyles)("UltraFeedThreadItem",e=>({postContainer:{position:"relative",borderBottom:e.palette.border.itemSeparatorBottom},commentsRoot:{borderRadius:4,backdropFilter:e.palette.filters.bannerAdBlurHeavy},commentsContainer:{display:"flex",flexDirection:"column",gap:"16px"},commentsList:{display:"flex",flexDirection:"column"},postsLoadingContainer:{backgroundColor:e.palette.panelBackground.default,position:"relative",display:"flex",justifyContent:"center",alignItems:"center",height:200,"&::after":{content:'""',position:"absolute",bottom:0,left:16,right:16,height:2,backgroundColor:e.palette.greyAlpha(.05)}}})),G=e=>{var r,s,l,d,c,u,m,p,h;let{thread:g,index:f,settings:v=a.DEFAULT_SETTINGS,startReplyingTo:y,forceParentPostCollapsed:C=!1,focusedCommentId:w}=e,k=(0,i.useStyles)(q),{comments:j,commentMetaInfos:S,postSources:I,post:T,postMetaInfo:N}=g,{captureEvent:L}=(0,o.useTracking)(),R=null!=(r=null==S||null==(c=S[null==(u=j[0])?void 0:u._id])?void 0:c.isParentPostRead)&&r,_=j[0].shortform,A=!C&&!R&&!_,[M,P]=(0,n.useState)(A),[E,F]=(0,n.useState)(new Set),[B,D]=(0,n.useState)(!1),[U,H]=(0,n.useState)({}),[O,G]=(0,n.useState)({}),[Z,Y]=(0,n.useState)(null!=y?y:null),Q=!T&&M&&j[0].postId,{loading:K,data:X}=(0,b.useQuery)($,{variables:{documentId:null!=(s=j[0].postId)?s:void 0},skip:!Q}),J=null!=T?T:null==X||null==(m=X.post)?void 0:m.result,ee=null!=N?N:{sources:null!=(l=null!=I?I:null==S||null==(p=S[j[0]._id])?void 0:p.sources)?l:[],displayStatus:"expanded",servedEventId:null!=(d=null==S||null==(h=S[j[0]._id])?void 0:h.servedEventId)?d:"",highlight:!R,isRead:!!R},et={...v,displaySettings:{...v.displaySettings,postInitialWords:50}},en=((e,t,n)=>{let o={};for(let[r,a]of Object.entries(null!=t?t:{})){var i;let t=e.length>0&&r===e[0]._id,s=!n&&t&&"hidden"===a.displayStatus;o[r]=s?"collapsed":null!=(i=a.displayStatus)?i:"collapsed"}return o})(j,S,w),eo=((e,t)=>{let n={};for(let i of Object.keys(e)){var o;let e=null==t?void 0:t[i];n[i]=null!=(o=null==e?void 0:e.highlight)&&o}return n})(en,S),[ei,er]=(0,n.useState)(en),[ea]=(0,n.useState)(eo);(0,n.useEffect)(()=>{w&&er(()=>{let e={};for(let t of j)e[t._id]=t._id===w?"expanded":"hidden";return e})},[j,w]);let es=(0,n.useMemo)(()=>{let e={};return j.forEach(t=>{var n;e[t._id]=null!=(n=(0,z.userGetDisplayName)(t.user))?n:null}),e},[j]),el=(0,n.useCallback)((e,t)=>{er(n=>({...n,[e]:t}))},[]),ed=(0,n.useMemo)(()=>{let e=[];for(let t of j){e.push(t);let n=U[t._id];if(n&&"original"!==O[t._id]){e.push(n);break}}return e},[j,U,O]),ec=(0,n.useMemo)(()=>ed.filter(e=>"hidden"!==ei[e._id]),[ed,ei]),eu=(0,n.useMemo)(()=>((e,t)=>{let n=[];if(0===t.length)return n;t.length>0&&n.push(t[0]);let o=[],i=()=>{o.length>=2?n.push({placeholder:!0,hiddenComments:[...o]}):o.forEach(e=>n.push(e)),o=[]};for(let r=1;r<t.length;r++){let a=t[r],s=e[a._id]||"collapsed";"collapsed"===s||"hidden"===s?o.push(a):(i(),n.push(a))}return i(),n})(ei,ec),[ec,ei]),em=(0,n.useCallback)(e=>{let t=j.find(t=>t._id===e);if(t&&!t.parentCommentId&&M)w||(D(!0),setTimeout(()=>{D(!1)},100)),L("ultraFeedReplyIconClicked",{commentId:e,parentType:"post",postId:t.postId});else if(null==t?void 0:t.parentCommentId){let n=t.parentCommentId,o=ei[n],i="collapsed"===o||"hidden"===o;i&&el(n,"expanded"),w||setTimeout(()=>{F(e=>new Set(e).add(n)),setTimeout(()=>{F(e=>{let t=new Set(e);return t.delete(n),t})},100)},300*!!i),L("ultraFeedReplyIconClicked",{commentId:e,parentCommentId:n,wasCollapsed:i})}},[j,ei,el,L,M,w]),ep=(0,n.useCallback)(e=>{var t;let n=null==(t=Object.entries(U).find(t=>{let[n,o]=t;return o._id===e._id}))?void 0:t[0],o={...e,post:j[0].post};n&&H(e=>({...e,[n]:o}))},[U,j]),eh=(0,n.useCallback)(()=>{L("ultraFeedThreadPostExpanded",{threadId:g._id,postId:j[0].postId}),P(!0)},[g._id,j,L]);return(0,n.useMemo)(()=>j.some(e=>{let t=null==S?void 0:S[e._id],n=!((null==t?void 0:t.lastViewed)||(null==t?void 0:t.lastInteracted)),o=!!(null==t?void 0:t.fromSubscribedUser);return n&&o}),[j,S]),(0,t.jsxs)(o.AnalyticsContext,{pageParentElementContext:"ultraFeedThread",ultraFeedCardId:g._id,feedCardIndex:f,children:[M&&!J&&K&&(0,t.jsx)("div",{className:k.postsLoadingContainer,children:(0,t.jsx)(x.default,{})}),M&&J&&(0,t.jsx)("div",{className:k.postContainer,children:(0,t.jsx)(W,{post:J,index:-1,postMetaInfo:ee,settings:et,isHighlightAnimating:B})}),(0,t.jsx)("div",{className:k.commentsRoot,children:j.length>0&&(0,t.jsx)("div",{className:k.commentsContainer,children:(0,t.jsx)("div",{className:k.commentsList,children:(0,t.jsx)(V,{compressedItems:eu,commentMetaInfos:S,commentDisplayStatuses:ei,highlightStatuses:ea,commentAuthorsMap:es,animatingCommentIds:E,visibleComments:ec,newReplies:U,replyingToCommentId:Z,postInitiallyExpanded:A,settings:v,threadIndex:f,onSetDisplayStatus:el,onPostExpansion:eh,onParentHighlight:em,onReplyClick:e=>{Y(e)},onReplySubmit:(e,t)=>{H(n=>({...n,[e]:t})),G(t=>({...t,[e]:"new"})),Y(null),er(e=>({...e,[t._id]:"expanded"}))},onReplyCancel:()=>Y(null),getNavigationProps:(e,t)=>{var n;let o=null==(n=Object.entries(U).find(t=>{let[n,o]=t;return o._id===e}))?void 0:n[0];if(o){let e=j.findIndex(e=>e._id===o);return{showNav:e>=0&&e<j.length-1,forkParentId:o,currentBranch:"new"}}let i=t.findIndex(t=>t._id===e);if(i>0){let e=t[i-1];if(U[e._id]&&"original"===O[e._id])return{showNav:!0,forkParentId:e._id,currentBranch:"original"}}return{showNav:!1,forkParentId:null,currentBranch:"new"}},onBranchToggle:e=>{G(t=>({...t,[e]:"new"===t[e]?"original":"new"}))},onNewReplyEdit:ep})})})})]})}},160622,e=>{"use strict";e.s(["default",()=>y]);var t=e.i(843476),n=e.i(271645),o=e.i(79732),i=e.i(429329),r=e.i(946271);e.i(813868);var a=e.i(122756),s=e.i(239832),l=e.i(694439),d=e.i(846051),c=e.i(343794),u=e.i(995994),m=e.i(846552);let p=(0,a.gql)("\n  query UserContentFeedPosts($userId: String!, $limit: Int!, $sortedBy: String!) {\n    posts(selector: { userPosts: { userId: $userId, sortedBy: $sortedBy } }, limit: $limit, enableTotal: true) {\n      results {\n        ...PostsListWithVotes\n      }\n      totalCount\n    }\n  }\n"),h=(0,a.gql)("\n  query UserContentFeedComments($userId: String!, $limit: Int!, $sortBy: String!) {\n    comments(selector: { profileComments: { userId: $userId, sortBy: $sortBy } }, limit: $limit, enableTotal: true) {\n      results {\n        ...CommentsList\n        post {\n          ...PostsListWithVotes\n        }\n        topLevelComment {\n          ...CommentsListWithTopLevelComment\n        }\n      }\n      totalCount\n    }\n  }\n"),g=(0,a.gql)("\n  query UserContentFeedThread($topLevelCommentId: String!, $limit: Int) {\n    comments(selector: { repliesToCommentThreadIncludingRoot: { topLevelCommentId: $topLevelCommentId } }, limit: $limit) {\n      results {\n        ...UltraFeedComment\n      }\n    }\n  }\n"),f=(0,i.defineStyles)("UserContentFeed",e=>({root:{display:"flex",flexDirection:"column",flex:1},sortToggle:{display:"flex",width:"100%",marginBottom:8},sortButton:{display:"flex",justifyContent:"center",alignItems:"center",fontFamily:e.typography.fontFamily,fontSize:14,lineHeight:"20px",fontWeight:600,padding:"12px 0",width:"50%",cursor:"pointer",position:"relative",transition:"background-color 0.2s",backgroundColor:e.palette.panelBackground.bannerAdTranslucentHeavy,"&:hover":{backgroundColor:e.palette.grey[100]}},sortButtonInactive:{color:e.palette.grey[500]},sortButtonActive:{color:e.palette.text.primary},tabLabel:{position:"relative",display:"inline-flex",flexDirection:"column"},tabUnderline:{position:"absolute",bottom:-12,left:0,right:0,height:3,backgroundColor:e.palette.primary.main,borderRadius:"3px 3px 0 0"},feedContent:{display:"flex",flexDirection:"column",marginLeft:8,marginRight:8,gap:8},loading:{padding:40,display:"flex",flex:1,justifyContent:"center",alignItems:"center"}}));function v(e){var o,i;let{comment:a,index:s,feedSettings:l}=e,c=null!=(o=a.topLevelCommentId)?o:a._id,{data:u}=(0,r.useQuery)(g,{variables:{topLevelCommentId:c,limit:200},skip:!c,notifyOnNetworkStatusChange:!1,fetchPolicy:"cache-first"}),m=(0,n.useMemo)(()=>{var e,t;let n=null!=(e=null==u||null==(t=u.comments)?void 0:t.results)?e:[a],o=[],i={};n.forEach(e=>{i[e._id]=e});let r=a,s=new Set;for(;r&&!s.has(r._id)&&(s.add(r._id),o.unshift(r),r.parentCommentId);){;r=i[r.parentCommentId]}return o},[null==u||null==(i=u.comments)?void 0:i.results,a]),p=(0,n.useMemo)(()=>{let e=new Date;return Object.fromEntries(m.map(t=>{var n,o;return[t._id,{sources:["subscriptionsComments"],displayStatus:t._id===a._id?"expanded":"hidden",lastServed:e,lastViewed:null,lastInteracted:null,postedAt:new Date(t.postedAt),descendentCount:null!=(n=t.descendentCount)?n:0,directDescendentCount:null!=(o=t.directChildrenCount)?o:0}]}))},[m,a._id]),h=(0,n.useMemo)(()=>({_id:"thread-".concat(a._id),comments:m,commentMetaInfos:p}),[a._id,m,p]);return(0,t.jsx)(d.default,{thread:h,index:s,settings:l,forceParentPostCollapsed:!0,focusedCommentId:a._id})}let x=e=>{let{item:n,index:o,feedSettings:i}=e;if("post"===n.type){let e=n.data;return(0,t.jsx)(l.default,{post:e,postMetaInfo:{sources:["subscriptionsPosts"],displayStatus:"expanded",highlight:!1},index:o,settings:i})}{let e=n.data;return(0,t.jsx)(v,{comment:e,index:o,feedSettings:i})}},y=e=>{let{userId:i,initialLimit:r=10,scrollContainerRef:a}=e,l=(0,o.useStyles)(f),[d,g]=(0,n.useState)("recent"),[v,y]=(0,n.useState)(!1),b=(0,n.useRef)(null),C="recent"===d?"new":"top",w="recent"===d?"new":"top",{data:k,loading:j,loadMoreProps:S}=(0,m.useQueryWithLoadMore)(p,{variables:{userId:i,limit:r,sortedBy:C},skip:!i,fetchPolicy:"cache-and-network",itemsPerPage:10}),{data:I,loading:T,loadMoreProps:N}=(0,m.useQueryWithLoadMore)(h,{variables:{userId:i,limit:r,sortBy:w},skip:!i,fetchPolicy:"cache-and-network",itemsPerPage:10}),L=(0,n.useMemo)(()=>{var e,t,n,o;let i=[],r=null!=(e=null==k||null==(n=k.posts)?void 0:n.results)?e:[],a=null!=(t=null==I||null==(o=I.comments)?void 0:o.results)?t:[];return r.forEach(e=>{(null==e?void 0:e.postedAt)&&i.push({type:"post",data:e,postedAt:new Date(e.postedAt)})}),a.forEach(e=>{(null==e?void 0:e.postedAt)&&i.push({type:"comment",data:e,postedAt:new Date(e.postedAt)})}),"recent"===d?i.sort((e,t)=>t.postedAt.getTime()-e.postedAt.getTime()):i.sort((e,t)=>{var n,o;let i=null!=(n=e.data.baseScore)?n:0;return(null!=(o=t.data.baseScore)?o:0)-i}),i},[k,I,d]),R=!S.hidden,_=!N.hidden,A=R||_,{settings:M}=(0,u.useUltraFeedSettings)(),P=(0,n.useCallback)(async()=>{if(!v&&A){y(!0);try{let e=[];R&&e.push(S.loadMore()),_&&e.push(N.loadMore()),await Promise.all(e)}finally{y(!1)}}},[v,A,R,_,S,N]);(0,n.useEffect)(()=>{var e;if(!b.current)return;let t=null!=(e=null==a?void 0:a.current)?e:null,n=b.current,o=new IntersectionObserver(e=>{let[t]=e;t.isIntersecting&&!v&&A&&P()},{root:t,rootMargin:"200px",threshold:0});return o.observe(n),()=>o.disconnect()},[a,v,P,A]);let E=(0,n.useCallback)(e=>{e!==d&&g(e)},[d]),F=j||T;return F||0!==L.length?(0,t.jsxs)("div",{className:l.root,children:[(0,t.jsxs)("div",{className:l.sortToggle,children:[(0,t.jsx)("div",{onClick:e=>{e.preventDefault(),E("recent")},className:(0,c.default)(l.sortButton,"recent"===d?l.sortButtonActive:l.sortButtonInactive),children:(0,t.jsxs)("div",{className:l.tabLabel,children:["Recent","recent"===d&&(0,t.jsx)("div",{className:l.tabUnderline})]})}),(0,t.jsx)("div",{onClick:e=>{e.preventDefault(),E("top")},className:(0,c.default)(l.sortButton,"top"===d?l.sortButtonActive:l.sortButtonInactive),children:(0,t.jsxs)("div",{className:l.tabLabel,children:["Top","top"===d&&(0,t.jsx)("div",{className:l.tabUnderline})]})})]}),F&&(0,t.jsx)("div",{className:l.loading,children:(0,t.jsx)(s.default,{})}),!F&&(0,t.jsxs)("div",{className:l.feedContent,children:[L.map((e,n)=>(0,t.jsx)(x,{item:e,index:n,feedSettings:M},"post"===e.type?"post-".concat(e.data._id):"comment-".concat(e.data._id))),A&&(0,t.jsx)("div",{ref:b,style:{height:1}})]})]}):null}},452689,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(644169),i=e.i(725788),r=e.i(937636),a=e.i(148461),s=e.i(865962),l=e.i(293958);e.s(["default",0,e=>{let{user:d,currentUser:c,children:u,from:m,includeModerators:p,templateQueries:h,embedConversation:g,openInNewTab:f}=e,v=(0,r.useNavigate)(),{openDialog:x}=(0,i.useDialog)(),{conversation:y,initiateConversation:b}=(0,a.useInitiateConversation)({includeModerators:p}),C=(0,n.useRef)(!1),w=(0,n.useCallback)(()=>{let e=[];return h&&e.push(o.default.stringify(h)),m&&e.push("from=".concat(m)),e.length>0?{search:"?".concat(e.join("&"))}:{}},[m,h]);(0,n.useEffect)(()=>{if(y&&C.current)if(C.current=!1,g)g(y._id,h);else{let e=w();v({pathname:"/inbox",search:"?conversation=".concat(y._id),...e},{openInNewTab:f})}},[y,g,w,v,h,f]);let k=c?e=>{C.current=!0,b([d._id]),e.stopPropagation()}:()=>x({name:"LoginPopup",contents:e=>{let{onClose:n}=e;return(0,t.jsx)(l.default,{onClose:n})}});return c&&!(0,s.userCanStartConversations)(c)?null:(null==c?void 0:c._id)===d._id?(0,t.jsx)("div",{children:u}):(0,t.jsx)("div",{onClick:k,children:u})}])},768053,e=>{"use strict";var t=e.i(843476),n=e.i(271645),o=e.i(161517),i=e.i(343794),r=e.i(79732),a=e.i(429329),s=e.i(374132),l=e.i(65189),d=e.i(109665),c=e.i(530841),u=e.i(452689),m=e.i(725788),p=e.i(295411),h=e.i(820010),g=e.i(182584),f=e.i(673991),v=e.i(773736),x=e.i(495791);let y=(0,a.defineStyles)("UserActions",e=>({root:{minWidth:220,maxWidth:"calc(100vw - 100px)"}})),b=e=>{let{user:n,closeMenu:o,from:i="userActions"}=e,a=(0,c.useCurrentUser)(),s=(0,r.useStyles)(y),{openDialog:b}=(0,m.useDialog)(),C=(null==a?void 0:a._id)===n._id,w=a&&(0,h.userCanPost)(a)&&(0,v.dialoguesEnabled)()&&(0,f.userOverNKarmaOrApproved)(g.MINIMUM_COAUTHOR_KARMA)(a);return!a||C?null:(0,t.jsxs)(l.default,{className:s.root,children:[(0,t.jsx)(x.default,{document:n,title:"Notify on posts",subscriptionType:"newPosts"}),(0,t.jsx)(x.default,{document:n,title:"Notify on comments",subscriptionType:"newUserComments"}),(0,t.jsx)(u.default,{user:n,currentUser:a,from:i,children:(0,t.jsx)(d.default,{title:"Message"})}),w&&(0,t.jsx)(d.default,{title:"Dialogue",onClick:()=>{o(),b({name:"NewDialogueDialog",contents:e=>{let{onClose:o}=e;return(0,t.jsx)(p.default,{onClose:o,initialParticipantIds:[n._id]})}})}})]})};var C=e.i(105736);let w=(0,a.defineStyles)("UserActionsButton",e=>({root:{cursor:"pointer"},button:{display:"flex",alignItems:"center",justifyContent:"center",height:32,padding:"0 8px",borderRadius:4,backgroundColor:e.palette.grey[200],cursor:"pointer",transition:"all 0.2s ease",fontSize:18,fontWeight:300,color:e.palette.grey[500],fontFamily:e.palette.fonts.sansSerifStack,"&:hover":{backgroundColor:e.palette.grey[300],color:e.palette.grey[900]}},popper:{position:"relative",zIndex:e.zIndexes.postItemMenu}}));e.s(["default",0,e=>{let a,{user:l,placement:d="bottom-start",popperGap:c,flip:u=!0,className:m,from:p="userActions",ActionsComponent:h}=e,g=(0,r.useStyles)(w),f=(0,n.useRef)(null),[v,x]=(0,n.useState)(!1),{captureEvent:y}=(0,o.useTracking)();if(c)switch(d){case"right-start":a={marginLeft:c};break;case"left-start":a={marginRight:c};break;case"bottom-start":a={marginTop:c}}let k=e=>{y("tripleDotClick",{open:e,itemType:"user",userId:l._id}),x(e)};return(0,t.jsxs)("div",{className:(0,i.default)(g.root,m),children:[(0,t.jsx)("div",{ref:f,children:(0,t.jsx)("div",{className:g.button,onClick:()=>k(!v),children:""})}),(0,t.jsx)(s.default,{open:v,anchorEl:f.current,placement:d,allowOverflow:!0,flip:u,style:a,className:g.popper,children:(0,t.jsx)(C.default,{onClickAway:()=>k(!1),children:(0,t.jsx)(null!=h?h:b,{user:l,closeMenu:()=>k(!1),from:p})})})]})}],768053)},249178,e=>{"use strict";e.s(["default",()=>f]);var t=e.i(843476),n=e.i(271645),o=e.i(343794),i=e.i(79732),r=e.i(429329),a=e.i(530841),s=e.i(755146),l=e.i(370659),d=e.i(160622),c=e.i(159211),u=e.i(820010),m=e.i(768053),p=e.i(8404),h=e.i(601268);let g=(0,r.defineStyles)("UltraFeedUserCard",e=>({root:{display:"flex",flexDirection:"column",width:"100%",fontSize:14,fontWeight:450,lineHeight:"19.5px",color:e.palette.text.primary,backgroundColor:e.palette.panelBackground.default,borderRadius:8,...e.typography.postStyle},rootInModal:{height:"100%",borderRadius:0,overflow:"hidden"},rootInHover:{width:400,maxHeight:600,overflow:"hidden",boxShadow:e.palette.boxShadow.lwTagHoverOver},topSection:{paddingLeft:20,paddingRight:20,paddingTop:16},scrollableContent:{flex:1,display:"flex",flexDirection:"column",overflow:"auto",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},nameRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:16,flexWrap:"wrap-reverse",minHeight:45,marginBottom:12,width:"100%"},nameRowHover:{marginBottom:4,flexWrap:"wrap"},name:{fontSize:"2.5em",lineHeight:"1.2",fontWeight:400,color:e.palette.grey.A400,wordBreak:"break-word",minWidth:0,flex:"1 0 auto",position:"relative",top:"0.08em"},nameInHover:{fontSize:"2.2rem",position:"relative",top:"0.08em",overflowWrap:"break-word",wordBreak:"break-word",lineHeight:"1.2",flex:"1 0 200px",minWidth:0},nameLink:{color:"inherit",textDecoration:"none",cursor:"pointer","&:hover":{opacity:.8}},followButton:{flexShrink:0},buttonsContainer:{display:"flex",gap:8,alignItems:"center",flexShrink:0,marginLeft:"auto"},metaRow:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",color:e.palette.grey[600],fontSize:"1.1rem","& .UserMetaInfo-info":{marginRight:16}},bio:{marginTop:12,lineHeight:"1.3rem"},contentSection:{marginTop:12,flex:1,display:"flex",flexDirection:"column",backgroundColor:e.palette.grey[200]},hoverCardContent:{paddingTop:16,paddingLeft:20,paddingRight:20,paddingBottom:20}})),f=e=>{let{user:r,inModal:f=!1,onNameVisibilityChange:v}=e,x=(0,i.useStyles)(g),y=(0,a.useCurrentUserId)(),b=(0,n.useRef)(null),C=(0,n.useRef)(null);if((0,n.useEffect)(()=>{if(!f||!v||!b.current||!C.current)return;let e=new IntersectionObserver(e=>{let[t]=e;v(!t.isIntersecting)},{root:C.current,threshold:1,rootMargin:"150px 0px 0px 0px"});return e.observe(b.current),()=>e.disconnect()},[f,v]),!(null==r?void 0:r._id))return(0,t.jsx)("div",{className:x.root,children:"User not found"});let{htmlBio:w,displayName:k}=r,j=(0,u.userGetProfileUrl)(r);return f?(0,t.jsx)("div",{className:(0,o.default)(x.root,x.rootInModal),children:(0,t.jsxs)("div",{className:x.scrollableContent,ref:C,children:[(0,t.jsxs)("div",{className:x.topSection,children:[(0,t.jsxs)("div",{className:x.nameRow,ref:b,children:[(0,t.jsx)("div",{className:x.name,children:(0,t.jsx)(c.Link,{to:j,className:x.nameLink,children:k})}),(0,t.jsxs)("div",{className:x.buttonsContainer,children:[y!==r._id&&(0,t.jsx)(m.default,{user:r,from:"ultraFeedModal",placement:"bottom-end"}),(0,t.jsx)("div",{className:x.followButton,children:(0,t.jsx)(s.default,{user:r,styleVariant:"ultraFeed"})})]})]}),(0,t.jsx)("div",{className:x.metaRow,children:(0,t.jsx)(l.default,{user:r})}),w&&(0,t.jsx)(p.default,{html:w,initialWordCount:h.SHOW_ALL_BREAKPOINT_VALUE,maxWordCount:h.SHOW_ALL_BREAKPOINT_VALUE,className:x.bio})]}),(0,t.jsx)("div",{className:x.contentSection,children:(0,t.jsx)(d.default,{userId:r._id,initialLimit:5,scrollContainerRef:C})})]})}):(0,t.jsx)("div",{className:(0,o.default)(x.root,x.rootInHover),children:(0,t.jsxs)("div",{className:x.hoverCardContent,children:[(0,t.jsxs)("div",{className:(0,o.default)(x.nameRow,x.nameRowHover),children:[(0,t.jsx)(c.Link,{to:(0,u.userGetProfileUrl)(r),className:(0,o.default)(x.name,x.nameInHover,x.nameLink),children:k}),(0,t.jsx)("div",{className:x.followButton,children:(0,t.jsx)(s.default,{user:r,styleVariant:"ultraFeed"})})]}),(0,t.jsx)("div",{className:x.metaRow,children:(0,t.jsx)(l.default,{user:r})}),w&&(0,t.jsx)(p.default,{html:w,initialWordCount:250,maxWordCount:1e3,continueReadingUrl:j,className:x.bio})]})})}},753582,e=>{"use strict";var t=e.i(271645),n=e.i(530841),o=e.i(420616);e.s(["useNoKibitz",0,e=>{let{disableNoKibitz:i}=(0,t.useContext)(o.DisableNoKibitzContext);return(0,n.useFilteredCurrentUser)(t=>{var n;return!!(t&&null!=(n=t.noKibitz)&&n&&e&&t._id!==e._id&&!i)})}])},636492,e=>{"use strict";e.s(["default",()=>f]);var t=e.i(843476),n=e.i(343794),o=e.i(695310),i=e.i(249178),r=e.i(517794),a=e.i(820010),s=e.i(159211),l=e.i(161517),d=e.i(765744),c=e.i(79732),u=e.i(429329),m=e.i(904370),p=e.i(898298),h=e.i(753582);let g=(0,u.defineStyles)("UsersNameWithModal",e=>({subscribeIcon:{width:15,height:15,color:e.palette.grey[600],position:"relative",top:3,marginLeft:3},cardWrapper:{padding:0,background:"unset",maxWidth:"none"},noKibitz:{minWidth:55}})),f=e=>{let{user:u,documentId:f,nofollow:v=!1,tooltipPlacement:x="bottom-start",className:y,simple:b=!1,showSubscribedIcon:C=!1,...w}=e,k=(0,c.useStyles)(g),{eventHandlers:j,hover:S}=(0,p.useHover)({eventProps:{pageSubElementContext:"ultraFeedUserName",userId:null==u?void 0:u._id}}),I=(0,h.useNoKibitz)(u),T=I&&!S;if(!u&&!f)return(0,t.jsx)(o.default,{user:u,documentId:f,...w,className:y});if(!u&&f)return(0,t.jsx)(o.default,{documentId:f,...w,className:y});if(!u||u.deleted)return(0,t.jsx)(d.default,{});let N=T?"(hidden)":(0,a.userGetDisplayName)(u),L=(0,a.userGetProfileUrl)(u);return b?(0,t.jsxs)("span",{...j,className:(0,n.default)(y,I&&k.noKibitz),children:[N,C&&(0,t.jsx)(m.default,{className:k.subscribeIcon})]}):(0,t.jsx)(l.AnalyticsContext,{pageElementContext:"ultraFeedUserName",userIdDisplayed:u._id,children:(0,t.jsx)("span",{...j,children:(0,t.jsx)(r.default,{title:(0,t.jsx)(i.default,{user:u}),placement:x,clickable:!0,disabledOnMobile:!0,flip:!0,popperClassName:k.cardWrapper,children:(0,t.jsxs)(s.Link,{to:L,className:(0,n.default)(y,I&&k.noKibitz),...v?{rel:"nofollow"}:{},children:[N,C&&(0,t.jsx)(m.default,{className:k.subscribeIcon})]})})})})}},432382,e=>{"use strict";e.s(["default",()=>u]);var t=e.i(843476),n=e.i(538794),o=e.i(271645),i=e.i(229720),r=e.i(343794),a=e.i(77766),s=e.i(695310),l=e.i(636492),d=e.i(765744),c=e.i(449644);let u=(0,n.registerComponent)("PostsUserAndCoauthors",e=>{let{post:n,abbreviateIfLong:u=!1,classes:m,simple:p=!1,tooltipPlacement:h="left",newPromotedComments:g,showMarkers:f,useUltraFeedModal:v=!1,compact:x=!1,showSubscribedIcon:y=!1}=e,{isAnon:b,topCommentAuthor:C,authors:w}=(0,a.usePostsUserAndCoauthors)(n),k=v?l.default:s.default;return b?(0,t.jsx)(d.default,{}):(0,t.jsxs)("div",{className:(0,r.default)({[m.lengthLimited]:u,[m.lengthLimitedCompact]:u&&x,[m.lengthUnlimited]:!u}),children:[w.map((e,n)=>(0,t.jsxs)(o.default.Fragment,{children:[n>0?", ":"",(0,t.jsx)(k,{user:e,simple:p,tooltipPlacement:h,...v&&{showSubscribedIcon:y}}),f&&(0,t.jsx)(c.default,{user:e,className:m.userMarkers})]},e._id)),C&&(0,t.jsxs)("span",{className:(0,r.default)(m.topCommentAuthor,{[m.new]:g}),children:[", ",(0,t.jsx)(i.default,{className:(0,r.default)(m.topAuthorIcon,{[m.new]:g})}),(0,t.jsx)(k,{user:C||void 0,simple:p,tooltipPlacement:h,...v&&{showSubscribedIcon:y}})]})]})},{styles:e=>({lengthLimited:{maxWidth:310,textOverflow:"ellipsis",overflowX:"clip",overflowY:"clip",textAlign:"right",[e.breakpoints.down("xs")]:{maxWidth:160}},lengthLimitedCompact:{maxWidth:200},userMarkers:{marginLeft:4},lengthUnlimited:{display:"inline"},topCommentAuthor:{color:e.palette.grey[500],fontSize:".95rem"},topAuthorIcon:{width:12,height:12,color:e.palette.icon.topAuthor,position:"relative",top:2,marginRight:4,marginLeft:2},new:{color:e.palette.primary.main}})})},173171,e=>{"use strict";e.s(["DateWithoutTime",()=>g,"default",()=>f]);var t=e.i(843476),n=e.i(538794),o=e.i(343794);e.i(552275);var i=e.i(935132),r=e.i(161517),a=e.i(264517),s=e.i(883340),l=e.i(758623),d=e.i(823876),c=e.i(432382),u=e.i(110601),m=e.i(163253),p=e.i(944045),h=e.i(109270);let g=e=>{let{date:n}=e;return(0,t.jsx)(l.default,{date:n,granularity:"date",format:"MMM Do"})},f=(0,n.registerComponent)("PostsItemMeta",e=>{let{post:n,read:f,hideTags:v,classes:x}=e,y=(0,i.isAF)()?n.afBaseScore:n.baseScore,b=!(0,i.isAF)()&&n.af,C=b?n.afBaseScore:null,w=(0,h.useIsOnGrayBackground)();return(0,t.jsxs)("span",{className:(0,o.default)(f&&x.read,w&&x.onGrayBackground),children:[!n.shortform&&!n.isEvent&&(0,t.jsx)("span",{className:x.info,children:(0,t.jsx)(u.default,{title:(0,t.jsxs)("div",{children:["This post has ",y||0," karma",(0,t.jsx)("br",{}),"(",n.voteCount," votes)"]}),children:(0,t.jsx)("span",{className:x.karma,children:y||0})})}),n.isEvent&&(0,t.jsxs)("span",{className:x.info,children:[n.startTime&&(0,t.jsx)("span",{className:x.calendarIcon,children:(0,t.jsx)(m.default,{post:n})}),n.startTime?(0,t.jsx)(u.default,{title:(0,t.jsx)(a.default,{post:n}),children:(0,t.jsx)(g,{date:(0,p.maybeDate)(n.startTime)})}):(0,t.jsx)(u.default,{title:(0,t.jsx)("span",{children:"To Be Determined"}),children:(0,t.jsx)("span",{children:"TBD"})})]}),n.isEvent&&!n.onlineEvent&&(0,t.jsx)("span",{className:x.info,children:(0,t.jsx)(s.default,{post:n})}),(0,t.jsx)("span",{className:x.info,children:(0,t.jsx)(c.default,{post:n,showMarkers:!0})}),b&&(0,t.jsx)("span",{className:x.info,children:(0,t.jsx)(u.default,{title:(0,t.jsxs)("div",{children:[C," karma on alignmentforum.org"]}),children:(0,t.jsxs)("span",{children:[" ",C]})})}),!n.isEvent&&!v&&(0,t.jsx)("span",{className:x.info,children:(0,t.jsx)(r.AnalyticsContext,{pageElementContext:"tagsList",children:(0,t.jsx)(d.default,{post:n,hideScore:!0,hideAddTag:!0,smallText:!0})})}),n.postedAt&&!n.isEvent&&(0,t.jsx)("span",{className:x.info,children:(0,t.jsx)(l.default,{date:n.postedAt})})]})},{styles:e=>({onGrayBackground:{...e.isBookUI&&e.dark&&{color:e.palette.greyAlpha(1)}},read:{opacity:".8"},karma:{minWidth:20,textAlign:"center",display:"inline-block"},info:{display:"inline",color:e.palette.text.dim3,marginRight:e.spacing.unit,fontSize:"1.1rem",...e.typography.commentStyle},calendarIcon:{marginRight:e.spacing.unit}})})},499201,415532,e=>{"use strict";e.s(["default",()=>h],499201);var t=e.i(843476),n=e.i(271645),o=e.i(128380),i=e.i(173171),r=e.i(343794),a=e.i(387736),s=e.i(863783),l=e.i(813292),d=e.i(110601),c=e.i(264517),u=e.i(944045),m=e.i(79732);let p=(0,e.i(429329).defineStyles)("EAPostMeta",e=>({root:{color:e.palette.grey[600],flexGrow:1,display:"flex",alignItems:"center",overflow:"hidden","& > :first-child":{marginRight:5}},date:{"@media screen and (max-width: 280px)":{display:"none"}},readTime:{"@media screen and (max-width: 350px)":{display:"none"}},interactionWrapper:{"&:hover":{opacity:1}},icon:{width:16},eventOrganizer:{display:"flex",fontSize:"14px"},dot:{margin:"0 4px"},authorsList:{fontSize:14}}),{stylePriority:-1}),h=e=>{var h;let{post:g,useEventStyles:f,useCuratedDate:v=!0,className:x}=e,y=(0,m.useStyles)(p),b=(0,n.useRef)(null);return f&&g.isEvent?(0,t.jsxs)("div",{className:(0,r.default)(y.root,x),ref:b,children:[(0,t.jsx)(l.default,{icon:"Calendar",className:y.icon}),g.startTime?(0,t.jsx)(d.default,{title:(0,t.jsx)(c.default,{post:g}),children:(0,t.jsx)(i.DateWithoutTime,{date:(0,u.maybeDate)(g.startTime)})}):(0,t.jsx)(d.default,{title:(0,t.jsx)("span",{children:"To be determined"}),children:(0,t.jsx)("span",{children:"TBD"})}),(0,t.jsxs)("span",{className:y.eventOrganizer,children:[(0,t.jsx)("span",{className:y.dot,children:""}),(0,t.jsx)(o.InteractionWrapper,{className:y.interactionWrapper,children:(0,t.jsx)(a.default,{post:g,expandContainer:b,className:y.authorsList})})]})]}):(0,t.jsxs)("div",{className:(0,r.default)(y.root,x),ref:b,children:[(0,t.jsx)(o.InteractionWrapper,{className:y.interactionWrapper,children:(0,t.jsx)(a.default,{post:g,expandContainer:b})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:y.date,children:["  ",(0,t.jsx)(s.default,{post:g,noStyles:!0,includeAgo:!0,useCuratedDate:v})]}),(!(null==(h=g.fmCrosspost)?void 0:h.isCrosspost)||g.fmCrosspost.hostedHere)&&(0,t.jsxs)("span",{className:y.readTime,children:["  ",g.readTimeMinutes||1,"m read"]})]})]})};e.s(["default",()=>y],415532);var g=e.i(538794),f=e.i(611570),v=e.i(645446);let x=(e,t,n)=>{n.innerHTML=n.innerHTML.replace(/\d+ more/,"".concat(e," more"))},y=(0,g.registerComponent)("TruncatedTagsList",e=>{let{post:o,expandContainer:i,className:a,classes:s}=e,l=(0,n.useRef)(null),d=o.tags;return((0,n.useEffect)(()=>{if(!(null==d?void 0:d.length))return;let e=()=>(0,f.recalculateTruncation)(l,i,s,x);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[d,l,s.item,i,s]),null==d?void 0:d.length)?(0,t.jsxs)("div",{className:(0,r.default)(s.root,a),ref:l,children:[(0,t.jsx)("span",{className:(0,r.default)(s.item,s.placeholder)}),(0,t.jsxs)("div",{className:s.scratch,"aria-hidden":"true",children:[d.map(e=>e&&(0,t.jsx)("span",{className:s.item,children:(0,t.jsx)(v.default,{tag:e,smallText:!0,hoverable:!1})},e._id)),(0,t.jsx)("span",{className:s.more,children:"0 more"})]})]}):null},{styles:e=>({root:{position:"relative",overflow:"hidden",whiteSpace:"nowrap",maxWidth:"100%",fontSize:13,fontWeight:450},item:{},placeholder:{},tooltip:{display:"flex",flexDirection:"column"},more:{paddingLeft:4,color:e.palette.grey[600]},scratch:{position:"absolute",opacity:0,pointerEvents:"none"}}),stylePriority:-1})},244389,945040,e=>{"use strict";e.s(["default",()=>z],244389);var t=e.i(843476),n=e.i(271645),o=e.i(791434),i=e.i(538794),r=e.i(161517),a=e.i(85528),s=e.i(374892),l=e.i(499201),d=e.i(415532),c=e.i(601342);let u=(0,i.registerComponent)("EAPostsPreviewTooltip",e=>{var o,i;let{post:u,postsList:m,hash:p,comment:h,classes:g}=e,f=(0,n.useRef)(null);if(!u)return null;let v=!m,{imageUrl:x}=null!=(o=u.socialPreviewData)?o:{};return(0,t.jsx)(r.AnalyticsContext,{pageElementContext:a.POST_PREVIEW_ELEMENT_CONTEXT,children:(0,t.jsxs)("div",{className:g.root,children:[(0,t.jsxs)("div",{className:g.mainContainer,children:[(0,t.jsxs)("div",{className:g.headerContainer,children:[(0,t.jsx)("div",{className:g.title,children:u.title}),v&&(0,t.jsx)(l.default,{post:u,useEventStyles:u.isEvent,className:g.meta}),!v&&(null==(i=u.tags)?void 0:i.length)>0&&(0,t.jsx)("div",{ref:f,children:(0,t.jsx)(d.default,{post:u,expandContainer:f})})]}),h?(0,t.jsx)(c.default,{treeOptions:{post:u,hideReply:!0,forceNotSingleLine:!0},comment:h,truncated:!0,hoverPreview:!0,forceUnCollapsed:!0,noAutoScroll:!0}):(0,t.jsx)("div",{className:g.excerptContainer,children:(0,t.jsx)(s.default,{post:u,hash:p,lines:3.5,hideMoreLink:!0,smallText:!0,hideMultimedia:!0})})]}),x&&(0,t.jsx)("img",{className:g.image,src:x})]})})},{styles:e=>({root:{width:(0,a.getPostPreviewWidth)(),fontFamily:e.palette.fonts.sansSerifStack,overflow:"hidden",[e.breakpoints.down("xs")]:{display:"none"}},mainContainer:{display:"flex",flexDirection:"column",gap:"16px",padding:16},headerContainer:{display:"flex",flexDirection:"column",gap:"12px"},title:{fontSize:"1.3rem",fontWeight:600,lineHeight:"130%",color:e.palette.grey.A400},meta:{fontWeight:450,marginTop:-4},excerptContainer:{maxHeight:200,overflow:"hidden",maskImage:"linear-gradient(to bottom, ".concat(e.palette.grey[0]," 170px, transparent 100%)"),"-webkit-mask-image":"linear-gradient(to bottom, ".concat(e.palette.grey[0]," 170px, transparent 100%)")},image:{width:"auto",minWidth:"100%",height:130,objectFit:"cover",marginBottom:-4,borderRadius:"0 0 ".concat(e.borderRadius.default,"px ").concat(e.borderRadius.default,"px")}})});var m=e.i(964344),p=e.i(182584),h=e.i(444098),g=e.i(159211),f=e.i(946271);e.i(813868);var v=e.i(122756),x=e.i(432382),y=e.i(93495),b=e.i(690118),C=e.i(583864),w=e.i(758623),k=e.i(239832),j=e.i(87828),S=e.i(264517);let I=(0,v.gql)("\n  query LWPostsPreviewTooltip1($documentId: String, $dialogueMessageId: String) {\n    post(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...PostWithDialogueMessage\n      }\n    }\n  }\n"),T=(0,v.gql)("\n  query LWPostsPreviewTooltip($documentId: String, $hash: String) {\n    post(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...HighlightWithHash\n      }\n    }\n  }\n"),N={"& img":{display:"none"},"& hr":{display:"none"}},L=(0,i.registerComponent)("LWPostsPreviewTooltip",e=>{var o,i,s,l,d,u,v,N,L,R,_;let A,{postsList:M,post:P,hash:E,comment:F,dialogueMessageInfo:B,classes:D}=e,[U,H]=(0,n.useState)(!1),{loading:W,data:O}=(0,f.useQuery)(T,{variables:{documentId:null!=(o=null==P||null==(s=P.fmCrosspost)?void 0:s.foreignPostId)?o:null==P?void 0:P._id,hash:E},skip:!P||!E&&!!P.contents,fetchPolicy:"cache-first"}),V=null==O||null==(l=O.post)?void 0:l.result,{dialogueMessageId:z,dialogueMessageContents:$}=null!=B?B:{},{data:q}=(0,f.useQuery)(I,{variables:{documentId:null!=(i=null==P||null==(d=P.fmCrosspost)?void 0:d.foreignPostId)?i:null==P?void 0:P._id,dialogueMessageId:z},skip:!P||!z,fetchPolicy:"cache-first"}),G=null==q||null==(u=q.post)?void 0:u.result;if(!P)return null;let{wordCount:Z=0,htmlHighlight:Y=""}=P.contents||{},Q=(null==V||null==(v=V.contents)?void 0:v.htmlHighlightStartingAtHash)||(null==(N=P.customHighlight)?void 0:N.html)||Y;A=P.collabEditorDialogue?null!=(R=null!=(_=null==G?void 0:G.dialogueMessageContents)?_:$)?R:Q:P.debate?P.dialogTooltipPreview:Q;let K=!F&&!P.isEvent&&(null!=Z?Z:0)>0,X=(0,m.truncate)(A,U?200:100,"words",'... <span class="expand">(more)</span>'),J=F||P.bestAnswer,ee=P.onlineEvent?(0,t.jsx)("div",{children:"Online event"}):null;P.isEvent&&P.location&&(ee=(0,t.jsx)("div",{children:P.location}));let et=null==(L=P.tags)?void 0:L.slice(0,2);return(0,t.jsx)(r.AnalyticsContext,{pageElementContext:a.POST_PREVIEW_ELEMENT_CONTEXT,children:(0,t.jsxs)(h.Card,{className:D.root,children:[(0,t.jsxs)("div",{className:D.header,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:D.title,children:(0,t.jsx)(y.default,{post:P,wrap:!0,showIcons:!1})}),(0,t.jsxs)(j.default,{contentType:"comment",className:D.tooltipInfo,children:[M&&(0,t.jsxs)("span",{children:[P.startTime&&(0,t.jsx)(S.default,{post:P}),ee,null==et?void 0:et.map((e,n)=>(0,t.jsxs)("span",{children:[null==e?void 0:e.name,n!==(null==et?void 0:et.length)-1?",  ":""]},null==e?void 0:e._id)),K&&(0,t.jsxs)("span",{children:[" ",(0,t.jsxs)("span",{className:D.wordCount,children:["(",Z," words)"]})]})]}),!M&&(0,t.jsxs)(t.Fragment,{children:[P.user&&(0,t.jsx)(x.default,{post:P}),(0,t.jsxs)("div",{className:D.metadata,children:[(0,t.jsxs)("span",{className:D.smallText,children:[(0,p.postGetKarma)(P)," karma"]}),(0,t.jsx)("span",{className:D.smallText,children:(0,p.postGetCommentCountStr)(P)}),(0,t.jsx)("span",{className:D.smallText,children:(0,t.jsx)(w.default,{date:P.postedAt})})]})]})]})]}),!M&&(0,t.jsx)("div",{className:D.bookmark,children:(0,t.jsx)(C.default,{documentId:P._id,collectionName:"Posts",initial:P.isBookmarked})})]}),J?(0,t.jsx)("div",{className:D.comment,children:(0,t.jsx)(c.default,{treeOptions:{post:P,hideReply:!0,forceNotSingleLine:!0},truncated:!0,comment:J,hoverPreview:!0,forceUnCollapsed:!0,noAutoScroll:!0})}):W?(0,t.jsx)(k.default,{}):(0,t.jsxs)("div",{onClick:()=>H(!0),className:D.postPreview,children:[(0,t.jsx)(j.default,{contentType:"postHighlight",className:D.highlight,children:(0,t.jsx)(b.ContentItemBody,{dangerouslySetInnerHTML:{__html:X},description:"post ".concat(P._id)})}),U&&(0,t.jsx)(g.Link,{to:(0,p.postGetPageUrl)(P),children:(0,t.jsx)("div",{className:D.continue,children:"(Continue Reading)"})})]})]})})},{styles:e=>({root:{width:(0,a.getPostPreviewWidth)(),position:"relative","& img":{maxHeight:"200px"},[e.breakpoints.down("xs")]:{display:"none"},"& .expand":{color:e.palette.grey[600],fontSize:"1rem",cursor:"pointer"}},postPreview:{maxHeight:450,padding:1.5*e.spacing.unit,paddingBottom:0,paddingTop:0},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:1.5*e.spacing.unit,paddingBottom:0},title:{marginBottom:-6},tooltipInfo:{marginLeft:2,...e.typography.italic,fontSize:"1.1rem",color:e.palette.grey[600],display:"flex",alignItems:"center"},highlight:{...{marginTop:2.5*e.spacing.unit,marginBottom:1.5*e.spacing.unit,marginRight:e.spacing.unit/2,wordBreak:"break-word",fontSize:"1.1rem","& h1":{fontSize:"1.2rem"},"& h2":{fontSize:"1.2rem"},"& h3":{fontSize:"1.1rem"},"& li":{fontSize:"1.1rem"},"& .dialogue-message-header":{position:"relative !important"},...N}},comment:{marginTop:e.spacing.unit},bookmark:{marginTop:-4,paddingRight:4},continue:{color:e.palette.grey[500],fontSize:"1rem",marginBottom:e.spacing.unit},wordCount:{display:"inline-block"},metadata:{marginLeft:12,paddingTop:2},smallText:{fontSize:".9rem",color:e.palette.grey[500],marginRight:e.spacing.unit}})}),R=e=>(0,o.isFriendlyUI)()?(0,t.jsx)(u,{...e}):(0,t.jsx)(L,{...e}),_=e=>({width:(0,a.getPostPreviewWidth)(),paddingTop:e.spacing.unit,paddingBottom:e.spacing.unit}),A=(0,i.registerComponent)("PostsPreviewLoading",e=>{let{classes:n}=e;return(0,t.jsx)("div",{className:n.loading,children:(0,t.jsx)(k.default,{})})},{styles:e=>({loading:{..._(e),background:e.palette.grey[0],borderRadius:e.borderRadius.default,border:"1px solid ".concat(e.palette.grey[120]),boxShadow:e.palette.boxShadow.eaCard}})});e.s(["default",0,A,"notificationLoadingStyles",0,_],945040);let M=(0,v.gql)("\n  query PostsPreviewTooltipSingle($documentId: String) {\n    post(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...PostsList\n      }\n    }\n  }\n");function P(e,t){return(0,f.useQuery)(M,{variables:{documentId:e},fetchPolicy:"cache-first",...t})}let E=(0,v.gql)("\n  query PostsPreviewTooltipSingle4($documentId: String) {\n    tagRel(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...TagRelFragment\n      }\n    }\n  }\n"),F=(0,v.gql)("\n  query PostsPreviewTooltipSingle3($documentId: String) {\n    comment(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...CommentsList\n      }\n    }\n  }\n"),B=e=>{var n;let{postId:o,postsList:i=!1}=e,{loading:r,data:a}=P(o),s=null==a||null==(n=a.post)?void 0:n.result;return r?(0,t.jsx)(A,{}):s?(0,t.jsx)(R,{post:s,postsList:i}):null},D=e=>{var n;let{postId:o,postsList:i=!1,dialogueMessageInfo:r}=e,{loading:a,data:s}=P(o),l=null==s||null==(n=s.post)?void 0:n.result;return a?(0,t.jsx)(A,{}):l?(0,t.jsx)(R,{post:l,postsList:i,dialogueMessageInfo:r}):null},U=e=>{var n,o;let{postId:i,commentId:r}=e,{loading:a,data:s}=P(i),l=null==s||null==(n=s.post)?void 0:n.result,{loading:d,data:c}=(0,f.useQuery)(F,{variables:{documentId:r},fetchPolicy:"cache-first"}),u=null==c||null==(o=c.comment)?void 0:o.result;return a||d?(0,t.jsx)(A,{}):l?(0,t.jsx)(R,{post:l,comment:r&&u?u:void 0}):null},H=e=>{var n;let{tagRelId:o}=e,{loading:i,data:r}=(0,f.useQuery)(E,{variables:{documentId:o},fetchPolicy:"cache-first"}),a=null==r||null==(n=r.tagRel)?void 0:n.result;return i?(0,t.jsx)(A,{}):(null==a?void 0:a.post)?(0,t.jsx)(R,{post:a.post}):null};var W=e.i(517794),O=e.i(79732);let V=(0,e.i(429329).defineStyles)("PostsTooltip",e=>({sentinel:{height:0,width:0,visibility:"hidden",overflow:"hidden"}})),z=e=>{let{post:o,postId:i,comment:r,commentId:a,tagRelId:s,dialogueMessageInfo:l,hash:d,postsList:c,inlineBlock:u=!1,As:m,clickable:p,flip:h,placement:g,children:f,pageElementContext:v,pageElementSubContext:x,disabled:y,preload:b,className:C}=e,w=(0,O.useStyles)(V),[k,j]=(0,n.useState)(!1),S=(0,n.useRef)(null),I=(0,n.useMemo)(()=>k&&"on-screen"===b,[k,b]);P(i,{skip:!i||!I}),(0,n.useEffect)(()=>{let e=new IntersectionObserver(e=>{let[t]=e;j(t.isIntersecting)},{root:null,threshold:0}),t=S.current;if(t)return e.observe(t),()=>e.disconnect()},[]);let T=(0,n.useCallback)(()=>{if(s)return(0,t.jsx)(H,{tagRelId:s});if(o)return(0,t.jsx)(R,{post:o,postsList:c,comment:r,hash:d});if(i){if(l)return(0,t.jsx)(D,{postId:i,dialogueMessageInfo:l});let e=null!=a?a:null==r?void 0:r._id;return e?(0,t.jsx)(U,{postId:i,commentId:e}):(0,t.jsx)(B,{postId:i,postsList:c})}return null},[s,o,i,c,r,a,l,d]);return y?(0,t.jsx)(t.Fragment,{children:f}):(0,t.jsxs)(W.default,{title:T(),placement:g,tooltip:!1,hideOnTouchScreens:!0,inlineBlock:u,As:m,clickable:p,flip:h,analyticsProps:{pageElementContext:v,pageElementSubContext:x,postId:null!=i?i:null==o?void 0:o._id},className:C,children:[f,"on-screen"===b&&(0,t.jsx)("span",{ref:S,className:w.sentinel})]})}},300891,775964,e=>{"use strict";e.s(["default",()=>N],300891);var t=e.i(843476),n=e.i(517794),o=e.i(572435),i=e.i(538794),r=e.i(964344),a=e.i(773736),s=e.i(530841),l=e.i(253592),d=e.i(87828);e.s(["default",()=>v],775964);var c=e.i(159211),u=e.i(182584),m=e.i(343794),p=e.i(244389),h=e.i(695310),g=e.i(478386),f=e.i(927907);let v=(0,i.registerComponent)("TagSmallPostLink",e=>{let{classes:n,post:o,hideMeta:i,hideAuthor:r,wrap:a,widerSpacing:s,disableHoverPreview:l}=e;return(0,t.jsx)(p.default,{post:o,clickable:!1,placement:"bottom-start",disabled:l,children:(0,t.jsx)("div",{className:(0,m.default)(n.root,{[n.widerSpacing]:s}),children:(0,t.jsxs)("div",{className:n.post,children:[!i&&(0,t.jsx)(g.default,{className:n.karma,children:(0,t.jsx)(f.default,{document:o,placement:"right"})}),(0,t.jsx)(c.Link,{to:(0,u.postGetPageUrl)(o),className:(0,m.default)(n.title,{[n.wrap]:a}),children:o.title}),!i&&!r&&o.user&&(0,t.jsx)(g.default,{className:n.author,children:(0,t.jsx)(h.default,{user:o.user,nowrap:!a})})]})})})},{styles:e=>({root:{display:"flex",...e.typography.body2,...e.typography.postStyle,fontSize:"1.1rem",color:e.palette.grey[900]},karma:{marginLeft:4,marginRight:12,textAlign:"center",width:20,flexShrink:0},post:{display:"flex",width:"100%",justifyContent:"space-between",marginTop:2,marginBottom:2},title:{...e.isFriendlyUI?{fontFamily:e.palette.fonts.sansSerifStack,fontWeight:600}:{position:"relative"},top:2,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flexGrow:1,color:e.palette.lwTertiary.dark},wrap:{whiteSpace:"unset",lineHeight:"1.1em",marginBottom:4,...e.isFriendlyUI&&{lineHeight:"1.2em"}},author:{marginRight:0,marginLeft:20},widerSpacing:{marginBottom:4}})});var x=e.i(755146),y=e.i(370659),b=e.i(239832),C=e.i(946271);e.i(813868);let w=(0,e.i(122756).gql)("\n  query multiPostLWUserTooltipContentQuery($selector: PostSelector, $limit: Int, $enableTotal: Boolean) {\n    posts(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...PostsList\n      }\n      totalCount\n    }\n  }\n"),k=(0,i.registerComponent)("LWUserTooltipContent",e=>{var n;let{hideFollowButton:o=!1,classes:i,user:l}=e,c=(0,s.useCurrentUser)(),{htmlBio:u,displayName:m}=l,p=(0,r.truncate)(u,500),{data:h,loading:g}=(0,C.useQuery)(w,{variables:{selector:{userPosts:{userId:l._id,sortedBy:"new"}},limit:3,enableTotal:!1},notifyOnNetworkStatusChange:!0}),f=null==h||null==(n=h.posts)?void 0:n.results;return(0,t.jsxs)("div",{className:i.root,children:[(0,t.jsxs)("div",{className:i.header,children:[(0,t.jsx)("div",{className:i.name,children:m}),(0,t.jsxs)("div",{className:i.metaRow,children:[(0,t.jsx)(y.default,{user:l}),!o&&(0,a.userHasSubscribeTabFeed)(c)&&(0,t.jsx)(x.default,{user:l})]})]}),p&&(0,t.jsx)(d.default,{className:i.bio,contentType:"postHighlight",children:(0,t.jsx)("div",{className:i.bioText,dangerouslySetInnerHTML:{__html:p}})}),f&&(0,t.jsx)("div",{className:i.posts,children:f.map(e=>e&&(0,t.jsx)(v,{post:e,hideAuthor:!0,disableHoverPreview:!0},e._id))}),g&&(0,t.jsx)(b.default,{})]})},{styles:e=>({root:{display:"flex",flexDirection:"column",width:350,maxWidth:"unset",fontSize:14,fontWeight:450,lineHeight:"19.5px",padding:16,color:e.palette.text.primary,background:e.palette.panelBackground.default,boxShadow:e.palette.boxShadow.lwTagHoverOver,...e.typography.postStyle},header:{display:"flex",flexDirection:"column",maxWidth:400},name:{marginTop:4,fontSize:"1.7rem",fontWeight:400,color:e.palette.grey.A400},metaRow:{marginTop:8,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",color:e.palette.grey["600"],fontSize:"1.1rem"},bio:{marginTop:8,lineHeight:"1.3rem"},bioText:{...(0,l.commentBodyStyles)(e),marginTop:0},posts:{marginTop:8,paddingTop:8,borderTop:e.palette.border.extraFaint,overflow:"hidden"}})});var j=e.i(791434),S=e.i(429329),I=e.i(79732);let T=(0,S.defineStyles)("UserTooltip",e=>({root:e.isFriendlyUI?{padding:12,top:2}:{padding:0,background:"unset"},overrideTooltip:e.isFriendlyUI?{}:{padding:0,maxWidth:"none"}})),N=e=>{let{user:i,placement:r,inlineBlock:a,hideFollowButton:s,disabled:l,children:d}=e,c=(0,I.useStyles)(T),u=(0,j.isFriendlyUI)()?(0,t.jsx)(o.default,{user:i}):(0,t.jsx)(k,{user:i,hideFollowButton:s});return(0,t.jsx)(n.default,{title:u,placement:r,inlineBlock:a,popperClassName:c.root,titleClassName:c.overrideTooltip,clickable:!(0,j.isFriendlyUI)(),disabled:l,children:d})}},504280,e=>{"use strict";e.s(["default",()=>m]);var t=e.i(843476),n=e.i(820010),o=e.i(159211),i=e.i(898298),r=e.i(343794),a=e.i(161517),s=e.i(765744),l=e.i(300891),d=e.i(753582),c=e.i(79732);let u=(0,e.i(429329).defineStyles)("UsersNameDisplay",e=>({color:{color:e.palette.primary.main},noColor:{color:"inherit !important"},noKibitz:{minWidth:55},nowrap:{whiteSpace:"nowrap"}})),m=e=>{let{user:m,color:p=!1,nofollow:h=!1,simple:g=!1,nowrap:f=!1,noTooltip:v=!1,hideFollowButton:x=!1,tooltipPlacement:y="left",pageSectionContext:b,className:C}=e,w=(0,c.useStyles)(u),{eventHandlers:k,hover:j}=(0,i.useHover)({eventProps:{pageElementContext:"linkPreview",pageSubElementContext:"userNameDisplay",userId:null==m?void 0:m._id}}),S=(0,d.useNoKibitz)(m),I=S&&!j;if(!m||m.deleted)return(0,t.jsx)(s.default,{userShownToAdmins:m});let T=I?"(hidden)":(0,n.userGetDisplayName)(m),N=p?w.color:w.noColor;if(g)return(0,t.jsx)("span",{...k,className:(0,r.default)(N,C,S&&w.noKibitz),children:T});let L=(0,n.userGetProfileUrl)(m);return b&&(L+="?from=".concat(b)),(0,t.jsx)("span",{className:C,...k,children:(0,t.jsx)(a.AnalyticsContext,{pageElementContext:"userNameDisplay",userIdDisplayed:m._id,children:(0,t.jsx)(l.default,{user:m,placement:y,inlineBlock:!1,hideFollowButton:x,disabled:v,children:(0,t.jsx)(o.Link,{to:L,className:(0,r.default)(N,S&&w.noKibitz,f&&w.nowrap),...h?{rel:"nofollow"}:{},children:T})})})})}},841658,e=>{"use strict";e.s(["default",()=>l]);var t=e.i(843476),n=e.i(239832),o=e.i(504280),i=e.i(765744);e.i(813868);var r=e.i(122756),a=e.i(946271);let s=(0,r.gql)("\n  query UsersNameWrapper($documentId: String) {\n    user(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...UsersMinimumInfo\n      }\n    }\n  }\n"),l=e=>{var r;let{documentId:l,nofollow:d=!1,simple:c=!1,nowrap:u=!1,className:m,...p}=e,{loading:h,data:g}=(0,a.useQuery)(s,{variables:{documentId:l}}),f=null==g||null==(r=g.user)?void 0:r.result;return!f&&h?(0,t.jsx)(n.default,{}):f?(0,t.jsx)(o.default,{user:f,nofollow:d||f.spamRiskScore<.8,simple:c,nowrap:u,className:m,...p}):(0,t.jsx)(i.default,{})}},695310,e=>{"use strict";e.s(["default",()=>r]);var t=e.i(843476),n=e.i(504280),o=e.i(841658),i=e.i(765744);let r=e=>{let{user:r,documentId:a,nofollow:s=!1,simple:l=!1,tooltipPlacement:d="left",nowrap:c,className:u,...m}=e;return r?(0,t.jsx)(n.default,{user:r,nofollow:s,simple:l,tooltipPlacement:d,nowrap:c,className:u,...m}):a?(0,t.jsx)(o.default,{documentId:a,nofollow:s,simple:l,nowrap:c,className:u,...m}):(0,t.jsx)(i.default,{})}}]);

//# debugId=b3ed7afe-ef4d-0462-0878-75a8f3ff3b62
//# sourceMappingURL=5ac99eeec48f3929.js.map